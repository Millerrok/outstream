!function(root,undefined){function EventManager(){this.events={}}function Outstream(t){return t?(this.options(t||{}),this.events={},void this.init()):void console.error("Create without options")}function FlashClient(t){if(!getFlashVersion())throw new Error("Flash Player not installed!");this.id=Math.round((new Date).getTime()/1e4+1e7*Math.random()),this.unitSrc="//player.videe.tv/v2.1/resources/libs/videejs-player.swf",this.flashVersion="10.0.0",this.params={allowScriptAccess:"always",allowFullScreen:"true",wmode:"transparent"},this.proxyEvents=["loaded","error","complete","started","resumed","paused","mute","unmute"],this.options=t}function Wrapper(t,e,n,r,i){if(!t)throw new Error("Set aid");this.host=encodeURIComponent(window.location.host),this.cd=(new Date).getTime(),this.height=n||300,this.width=e||400,this.sid=r||0,this.aid=t,this.configUrl=i}function JsClient(t){this.options=t,this.eventManager=new EventManager,this.methodsState=!1,this.proxyEvents=["loaded","error","complete","started","paused","resize"]}var root=root||window;root.console||(root.console={log:function(t){},error:function(t){}}),root.JSON||(root.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var t=Object.prototype.toString,e=Array.isArray||function(e){return"[object Array]"===t.call(e)},n={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},r=function(t){return n[t]||"\\u"+(t.charCodeAt(0)+65536).toString(16).substr(1)},i=/[\\"\u0000-\u001F\u2028\u2029]/g;return function o(n){if(null==n)return"null";if("number"==typeof n)return isFinite(n)?n.toString():"null";if("boolean"==typeof n)return n.toString();if("object"==typeof n){if("function"==typeof n.toJSON)return o(n.toJSON());if(e(n)){for(var s="[",a=0;a<n.length;a++)s+=(a?", ":"")+o(n[a]);return s+"]"}if("[object Object]"===t.call(n)){var u=[];for(var l in n)n.hasOwnProperty(l)&&u.push(o(l)+": "+o(n[l]));return"{"+u.join(", ")+"}"}}return'"'+n.toString().replace(i,r)+'"'}}()}),Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,s,a=[];for(o in i)t.call(i,o)&&a.push(o);if(e)for(s=0;r>s;s++)t.call(i,n[s])&&a.push(n[s]);return a}}()),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(r.prototype=this.prototype),i.prototype=new r,i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var o=+e||0;if(Math.abs(o)===1/0&&(o=0),o>=i)return-1;for(n=Math.max(o>=0?o:i-Math.abs(o),0);i>n;){if(n in r&&r[n]===t)return n;n++}return-1}),EventManager.prototype.on=function(t,e){this.events[t+""]=e},EventManager.prototype.trigger=function(t,e){var n=this.events[t];n&&n.call(null,e)},window.onload=function(){function t(t){new Outstream({aid:t.aid,isSSP:t.isSSP,VPAIDMode:t.VPAIDMode,width:e(t.width)?400:t.width,height:e(t.height)?300:t.height,containerEl:t.containerEl})}function e(t){return t!=t}function n(t){var e=document.createElement("div"),n=t.parentNode;return"HEAD"==n.tagName.toUpperCase()?(document.body.appendChild(e),e):(n.insertBefore(e,t),e)}var r={number:function(t,e){var n=this.parse(t,e);return parseInt(n)},array:function(t,e){var n=this.parse(t,e);return n?n.split(" "):n},bool:function(t,e){var n=this.parse(t,e);try{n=JSON.parse(n)}catch(r){n=!1}return!!n},parse:function(t,e){var n;try{n=t.getAttribute("data-outstream-"+e)}catch(r){return undefined}return n}};!function(){var i=document.getElementsByTagName("script");for(var o in i){var s=r.number(i[o],"aid");s&&!e(s)&&t({width:r.number(i[o],"width"),height:r.number(i[o],"height"),isSSP:r.bool(i[o],"SSP"),VPAIDMode:r.array(i[o],"mode"),aid:s,containerEl:n(i[o])})}}()},Outstream.prototype.parseAndSaveConfig=function(t){function e(){try{var e=new DOMParser}catch(n){}if(e)return e.parseFromString(t,"text/xml");var r=new ActiveXObject("Microsoft.XMLDOM");if(r.loadXML(t),0!=r.parseError.errorCode){var i=r.parseError;return void console.error("You have error "+i.reason)}return r}t=e(),this.VpaidSource=t.getElementsByTagName("MediaFile")[0].childNodes[0].nodeValue,this.configUrl=t.getElementsByTagName("AdParameters")[0].childNodes[0].nodeValue},Outstream.prototype.loadConfig=function(){var t=this.getConfigUrl();return new Promise(function(e){try{var n=new XDomainRequest}catch(r){}if(XMLHttpRequest&&!n){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&200==i.status&&e(i.responseText)},i.open("GET",t,!0),i.send()}else n.onload=function(){e(n.responseText)},n.open("get",t,!0),setTimeout(function(){n.send()},0)})},Outstream.prototype.options=function(t){function e(){return Array.isArray(t.VPAIDMode)&&t.VPAIDMode.length?t.VPAIDMode:["flash","js"]}return this._options||!t?this._options:"object"!=typeof t?void console.error("Please set correct options"):(t.VPAIDMode=e(),this._options=t)},Outstream.prototype.init=function(){this.createVPAID(),this.loadConfig().then(function(t){this.parseAndSaveConfig(t),this.initVPAID()}.bind(this)).caught(function(t){console.error(t),this.initVPAID()}.bind(this))},Outstream.prototype.initVPAID=function(){try{this.VPAIDClient.init(this.VpaidSource,this.configUrl,this.getConfigUrl())}catch(t){var e=this.options().VPAIDMode,n=e.indexOf(this.mode);return void(-1!=n&&(e.splice(n,1),console.log("Switch VPAIdType , ERROR: "+t.message),this.init()))}this.initEventListener(this.VPAIDClient.eventManager)},Outstream.prototype.getConfigUrl=function(){var t=this.options().isSSP?"vast.vertamedia.com/":"vast.videe.tv/",e="//"+t+"?aid="+this.options().aid+"&content_page_url="+encodeURIComponent(window.location.href)+"&player_width="+this.options().width+"&player_height="+this.options().height+"&cd="+(new Date).getTime();return"js"==this.mode&&(e+="&vpaid_type=2"),e},Outstream.prototype.createVPAID=function(){var t=this.options().VPAIDMode;for(var e in t)if(this.useMode(t[e]))return void(this.mode=t[e])},Outstream.prototype.useMode=function(t){var e={flash:function(t){return new FlashClient(t)},js:function(t){return new JsClient(t)}};t=t in e?t:"flash";try{this.VPAIDClient=new e[t](this.options())}catch(n){return console.error(t+" init ERROR: "+n),!1}return!!this.VPAIDClient},Outstream.prototype.initEventListener=function(t){function e(e){t.on(e,function(t){n.trigger(e,t)})}var n=this,r=this.VPAIDClient.proxyEvents;for(var i in r)e(r[i])},Outstream.prototype.on=function(t,e){return this.events[t+""]=e,this},Outstream.prototype.off=function(t){return delete this.events[t+""],this},Outstream.prototype.trigger=function(t,e){var n=this.events[t];n&&n.call(this,e)},Outstream.prototype.destroy=function(){this.options.containerEl.innerHTML=""},Outstream.prototype.callMethod=function(t){return t="flash"==this.mode?"videe_"+t:t,this.VPAIDClient.methodsState?this.VPAIDClient.VPAID[t]():void this.on("started",function(){this.VPAIDClient.VPAID[t]()}.bind(this))},Outstream.prototype.startAd=function(){return this.callMethod("startAd"),this},Outstream.prototype.stopAd=function(){return this.callMethod("stopAd"),this},Outstream.prototype.skipAd=function(){return this.callMethod("skipAd"),this},Outstream.prototype.mute=function(){function t(){var t="flash"==this.mode?"videe_getAdVolume":"getAdVolume";this.savedVolume=this.VPAIDClient.VPAID[t](),t="flash"==this.mode?"videe_setAdVolume":"setAdVolume",this.VPAIDClient.VPAID[t](0)}return this.VPAIDClient.methodsState?void t.call(this):(this.on("started",function(){t.call(this)}.bind(this)),this)},Outstream.prototype.unmute=function(){var t="flash"==this.mode?"videe_setAdVolume":"setAdVolume";return this.VPAIDClient.VPAID[t](this.savedVolume||1),this},Outstream.prototype.setAdVolume=function(t){return"number"==typeof t&&t==t?(this.callMethod("setAdVolume"),this):void 0},Outstream.prototype.getAdVolume=function(){return this.callMethod("getAdVolume")},Outstream.prototype.pauseAd=function(){return this.callMethod("pauseAd"),this},Outstream.prototype.resumeAd=function(){return this.callMethod("resumeAd"),this},Outstream.prototype.resizeAd=function(){var t=Array.prototype.slice.call(arguments),e="flash"==this.mode?"videe_setAdVolume":"setAdVolume";return this.VPAIDClient.methodsState?this.VPAIDClient.VPAID[e].apply(null,t):(this.on("started",function(){this.VPAIDClient.VPAID[e].apply(null,t)}.bind(this)),this)};var root=root||window;root.Outstream=Outstream,!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){var t,e,n;return function r(t,e,n){function i(s,a){if(!e[s]){if(!t[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=e[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,r,t,e,n)}return e[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,n){"use strict";function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var a;try{throw new Error}catch(u){a=u}var l=t("./schedule"),c=t("./queue"),f=t("./util");r.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(r.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},r.prototype.invoke=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=s),r.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},e.exports=r,e.exports.firstLineError=a},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var l=n(o),c=new t(e);c._propagateFrom(this,1);var f=this._target();if(c._setBoundTo(l),l instanceof t){var h={promiseRejectionQueued:!1,promise:c,target:f,bindingPromise:l};f._then(e,s,undefined,c,h),l._then(a,u,undefined,c,h),c._setOnCancel(l)}else c._resolveCallback(f);return c},t.prototype._setBoundTo=function(t){t!==undefined?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+a.classString(t)+" has no method '"+a.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util"),u=a.canEvaluate;a.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,undefined,undefined,e,undefined)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(u){var r=s(t);e=null!==r?r:i}else e=i;return this._then(e,undefined,undefined,t,undefined)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),s=o.tryCatch,a=o.errorObj,u=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t.isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n.isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===undefined||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,undefined))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=undefined},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(t!==undefined)if("function"==typeof t){if(!e){var r=s(t).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,a){return function(u){var l=a._boundValue();t:for(var c=0;c<t.length;++c){var f=t[c];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return o(n).call(l,u)}else if("function"==typeof f){var h=o(f).call(l,u);if(h===s)return h;if(h)return o(n).call(l,u)}else if(r.isObject(u)){for(var p=i(f),d=0;d<p.length;++d){var _=p[d];if(f[_]!=u[_])continue t}return o(n).call(l,u)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,s=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){return i?new e:void 0}function r(){var t=o.length-1;return t>=0?o[t]:undefined}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){this._trace!==undefined&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(this._trace!==undefined){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,u=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=u,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e){return{promise:e}}function i(){return!1}function o(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+M.toString(t));r._attachCancellationCallback(t)})}catch(i){return i}}function s(t){if(!this.isCancellable())return this;var e=this._onCancel();e!==undefined?M.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function a(){return this._onCancelField}function u(t){this._onCancelField=t}function l(){this._cancellationParent=undefined,this._onCancelField=undefined}function c(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;n===undefined&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function f(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(){var t=this._boundTo;return t!==undefined&&t instanceof e?t.isFulfilled()?t.value():undefined:t}function p(){this._trace=new O(this._peekContext())}function d(t,e){if(N(t)){var n=this._trace;if(n!==undefined&&e&&(n=n._parent),n!==undefined)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=E(t);M.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),M.notEnumerableProp(t,"__stackCleaned__",!0)}}}function _(t,e,n,r,i){if(t===undefined&&null!==e&&X){if(i!==undefined&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="a promise was created in a "+n+"handler but was not returned from it";r._warn(o,!0,e)}}function y(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),v(n)}function v(t,n,r){if(rt.warnings){var i,o=new L(t);if(n)r._attachExtraTrace(o);else if(rt.longStackTraces&&(i=e._peekContext()))i.attachExtraTrace(o);else{var s=E(o);o.stack=s.message+"\n"+s.stack.join("\n")}Y("warning",o)||j(o,"",!0)}}function m(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function g(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function b(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var u=r[a];if(e[i]!==u)break;e.pop(),i--}e=r}}function w(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||H.test(r),o=i&&tt(r);i&&!o&&($&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function C(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||H.test(r))break}return n>0&&(e=e.slice(n)),e}function E(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?C(t):["    (No stack trace)"],{message:n,stack:w(e)}}function j(t,e,n){if("undefined"!=typeof console){var r;if(M.isObject(t)){var i=t.stack;r=e+B(i,t)}else r=e+String(t);"function"==typeof V?V(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function A(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){D.throwLater(o)}"unhandledRejection"===t?Y(t,n,r)||i||j(n,"Unhandled rejection "):Y(t,r)}function F(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():M.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+k(e)+">, no stack trace)"}function k(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function P(){return"function"==typeof nt}function S(t){var e=t.match(et);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}function T(t,e){if(P()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),s=-1,a=-1,u=0;u<i.length;++u){var l=S(i[u]);if(l){n=l.fileName,s=l.line;break}}for(var u=0;u<o.length;++u){var l=S(o[u]);if(l){r=l.fileName,a=l.line;break}}0>s||0>a||!n||!r||n!==r||s>=a||(tt=function(t){if(U.test(t))return!0;var e=S(t);return!!(e&&e.fileName===n&&s<=e.line&&e.line<=a)})}}function O(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(t===undefined?0:t._length);nt(this,O),e>32&&this.uncycle()}var x,R,V,I=e._getDomain,D=e._async,L=t("./errors").Warning,M=t("./util"),N=M.canAttachTrace,U=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,H=null,B=null,$=!1,W=!(0==M.env("BLUEBIRD_DEBUG")),q=!(0==M.env("BLUEBIRD_WARNINGS")||!W&&!M.env("BLUEBIRD_WARNINGS")),Q=!(0==M.env("BLUEBIRD_LONG_STACK_TRACES")||!W&&!M.env("BLUEBIRD_LONG_STACK_TRACES")),X=0!=M.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(q||!!M.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),D.invokeLater(this._notifyUnhandledRejection,this,undefined))},e.prototype._notifyUnhandledRejectionIsHandled=function(){A("rejectionHandled",x,undefined,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),A("unhandledRejection",R,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,n){return v(t,e,n||this)},e.onPossiblyUnhandledRejection=function(t){var e=I();R="function"==typeof t?null===e?t:e.bind(t):undefined},e.onUnhandledRejectionHandled=function(t){var e=I();x="function"==typeof t?null===e?t:e.bind(t):undefined};var J=function(){};e.longStackTraces=function(){if(D.haveItemsQueued()&&!rt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!rt.longStackTraces&&P()){var t=e.prototype._captureStackTrace,r=e.prototype._attachExtraTrace;rt.longStackTraces=!0,J=function(){if(D.haveItemsQueued()&&!rt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=r,n.deactivateLongStackTraces(),D.enableTrampoline(),rt.longStackTraces=!1},e.prototype._captureStackTrace=p,e.prototype._attachExtraTrace=d,n.activateLongStackTraces(),D.disableTrampolineIfNecessary()}},e.hasLongStackTraces=function(){return rt.longStackTraces&&P()};var z=function(){try{var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),M.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!M.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),G=function(){return M.isNode?function(){return process.emit.apply(process,arguments)}:M.global?function(t){var e="on"+t.toLowerCase(),n=M.global[e];return n?(n.apply(M.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),K={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:r},Y=function(t){var e=!1;try{e=G.apply(null,arguments)}catch(n){D.throwLater(n),e=!0}var r=!1;try{r=z(t,K[t].apply(null,arguments))}catch(n){D.throwLater(n),r=!0}return r||e};e.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&J()),"warnings"in t){var n=t.warnings;rt.warnings=!!n,X=rt.warnings,M.isObject(n)&&"wForgottenReturn"in n&&(X=!!n.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!rt.cancellation){if(D.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=l,e.prototype._propagateFrom=c,e.prototype._onCancel=a,e.prototype._setOnCancel=u,e.prototype._attachCancellationCallback=s,e.prototype._execute=o,Z=c,rt.cancellation=!0}"monitoring"in t&&(t.monitoring&&!rt.monitoring?(rt.monitoring=!0,e.prototype._fireEvent=Y):!t.monitoring&&rt.monitoring&&(rt.monitoring=!1,e.prototype._fireEvent=i))},e.prototype._fireEvent=i,e.prototype._execute=function(t,e,n){try{t(e,n)}catch(r){return r}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var Z=f,tt=function(){return!1},et=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;M.inherits(O,Error),n.CapturedTrace=O,O.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],n={},r=0,i=this;i!==undefined;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;n[o]===undefined&&(n[o]=r)}for(var r=0;t>r;++r){var s=e[r].stack,a=n[s];if(a!==undefined&&a!==r){a>0&&(e[a-1]._parent=undefined,e[a-1]._length=1),e[r]._parent=undefined,e[r]._length=1;var u=r>0?e[r-1]:this;t-1>a?(u._parent=e[a+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=undefined,u._length=1);for(var l=u._length+1,c=r-2;c>=0;--c)e[c]._length=l,l++;return}}}},O.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=E(t),n=e.message,r=[e.stack],i=this;i!==undefined;)r.push(w(i.stack.split("\n"))),i=i._parent;b(r),g(r),M.notEnumerableProp(t,"stack",m(n,r)),M.notEnumerableProp(t,"__stackCleaned__",!0)}};var nt=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:e.name!==undefined&&e.message!==undefined?e.toString():F(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,H=t,B=e;var n=Error.captureStackTrace;return tt=function(t){return U.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return H=/@/,B=e,$=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(B=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||e.name===undefined||e.message===undefined?F(e):e.toString()},null):(H=t,B=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(V=function(t){console.warn(t)},M.isNode&&process.stderr.isTTY?V=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:M.isNode||"string"!=typeof(new Error).stack||(V=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var rt={warnings:q,longStackTraces:!1,cancellation:!1,monitoring:!1};return Q&&e.longStackTraces(),{longStackTraces:function(){return rt.longStackTraces},warnings:function(){return rt.warnings},cancellation:function(){return rt.cancellation},monitoring:function(){return rt.monitoring},propagateFromFunction:function(){return Z},boundValueFunction:function(){return h},checkForgottenReturns:_,setBounds:T,warn:v,deprecated:y,CapturedTrace:O,fireDomEvent:z,fireGlobalEvent:G}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,undefined,undefined,{value:n},undefined)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,undefined,undefined,{reason:t},undefined)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(undefined,n,undefined,{reason:t},undefined);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(undefined,e,undefined,{value:n},undefined);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return this.mapSeries(t)._then(n,undefined,undefined,this,undefined)},t.prototype.mapSeries=function(t){
return i(this,t,e,e)},t.each=function(t,e){return r(t,e)._then(n,undefined,undefined,t,undefined)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(f(this,"message","string"==typeof r?r:e),f(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return c(n,Error),n}function i(t){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5"),u=a.freeze,l=t("./util"),c=l.inherits,f=l.notEnumerableProp,h=r("Warning","warning"),p=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),_=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(y){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<v.length;++m)"function"==typeof Array.prototype[v[m]]&&(_.prototype[v[m]]=Array.prototype[v[m]]);a.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var g=0;_.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return g--,e},c(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=u({CancellationError:p,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:_}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return this===undefined}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},u=function(t,e){return{value:t[e]}},l=function(t,e,n){return t[e]=n.value,t},c=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},h=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:h,keys:a,names:a,defineProperty:l,getDescriptor:u,freeze:c,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise?(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0):!1}function s(){return u.call(this,this.promise._target()._settledValue())}function a(t){return o(this,t)?void 0:(f.e=t,f)}function u(t){var r=this.promise,u=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?u.call(r._boundValue()):u.call(r._boundValue(),t);if(l!==undefined){r._setReturnedNonUndefined();var h=n(l,r);if(h instanceof e){if(null!=this.cancelPromise){if(h.isCancelled()){var p=new c("late cancellation observer");return r._attachExtraTrace(p),f.e=p,f}h.isPending()&&h._attachCancellationCallback(new i(this))}return h._then(s,a,undefined,this,undefined)}}}return r.isRejected()?(o(this),f.e=t,f):(o(this),t)}var l=t("./util"),c=e.CancellationError,f=l.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,undefined,new r(this,e,t),undefined)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,u,u)},e.prototype.tap=function(t){return this._passThrough(t,1,u)},r}},{"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=p(n[o])(t);if(r._popContext(),s===h){r._pushContext();var a=e.reject(h.e);return r._popContext(),a}var u=i(s,r);if(u instanceof e)return u}return null}function u(t,n,i,o){if(s.cancellation()){var a=new e(r),u=this._finallyPromise=new e(r);this._promise=a.lastly(function(){return u}),a._captureStackTrace(),a._setOnCancel(this)}else{var l=this._promise=new e(r);l._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=undefined,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}var l=t("./errors"),c=l.TypeError,f=t("./util"),h=f.errorObj,p=f.tryCatch,d=[];f.inherits(u,o),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),t=p(this._generator["return"]).call(this._generator,undefined),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=p(this._generator["throw"]).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},u.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=p(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=p(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=undefined,this._promiseFulfilled(undefined)},u.prototype._continue=function(t){var n=this._promise;if(t===h)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&(o=a(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var s=o._bitField;0===(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&s)?this._promiseFulfilled(o._value()):0!==(16777216&s)?this._promiseRejected(o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=u,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(undefined,undefined,n,i),s=o.promise();return o._generator=e,o._promiseFulfilled(undefined),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new c("expecting a function but got "+f.classString(t));d.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new u(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util");o.canEvaluate,o.tryCatch,o.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return t!==undefined?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=l();this._callback=null===i?e:i.bind(e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:p,this._init$(undefined,-2)}function u(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+c.classString(n));var s=0;if(i!==undefined){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+c.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(i.concurrency)));s=i.concurrency}return s="number"==typeof s&&isFinite(s)&&s>=1?s:0,new a(t,n,s,o).promise()}var l=e._getDomain,c=t("./util"),f=c.tryCatch,h=c.errorObj,p=[];c.inherits(a,n),a.prototype._init=function(){},a.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),a=this._preservedValues,u=this._limit;if(0>n){if(n=-1*n-1,r[n]=t,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var l=this._promise,c=this._callback,p=l._boundValue();l._pushContext();var d=f(c).call(p,t,n,o),_=l._popContext();if(s.checkForgottenReturns(d,_,null!==a?"Promise.filter":"Promise.map",l),d===h)return this._reject(d.e),!0;var y=i(d,this._promise);if(y instanceof e){y=y._target();var v=y._bitField;if(0===(50397184&v))return u>=1&&this._inFlight++,r[n]=y,y._proxy(this,-1*(n+1)),!1;if(0===(33554432&v))return 0!==(16777216&v)?(this._reject(y._reason()),!0):(this._cancel(),!0);d=y._value()}r[n]=d}var m=++this._totalResolved;return m>=o?(null!==a?this._filter(r,a):this._resolve(r),!0):!1},a.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;n>o;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return u(this,t,e,null)},e.map=function(t,e,n,r){return u(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=a(t).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t){if("function"!=typeof t)return i("expecting a function but got "+s.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var u;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],c=arguments[2];u=s.isArray(l)?a(t).apply(c,l):a(t).call(c,l)}else u=a(t)();var f=r._popContext();return o.checkForgottenReturns(u,f,"Promise.try",r),r._resolveFromSyncValue(u),r},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&c.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new l(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=c.keys(t),i=0;i<n.length;++i){var o=n[i];f.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(a(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(r);t=null}}}var s=t("./util"),a=s.maybeWrapAsError,u=t("./errors"),l=u.OperationalError,c=t("./es5"),f=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=a(e).apply(n._boundValue(),[null].concat(t));i===u&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=t===undefined?a(e).call(r,null):a(e).call(r,null,t);i===u&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=a(e).call(n._boundValue(),t);i===u&&s.throwLater(i.e)}var o=t("./util"),s=e._async,a=o.tryCatch,u=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;e!==undefined&&Object(e).spread&&(o=n),this._then(o,i,undefined,this,t)}return this}}},{"./util":36}],22:[function(t,e,n){"use strict";e.exports=function(){function e(){}function n(t,e){if("function"!=typeof e)throw new v("expecting a function but got "+h.classString(e));if(t.constructor!==r)throw new v("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function r(t){this._bitField=0,this._fulfillmentHandler0=undefined,this._rejectionHandler0=undefined,this._promise0=undefined,this._receiver0=undefined,t!==g&&(n(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function i(t){this.promise._resolveCallback(t)}function o(t){this.promise._rejectCallback(t,!1)}function s(t){var e=new r(g);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var a,u=function(){return new v("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new r.PromiseInspection(this._target())},c=function(t){return r.reject(new v(t))},f={},h=t("./util");a=h.isNode?function(){var t=process.domain;return t===undefined&&(t=null),t}:function(){return null},h.notEnumerableProp(r,"_getDomain",a);var p=t("./es5"),d=t("./async"),_=new d;p.defineProperty(r,"_async",{value:_});var y=t("./errors"),v=r.TypeError=y.TypeError;r.RangeError=y.RangeError;var m=r.CancellationError=y.CancellationError;r.TimeoutError=y.TimeoutError,r.OperationalError=y.OperationalError,r.RejectionError=y.OperationalError,r.AggregateError=y.AggregateError;var g=function(){},b={},w={},C=t("./thenables")(r,g),E=t("./promise_array")(r,g,C,c,e),j=t("./context")(r),A=j.create,F=t("./debuggability")(r,j),k=(F.CapturedTrace,t("./finally")(r,C)),P=t("./catch_filter")(w),S=t("./nodeback"),T=h.errorObj,O=h.tryCatch;return r.prototype.toString=function(){return"[object Promise]"},r.prototype.caught=r.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;e-1>n;++n){var o=arguments[n];if(!h.isObject(o))return c("expecting an object but got "+h.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(undefined,P(r,t,this))}return this.then(undefined,t)},r.prototype.reflect=function(){return this._then(l,l,undefined,this,undefined)},r.prototype.then=function(t,e){if(F.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+h.classString(t);arguments.length>1&&(n+=", "+h.classString(e)),this._warn(n)}return this._then(t,e,undefined,undefined,undefined)},r.prototype.done=function(t,e){var n=this._then(t,e,undefined,undefined,undefined);n._setIsFinal()},r.prototype.spread=function(t){return"function"!=typeof t?c("expecting a function but got "+h.classString(t)):this.all()._then(t,undefined,undefined,b,undefined)},r.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:undefined,rejectionReason:undefined};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},r.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},r.prototype.error=function(t){return this.caught(h.originatesFromRejection,t)},r.is=function(t){return t instanceof r},r.fromNode=r.fromCallback=function(t){var e=new r(g);e._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,i=O(t)(S(e,n));return i===T&&e._rejectCallback(i.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},r.all=function(t){return new E(t).promise()},r.cast=function(t){var e=C(t);return e instanceof r||(e=new r(g),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},r.resolve=r.fulfilled=r.cast,r.reject=r.rejected=function(t){var e=new r(g);return e._captureStackTrace(),e._rejectCallback(t,!0),e},r.setScheduler=function(t){if("function"!=typeof t)throw new v("expecting a function but got "+h.classString(t));return _.setScheduler(t)},r.prototype._then=function(t,e,n,i,o){var s=o!==undefined,u=s?o:new r(g),l=this._target(),c=l._bitField;s||(u._propagateFrom(this,3),u._captureStackTrace(),i===undefined&&0!==(2097152&this._bitField)&&(i=0!==(50397184&c)?this._boundValue():l===this?undefined:this._boundTo),this._fireEvent("promiseChained",this,u));var f=a();if(0!==(50397184&c)){var h,p,d=l._settlePromiseCtx;0!==(33554432&c)?(p=l._rejectionHandler0,h=t):0!==(16777216&c)?(p=l._fulfillmentHandler0,h=e,l._unsetRejectionIsUnhandled()):(d=l._settlePromiseLateCancellationObserver,p=new m("late cancellation observer"),l._attachExtraTrace(p),h=e),_.invoke(d,l,{handler:null===f?h:"function"==typeof h&&f.bind(h),promise:u,receiver:i,value:p})}else l._addCallbacks(t,e,u,i,f);return u},r.prototype._length=function(){return 65535&this._bitField},r.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},r.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},r.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},r.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},r.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},r.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},r.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},r.prototype._isFinal=function(){return(4194304&this._bitField)>0},r.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},r.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},r.prototype._setAsyncGuaranteed=function(){_.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},r.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];return e===f?undefined:e===undefined&&this._isBound()?this._boundValue():e},r.prototype._promiseAt=function(t){return this[4*t-4+2]},r.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},r.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},r.prototype._boundValue=function(){},r.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);i===undefined&&(i=f),this._addCallbacks(e,n,r,i,null)},r.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);o===undefined&&(o=f),this._addCallbacks(n,r,i,o,null)},r.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:i.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:i.bind(e));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof t&&(this[s+0]=null===i?t:i.bind(t)),"function"==typeof e&&(this[s+1]=null===i?e:i.bind(e))}return this._setLength(o+1),o},r.prototype._proxy=function(t,e){this._addCallbacks(undefined,undefined,e,t,null)},r.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(u(),!1);var n=C(t,this);if(!(n instanceof r))return this._fulfill(t);e&&this._propagateFrom(n,2);var i=n._target();if(i===this)return void this._reject(u());var o=i._bitField;if(0===(50397184&o)){var s=this._length();s>0&&i._migrateCallback0(this);for(var a=1;s>a;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!==(33554432&o))this._fulfill(i._value());else if(0!==(16777216&o))this._reject(i._reason());else{var l=new m("late cancellation observer");i._attachExtraTrace(l),this._reject(l)}}},r.prototype._rejectCallback=function(t,e,n){var r=h.ensureErrorObject(t),i=r===t;if(!i&&!n&&F.warnings()){var o="a promise was rejected with a non-error: "+h.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,e?i:!1),this._reject(t)},r.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),r!==undefined&&e._rejectCallback(r,!0)},r.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===b?n&&"number"==typeof n.length?o=O(t).apply(this._boundValue(),n):(o=T,o.e=new v("cannot .spread() a non-array: "+h.classString(n))):o=O(t).call(e,n);var s=r._popContext();i=r._bitField,0===(65536&i)&&(o===w?r._reject(n):o===T?r._rejectCallback(o.e,!1):(F.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},r.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},r.prototype._followee=function(){return this._rejectionHandler0},r.prototype._setFollowee=function(t){this._rejectionHandler0=t},r.prototype._settlePromise=function(t,n,i,o){var s=t instanceof r,a=this._bitField,u=0!==(134217728&a);0!==(65536&a)?(s&&t._invokeInternalOnCancel(),i instanceof k&&i.isFinallyHandler()?(i.cancelPromise=t,O(n).call(i,o)===T&&t._reject(T.e)):n===l?t._fulfill(l.call(i)):i instanceof e?i._promiseCancelled(t):s||t instanceof E?t._cancel():i.cancel()):"function"==typeof n?s?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(n,i,o,t)):n.call(i,o,t):i instanceof e?i._isResolved()||(0!==(33554432&a)?i._promiseFulfilled(o,t):i._promiseRejected(o,t)):s&&(u&&t._setAsyncGuaranteed(),0!==(33554432&a)?t._fulfill(o):t._reject(o))},r.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,i=t.receiver,o=t.value;"function"==typeof e?n instanceof r?this._settlePromiseFromHandler(e,i,o,n):e.call(i,o,n):n instanceof r&&n._reject(o)},r.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},r.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=undefined,this._receiver0=undefined,this._settlePromise(r,t,i,e)},r.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=undefined},r.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=u();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():_.settlePromises(this))}},r.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?_.fatalError(t,h.isNode):void((65535&e)>0?_.settlePromises(this):this._ensurePossibleRejectionHandled())},r.prototype._fulfillPromises=function(t,e){for(var n=1;t>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},r.prototype._rejectPromises=function(t,e){for(var n=1;t>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},r.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},r.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},r.defer=r.pending=function(){F.deprecated("Promise.defer","new Promise");var t=new r(g);return{promise:t,resolve:i,reject:o}},h.notEnumerableProp(r,"_makeSelfResolutionError",u),t("./method")(r,g,C,c,F),t("./bind")(r,g,C,F),t("./cancel")(r,E,c,F),t("./direct_resolve")(r),t("./synchronous_inspection")(r),t("./join")(r,E,C,g,F),r.Promise=r,r.version="3.4.0",t("./map.js")(r,E,c,C,g,F),t("./call_get.js")(r),t("./using.js")(r,c,C,A,g,F),t("./timers.js")(r,g,F),t("./generators.js")(r,c,g,C,e,F),t("./nodeify.js")(r),t("./promisify.js")(r,g),t("./props.js")(r,E,C,c),t("./race.js")(r,g,C,c),t("./reduce.js")(r,E,c,C,g,F),t("./settle.js")(r,E,F),t("./some.js")(r,E,c),t("./filter.js")(r,g),t("./each.js")(r,g),t("./any.js")(r),h.toFastProperties(r),h.toFastProperties(r.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(undefined),s(!1),s(new r(g)),F.setBounds(d.firstLineError,h.lastLineError),r}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function s(t){switch(t){case-2:return[];case-3:return{}}}function a(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(undefined,-2)}var u=t("./util");u.isArray;return u.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function l(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var a=o._bitField;if(this._values=o,0===(50397184&a))return this._promise._setAsyncGuaranteed(),o._then(l,this._reject,undefined,this,n);if(0===(33554432&a))return 0!==(16777216&a)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=u.asArray(o),null===o){var c=i("expecting an array or an iterable object but got "+u.classString(o)).reason();return void this._promise._rejectCallback(c,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(s(n))):void this._iterate(o)},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;n>a;++a){var u=r(t[a],i);u instanceof e?(u=u._target(),s=u._bitField):s=null,o?null!==s&&u.suppressUnhandledRejections():null!==s?0===(50397184&s)?(u._proxy(this,a),this._values[a]=u):o=0!==(33554432&s)?this._promiseFulfilled(u._value(),a):0!==(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(u,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!C.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=p.getDataPropertyOrDefault(t,e+n,b);return r?i(r):!1}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function a(t,e,n,r){for(var a=p.inheritedDataKeys(t),u=[],l=0;l<a.length;++l){var c=a[l],f=t[c],h=r===E?!0:E(c,f,t);"function"!=typeof f||i(f)||o(t,c,e)||!r(c,f,t,h)||u.push(c,f)}return s(u,e,n),u}function u(t,r,i,o,s,a){function u(){var i=r;r===h&&(i=this);var o=new e(n);o._captureStackTrace();var s="string"==typeof c&&this!==l?this[c]:t,u=d(o,a);try{s.apply(i,_(arguments,u))}catch(f){o._rejectCallback(y(f),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var l=function(){return this}(),c=t;return"string"==typeof c&&(t=o),p.notEnumerableProp(u,"__isPromisified__",!0),u}function l(t,e,n,r,i){for(var o=new RegExp(j(e)+"$"),s=a(t,e,o,n),u=0,l=s.length;l>u;u+=2){var c=s[u],f=s[u+1],d=c+e;if(r===A)t[d]=A(c,h,c,f,e,i);else{var _=r(f,function(){return A(c,h,c,f,e,i)});p.notEnumerableProp(_,"__isPromisified__",!0),t[d]=_}}return p.toFastProperties(t),t}function c(t,e,n){return A(t,e,undefined,t,null,n)}var f,h={},p=t("./util"),d=t("./nodeback"),_=p.withAppended,y=p.maybeWrapAsError,v=p.canEvaluate,m=t("./errors").TypeError,g="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],C=new RegExp("^(?:"+w.join("|")+")$"),E=function(t){return p.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},j=function(t){return t.replace(/([$])/,"\\$")},A=v?f:u;e.promisify=function(t,e){if("function"!=typeof t)throw new m("expecting a function but got "+p.classString(t));if(i(t))return t;e=Object(e);var n=e.context===undefined?h:e.context,o=!!e.multiArgs,s=c(t,n,o);return p.copyDescriptors(t,s,r),s},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=g);var i=e.filter;"function"!=typeof i&&(i=E);var o=e.promisifier;if("function"!=typeof o&&(o=A),!p.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");
for(var s=p.inheritedDataKeys(t),a=0;a<s.length;++a){var u=t[s[a]];"constructor"!==s[a]&&p.isClass(u)&&(l(u.prototype,r,i,o,n),l(u,r,i,o,n))}return l(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(a!==undefined&&t instanceof a)e=f(t),n=!0;else{var r=c.keys(t),i=r.length;e=new Array(2*i);for(var o=0;i>o;++o){var s=r[o];e[o]=t[s],e[o+i]=s}}this.constructor$(e),this._isMap=n,this._init$(undefined,-3)}function s(t){var n,s=r(t);return l(s)?(n=s instanceof e?s._then(e.props,undefined,undefined,undefined,undefined):new o(s).promise(),s instanceof e&&n._propagateFrom(s,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,u=t("./util"),l=u.isObject,c=t("./es5");"function"==typeof Map&&(a=Map);var f=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),h=function(t){for(var e=new a,n=t.length/2|0,r=0;n>r;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};u.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=h(this._values);else{r={};for(var i=this.length(),o=0,s=this.length();s>o;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;i>o;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=undefined,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var u=r(t);if(u instanceof e)return a(u);if(t=s.asArray(t),null===t)return i("expecting an array or an iterable object but got "+s.classString(t));var l=new e(n);o!==undefined&&l._propagateFrom(o,3);for(var c=l._fulfill,f=l._reject,h=0,p=t.length;p>h;++h){var d=t[h];(d!==undefined||h in t)&&e.cast(d)._then(c,f,undefined,l,null)}return l}var s=t("./util"),a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,undefined)},e.prototype.race=function(){return o(this,undefined)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r,i){this.constructor$(t);var s=h();this._fn=null===s?n:s.bind(n),r!==undefined&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?[]:undefined,this._promise._captureStackTrace(),this._init$(undefined,-5)}function u(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function l(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+p.classString(e));var o=new a(t,e,n,i);return o.promise()}function c(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(f,undefined,undefined,this,undefined)):f.call(this,n)}function f(t){var n=this.array,r=n._promise,i=d(n._fn);r._pushContext();var o;o=n._eachValues!==undefined?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var a=r._popContext();return s.checkForgottenReturns(o,a,n._eachValues!==undefined?"Promise.each":"Promise.reduce",r),o}var h=e._getDomain,p=t("./util"),d=p.tryCatch;p.inherits(a,n),a.prototype._gotAccum=function(t){this._eachValues!==undefined&&t!==o&&this._eachValues.push(t)},a.prototype._eachComplete=function(t){return this._eachValues.push(t),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==undefined?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},a.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},a.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(this._initialValue!==undefined?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;i>r;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(c,undefined,undefined,o,undefined)}this._eachValues!==undefined&&(n=n._then(this._eachComplete,undefined,undefined,this,undefined)),n._then(u,u,undefined,n,this)},e.prototype.reduce=function(t,e){return l(this,t,e,null)},e.reduce=function(t,e,n,r){return l(t,e,n,r)}}},{"./util":36}],29:[function(t,e,n){"use strict";var r,i=t("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},s=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,u=process.nextTick;r=i.isRecentNode?function(t){a.call(global,t)}:function(t){u.call(process,t)}}else if("function"==typeof s){var l=s.resolve();r=function(t){l.then(t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:o:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();e.exports=r},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,s=t("./util");s.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util"),a=t("./errors").RangeError,u=t("./errors").AggregateError,l=s.isArray,c={};s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(undefined,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new u,e=this.length();e<this._values.length;++e)this._values[e]!==c&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){t!==undefined?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():undefined):(this._bitField=0,this._settledValueField=undefined)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=t.prototype._isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype.isCancelled=function(){return this._target()._isCancelled()},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(c(t)){if(t instanceof e)return t;var i=o(t);if(i===l){r&&r._pushContext();var u=e.reject(i.e);return r&&r._popContext(),u}if("function"==typeof i){if(s(t)){var u=new e(n);return t._then(u._fulfill,u._reject,undefined,u,null),u}return a(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return l.e=e,l}}function s(t){try{return f.call(t,"_promise0")}catch(e){return!1}}function a(t,r,i){function o(t){a&&(a._resolveCallback(t),a=null)}function s(t){a&&(a._rejectCallback(t,f,!0),a=null)}var a=new e(n),c=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var f=!0,h=u.tryCatch(r).call(t,o,s);return f=!1,a&&h===l&&(a._rejectCallback(h.e,!0,!0),a=null),c}var u=t("./util"),l=u.errorObj,c=u.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function s(t){throw clearTimeout(this.handle),t}var a=t("./util"),u=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,o){var s,a;return o!==undefined?(s=e.resolve(o)._then(l,null,null,t,undefined),r.cancellation()&&o instanceof e&&s._setOnCancel(o)):(s=new e(n),a=setTimeout(function(){s._fulfill()},+t),r.cancellation()&&s._setOnCancel(new i(a))),s._setAsyncGuaranteed(),s};e.prototype.delay=function(t){return c(t,this)};var f=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new u("operation timed out"):new u(e),a.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,a,u=new i(setTimeout(function(){n.isPending()&&f(n,e,a)},t));return r.cancellation()?(a=this.then(),n=a._then(o,s,undefined,u,undefined),n._setOnCancel(u)):n=this._then(o,s,undefined,u,undefined),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t){setTimeout(function(){throw t},0)}function u(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function l(t,n){function i(){if(s>=l)return c._fulfill();var o=u(t[s++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(f){return a(f)}if(o instanceof e)return o._then(i,a,null,null,null)}i()}var s=0,l=t.length,c=new e(o);return i(),c}function c(t,e,n){this._data=t,this._promise=e,this._context=n}function f(t,e,n){this.constructor$(t,e,n)}function h(t){return c.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function p(t){this.length=t,this.promise=null,this[t-1]=null}var d=t("./util"),_=t("./errors").TypeError,y=t("./util").inherits,v=d.errorObj,m=d.tryCatch,g={};c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():g},c.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;n!==undefined&&n._pushContext();var r=e!==g?this.doDispose(e,t):null;return n!==undefined&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},c.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},y(f,c),f.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},p.prototype._resultCancelled=function(){for(var t=this.length,n=0;t>n;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(2>t)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+d.classString(i));var o,a=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,a=!1):(o=arguments,t--);for(var u=new p(t),f=0;t>f;++f){var _=o[f];if(c.isDisposer(_)){var y=_;_=_.promise(),_._setDisposable(y)}else{var g=r(_);g instanceof e&&(_=g._then(h,null,null,{resources:u,index:f},undefined))}u[f]=_}for(var b=new Array(u.length),f=0;f<b.length;++f)b[f]=e.resolve(u[f]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return v.e=n.error(),v;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}C._pushContext(),i=m(i);var r=a?i.apply(undefined,t):i(t),o=C._popContext();return s.checkForgottenReturns(r,o,"Promise.using",C),r}),C=w.lastly(function(){var t=new e.PromiseInspection(w);return l(u,t)});return u.promise=C,C._setOnCancel(u),C},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=undefined},e.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this,i());throw new _}}},{"./errors":12,"./util":36}],36:[function(t,e,n){"use strict";function r(){try{var t=P;return P=null,t.apply(this,arguments)}catch(e){return k.e=e,k}}function i(t){return P=t,r}function o(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function s(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return o(t)?new Error(y(t)):t}function u(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function l(t,e,n){if(!A.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:undefined;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function c(t,e,n){if(o(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return A.defineProperty(t,e,r),t}function f(t){throw t}function h(t){try{if("function"==typeof t){var e=A.names(t.prototype),n=A.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=x.test(t+"")&&A.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function p(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function d(t){return R.test(t)}function _(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function y(t){try{return t+""}catch(e){return"[no string representation]"}}function v(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function m(t){try{c(t,"isOperational",!0)}catch(e){}}function g(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function b(t){return v(t)&&A.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function C(t,e,n){for(var r=A.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{A.defineProperty(e,o,A.getDescriptor(t,o))}catch(s){}}}function E(t,e){return L?process.env[t]:e}function j(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(e){}}var A=t("./es5"),F="undefined"==typeof navigator,k={e:{}},P,S="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this!==undefined?this:null,T=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},O=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(A.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(s){return r}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var l=Object.getOwnPropertyDescriptor(t,u);null!=l&&null==l.get&&null==l.set&&r.push(u)}}t=A.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;i.push(o)}return i}}(),x=/this\s*\.\s*\S+\s*=/,R=/^[a-z$_][a-z$_0-9]*$/i,V=function(){return"stack"in new Error?function(t){return b(t)?t:new Error(y(t))}:function(t){if(b(t))return t;try{throw new Error(y(t))}catch(e){return e}}}(),I=function(t){return A.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var D="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};I=function(t){return A.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?D(t):null}}var L="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),M={isClass:h,isIdentifier:d,inheritedDataKeys:O,getDataPropertyOrDefault:l,thrower:f,isArray:A.isArray,asArray:I,notEnumerableProp:c,isPrimitive:o,isObject:s,isError:v,canEvaluate:F,errorObj:k,tryCatch:i,inherits:T,withAppended:u,maybeWrapAsError:a,toFastProperties:p,filledRange:_,toString:y,canAttachTrace:b,ensureErrorObject:V,originatesFromRejection:g,markAsOriginatingFromRejection:m,classString:w,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:L,env:E,global:S,getNativePromise:j};M.isRecentNode=M.isNode&&function(){var t=process.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),M.isNode&&M.toFastProperties(process);try{throw new Error}catch(N){M.lastLineError=N}e.exports=M},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),FlashClient.prototype.init=function(t,e,n){if(t&&!this.checkUnitSource(t))throw new Error("unit not SWF");this.addWrapperEl(),this.initWrapper(n),this.embedSWF()},FlashClient.prototype.checkUnitSource=function(t){return-1!=t.indexOf(".swf")},FlashClient.prototype.embedSWF=function(){try{swfobject.embedSWF(this.unitSrc,this.sdkUnique,this.options.width,this.options.height,this.flashVersion,undefined,this.flashvars(),this.params,{})}catch(t){console.error(t)}},FlashClient.prototype.initEvents=function(){this.eventManager.on("ready",function(){this.VPAID=document.getElementById(this.sdkUnique),this.methodsState=!0}.bind(this))},FlashClient.prototype.initWrapper=function(t){try{this.eventManager=new Wrapper(this.options.aid,this.options.width,this.options.height,this.options.sid,t).wrap(this.id)}catch(e){console.error(e)}this.initEvents()},FlashClient.prototype.addWrapperEl=function(){var t=document.createElement("div");this.sdkUnique="SdkIntegration"+this.id,t.className="flash-blocker",t.innerHTML='<div id="'+this.sdkUnique+'"></div>',this.options.containerEl.appendChild(t)},FlashClient.prototype.flashvars=function(){return{onReady:"window.VpaidflashWrappers["+this.id+"].startFlashWrapper"}};var getFlashVersion=function(){var t,e,n="Shockwave",r="Flash",i=n+" "+r,o=n+r+"."+n+r,s="application/x-shockwave-flash",a=navigator,u=parseFloat,l=a.plugins,c=a.mimeTypes;if(l&&"object"==typeof l[i]){if(t=l[i].description,t&&(!c||!c[s]||c[s].enabledPlugin))return u(t.replace(/^.*\s+(\S+)\s+\S+$/,"$1"))}else if(window.ActiveXObject)try{if(e=new ActiveXObject(o),e&&(t=e.GetVariable("$version")))return u(t.replace(/^\S+\s+(\d+),(\d+).*$/i,"$1.$2"))}catch(f){}return-1};Wrapper.prototype.wrap=function(t){var e=this.getConfig(t),n=new EventManager,r=this.width,i=this.height;return window.VpaidflashWrappers||(window.VpaidflashWrappers={}),window.VpaidflashWrappers[t]={},window.VpaidflashWrappers[t]={adLoadedClosure:function(){n.trigger("loaded"),window["SdkIntegration"+t].startAd()},adErrorClosure:function(){n.trigger("error")},adCompleteClosure:function(){n.trigger("complete")},pausedClosure:function(){n.trigger("paused")},resumedClosure:function(){n.trigger("resumed")},muteClosure:function(){n.trigger("mute")},unmuteClosure:function(){n.trigger("unmute")},adStartedClosure:function(){n.trigger("started")},startFlashWrapper:function(){n.trigger("ready");var o=window["SdkIntegration"+t];o.width=r,o.height=i,o.loadAd(e)}},n},Wrapper.prototype.getConfig=function(t){var e="window.VpaidflashWrappers["+t+"]";return JSON.stringify({adCompleteClosure:e+".adCompleteClosure",adStartedClosure:e+".adStartedClosure",adLoadedClosure:e+".adLoadedClosure",adErrorClosure:e+".adErrorClosure",resumedClosure:e+".resumedClosure",pausedClosure:e+".pausedClosure",unmuteClosure:e+".unmuteClosure",muteClosure:e+".muteClosure",volume:1,width:this.width,height:this.height,vastUrl:this.getVastUrl()})},Wrapper.prototype.getVastUrl=function(){return this.configUrl||"//vast.videe.tv/vast-proxy/?aid="+this.aid+"&content_page_url="+this.host+"&player_height="+this.height+"&player_width="+this.width+"&sid="+this.sid+"&cb="+this.cd};var swfobject=function(){function t(){if(!q&&document.getElementsByTagName("body")[0]){try{var t,e=v("span");e.style.display="none",t=M.getElementsByTagName("body")[0].appendChild(e),t.parentNode.removeChild(t),t=null,e=null}catch(n){return}q=!0;for(var r=H.length,i=0;r>i;i++)H[i]()}}function e(t){q?t():H[H.length]=t}function n(t){if(typeof L.addEventListener!=T)L.addEventListener("load",t,!1);else if(typeof M.addEventListener!=T)M.addEventListener("load",t,!1);else if(typeof L.attachEvent!=T)g(L,"onload",t);else if("function"==typeof L.onload){var e=L.onload;L.onload=function(){e(),t()}}else L.onload=t}function r(){var t=M.getElementsByTagName("body")[0],e=v(O);e.setAttribute("style","visibility: hidden;"),e.setAttribute("type",V);var n=t.appendChild(e);if(n){var r=0;!function o(){if(typeof n.GetVariable!=T)try{var s=n.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),z.pv=[m(s[0]),m(s[1]),m(s[2])])}catch(a){z.pv=[8,0,0]}else if(10>r)return r++,void setTimeout(o,10);t.removeChild(e),n=null,i()}()}else i()}function i(){var t=B.length;if(t>0)for(var e=0;t>e;e++){var n=B[e].id,r=B[e].callbackFn,i={success:!1,id:n};if(z.pv[0]>0){var l=y(n);if(l)if(!b(B[e].swfVersion)||z.wk&&z.wk<312)if(B[e].expressInstall&&s()){var c={};c.data=B[e].expressInstall,c.width=l.getAttribute("width")||"0",c.height=l.getAttribute("height")||"0",l.getAttribute("class")&&(c.styleclass=l.getAttribute("class")),l.getAttribute("align")&&(c.align=l.getAttribute("align"));for(var f={},h=l.getElementsByTagName("param"),p=h.length,d=0;p>d;d++)"movie"!=h[d].getAttribute("name").toLowerCase()&&(f[h[d].getAttribute("name")]=h[d].getAttribute("value"));a(c,f,n,r)}else u(l),r&&r(i);else C(n,!0),r&&(i.success=!0,i.ref=o(n),i.id=n,r(i))}else if(C(n,!0),r){var _=o(n);_&&typeof _.SetVariable!=T&&(i.success=!0,i.ref=_,i.id=_.id),r(i)}}}function o(t){var e=null,n=y(t);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(e=typeof n.SetVariable!==T?n:n.getElementsByTagName(O)[0]||n),e}function s(){return!Q&&b("6.0.65")&&(z.win||z.mac)&&!(z.wk&&z.wk<312)}function a(t,e,n,r){var i=y(n);if(n=_(n),Q=!0,F=r||null,k={success:!1,id:n},i){"OBJECT"==i.nodeName.toUpperCase()?(j=l(i),A=null):(j=i,A=n),t.id=I,(typeof t.width==T||!/%$/.test(t.width)&&m(t.width)<310)&&(t.width="310"),(typeof t.height==T||!/%$/.test(t.height)&&m(t.height)<137)&&(t.height="137");var o=z.ie?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURIComponent(L.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(M.title.slice(0,47)+" - Flash Player Installation");if(typeof e.flashvars!=T?e.flashvars+="&"+s:e.flashvars=s,z.ie&&4!=i.readyState){var a=v("div");n+="SWFObjectNew",a.setAttribute("id",n),i.parentNode.insertBefore(a,i),i.style.display="none",p(i)}f(t,e,n)}}function u(t){if(z.ie&&4!=t.readyState){t.style.display="none";var e=v("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(l(t),e),p(t)}else t.parentNode.replaceChild(l(t),t)}function l(t){var e=v("div");if(z.win&&z.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(O)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,o=0;i>o;o++)1==r[o].nodeType&&"PARAM"==r[o].nodeName||8==r[o].nodeType||e.appendChild(r[o].cloneNode(!0))}}return e}function c(t,e){var n=v("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+t+"'>"+e+"</object>",n.firstChild}function f(t,e,n){var r,i=y(n);if(n=_(n),z.wk&&z.wk<312)return r;if(i){var o,s,a,u=v(z.ie?"div":O);typeof t.id==T&&(t.id=n);for(a in e)e.hasOwnProperty(a)&&"movie"!==a.toLowerCase()&&h(u,a,e[a]);z.ie&&(u=c(t.data,u.innerHTML));for(o in t)t.hasOwnProperty(o)&&(s=o.toLowerCase(),"styleclass"===s?u.setAttribute("class",t[o]):"classid"!==s&&"data"!==s&&u.setAttribute(o,t[o]));z.ie?$[$.length]=t.id:(u.setAttribute("type",V),u.setAttribute("data",t.data)),i.parentNode.replaceChild(u,i),r=u}return r}function h(t,e,n){var r=v("param");r.setAttribute("name",e),r.setAttribute("value",n),t.appendChild(r)}function p(t){var e=y(t);e&&"OBJECT"==e.nodeName.toUpperCase()&&(z.ie?(e.style.display="none",function n(){if(4==e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode.removeChild(e)}else setTimeout(n,10)}()):e.parentNode.removeChild(e))}function d(t){return t&&t.nodeType&&1===t.nodeType}function _(t){return d(t)?t.id:t}function y(t){if(d(t))return t;var e=null;try{e=M.getElementById(t)}catch(n){}return e}function v(t){return M.createElement(t)}function m(t){return parseInt(t,10)}function g(t,e,n){t.attachEvent(e,n),W[W.length]=[t,e,n]}function b(t){t+="";var e=z.pv,n=t.split(".");return n[0]=m(n[0]),n[1]=m(n[1])||0,n[2]=m(n[2])||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]}function w(t,e,n,r){var i=M.getElementsByTagName("head")[0];if(i){var o="string"==typeof n?n:"screen";if(r&&(P=null,S=null),!P||S!=o){var s=v("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),P=i.appendChild(s),z.ie&&typeof M.styleSheets!=T&&M.styleSheets.length>0&&(P=M.styleSheets[M.styleSheets.length-1]),S=o}P&&(typeof P.addRule!=T?P.addRule(t,e):typeof M.createTextNode!=T&&P.appendChild(M.createTextNode(t+" {"+e+"}")))}}function C(t,e){if(X){var n=e?"visible":"hidden",r=y(t);q&&r?r.style.visibility=n:"string"==typeof t&&w("#"+t,"visibility:"+n)}}function E(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&typeof encodeURIComponent!=T?encodeURIComponent(t):t}var j,A,F,k,P,S,T="undefined",O="object",x="Shockwave Flash",R="ShockwaveFlash.ShockwaveFlash",V="application/x-shockwave-flash",I="SWFObjectExprInst",D="onreadystatechange",L=window,M=document,N=navigator,U=!1,H=[],B=[],$=[],W=[],q=!1,Q=!1,X=!0,J=!1,z=function(){var t=typeof M.getElementById!=T&&typeof M.getElementsByTagName!=T&&typeof M.createElement!=T,e=N.userAgent.toLowerCase(),n=N.platform.toLowerCase(),r=n?/win/.test(n):/win/.test(e),i=n?/mac/.test(n):/mac/.test(e),o=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s="Microsoft Internet Explorer"===N.appName,a=[0,0,0],u=null;if(typeof N.plugins!=T&&typeof N.plugins[x]==O)u=N.plugins[x].description,u&&typeof N.mimeTypes!=T&&N.mimeTypes[V]&&N.mimeTypes[V].enabledPlugin&&(U=!0,s=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=m(u.replace(/^(.*)\..*$/,"$1")),a[1]=m(u.replace(/^.*\.(.*)\s.*$/,"$1")),a[2]=/[a-zA-Z]/.test(u)?m(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof L.ActiveXObject!=T)try{var l=new ActiveXObject(R);l&&(u=l.GetVariable("$version"),u&&(s=!0,u=u.split(" ")[1].split(","),a=[m(u[0]),m(u[1]),m(u[2])]))}catch(c){}return{w3:t,pv:a,wk:o,ie:s,win:r,mac:i}}();(function(){z.w3&&((typeof M.readyState!=T&&("complete"===M.readyState||"interactive"===M.readyState)||typeof M.readyState==T&&(M.getElementsByTagName("body")[0]||M.body))&&t(),q||(typeof M.addEventListener!=T&&M.addEventListener("DOMContentLoaded",t,!1),z.ie&&(M.attachEvent(D,function e(){"complete"==M.readyState&&(M.detachEvent(D,e),t())}),L==top&&!function n(){if(!q){try{M.documentElement.doScroll("left")}catch(e){return void setTimeout(n,0)}t()}}()),z.wk&&!function r(){return q?void 0:/loaded|complete/.test(M.readyState)?void t():void setTimeout(r,0);
}()))})();H[0]=function(){U?r():i()};(function(){z.ie&&window.attachEvent("onunload",function(){for(var t=W.length,e=0;t>e;e++)W[e][0].detachEvent(W[e][1],W[e][2]);for(var n=$.length,r=0;n>r;r++)p($[r]);for(var i in z)z[i]=null;z=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})})();return{registerObject:function(t,e,n,r){if(z.w3&&t&&e){var i={};i.id=t,i.swfVersion=e,i.expressInstall=n,i.callbackFn=r,B[B.length]=i,C(t,!1)}else r&&r({success:!1,id:t})},getObjectById:function(t){return z.w3?o(t):void 0},embedSWF:function(t,n,r,i,o,u,l,c,h,p){var d=_(n),y={success:!1,id:d};z.w3&&!(z.wk&&z.wk<312)&&t&&n&&r&&i&&o?(C(d,!1),e(function(){r+="",i+="";var e={};if(h&&typeof h===O)for(var _ in h)e[_]=h[_];e.data=t,e.width=r,e.height=i;var v={};if(c&&typeof c===O)for(var m in c)v[m]=c[m];if(l&&typeof l===O)for(var g in l)if(l.hasOwnProperty(g)){var w=J?encodeURIComponent(g):g,E=J?encodeURIComponent(l[g]):l[g];typeof v.flashvars!=T?v.flashvars+="&"+w+"="+E:v.flashvars=w+"="+E}if(b(o)){var j=f(e,v,n);e.id==d&&C(d,!0),y.success=!0,y.ref=j,y.id=j.id}else{if(u&&s())return e.data=u,void a(e,v,n,p);C(d,!0)}p&&p(y)})):p&&p(y)},switchOffAutoHideShow:function(){X=!1},enableUriEncoding:function(t){J=typeof t===T?!0:t},ua:z,getFlashPlayerVersion:function(){return{major:z.pv[0],minor:z.pv[1],release:z.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(t,e,n){return z.w3?f(t,e,n):undefined},showExpressInstall:function(t,e,n,r){z.w3&&s()&&a(t,e,n,r)},removeSWF:function(t){z.w3&&p(t)},createCSS:function(t,e,n,r){z.w3&&w(t,e,n,r)},addDomLoadEvent:e,addLoadEvent:n,getQueryParamValue:function(t){var e=M.location.search||M.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return E(e);for(var n=e.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==t)return E(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Q){var t=y(I);t&&j&&(t.parentNode.replaceChild(j,t),A&&(C(A,!0),z.ie&&(j.style.display="block")),F&&F(k)),Q=!1}},version:"2.3"}}();JsClient.prototype.embed=function(){return[new Promise(function(t,e){this.iframe().addEventListener("load",function(){this.iFwindow=this.iframe().contentWindow,this.videoAdLayer().appendChild(this.videoTag()),this.iFwindow.document.body.appendChild(this.videoAdLayer()),this.iFwindow.document.body.appendChild(this.script()),this.iFwindow.document.body.style.margin=0,t()}.bind(this))}.bind(this)),new Promise(function(t,e){this.script().addEventListener("load",function(){t()},!1)}.bind(this))]},JsClient.prototype.init=function(t,e){if(!t||!e)throw new Error("Set correct options");if(!this.videoTag().canPlayType)throw new Error("HTML5 video not support");this.VpaidSource=t,this.configUrl=e,Promise.all(this.embed()).then(function(){this.VPAID=this.iFwindow.getVPAIDAd(),this.initVPAID()}.bind(this)).caught(function(t){console.error(t)}),this.options.containerEl.appendChild(this.iframe())},JsClient.prototype.initVPAID=function(){var t=this.eventManager;this.VPAID.subscribe(function(){this.VPAID.startAd(),t.trigger("loaded")}.bind(this),"AdLoaded"),this.VPAID.subscribe(function(){this.methodsState=!0,t.trigger("started")}.bind(this),"AdStarted"),this.VPAID.subscribe(function(){t.trigger("paused")},"AdPaused"),this.VPAID.subscribe(function(e){t.trigger("error",e)},"AdError"),this.VPAID.subscribe(function(){t.trigger("playing")},"AdPlaying"),this.VPAID.subscribe(function(){t.trigger("stopped")},"AdStopped"),this.VPAID.subscribe(function(){t.trigger("resize")},"AdSizeChange"),this.VPAID.subscribe(function(){t.trigger("complete"),this.destroy()}.bind(this),"AdVideoComplete"),this.VPAID.handshakeVersion(2),this.VPAID.initAd(this.options.width,this.options.height,"normal",0,this.configUrl,{videoSlotCanAutoPlay:!0,videoSlot:this.videoTag(),slot:this.videoAdLayer()})},JsClient.prototype.videoTag=function(){return this._videoTag?this._videoTag:(this._videoTag=document.createElement("video"),this._videoTag.setAttribute("width","100%"),this._videoTag.setAttribute("height","100%"),this._videoTag.style.position="absolute",this._videoTag)},JsClient.prototype.videoAdLayer=function(){return this._videoAdLayer?this._videoAdLayer:(this._videoAdLayer=document.createElement("div"),this._videoAdLayer.setAttribute("width",this.options.width),this._videoAdLayer.setAttribute("height",this.options.height),this._videoAdLayer)},JsClient.prototype.script=function(){return this._scriptTag?this._scriptTag:(this._scriptTag=document.createElement("script"),this._scriptTag.setAttribute("type","text/javascript"),this._scriptTag.setAttribute("src",this.VpaidSource),this._scriptTag.setAttribute("async",""),this._scriptTag)},JsClient.prototype.iframe=function(){return this._iFrame?this._iFrame:(this._iFrame=document.createElement("iFrame"),this._iFrame.setAttribute("allowfullscreen","true"),this._iFrame.src="about:blank",this._iFrame.width=this.options.width,this._iFrame.height=this.options.height,this._iFrame.style.border="none",this._iFrame)},JsClient.prototype.destroy=function(){this.VPAID.stopAd(),delete this.VPAID,this._iFrame.parentNode.removeChild(this._iFrame),delete this._videoAdLayer,delete this._scriptTag,delete this._videoTag,delete this._iFrame}}(window);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvbGlmaWxsLmpzIiwiZXZlbnQubWFuYWdlci5qcyIsIm1haW4uanMiLCJmbGFzaC1jbGllbnQvZmxhc2guY2xpZW50LmpzIiwiZmxhc2gtY2xpZW50L3dyYXBwZXIuanMiLCJqcy1jbGllbnQvanMuY2xpZW50LmpzIiwiYXV0b2luaXQuanMiLCJibHVlYmlyZC9ibHVlYmlyZC5qcyIsImZsYXNoZGV0ZWN0L2ZsYXNoZGV0ZWN0LmpzIiwic3dmb2JqZWN0L3N3Zm9iamVjdC5qcyIsIm91dHN0cmVhbS5taW4uanMiXSwibmFtZXMiOlsicm9vdCIsInVuZGVmaW5lZCIsIkV2ZW50TWFuYWdlciIsInRoaXMiLCJldmVudHMiLCJPdXRzdHJlYW0iLCJvcHRpb25zIiwiaW5pdCIsImNvbnNvbGUiLCJlcnJvciIsIkZsYXNoQ2xpZW50IiwiZ2V0Rmxhc2hWZXJzaW9uIiwiRXJyb3IiLCJpZCIsIk1hdGgiLCJyb3VuZCIsIkRhdGUiLCJnZXRUaW1lIiwicmFuZG9tIiwidW5pdFNyYyIsImZsYXNoVmVyc2lvbiIsInBhcmFtcyIsImFsbG93U2NyaXB0QWNjZXNzIiwiYWxsb3dGdWxsU2NyZWVuIiwid21vZGUiLCJwcm94eUV2ZW50cyIsIldyYXBwZXIiLCJhaWQiLCJ3aWR0aCIsImhlaWdodCIsInNpZCIsImNvbmZpZ1VybCIsImhvc3QiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImNkIiwiSnNDbGllbnQiLCJldmVudE1hbmFnZXIiLCJtZXRob2RzU3RhdGUiLCJsb2ciLCJhIiwiSlNPTiIsInBhcnNlIiwic0pTT04iLCJldmFsIiwic3RyaW5naWZ5IiwidG9TdHJpbmciLCJPYmplY3QiLCJwcm90b3R5cGUiLCJpc0FycmF5IiwiQXJyYXkiLCJjYWxsIiwiZXNjTWFwIiwiXCIiLCJcXCIsIlxiIiwiXGYiLCJcbiIsIlxyIiwiXHQiLCJlc2NGdW5jIiwibSIsImNoYXJDb2RlQXQiLCJzdWJzdHIiLCJlc2NSRSIsInZhbHVlIiwiaXNGaW5pdGUiLCJ0b0pTT04iLCJyZXMiLCJpIiwibGVuZ3RoIiwidG1wIiwiayIsImhhc093blByb3BlcnR5IiwicHVzaCIsImpvaW4iLCJyZXBsYWNlIiwia2V5cyIsImhhc0RvbnRFbnVtQnVnIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJkb250RW51bXMiLCJkb250RW51bXNMZW5ndGgiLCJvYmoiLCJUeXBlRXJyb3IiLCJwcm9wIiwicmVzdWx0IiwiYXJnIiwiRnVuY3Rpb24iLCJiaW5kIiwib1RoaXMiLCJhQXJncyIsInNsaWNlIiwiYXJndW1lbnRzIiwiZlRvQmluZCIsImZOT1AiLCJmQm91bmQiLCJhcHBseSIsImNvbmNhdCIsImluZGV4T2YiLCJzZWFyY2hFbGVtZW50IiwiZnJvbUluZGV4IiwibyIsImxlbiIsIm4iLCJhYnMiLCJJbmZpbml0eSIsIm1heCIsIm9uIiwiZXZlbnROYW1lIiwiY2FsbGJhY2siLCJ0cmlnZ2VyIiwiZGF0YSIsIm9ubG9hZCIsImluaXRPdXRzdHJlYW0iLCJpc1NTUCIsIlZQQUlETW9kZSIsImlzTmFOIiwiY29udGFpbmVyRWwiLCJ2YWwiLCJjcmVhdGVFbCIsImVsIiwiYWRDb250YWluZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJwYXJlbnRFbCIsInBhcmVudE5vZGUiLCJ0YWdOYW1lIiwidG9VcHBlckNhc2UiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJwYXJzZXIiLCJudW1iZXIiLCJrZXkiLCJwYXJzZUludCIsImFycmF5Iiwic3BsaXQiLCJib29sIiwiZXJyIiwiZ2V0QXR0cmlidXRlIiwiZSIsInNjcmlwdFRhZ3MiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIml0ZW0iLCJwYXJzZUFuZFNhdmVDb25maWciLCJ4bWwiLCJwcmVwYXJlWE1MIiwiX0RPTVBhcnNlciIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsInhtbERvYyIsIkFjdGl2ZVhPYmplY3QiLCJsb2FkWE1MIiwicGFyc2VFcnJvciIsImVycm9yQ29kZSIsIm15RXJyIiwicmVhc29uIiwiVnBhaWRTb3VyY2UiLCJjaGlsZE5vZGVzIiwibm9kZVZhbHVlIiwibG9hZENvbmZpZyIsImdldENvbmZpZ1VybCIsIlByb21pc2UiLCJyZXNvbHZlIiwieGRyIiwiWERvbWFpblJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsInhodHRwIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlVGV4dCIsIm9wZW4iLCJzZW5kIiwic2V0VGltZW91dCIsImdldFZQQUlETW9kZSIsIl9vcHRpb25zIiwiY3JlYXRlVlBBSUQiLCJ0aGVuIiwiaW5pdFZQQUlEIiwiY2F1Z2h0IiwiVlBBSURDbGllbnQiLCJtb2RlSW5kZXgiLCJtb2RlIiwic3BsaWNlIiwibWVzc2FnZSIsImluaXRFdmVudExpc3RlbmVyIiwiZG9tYWluIiwiaHJlZiIsImluZGV4IiwidXNlTW9kZSIsIm1vZGVUeXBlIiwiVlBBSURGYWN0b3J5IiwiZmxhc2giLCJqcyIsImluaXRFdmVudCIsInByb3h5RXZlbnQiLCJjb250ZXh0Iiwib2ZmIiwiZGVzdHJveSIsImlubmVySFRNTCIsImNhbGxNZXRob2QiLCJtZXRob2ROYW1lIiwiVlBBSUQiLCJzdGFydEFkIiwic3RvcEFkIiwic2tpcEFkIiwibXV0ZSIsImNsYiIsInNhdmVkVm9sdW1lIiwidW5tdXRlIiwic2V0QWRWb2x1bWUiLCJnZXRBZFZvbHVtZSIsInBhdXNlQWQiLCJyZXN1bWVBZCIsInJlc2l6ZUFkIiwiYXJncyIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJmIiwiZ2xvYmFsIiwic2VsZiIsInQiLCJyIiwicyIsInUiLCJfZGVyZXFfIiwiY29kZSIsImwiLDEsImFueSIsInByb21pc2VzIiwicmV0IiwiU29tZVByb21pc2VBcnJheSIsInByb21pc2UiLCJzZXRIb3dNYW55Iiwic2V0VW53cmFwIiwiX1NvbWVQcm9taXNlQXJyYXkiLDIsIkFzeW5jIiwiX2N1c3RvbVNjaGVkdWxlciIsIl9pc1RpY2tVc2VkIiwiX2xhdGVRdWV1ZSIsIlF1ZXVlIiwiX25vcm1hbFF1ZXVlIiwiX2hhdmVEcmFpbmVkUXVldWVzIiwiX3RyYW1wb2xpbmVFbmFibGVkIiwiZHJhaW5RdWV1ZXMiLCJfZHJhaW5RdWV1ZXMiLCJfc2NoZWR1bGUiLCJzY2hlZHVsZSIsIkFzeW5jSW52b2tlTGF0ZXIiLCJmbiIsInJlY2VpdmVyIiwiX3F1ZXVlVGljayIsIkFzeW5jSW52b2tlIiwiQXN5bmNTZXR0bGVQcm9taXNlcyIsIl9wdXNoT25lIiwiZmlyc3RMaW5lRXJyb3IiLCJ1dGlsIiwic2V0U2NoZWR1bGVyIiwicHJldiIsImhhc0N1c3RvbVNjaGVkdWxlciIsImVuYWJsZVRyYW1wb2xpbmUiLCJkaXNhYmxlVHJhbXBvbGluZUlmTmVjZXNzYXJ5IiwiaGFzRGV2VG9vbHMiLCJoYXZlSXRlbXNRdWV1ZWQiLCJmYXRhbEVycm9yIiwiaXNOb2RlIiwicHJvY2VzcyIsInN0ZGVyciIsIndyaXRlIiwic3RhY2siLCJleGl0IiwidGhyb3dMYXRlciIsImludm9rZUxhdGVyIiwiaW52b2tlIiwic2V0dGxlUHJvbWlzZXMiLCJfc2V0dGxlUHJvbWlzZXMiLCJpbnZva2VGaXJzdCIsInVuc2hpZnQiLCJfZHJhaW5RdWV1ZSIsInF1ZXVlIiwic2hpZnQiLCJfcmVzZXQiLCIuL3F1ZXVlIiwiLi9zY2hlZHVsZSIsIi4vdXRpbCIsMywiSU5URVJOQUwiLCJ0cnlDb252ZXJ0VG9Qcm9taXNlIiwiZGVidWciLCJjYWxsZWRCaW5kIiwicmVqZWN0VGhpcyIsIl8iLCJfcmVqZWN0IiwidGFyZ2V0UmVqZWN0ZWQiLCJwcm9taXNlUmVqZWN0aW9uUXVldWVkIiwiYmluZGluZ1Byb21pc2UiLCJfdGhlbiIsImJpbmRpbmdSZXNvbHZlZCIsInRoaXNBcmciLCJfYml0RmllbGQiLCJfcmVzb2x2ZUNhbGxiYWNrIiwidGFyZ2V0IiwiYmluZGluZ1JlamVjdGVkIiwiX3Byb3BhZ2F0ZUZyb20iLCJwcm9wYWdhdGVGcm9tRnVuY3Rpb24iLCJfYm91bmRWYWx1ZSIsImJvdW5kVmFsdWVGdW5jdGlvbiIsIm1heWJlUHJvbWlzZSIsIl90YXJnZXQiLCJfc2V0Qm91bmRUbyIsIl9zZXRPbkNhbmNlbCIsIl9ib3VuZFRvIiwiX2lzQm91bmQiLDQsIm5vQ29uZmxpY3QiLCJibHVlYmlyZCIsIm9sZCIsIi4vcHJvbWlzZSIsNSwiY3IiLCJjcmVhdGUiLCJjYWxsZXJDYWNoZSIsImdldHRlckNhY2hlIiwiZW5zdXJlTWV0aG9kIiwiY2xhc3NTdHJpbmciLCJjYWxsZXIiLCJwb3AiLCJuYW1lZEdldHRlciIsImluZGV4ZWRHZXR0ZXIiLCJnZXRHZXR0ZXIiLCJjYW5FdmFsdWF0ZSIsImlzSWRlbnRpZmllciIsImdldCIsInByb3BlcnR5TmFtZSIsImdldHRlciIsImlzSW5kZXgiLCJtYXliZUdldHRlciIsNiwiUHJvbWlzZUFycmF5IiwiYXBpUmVqZWN0aW9uIiwidHJ5Q2F0Y2giLCJlcnJvck9iaiIsImFzeW5jIiwiX2FzeW5jIiwiY2FuY2VsIiwiY2FuY2VsbGF0aW9uIiwiX3dhcm4iLCJjaGlsZCIsImlzQ2FuY2VsbGFibGUiLCJfY2FuY2VsQnkiLCJfaXNGb2xsb3dpbmciLCJfZm9sbG93ZWUiLCJfY2FuY2VsQnJhbmNoZWQiLCJwYXJlbnQiLCJfY2FuY2VsbGF0aW9uUGFyZW50IiwiX2JyYW5jaEhhc0NhbmNlbGxlZCIsIl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsIiwiX2Vub3VnaEJyYW5jaGVzSGF2ZUNhbmNlbGxlZCIsImNhbmNlbGxlciIsIl9pbnZva2VPbkNhbmNlbCIsIl9jYW5jZWwiLCJfc2V0Q2FuY2VsbGVkIiwiX2NhbmNlbFByb21pc2VzIiwiX2xlbmd0aCIsIl91bnNldE9uQ2FuY2VsIiwiX29uQ2FuY2VsRmllbGQiLCJpc1BlbmRpbmciLCJpc0NhbmNlbGxlZCIsIl9kb0ludm9rZU9uQ2FuY2VsIiwib25DYW5jZWxDYWxsYmFjayIsImludGVybmFsT25seSIsIl9hdHRhY2hFeHRyYVRyYWNlIiwiX3Jlc3VsdENhbmNlbGxlZCIsIl9vbkNhbmNlbCIsIl9pbnZva2VJbnRlcm5hbE9uQ2FuY2VsIiw3LCJORVhUX0ZJTFRFUiIsImNhdGNoRmlsdGVyIiwiaW5zdGFuY2VzIiwiY2IiLCJib3VuZFRvIiwicHJlZGljYXRlTG9vcCIsIm1hdGNoZXNQcmVkaWNhdGUiLCJpc09iamVjdCIsImdldEtleXMiLCJqIiwiLi9lczUiLDgsIkNvbnRleHQiLCJfdHJhY2UiLCJDYXB0dXJlZFRyYWNlIiwicGVla0NvbnRleHQiLCJjcmVhdGVDb250ZXh0IiwibG9uZ1N0YWNrVHJhY2VzIiwibGFzdEluZGV4IiwiY29udGV4dFN0YWNrIiwiX3Byb21pc2VDcmVhdGVkIiwiX3B1c2hDb250ZXh0IiwiX3BvcENvbnRleHQiLCJfcGVla0NvbnRleHQiLCJ0cmFjZSIsImRlYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMiLCJhY3RpdmF0ZUxvbmdTdGFja1RyYWNlcyIsIlByb21pc2VfcHVzaENvbnRleHQiLCJQcm9taXNlX3BvcENvbnRleHQiLCJQcm9taXNlX1BlZWtDb250ZXh0IiwiUHJvbWlzZV9wZWVrQ29udGV4dCIsIlByb21pc2VfcHJvbWlzZUNyZWF0ZWQiLCJjdHgiLDksImdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0IiwibmFtZSIsImRlZmF1bHRGaXJlRXZlbnQiLCJjYW5jZWxsYXRpb25FeGVjdXRlIiwiZXhlY3V0b3IiLCJyZWplY3QiLCJvbkNhbmNlbCIsIl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayIsImNhbmNlbGxhdGlvbkF0dGFjaENhbmNlbGxhdGlvbkNhbGxiYWNrIiwicHJldmlvdXNPbkNhbmNlbCIsImNhbmNlbGxhdGlvbk9uQ2FuY2VsIiwiY2FuY2VsbGF0aW9uU2V0T25DYW5jZWwiLCJjYW5jZWxsYXRpb25DbGVhckNhbmNlbGxhdGlvbkRhdGEiLCJjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tIiwiZmxhZ3MiLCJicmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsIiwiYmluZGluZ1Byb3BhZ2F0ZUZyb20iLCJpc0Z1bGZpbGxlZCIsImxvbmdTdGFja1RyYWNlc0NhcHR1cmVTdGFja1RyYWNlIiwibG9uZ1N0YWNrVHJhY2VzQXR0YWNoRXh0cmFUcmFjZSIsImlnbm9yZVNlbGYiLCJjYW5BdHRhY2hUcmFjZSIsIl9wYXJlbnQiLCJhdHRhY2hFeHRyYVRyYWNlIiwiX19zdGFja0NsZWFuZWRfXyIsInBhcnNlZCIsInBhcnNlU3RhY2tBbmRNZXNzYWdlIiwibm90RW51bWVyYWJsZVByb3AiLCJjaGVja0ZvcmdvdHRlblJldHVybnMiLCJyZXR1cm5WYWx1ZSIsInByb21pc2VDcmVhdGVkIiwid0ZvcmdvdHRlblJldHVybiIsIl9yZXR1cm5lZE5vblVuZGVmaW5lZCIsIm1zZyIsImRlcHJlY2F0ZWQiLCJyZXBsYWNlbWVudCIsIndhcm4iLCJzaG91bGRVc2VPd25UcmFjZSIsImNvbmZpZyIsIndhcm5pbmdzIiwid2FybmluZyIsIldhcm5pbmciLCJhY3RpdmVGaXJlRXZlbnQiLCJmb3JtYXRBbmRMb2dFcnJvciIsInJlY29uc3RydWN0U3RhY2siLCJzdGFja3MiLCJyZW1vdmVEdXBsaWNhdGVPckVtcHR5SnVtcHMiLCJyZW1vdmVDb21tb25Sb290cyIsImN1cnJlbnQiLCJjdXJyZW50TGFzdEluZGV4IiwiY3VycmVudExhc3RMaW5lIiwiY29tbW9uUm9vdE1lZXRQb2ludCIsImxpbmUiLCJjbGVhblN0YWNrIiwiaXNUcmFjZUxpbmUiLCJzdGFja0ZyYW1lUGF0dGVybiIsInRlc3QiLCJpc0ludGVybmFsRnJhbWUiLCJzaG91bGRJZ25vcmUiLCJpbmRlbnRTdGFja0ZyYW1lcyIsImNoYXJBdCIsInN0YWNrRnJhbWVzQXNBcnJheSIsInRpdGxlIiwiaXNTb2Z0IiwiZm9ybWF0U3RhY2siLCJTdHJpbmciLCJwcmludFdhcm5pbmciLCJmaXJlUmVqZWN0aW9uRXZlbnQiLCJsb2NhbEhhbmRsZXIiLCJsb2NhbEV2ZW50RmlyZWQiLCJmb3JtYXROb25FcnJvciIsInN0ciIsInJ1c2VsZXNzVG9TdHJpbmciLCJuZXdTdHIiLCJzbmlwIiwibWF4Q2hhcnMiLCJsb25nU3RhY2tUcmFjZXNJc1N1cHBvcnRlZCIsImNhcHR1cmVTdGFja1RyYWNlIiwicGFyc2VMaW5lSW5mbyIsIm1hdGNoZXMiLCJtYXRjaCIsInBhcnNlTGluZUluZm9SZWdleCIsImZpbGVOYW1lIiwic2V0Qm91bmRzIiwibGFzdExpbmVFcnJvciIsImZpcnN0RmlsZU5hbWUiLCJsYXN0RmlsZU5hbWUiLCJmaXJzdFN0YWNrTGluZXMiLCJsYXN0U3RhY2tMaW5lcyIsImZpcnN0SW5kZXgiLCJibHVlYmlyZEZyYW1lUGF0dGVybiIsImluZm8iLCJfcHJvbWlzZXNDcmVhdGVkIiwidW5jeWNsZSIsInVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQiLCJwb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiIsImdldERvbWFpbiIsIl9nZXREb21haW4iLCJkZWJ1Z2dpbmciLCJlbnYiLCJzdXBwcmVzc1VuaGFuZGxlZFJlamVjdGlvbnMiLCJfZW5zdXJlUG9zc2libGVSZWplY3Rpb25IYW5kbGVkIiwiX3NldFJlamVjdGlvbklzVW5oYW5kbGVkIiwiX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbiIsIl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb25Jc0hhbmRsZWQiLCJfc2V0UmV0dXJuZWROb25VbmRlZmluZWQiLCJfaXNSZWplY3Rpb25VbmhhbmRsZWQiLCJfc2V0dGxlZFZhbHVlIiwiX3NldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQiLCJfdW5zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkIiwiX2lzVW5oYW5kbGVkUmVqZWN0aW9uTm90aWZpZWQiLCJfdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCIsIm9uUG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24iLCJvblVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQiLCJkaXNhYmxlTG9uZ1N0YWNrVHJhY2VzIiwiUHJvbWlzZV9jYXB0dXJlU3RhY2tUcmFjZSIsIl9jYXB0dXJlU3RhY2tUcmFjZSIsIlByb21pc2VfYXR0YWNoRXh0cmFUcmFjZSIsImhhc0xvbmdTdGFja1RyYWNlcyIsImZpcmVEb21FdmVudCIsImV2ZW50IiwiY3JlYXRlRXZlbnQiLCJpbml0Q3VzdG9tRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiZG9tRXZlbnQiLCJ0b0xvd2VyQ2FzZSIsImZpcmVHbG9iYWxFdmVudCIsImVtaXQiLCJtZXRob2QiLCJldmVudFRvT2JqZWN0R2VuZXJhdG9yIiwicHJvbWlzZUZ1bGZpbGxlZCIsInByb21pc2VSZWplY3RlZCIsInByb21pc2VSZXNvbHZlZCIsInByb21pc2VDYW5jZWxsZWQiLCJwcm9taXNlQ2hhaW5lZCIsInVuaGFuZGxlZFJlamVjdGlvbiIsInJlamVjdGlvbkhhbmRsZWQiLCJnbG9iYWxFdmVudEZpcmVkIiwiZG9tRXZlbnRGaXJlZCIsIm9wdHMiLCJ3YXJuaW5nc09wdGlvbiIsIl9jbGVhckNhbmNlbGxhdGlvbkRhdGEiLCJfZXhlY3V0ZSIsIm1vbml0b3JpbmciLCJfZmlyZUV2ZW50IiwiaGFuZGxlciIsImluaGVyaXRzIiwibm9kZXMiLCJzdGFja1RvSW5kZXgiLCJub2RlIiwiY3VycmVudFN0YWNrIiwiY3ljbGVFZGdlTm9kZSIsImN1cnJlbnRDaGlsZExlbmd0aCIsInY4c3RhY2tGcmFtZVBhdHRlcm4iLCJ2OHN0YWNrRm9ybWF0dGVyIiwic3RhY2tUcmFjZUxpbWl0IiwiaWdub3JlVW50aWwiLCJoYXNTdGFja0FmdGVyVGhyb3ciLCJpc1RUWSIsImNvbG9yIiwiLi9lcnJvcnMiLDEwLCJyZXR1cm5lciIsInRocm93ZXIiLCJ0aGVuUmV0dXJuIiwidGhlblRocm93IiwiY2F0Y2hUaHJvdyIsIl9yZWFzb24iLCJjYXRjaFJldHVybiIsIl92YWx1ZSIsMTEsInByb21pc2VBbGxUaGlzIiwiUHJvbWlzZUFsbCIsIlByb21pc2VNYXBTZXJpZXMiLCJQcm9taXNlUmVkdWNlIiwicmVkdWNlIiwiYWxsIiwiZWFjaCIsIm1hcFNlcmllcyIsMTIsInN1YkVycm9yIiwibmFtZVByb3BlcnR5IiwiZGVmYXVsdE1lc3NhZ2UiLCJTdWJFcnJvciIsImNvbnN0cnVjdG9yIiwiT3BlcmF0aW9uYWxFcnJvciIsImNhdXNlIiwiX1R5cGVFcnJvciIsIl9SYW5nZUVycm9yIiwiZXM1IiwiT2JqZWN0ZnJlZXplIiwiZnJlZXplIiwiQ2FuY2VsbGF0aW9uRXJyb3IiLCJUaW1lb3V0RXJyb3IiLCJBZ2dyZWdhdGVFcnJvciIsIlJhbmdlRXJyb3IiLCJtZXRob2RzIiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImVudW1lcmFibGUiLCJsZXZlbCIsImluZGVudCIsImxpbmVzIiwiZXJyb3JUeXBlcyIsIlJlamVjdGlvbkVycm9yIiwxMywiaXNFUzUiLCJnZXREZXNjcmlwdG9yIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwibmFtZXMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZ2V0UHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzV3JpdGFibGUiLCJkZXNjcmlwdG9yIiwic2V0IiwiaGFzIiwicHJvdG8iLCJPYmplY3RLZXlzIiwiT2JqZWN0R2V0RGVzY3JpcHRvciIsIk9iamVjdERlZmluZVByb3BlcnR5IiwiZGVzYyIsIk9iamVjdEZyZWV6ZSIsIk9iamVjdEdldFByb3RvdHlwZU9mIiwiQXJyYXlJc0FycmF5IiwxNCwiUHJvbWlzZU1hcCIsIm1hcCIsImZpbHRlciIsMTUsIlBhc3NUaHJvdWdoSGFuZGxlckNvbnRleHQiLCJ0eXBlIiwiY2FsbGVkIiwiY2FuY2VsUHJvbWlzZSIsIkZpbmFsbHlIYW5kbGVyQ2FuY2VsUmVhY3Rpb24iLCJmaW5hbGx5SGFuZGxlciIsImNoZWNrQ2FuY2VsIiwic3VjY2VlZCIsImZhaWwiLCJyZWFzb25PclZhbHVlIiwiaXNGaW5hbGx5SGFuZGxlciIsImlzUmVqZWN0ZWQiLCJfcGFzc1Rocm91Z2giLCJzdWNjZXNzIiwibGFzdGx5IiwidGFwIiwxNiwiUHJveHlhYmxlIiwicHJvbWlzZUZyb21ZaWVsZEhhbmRsZXIiLCJ5aWVsZEhhbmRsZXJzIiwidHJhY2VQYXJlbnQiLCJQcm9taXNlU3Bhd24iLCJnZW5lcmF0b3JGdW5jdGlvbiIsInlpZWxkSGFuZGxlciIsImludGVybmFsIiwiX2ZpbmFsbHlQcm9taXNlIiwiX3Byb21pc2UiLCJfc3RhY2siLCJfZ2VuZXJhdG9yRnVuY3Rpb24iLCJfcmVjZWl2ZXIiLCJfZ2VuZXJhdG9yIiwiX3lpZWxkSGFuZGxlcnMiLCJfeWllbGRlZFByb21pc2UiLCJfY2FuY2VsbGF0aW9uUGhhc2UiLCJlcnJvcnMiLCJfaXNSZXNvbHZlZCIsIl9jbGVhbnVwIiwiX2Z1bGZpbGwiLCJfcHJvbWlzZUNhbmNlbGxlZCIsImltcGxlbWVudHNSZXR1cm4iLCJjb3JvdXRpbmUiLCJyZXR1cm5TZW50aW5lbCIsIl9jb250aW51ZSIsIl9wcm9taXNlRnVsZmlsbGVkIiwibmV4dCIsIl9wcm9taXNlUmVqZWN0ZWQiLCJfcnVuIiwiX3JlamVjdENhbGxiYWNrIiwiZG9uZSIsImJpdEZpZWxkIiwiX3Byb3h5IiwiUHJvbWlzZVNwYXduJCIsImdlbmVyYXRvciIsInNwYXduIiwiYWRkWWllbGRIYW5kbGVyIiwxNywibGFzdCIsInNwcmVhZCIsMTgsIk1hcHBpbmdQcm9taXNlQXJyYXkiLCJsaW1pdCIsIl9maWx0ZXIiLCJjb25zdHJ1Y3RvciQiLCJfY2FsbGJhY2siLCJfcHJlc2VydmVkVmFsdWVzIiwiX2xpbWl0IiwiX2luRmxpZ2h0IiwiX3F1ZXVlIiwiRU1QVFlfQVJSQVkiLCJfaW5pdCQiLCJjb25jdXJyZW5jeSIsIl9pbml0IiwidmFsdWVzIiwiX3ZhbHVlcyIsInByZXNlcnZlZFZhbHVlcyIsInRvdGFsUmVzb2x2ZWQiLCJfdG90YWxSZXNvbHZlZCIsIl9yZXNvbHZlIiwiYm9vbGVhbnMiLDE5LCJfcmVzb2x2ZUZyb21TeW5jVmFsdWUiLCJhdHRlbXB0IiwyMCwiaXNVbnR5cGVkRXJyb3IiLCJ3cmFwQXNPcGVyYXRpb25hbEVycm9yIiwickVycm9yS2V5IiwibWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uIiwibm9kZWJhY2tGb3JQcm9taXNlIiwibXVsdGlBcmdzIiwid3JhcHBlZCIsIm1heWJlV3JhcEFzRXJyb3IiLDIxLCJzcHJlYWRBZGFwdGVyIiwibm9kZWJhY2siLCJzdWNjZXNzQWRhcHRlciIsImVycm9yQWRhcHRlciIsIm5ld1JlYXNvbiIsImFzQ2FsbGJhY2siLCJub2RlaWZ5IiwiYWRhcHRlciIsMjIsImNoZWNrIiwiX2Z1bGZpbGxtZW50SGFuZGxlcjAiLCJfcmVqZWN0aW9uSGFuZGxlcjAiLCJfcHJvbWlzZTAiLCJfcmVjZWl2ZXIwIiwiX3Jlc29sdmVGcm9tRXhlY3V0b3IiLCJkZWZlclJlc29sdmUiLCJ2IiwiZGVmZXJSZWplY3QiLCJmaWxsVHlwZXMiLCJwIiwibWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IiLCJyZWZsZWN0SGFuZGxlciIsIlByb21pc2VJbnNwZWN0aW9uIiwiVU5ERUZJTkVEX0JJTkRJTkciLCJBUFBMWSIsImNhdGNoSW5zdGFuY2VzIiwicmVmbGVjdCIsImRpZEZ1bGZpbGwiLCJkaWRSZWplY3QiLCJfc2V0SXNGaW5hbCIsImZ1bGZpbGxtZW50VmFsdWUiLCJyZWplY3Rpb25SZWFzb24iLCJvcmlnaW5hdGVzRnJvbVJlamVjdGlvbiIsImlzIiwiZnJvbU5vZGUiLCJmcm9tQ2FsbGJhY2siLCJfaXNGYXRlU2VhbGVkIiwiX3NldEFzeW5jR3VhcmFudGVlZCIsImNhc3QiLCJfc2V0RnVsZmlsbGVkIiwiZnVsZmlsbGVkIiwicmVqZWN0ZWQiLCJpbnRlcm5hbERhdGEiLCJoYXZlSW50ZXJuYWxEYXRhIiwic2V0dGxlciIsIl9zZXR0bGVQcm9taXNlQ3R4IiwiX3NldHRsZVByb21pc2VMYXRlQ2FuY2VsbGF0aW9uT2JzZXJ2ZXIiLCJfYWRkQ2FsbGJhY2tzIiwiX3NldExlbmd0aCIsIl9zZXRSZWplY3RlZCIsIl9zZXRGb2xsb3dpbmciLCJfaXNGaW5hbCIsIl91bnNldENhbmNlbGxlZCIsIl9yZWNlaXZlckF0IiwiX3Byb21pc2VBdCIsIl9mdWxmaWxsbWVudEhhbmRsZXJBdCIsIl9yZWplY3Rpb25IYW5kbGVyQXQiLCJfbWlncmF0ZUNhbGxiYWNrMCIsImZvbGxvd2VyIiwiZnVsZmlsbCIsIl9taWdyYXRlQ2FsbGJhY2tBdCIsImJhc2UiLCJwcm94eWFibGUiLCJzaG91bGRCaW5kIiwiX3NldEZvbGxvd2VlIiwic3luY2hyb25vdXMiLCJpZ25vcmVOb25FcnJvcldhcm5pbmdzIiwiZW5zdXJlRXJyb3JPYmplY3QiLCJoYXNTdGFjayIsIl9zZXR0bGVQcm9taXNlRnJvbUhhbmRsZXIiLCJ4IiwiX3NldHRsZVByb21pc2UiLCJpc1Byb21pc2UiLCJhc3luY0d1YXJhbnRlZWQiLCJfc2V0dGxlUHJvbWlzZTAiLCJfY2xlYXJDYWxsYmFja0RhdGFBdEluZGV4IiwiX2Z1bGZpbGxQcm9taXNlcyIsIl9yZWplY3RQcm9taXNlcyIsImRlZmVyIiwicGVuZGluZyIsInZlcnNpb24iLCJ0b0Zhc3RQcm9wZXJ0aWVzIiwiYiIsImMiLCIuL2FueS5qcyIsIi4vYXN5bmMiLCIuL2JpbmQiLCIuL2NhbGxfZ2V0LmpzIiwiLi9jYW5jZWwiLCIuL2NhdGNoX2ZpbHRlciIsIi4vY29udGV4dCIsIi4vZGVidWdnYWJpbGl0eSIsIi4vZGlyZWN0X3Jlc29sdmUiLCIuL2VhY2guanMiLCIuL2ZpbHRlci5qcyIsIi4vZmluYWxseSIsIi4vZ2VuZXJhdG9ycy5qcyIsIi4vam9pbiIsIi4vbWFwLmpzIiwiLi9tZXRob2QiLCIuL25vZGViYWNrIiwiLi9ub2RlaWZ5LmpzIiwiLi9wcm9taXNlX2FycmF5IiwiLi9wcm9taXNpZnkuanMiLCIuL3Byb3BzLmpzIiwiLi9yYWNlLmpzIiwiLi9yZWR1Y2UuanMiLCIuL3NldHRsZS5qcyIsIi4vc29tZS5qcyIsIi4vc3luY2hyb25vdXNfaW5zcGVjdGlvbiIsIi4vdGhlbmFibGVzIiwiLi90aW1lcnMuanMiLCIuL3VzaW5nLmpzIiwyMywidG9SZXNvbHV0aW9uVmFsdWUiLCJyZXNvbHZlVmFsdWVJZkVtcHR5IiwiYXNBcnJheSIsIl9yZXNvbHZlRW1wdHlBcnJheSIsIl9pdGVyYXRlIiwiZ2V0QWN0dWFsTGVuZ3RoIiwic2hvdWxkQ29weVZhbHVlcyIsImlzUmVzb2x2ZWQiLDI0LCJwcm9wc0ZpbHRlciIsIm5vQ29weVByb3BzUGF0dGVybiIsImlzUHJvbWlzaWZpZWQiLCJfX2lzUHJvbWlzaWZpZWRfXyIsImhhc1Byb21pc2lmaWVkIiwic3VmZml4IiwiZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0IiwiZGVmYXVsdFByb21pc2lmaWVkIiwiY2hlY2tWYWxpZCIsInN1ZmZpeFJlZ2V4cCIsImtleVdpdGhvdXRBc3luY1N1ZmZpeCIsInByb21pc2lmaWFibGVNZXRob2RzIiwiaW5oZXJpdGVkRGF0YUtleXMiLCJwYXNzZXNEZWZhdWx0RmlsdGVyIiwiZGVmYXVsdEZpbHRlciIsIm1ha2VOb2RlUHJvbWlzaWZpZWRDbG9zdXJlIiwiX18iLCJwcm9taXNpZmllZCIsIlRISVMiLCJkZWZhdWx0VGhpcyIsIndpdGhBcHBlbmRlZCIsInByb21pc2lmeUFsbCIsInByb21pc2lmaWVyIiwiUmVnRXhwIiwiZXNjYXBlSWRlbnRSZWdleCIsInByb21pc2lmaWVkS2V5IiwibWFrZU5vZGVQcm9taXNpZmllZCIsInByb21pc2lmeSIsIm1ha2VOb2RlUHJvbWlzaWZpZWRFdmFsIiwiZGVmYXVsdFN1ZmZpeCIsIm5vQ29weVByb3BzIiwiY29weURlc2NyaXB0b3JzIiwiaXNDbGFzcyIsMjUsIlByb3BlcnRpZXNQcm9taXNlQXJyYXkiLCJlbnRyaWVzIiwiaXNNYXAiLCJFczZNYXAiLCJtYXBUb0VudHJpZXMiLCJfaXNNYXAiLCJwcm9wcyIsImNhc3RWYWx1ZSIsIk1hcCIsImV4dHJhY3RFbnRyeSIsInNpemUiLCJmb3JFYWNoIiwiZW50cmllc1RvTWFwIiwia2V5T2Zmc2V0IiwyNiwiYXJyYXlNb3ZlIiwic3JjIiwic3JjSW5kZXgiLCJkc3QiLCJkc3RJbmRleCIsImNhcGFjaXR5IiwiX2NhcGFjaXR5IiwiX2Zyb250IiwiX3dpbGxCZU92ZXJDYXBhY2l0eSIsIl9jaGVja0NhcGFjaXR5IiwiX3Vuc2hpZnRPbmUiLCJmcm9udCIsIndyYXBNYXNrIiwiX3Jlc2l6ZVRvIiwib2xkQ2FwYWNpdHkiLCJtb3ZlSXRlbXNDb3VudCIsMjcsInJhY2UiLCJyYWNlTGF0ZXIiLDI4LCJSZWR1Y3Rpb25Qcm9taXNlQXJyYXkiLCJpbml0aWFsVmFsdWUiLCJfZWFjaCIsIl9mbiIsIl9pbml0aWFsVmFsdWUiLCJfY3VycmVudENhbmNlbGxhYmxlIiwiX2VhY2hWYWx1ZXMiLCJjb21wbGV0ZWQiLCJ2YWx1ZU9yUmVhc29uIiwiZ290QWNjdW0iLCJhY2N1bSIsIl9nb3RBY2N1bSIsImdvdFZhbHVlIiwiX2VhY2hDb21wbGV0ZSIsInNlbmRlciIsIl9yZXN1bHRDYW5jZWxsZWQkIiwyOSwibm9Bc3luY1NjaGVkdWxlciIsIk5hdGl2ZVByb21pc2UiLCJnZXROYXRpdmVQcm9taXNlIiwiTXV0YXRpb25PYnNlcnZlciIsIkdsb2JhbFNldEltbWVkaWF0ZSIsInNldEltbWVkaWF0ZSIsIlByb2Nlc3NOZXh0VGljayIsIm5leHRUaWNrIiwiaXNSZWNlbnROb2RlIiwibmF0aXZlUHJvbWlzZSIsIm5hdmlnYXRvciIsInN0YW5kYWxvbmUiLCJkaXYiLCJhdHRyaWJ1dGVzIiwidG9nZ2xlU2NoZWR1bGVkIiwiZGl2MiIsIm8yIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwib2JzZXJ2ZSIsInNjaGVkdWxlVG9nZ2xlIiwiZGlzY29ubmVjdCIsMzAsIlNldHRsZWRQcm9taXNlQXJyYXkiLCJfcHJvbWlzZVJlc29sdmVkIiwiaW5zcGVjdGlvbiIsIl9zZXR0bGVkVmFsdWVGaWVsZCIsInNldHRsZSIsMzEsIl9ob3dNYW55IiwiX3Vud3JhcCIsIl9pbml0aWFsaXplZCIsInNvbWUiLCJob3dNYW55IiwiQ0FOQ0VMTEFUSU9OIiwiaXNBcnJheVJlc29sdmVkIiwiX2NhblBvc3NpYmx5RnVsZmlsbCIsIl9nZXRSYW5nZUVycm9yIiwiY291bnQiLCJfYWRkRnVsZmlsbGVkIiwiX2Z1bGZpbGxlZCIsIl9hZGRSZWplY3RlZCIsIl9jaGVja091dGNvbWUiLCJfcmVqZWN0ZWQiLDMyLCJfaXNDYW5jZWxsZWQiLDMzLCJnZXRUaGVuIiwiaXNBbnlCbHVlYmlyZFByb21pc2UiLCJkb1RoZW5hYmxlIiwiZG9HZXRUaGVuIiwiaGFzUHJvcCIsMzQsIkhhbmRsZVdyYXBwZXIiLCJoYW5kbGUiLCJzdWNjZXNzQ2xlYXIiLCJjbGVhclRpbWVvdXQiLCJmYWlsdXJlQ2xlYXIiLCJhZnRlclZhbHVlIiwiZGVsYXkiLCJtcyIsImFmdGVyVGltZW91dCIsInRpbWVvdXQiLCJoYW5kbGVXcmFwcGVyIiwzNSwiY2FzdFByZXNlcnZpbmdEaXNwb3NhYmxlIiwidGhlbmFibGUiLCJfaXNEaXNwb3NhYmxlIiwiX2dldERpc3Bvc2VyIiwiX3NldERpc3Bvc2FibGUiLCJkaXNwb3NlIiwicmVzb3VyY2VzIiwiaXRlcmF0b3IiLCJ0cnlEaXNwb3NlIiwiRGlzcG9zZXIiLCJfZGF0YSIsIl9jb250ZXh0IiwiRnVuY3Rpb25EaXNwb3NlciIsIm1heWJlVW53cmFwRGlzcG9zZXIiLCJpc0Rpc3Bvc2VyIiwiUmVzb3VyY2VMaXN0IiwiTlVMTCIsInJlc291cmNlIiwiZG9EaXNwb3NlIiwiX3Vuc2V0RGlzcG9zYWJsZSIsImQiLCJ1c2luZyIsImlucHV0Iiwic3ByZWFkQXJncyIsImRpc3Bvc2VyIiwicmVmbGVjdGVkUmVzb3VyY2VzIiwicmVzdWx0UHJvbWlzZSIsImluc3BlY3Rpb25zIiwiX2Rpc3Bvc2VyIiwzNiwidHJ5Q2F0Y2hlciIsInRyeUNhdGNoVGFyZ2V0IiwiaXNQcmltaXRpdmUiLCJtYXliZUVycm9yIiwic2FmZVRvU3RyaW5nIiwiYXBwZW5kZWUiLCJkZWZhdWx0VmFsdWUiLCJoYXNNZXRob2RzIiwiaGFzTWV0aG9kc090aGVyVGhhbkNvbnN0cnVjdG9yIiwiaGFzVGhpc0Fzc2lnbm1lbnRBbmRTdGF0aWNNZXRob2RzIiwidGhpc0Fzc2lnbm1lbnRQYXR0ZXJuIiwiRmFrZUNvbnN0cnVjdG9yIiwicmlkZW50IiwiZmlsbGVkUmFuZ2UiLCJwcmVmaXgiLCJpc0Vycm9yIiwiaWdub3JlIiwiZnJvbSIsInRvIiwiZGVmIiwiZ2xvYmFsT2JqZWN0IiwiQ2hpbGQiLCJQYXJlbnQiLCJUIiwiZXhjbHVkZWRQcm90b3R5cGVzIiwiaXNFeGNsdWRlZFByb3RvIiwidmlzaXRlZEtleXMiLCJlbnVtZXJhdGlvbiIsIlN5bWJvbCIsIkFycmF5RnJvbSIsIml0UmVzdWx0IiwiaXQiLCJjaHJvbWUiLCJsb2FkVGltZXMiLCJ2ZXJzaW9ucyIsIk51bWJlciIsIlAiLCJ2YXN0VXJsIiwiY2hlY2tVbml0U291cmNlIiwiYWRkV3JhcHBlckVsIiwiaW5pdFdyYXBwZXIiLCJlbWJlZFNXRiIsInN3Zm9iamVjdCIsInNka1VuaXF1ZSIsImZsYXNodmFycyIsImluaXRFdmVudHMiLCJnZXRFbGVtZW50QnlJZCIsIndyYXAiLCJibG9ja2VyIiwiY2xhc3NOYW1lIiwib25SZWFkeSIsIlNXIiwiRkxBU0giLCJTSE9DS1dBVkVfRkxBU0giLCJTSE9DS1dBVkVfRkxBU0hfQVgiLCJGTEFTSF9NSU1FX1RZUEUiLCJuYXYiLCJwYXJzZUZsb2F0IiwicGx1Z2lucyIsIm1pbWVzIiwibWltZVR5cGVzIiwiZGVzY3JpcHRpb24iLCJlbmFibGVkUGx1Z2luIiwiR2V0VmFyaWFibGUiLCJhZElkIiwiZ2V0Q29uZmlnIiwiVnBhaWRmbGFzaFdyYXBwZXJzIiwiYWRMb2FkZWRDbG9zdXJlIiwiYWRFcnJvckNsb3N1cmUiLCJhZENvbXBsZXRlQ2xvc3VyZSIsInBhdXNlZENsb3N1cmUiLCJyZXN1bWVkQ2xvc3VyZSIsIm11dGVDbG9zdXJlIiwidW5tdXRlQ2xvc3VyZSIsImFkU3RhcnRlZENsb3N1cmUiLCJzdGFydEZsYXNoV3JhcHBlciIsIlNka0ludGVncmF0aW9uIiwibG9hZEFkIiwidHBsIiwidm9sdW1lIiwiZ2V0VmFzdFVybCIsIkwiLCJhYyIsImFkIiwiQyIsInN0eWxlIiwiZGlzcGxheSIsImgiLCJyZW1vdmVDaGlsZCIsImFlIiwiYWEiLCJYIiwiYWIiLCJNIiwiUSIsImFkZEV2ZW50TGlzdGVuZXIiLCJEIiwiYXR0YWNoRXZlbnQiLCJnIiwiWSIsInNldEF0dHJpYnV0ZSIsInEiLCJhZyIsIk8iLCJwdiIsImFmIiwiSCIsImFqIiwiYWkiLCJjYWxsYmFja0ZuIiwiYWgiLCJGIiwic3dmVmVyc2lvbiIsIndrIiwiZXhwcmVzc0luc3RhbGwiLCJBIiwiYWwiLCJzdHlsZWNsYXNzIiwiYWxpZ24iLCJhayIsIlIiLCJ3IiwicmVmIiwieiIsIlNldFZhcmlhYmxlIiwibm9kZU5hbWUiLCJ3aW4iLCJtYWMiLCJXIiwiRSIsIkIiLCJJIiwiSiIsIlMiLCJpZSIsInkiLCJyZXBsYWNlQ2hpbGQiLCJub2RlVHlwZSIsImNsb25lTm9kZSIsImZpcnN0Q2hpbGQiLCJVIiwiSyIsIkciLCJzdHlsZVNoZWV0cyIsImFkZFJ1bGUiLCJjcmVhdGVUZXh0Tm9kZSIsInZpc2liaWxpdHkiLCJOIiwiZXhlYyIsIloiLCJWIiwidXNlckFnZW50IiwicGxhdGZvcm0iLCJhcHBOYW1lIiwidzMiLCJkZXRhY2hFdmVudCIsInRvcCIsImRvY3VtZW50RWxlbWVudCIsImRvU2Nyb2xsIiwicmVnaXN0ZXJPYmplY3QiLCJnZXRPYmplY3RCeUlkIiwiYW4iLCJhcSIsImFyIiwiYW8iLCJhbSIsImFwIiwiYXQiLCJhdSIsInN3aXRjaE9mZkF1dG9IaWRlU2hvdyIsImVuYWJsZVVyaUVuY29kaW5nIiwidWEiLCJnZXRGbGFzaFBsYXllclZlcnNpb24iLCJtYWpvciIsIm1pbm9yIiwicmVsZWFzZSIsImhhc0ZsYXNoUGxheWVyVmVyc2lvbiIsImNyZWF0ZVNXRiIsInNob3dFeHByZXNzSW5zdGFsbCIsInJlbW92ZVNXRiIsImNyZWF0ZUNTUyIsImFkZERvbUxvYWRFdmVudCIsImFkZExvYWRFdmVudCIsImdldFF1ZXJ5UGFyYW1WYWx1ZSIsInNlYXJjaCIsImhhc2giLCJzdWJzdHJpbmciLCJleHByZXNzSW5zdGFsbENhbGxiYWNrIiwiZW1iZWQiLCJpZnJhbWUiLCJpRndpbmRvdyIsImNvbnRlbnRXaW5kb3ciLCJ2aWRlb0FkTGF5ZXIiLCJ2aWRlb1RhZyIsInNjcmlwdCIsIm1hcmdpbiIsImNhblBsYXlUeXBlIiwiZ2V0VlBBSURBZCIsInN1YnNjcmliZSIsImhhbmRzaGFrZVZlcnNpb24iLCJpbml0QWQiLCJ2aWRlb1Nsb3RDYW5BdXRvUGxheSIsInZpZGVvU2xvdCIsInNsb3QiLCJfdmlkZW9UYWciLCJwb3NpdGlvbiIsIl92aWRlb0FkTGF5ZXIiLCJfc2NyaXB0VGFnIiwiX2lGcmFtZSIsImJvcmRlciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsS0FBQUMsV0NFQSxRQUFBQyxnQkFDQUMsS0FBQUMsVUNPQSxRQUFBQyxXQUFBQyxHQUNBLE1BQUFBLElBTUFILEtBQUFHLFFBQUFBLE9BQ0FILEtBQUFDLGNBQ0FELE1BQUFJLFlBUEFDLFNBQUFDLE1BQUEsMEJDWEEsUUFBQUMsYUFBQUosR0FDQSxJQUFBSyxrQkFDQSxLQUFBLElBQUFDLE9BQUEsOEJBR0FULE1BQUFVLEdBQUFDLEtBQUFDLE9BQUEsR0FBQUMsT0FBQUMsVUFBQSxJQUFBLElBQUFILEtBQUFJLFVBQ0FmLEtBQUFnQixRQUFBLDJEQUNBaEIsS0FBQWlCLGFBQUEsU0FDQWpCLEtBQUFrQixRQUNBQyxrQkFBQSxTQUNBQyxnQkFBQSxPQUNBQyxNQUFBLGVBR0FyQixLQUFBc0IsYUFBQSxTQUFBLFFBQUEsV0FBQSxVQUFBLFVBQUEsU0FBQSxPQUFBLFVBRUF0QixLQUFBRyxRQUFBQSxFQ1JBLFFBQUFvQixTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLElBQUFKLEVBQ0EsS0FBQSxJQUFBZixPQUFBLFVBR0FULE1BQUE2QixLQUFBQyxtQkFBQUMsT0FBQUMsU0FBQUgsTUFDQTdCLEtBQUFpQyxJQUFBLEdBQUFwQixPQUFBQyxVQUNBZCxLQUFBMEIsT0FBQUEsR0FBQSxJQUNBMUIsS0FBQXlCLE1BQUFBLEdBQUEsSUFDQXpCLEtBQUEyQixJQUFBQSxHQUFBLEVBQ0EzQixLQUFBd0IsSUFBQUEsRUFDQXhCLEtBQUE0QixVQUFBQSxFQ25CQSxRQUFBTSxVQUFBL0Is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QUE4dEMsV0FDQTl0QyxLQUFBOHRDLFlBR0E5dEMsS0FBQTh0QyxXQUFBdG1DLFNBQUFDLGNBQUEsVUFDQXpILEtBQUE4dEMsV0FBQTNHLGFBQUEsT0FBQSxtQkFDQW5uQyxLQUFBOHRDLFdBQUEzRyxhQUFBLE1BQUFubkMsS0FBQTJKLGFBQ0EzSixLQUFBOHRDLFdBQUEzRyxhQUFBLFFBQUEsSUFFQW5uQyxLQUFBOHRDLGFBR0E1ckMsU0FBQVksVUFBQThwQyxPQUFBLFdBQ0EsTUFBQTVzQyxNQUFBK3RDLFFBQ0EvdEMsS0FBQSt0QyxTQUdBL3RDLEtBQUErdEMsUUFBQXZtQyxTQUFBQyxjQUFBLFVBQ0F6SCxLQUFBK3RDLFFBQUE1RyxhQUFBLGtCQUFBLFFBQ0FubkMsS0FBQSt0QyxRQUFBblYsSUFBQSxjQUNBNTRCLEtBQUErdEMsUUFBQXRzQyxNQUFBekIsS0FBQUcsUUFBQXNCLE1BQ0F6QixLQUFBK3RDLFFBQUFyc0MsT0FBQTFCLEtBQUFHLFFBQUF1QixPQUNBMUIsS0FBQSt0QyxRQUFBM0gsTUFBQTRILE9BQUEsT0FFQWh1QyxLQUFBK3RDLFVBR0E3ckMsU0FBQVksVUFBQXVKLFFBQUEsV0FDQXJNLEtBQUF5TSxNQUFBRSxlQUNBM00sTUFBQXlNLE1BRUF6TSxLQUFBK3RDLFFBQUFwbUMsV0FBQTQrQixZQUFBdm1DLEtBQUErdEMsZUFFQS90QyxNQUFBNnRDLG9CQUNBN3RDLE1BQUE4dEMsaUJBQ0E5dEMsTUFBQTJ0QyxnQkFDQTN0QyxNQUFBK3RDLFVLMHNNRWhzQyIsImZpbGUiOiJvdXRzdHJlYW0ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHJvb3QgPSByb290IHx8d2luZG93O1xuaWYoIXJvb3QuY29uc29sZSl7XG4gICAgcm9vdC5jb25zb2xlID0ge1xuICAgICAgICBsb2c6IGZ1bmN0aW9uKGEpe1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oYSl7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5pZiAoIXJvb3QuSlNPTikge1xuICAgIHJvb3QuSlNPTiA9IHtcbiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uKHNKU09OKSB7IHJldHVybiBldmFsKCcoJyArIHNKU09OICsgJyknKTsgfSxcbiAgICAgICAgc3RyaW5naWZ5OiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbiAgICAgICAgICAgIHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gdG9TdHJpbmcuY2FsbChhKSA9PT0gJ1tvYmplY3QgQXJyYXldJzsgfTtcbiAgICAgICAgICAgIHZhciBlc2NNYXAgPSB7J1wiJzogJ1xcXFxcIicsICdcXFxcJzogJ1xcXFxcXFxcJywgJ1xcYic6ICdcXFxcYicsICdcXGYnOiAnXFxcXGYnLCAnXFxuJzogJ1xcXFxuJywgJ1xccic6ICdcXFxccicsICdcXHQnOiAnXFxcXHQnfTtcbiAgICAgICAgICAgIHZhciBlc2NGdW5jID0gZnVuY3Rpb24gKG0pIHsgcmV0dXJuIGVzY01hcFttXSB8fCAnXFxcXHUnICsgKG0uY2hhckNvZGVBdCgwKSArIDB4MTAwMDApLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSk7IH07XG4gICAgICAgICAgICB2YXIgZXNjUkUgPSAvW1xcXFxcIlxcdTAwMDAtXFx1MDAxRlxcdTIwMjhcXHUyMDI5XS9nO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0cmluZ2lmeSh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnbnVsbCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc0Zpbml0ZSh2YWx1ZSkgPyB2YWx1ZS50b1N0cmluZygpIDogJ251bGwnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUudG9KU09OID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5naWZ5KHZhbHVlLnRvSlNPTigpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9ICdbJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzICs9IChpID8gJywgJyA6ICcnKSArIHN0cmluZ2lmeSh2YWx1ZVtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzICsgJ10nO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShrKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnB1c2goc3RyaW5naWZ5KGspICsgJzogJyArIHN0cmluZ2lmeSh2YWx1ZVtrXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd7JyArIHRtcC5qb2luKCcsICcpICsgJ30nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAnXCInICsgdmFsdWUudG9TdHJpbmcoKS5yZXBsYWNlKGVzY1JFLCBlc2NGdW5jKSArICdcIic7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSgpXG4gICAgfTtcbn1cblxuLy8gRnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3Qva2V5c1xuaWYgKCFPYmplY3Qua2V5cykge1xuICAgIE9iamVjdC5rZXlzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXG4gICAgICAgICAgICBoYXNEb250RW51bUJ1ZyA9ICEoeyB0b1N0cmluZzogbnVsbCB9KS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgndG9TdHJpbmcnKSxcbiAgICAgICAgICAgIGRvbnRFbnVtcyA9IFtcbiAgICAgICAgICAgICAgICAndG9TdHJpbmcnLFxuICAgICAgICAgICAgICAgICd0b0xvY2FsZVN0cmluZycsXG4gICAgICAgICAgICAgICAgJ3ZhbHVlT2YnLFxuICAgICAgICAgICAgICAgICdoYXNPd25Qcm9wZXJ0eScsXG4gICAgICAgICAgICAgICAgJ2lzUHJvdG90eXBlT2YnLFxuICAgICAgICAgICAgICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsXG4gICAgICAgICAgICAgICAgJ2NvbnN0cnVjdG9yJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGRvbnRFbnVtc0xlbmd0aCA9IGRvbnRFbnVtcy5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnICYmICh0eXBlb2Ygb2JqICE9PSAnZnVuY3Rpb24nIHx8IG9iaiA9PT0gbnVsbCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3Qua2V5cyBjYWxsZWQgb24gbm9uLW9iamVjdCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW10sIHByb3AsIGk7XG5cbiAgICAgICAgICAgIGZvciAocHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGhhc0RvbnRFbnVtQnVnKSB7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRvbnRFbnVtc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgZG9udEVudW1zW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZG9udEVudW1zW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgfSgpKTtcbn1cblxuaWYgKCFBcnJheS5pc0FycmF5KSB7XG4gICAgQXJyYXkuaXNBcnJheSA9IGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfTtcbn1cblxuaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuYmluZCkge1xuICAgIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24ob1RoaXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBjbG9zZXN0IHRoaW5nIHBvc3NpYmxlIHRvIHRoZSBFQ01BU2NyaXB0IDVcbiAgICAgICAgICAgIC8vIGludGVybmFsIElzQ2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kIC0gd2hhdCBpcyB0cnlpbmcgdG8gYmUgYm91bmQgaXMgbm90IGNhbGxhYmxlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYUFyZ3MgICA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksXG4gICAgICAgICAgICBmVG9CaW5kID0gdGhpcyxcbiAgICAgICAgICAgIGZOT1AgICAgPSBmdW5jdGlvbigpIHt9LFxuICAgICAgICAgICAgZkJvdW5kICA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmVG9CaW5kLmFwcGx5KHRoaXMgaW5zdGFuY2VvZiBmTk9QXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIDogb1RoaXMsXG4gICAgICAgICAgICAgICAgICAgIGFBcmdzLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0aGlzLnByb3RvdHlwZSkge1xuICAgICAgICAgICAgLy8gRnVuY3Rpb24ucHJvdG90eXBlIGRvZXNuJ3QgaGF2ZSBhIHByb3RvdHlwZSBwcm9wZXJ0eVxuICAgICAgICAgICAgZk5PUC5wcm90b3R5cGUgPSB0aGlzLnByb3RvdHlwZTtcbiAgICAgICAgfVxuICAgICAgICBmQm91bmQucHJvdG90eXBlID0gbmV3IGZOT1AoKTtcblxuICAgICAgICByZXR1cm4gZkJvdW5kO1xuICAgIH07XG59XG5cbi8vIFByb2R1Y3Rpb24gc3RlcHMgb2YgRUNNQS0yNjIsIEVkaXRpb24gNSwgMTUuNC40LjE0XG4vLyBSZWZlcmVuY2U6IGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuNC40LjE0XG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmRleE9mKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcblxuICAgICAgICB2YXIgaztcblxuICAgICAgICAvLyAxLiBMZXQgbyBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgVG9PYmplY3QgcGFzc2luZ1xuICAgICAgICAvLyAgICB0aGUgdGhpcyB2YWx1ZSBhcyB0aGUgYXJndW1lbnQuXG4gICAgICAgIGlmICh0aGlzID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widGhpc1wiIGlzIG51bGwgb3Igbm90IGRlZmluZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvID0gT2JqZWN0KHRoaXMpO1xuXG4gICAgICAgIC8vIDIuIExldCBsZW5WYWx1ZSBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIEdldFxuICAgICAgICAvLyAgICBpbnRlcm5hbCBtZXRob2Qgb2YgbyB3aXRoIHRoZSBhcmd1bWVudCBcImxlbmd0aFwiLlxuICAgICAgICAvLyAzLiBMZXQgbGVuIGJlIFRvVWludDMyKGxlblZhbHVlKS5cbiAgICAgICAgdmFyIGxlbiA9IG8ubGVuZ3RoID4+PiAwO1xuXG4gICAgICAgIC8vIDQuIElmIGxlbiBpcyAwLCByZXR1cm4gLTEuXG4gICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDUuIElmIGFyZ3VtZW50IGZyb21JbmRleCB3YXMgcGFzc2VkIGxldCBuIGJlXG4gICAgICAgIC8vICAgIFRvSW50ZWdlcihmcm9tSW5kZXgpOyBlbHNlIGxldCBuIGJlIDAuXG4gICAgICAgIHZhciBuID0gK2Zyb21JbmRleCB8fCAwO1xuXG4gICAgICAgIGlmIChNYXRoLmFicyhuKSA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIG4gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gNi4gSWYgbiA+PSBsZW4sIHJldHVybiAtMS5cbiAgICAgICAgaWYgKG4gPj0gbGVuKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cblxuICAgICAgICAvLyA3LiBJZiBuID49IDAsIHRoZW4gTGV0IGsgYmUgbi5cbiAgICAgICAgLy8gOC4gRWxzZSwgbjwwLCBMZXQgayBiZSBsZW4gLSBhYnMobikuXG4gICAgICAgIC8vICAgIElmIGsgaXMgbGVzcyB0aGFuIDAsIHRoZW4gbGV0IGsgYmUgMC5cbiAgICAgICAgayA9IE1hdGgubWF4KG4gPj0gMCA/IG4gOiBsZW4gLSBNYXRoLmFicyhuKSwgMCk7XG5cbiAgICAgICAgLy8gOS4gUmVwZWF0LCB3aGlsZSBrIDwgbGVuXG4gICAgICAgIHdoaWxlIChrIDwgbGVuKSB7XG4gICAgICAgICAgICAvLyBhLiBMZXQgUGsgYmUgVG9TdHJpbmcoaykuXG4gICAgICAgICAgICAvLyAgIFRoaXMgaXMgaW1wbGljaXQgZm9yIExIUyBvcGVyYW5kcyBvZiB0aGUgaW4gb3BlcmF0b3JcbiAgICAgICAgICAgIC8vIGIuIExldCBrUHJlc2VudCBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlXG4gICAgICAgICAgICAvLyAgICBIYXNQcm9wZXJ0eSBpbnRlcm5hbCBtZXRob2Qgb2YgbyB3aXRoIGFyZ3VtZW50IFBrLlxuICAgICAgICAgICAgLy8gICBUaGlzIHN0ZXAgY2FuIGJlIGNvbWJpbmVkIHdpdGggY1xuICAgICAgICAgICAgLy8gYy4gSWYga1ByZXNlbnQgaXMgdHJ1ZSwgdGhlblxuICAgICAgICAgICAgLy8gICAgaS4gIExldCBlbGVtZW50SyBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIEdldFxuICAgICAgICAgICAgLy8gICAgICAgIGludGVybmFsIG1ldGhvZCBvZiBvIHdpdGggdGhlIGFyZ3VtZW50IFRvU3RyaW5nKGspLlxuICAgICAgICAgICAgLy8gICBpaS4gIExldCBzYW1lIGJlIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlXG4gICAgICAgICAgICAvLyAgICAgICAgU3RyaWN0IEVxdWFsaXR5IENvbXBhcmlzb24gQWxnb3JpdGhtIHRvXG4gICAgICAgICAgICAvLyAgICAgICAgc2VhcmNoRWxlbWVudCBhbmQgZWxlbWVudEsuXG4gICAgICAgICAgICAvLyAgaWlpLiAgSWYgc2FtZSBpcyB0cnVlLCByZXR1cm4gay5cbiAgICAgICAgICAgIGlmIChrIGluIG8gJiYgb1trXSA9PT0gc2VhcmNoRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaysrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9O1xufSIsIlxuZnVuY3Rpb24gRXZlbnRNYW5hZ2VyKCkge1xuICAgIHRoaXMuZXZlbnRzID0ge307XG59XG5cbkV2ZW50TWFuYWdlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMuZXZlbnRzW2V2ZW50TmFtZSArICcnXSA9IGNhbGxiYWNrO1xufTtcblxuRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgIHZhciBjYWxsYmFjayA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XG5cbiAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjYWxsYmFjay5jYWxsKG51bGwsIGRhdGEpO1xufTsiLCIvKipcbiAqIEBwYXJhbSBvcHRpb25zLmFpZCB7bnVtYmVyfVxuICogQHBhcmFtIG9wdGlvbnMud2lkdGgge251bWJlcn1cbiAqIEBwYXJhbSBvcHRpb25zLmhlaWdodCB7bnVtYmVyfVxuICogQHBhcmFtIG9wdGlvbnMuY29udGFpbmVyRWwge29iamVjdH1cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyB7b2JqZWN0fVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIE91dHN0cmVhbShvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NyZWF0ZSB3aXRob3V0IG9wdGlvbnMnKTtcblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5vcHRpb25zKG9wdGlvbnMgfHwge30pO1xuICAgIHRoaXMuZXZlbnRzID0ge307XG4gICAgdGhpcy5pbml0KCk7XG59XG5cbi8qKlxuICogUHIgc2F2ZSBNZWRpYUZpbGUgYW5kIEFkUGFyYW1ldGVyc1xuICogQHBhcmFtIHhtbCB7c3RyaW5nfVxuICovXG5PdXRzdHJlYW0ucHJvdG90eXBlLnBhcnNlQW5kU2F2ZUNvbmZpZyA9IGZ1bmN0aW9uICh4bWwpIHtcbiAgICB4bWwgPSBwcmVwYXJlWE1MKCk7XG5cbiAgICB0aGlzLlZwYWlkU291cmNlID0geG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdNZWRpYUZpbGUnKVswXS5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZTtcbiAgICB0aGlzLmNvbmZpZ1VybCA9IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnQWRQYXJhbWV0ZXJzJylbMF0uY2hpbGROb2Rlc1swXS5ub2RlVmFsdWU7XG5cbiAgICBmdW5jdGlvbiBwcmVwYXJlWE1MKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIF9ET01QYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9ET01QYXJzZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBfRE9NUGFyc2VyLnBhcnNlRnJvbVN0cmluZyh4bWwsICd0ZXh0L3htbCcpXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgeG1sRG9jID0gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MRE9NXCIpO1xuICAgICAgICB4bWxEb2MubG9hZFhNTCh4bWwpO1xuXG4gICAgICAgIGlmICh4bWxEb2MucGFyc2VFcnJvci5lcnJvckNvZGUgIT0gMCkge1xuICAgICAgICAgICAgdmFyIG15RXJyID0geG1sRG9jLnBhcnNlRXJyb3I7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiWW91IGhhdmUgZXJyb3IgXCIgKyBteUVyci5yZWFzb24pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHhtbERvYztcbiAgICB9XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLmxvYWRDb25maWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNvbmZpZ1VybCA9IHRoaXMuZ2V0Q29uZmlnVXJsKCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgeGRyID0gbmV3IFhEb21haW5SZXF1ZXN0KClcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoWE1MSHR0cFJlcXVlc3QgJiYgIXhkcikge1xuICAgICAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoeGh0dHAucmVhZHlTdGF0ZSA9PSA0ICYmIHhodHRwLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHR0cC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHhodHRwLm9wZW4oXCJHRVRcIiwgY29uZmlnVXJsLCB0cnVlKTtcbiAgICAgICAgICAgIHhodHRwLnNlbmQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFVzZSBNaWNyb3NvZnQgWERSXG4gICAgICAgICAgICB4ZHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoeGRyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB4ZHIub3BlbihcImdldFwiLCBjb25maWdVcmwsIHRydWUpO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgeGRyLnNlbmQoKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLm9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIGlmICh0aGlzLl9vcHRpb25zIHx8ICFvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1BsZWFzZSBzZXQgY29ycmVjdCBvcHRpb25zJyk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFZQQUlETW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkob3B0aW9ucy5WUEFJRE1vZGUpICYmICEhb3B0aW9ucy5WUEFJRE1vZGUubGVuZ3RoID8gb3B0aW9ucy5WUEFJRE1vZGUgOiBbJ2ZsYXNoJywgJ2pzJ107XG4gICAgfVxuXG4gICAgb3B0aW9ucy5WUEFJRE1vZGUgPSBnZXRWUEFJRE1vZGUoKTtcblxuICAgIHJldHVybiB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNyZWF0ZVZQQUlEKCk7XG5cbiAgICB0aGlzLmxvYWRDb25maWcoKS50aGVuKGZ1bmN0aW9uICh4bWwpIHtcbiAgICAgICAgICAgIHRoaXMucGFyc2VBbmRTYXZlQ29uZmlnKHhtbCk7XG4gICAgICAgICAgICB0aGlzLmluaXRWUEFJRCgpO1xuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIC5jYXVnaHQoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhpcy5pbml0VlBBSUQoKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuaW5pdFZQQUlEID0gZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIHRoaXMuVlBBSURDbGllbnQuaW5pdChcbiAgICAgICAgICAgIHRoaXMuVnBhaWRTb3VyY2UsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ1VybCxcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29uZmlnVXJsKClcbiAgICAgICAgKTtcblxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyB0cnkgdG8gdXNlIGFub3RoZXIgbW9kZVxuICAgICAgICB2YXIgVlBBSURNb2RlID0gdGhpcy5vcHRpb25zKCkuVlBBSURNb2RlLFxuICAgICAgICAgICAgbW9kZUluZGV4ID0gVlBBSURNb2RlLmluZGV4T2YodGhpcy5tb2RlKTtcblxuICAgICAgICBpZiAobW9kZUluZGV4ICE9IC0xKSB7XG4gICAgICAgICAgICBWUEFJRE1vZGUuc3BsaWNlKG1vZGVJbmRleCwgMSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN3aXRjaCBWUEFJZFR5cGUgLCBFUlJPUjogXCIgKyBlcnIubWVzc2FnZSk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIodGhpcy5WUEFJRENsaWVudC5ldmVudE1hbmFnZXIpO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5nZXRDb25maWdVcmwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRvbWFpbiA9IHRoaXMub3B0aW9ucygpLmlzU1NQID8gXCJ2YXN0LnZlcnRhbWVkaWEuY29tL1wiIDogXCJ2YXN0LnZpZGVlLnR2L1wiLFxuICAgICAgICBjb25maWdVcmwgPSBcIi8vXCIgKyBkb21haW4gK1xuICAgICAgICAgICAgXCI/YWlkPVwiICsgdGhpcy5vcHRpb25zKCkuYWlkICtcbiAgICAgICAgICAgIFwiJmNvbnRlbnRfcGFnZV91cmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpICtcbiAgICAgICAgICAgIFwiJnBsYXllcl93aWR0aD1cIiArIHRoaXMub3B0aW9ucygpLndpZHRoICtcbiAgICAgICAgICAgIFwiJnBsYXllcl9oZWlnaHQ9XCIgKyB0aGlzLm9wdGlvbnMoKS5oZWlnaHQgK1xuICAgICAgICAgICAgXCImY2Q9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgIGlmICh0aGlzLm1vZGUgPT0gXCJqc1wiKSB7XG4gICAgICAgIGNvbmZpZ1VybCArPSBcIiZ2cGFpZF90eXBlPTJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gY29uZmlnVXJsO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5jcmVhdGVWUEFJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgVlBBSURNb2RlID0gdGhpcy5vcHRpb25zKCkuVlBBSURNb2RlO1xuICAgIGZvciAodmFyIGluZGV4IGluIFZQQUlETW9kZSkge1xuICAgICAgICBpZiAodGhpcy51c2VNb2RlKFZQQUlETW9kZVtpbmRleF0pKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGUgPSBWUEFJRE1vZGVbaW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS51c2VNb2RlID0gZnVuY3Rpb24gKG1vZGVUeXBlKSB7XG4gICAgdmFyIFZQQUlERmFjdG9yeSA9IHtcbiAgICAgICAgZmxhc2g6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZsYXNoQ2xpZW50KG9wdGlvbnMpO1xuICAgICAgICB9LFxuICAgICAgICBqczogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSnNDbGllbnQob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgbW9kZVR5cGUgPSBtb2RlVHlwZSBpbiBWUEFJREZhY3RvcnkgPyBtb2RlVHlwZSA6ICdmbGFzaCc7XG5cbiAgICB0cnkge1xuICAgICAgICB0aGlzLlZQQUlEQ2xpZW50ID0gbmV3IFZQQUlERmFjdG9yeVttb2RlVHlwZV0odGhpcy5vcHRpb25zKCkpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKG1vZGVUeXBlICsgXCIgaW5pdCBFUlJPUjogXCIgKyBlcnIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuICEhdGhpcy5WUEFJRENsaWVudDtcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuaW5pdEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnRNYW5hZ2VyKSB7XG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLFxuICAgICAgICBwcm94eUV2ZW50cyA9IHRoaXMuVlBBSURDbGllbnQucHJveHlFdmVudHM7XG5cbiAgICBmb3IgKHZhciBpIGluIHByb3h5RXZlbnRzKSB7XG4gICAgICAgIGluaXRFdmVudChwcm94eUV2ZW50c1tpXSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdEV2ZW50KHByb3h5RXZlbnQpIHtcbiAgICAgICAgZXZlbnRNYW5hZ2VyLm9uKHByb3h5RXZlbnQsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjb250ZXh0LnRyaWdnZXIocHJveHlFdmVudCwgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMuZXZlbnRzW2V2ZW50TmFtZSArICcnXSA9IGNhbGxiYWNrO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMuZXZlbnRzW2V2ZW50TmFtZSArICcnXTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgIHZhciBjYWxsYmFjayA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XG5cbiAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjYWxsYmFjay5jYWxsKHRoaXMsIGRhdGEpO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMub3B0aW9ucy5jb250YWluZXJFbC5pbm5lckhUTUwgPSAnJ1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5jYWxsTWV0aG9kID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcbiAgICBtZXRob2ROYW1lID0gdGhpcy5tb2RlID09ICdmbGFzaCcgPyAndmlkZWVfJyArIG1ldGhvZE5hbWUgOiBtZXRob2ROYW1lO1xuXG4gICAgaWYgKHRoaXMuVlBBSURDbGllbnQubWV0aG9kc1N0YXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlZQQUlEQ2xpZW50LlZQQUlEW21ldGhvZE5hbWVdKCk7XG4gICAgfVxuXG4gICAgdGhpcy5vbignc3RhcnRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5WUEFJRENsaWVudC5WUEFJRFttZXRob2ROYW1lXSgpO1xuICAgIH0uYmluZCh0aGlzKSk7XG59O1xuXG4vLyBQdWJsaWMgVlBBSUQgbWV0aG9kc1xuT3V0c3RyZWFtLnByb3RvdHlwZS5zdGFydEFkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2FsbE1ldGhvZCgnc3RhcnRBZCcpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLnN0b3BBZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNhbGxNZXRob2QoJ3N0b3BBZCcpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLnNraXBBZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNhbGxNZXRob2QoJ3NraXBBZCcpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLm11dGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuVlBBSURDbGllbnQubWV0aG9kc1N0YXRlKSB7XG4gICAgICAgIGNsYi5jYWxsKHRoaXMpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm9uKCdzdGFydGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjbGIuY2FsbCh0aGlzKVxuICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICBmdW5jdGlvbiBjbGIoKSB7XG4gICAgICAgIHZhciBtZXRob2ROYW1lID0gdGhpcy5tb2RlID09ICdmbGFzaCcgPyAndmlkZWVfZ2V0QWRWb2x1bWUnIDogJ2dldEFkVm9sdW1lJztcblxuICAgICAgICB0aGlzLnNhdmVkVm9sdW1lID0gdGhpcy5WUEFJRENsaWVudC5WUEFJRFttZXRob2ROYW1lXSgpO1xuXG4gICAgICAgIG1ldGhvZE5hbWUgPSB0aGlzLm1vZGUgPT0gJ2ZsYXNoJyA/ICd2aWRlZV9zZXRBZFZvbHVtZScgOiAnc2V0QWRWb2x1bWUnO1xuICAgICAgICB0aGlzLlZQQUlEQ2xpZW50LlZQQUlEW21ldGhvZE5hbWVdKDApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS51bm11dGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1ldGhvZE5hbWUgPSB0aGlzLm1vZGUgPT0gJ2ZsYXNoJyA/ICd2aWRlZV9zZXRBZFZvbHVtZScgOiAnc2V0QWRWb2x1bWUnO1xuICAgIHRoaXMuVlBBSURDbGllbnQuVlBBSURbbWV0aG9kTmFtZV0odGhpcy5zYXZlZFZvbHVtZSB8fCAxKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5zZXRBZFZvbHVtZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICBpZiAodHlwZW9mIHZhbCAhPSAnbnVtYmVyJyB8fCB2YWwgIT0gdmFsKSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuY2FsbE1ldGhvZCgnc2V0QWRWb2x1bWUnKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5nZXRBZFZvbHVtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdnZXRBZFZvbHVtZScpO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5wYXVzZUFkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2FsbE1ldGhvZCgncGF1c2VBZCcpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLnJlc3VtZUFkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2FsbE1ldGhvZCgncmVzdW1lQWQnKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5yZXNpemVBZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksXG4gICAgICAgIG1ldGhvZE5hbWUgPSB0aGlzLm1vZGUgPT0gJ2ZsYXNoJyA/ICd2aWRlZV9zZXRBZFZvbHVtZScgOiAnc2V0QWRWb2x1bWUnO1xuICAgIGlmICh0aGlzLlZQQUlEQ2xpZW50Lm1ldGhvZHNTdGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5WUEFJRENsaWVudC5WUEFJRFttZXRob2ROYW1lXS5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9XG5cbiAgICB0aGlzLm9uKCdzdGFydGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLlZQQUlEQ2xpZW50LlZQQUlEW21ldGhvZE5hbWVdLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGluaXRcbnZhciByb290ID0gcm9vdCB8fCB3aW5kb3c7XG5yb290Lk91dHN0cmVhbSA9IE91dHN0cmVhbTtcbiIsImZ1bmN0aW9uIEZsYXNoQ2xpZW50KG9wdGlvbnMpIHtcbiAgICBpZiAoIWdldEZsYXNoVmVyc2lvbigpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmxhc2ggUGxheWVyIG5vdCBpbnN0YWxsZWQhJyk7XG4gICAgfVxuXG4gICAgdGhpcy5pZCA9IE1hdGgucm91bmQoKCBuZXcgRGF0ZSgpICkuZ2V0VGltZSgpIC8gMTAwMDAgKyBNYXRoLnJhbmRvbSgpICogMTAwMDAwMDApO1xuICAgIHRoaXMudW5pdFNyYyA9ICcvL3BsYXllci52aWRlZS50di92Mi4xL3Jlc291cmNlcy9saWJzL3ZpZGVlanMtcGxheWVyLnN3Zic7XG4gICAgdGhpcy5mbGFzaFZlcnNpb24gPSBcIjEwLjAuMFwiO1xuICAgIHRoaXMucGFyYW1zID0ge1xuICAgICAgICBhbGxvd1NjcmlwdEFjY2VzczogXCJhbHdheXNcIixcbiAgICAgICAgYWxsb3dGdWxsU2NyZWVuOiBcInRydWVcIixcbiAgICAgICAgd21vZGU6ICd0cmFuc3BhcmVudCdcbiAgICB9O1xuXG4gICAgdGhpcy5wcm94eUV2ZW50cyA9IFsnbG9hZGVkJywgJ2Vycm9yJywgJ2NvbXBsZXRlJywgJ3N0YXJ0ZWQnLCAncmVzdW1lZCcsICdwYXVzZWQnLCAnbXV0ZScsICd1bm11dGUnXTtcblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG59XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKFZwYWlkU291cmNlLCBjb25maWdVcmwsIHZhc3RVcmwpIHtcbiAgICBpZiAoVnBhaWRTb3VyY2UgJiYgIXRoaXMuY2hlY2tVbml0U291cmNlKFZwYWlkU291cmNlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VuaXQgbm90IFNXRicpO1xuICAgIH1cblxuICAgIHRoaXMuYWRkV3JhcHBlckVsKCk7XG4gICAgdGhpcy5pbml0V3JhcHBlcih2YXN0VXJsKTtcbiAgICB0aGlzLmVtYmVkU1dGKCk7XG59O1xuXG5GbGFzaENsaWVudC5wcm90b3R5cGUuY2hlY2tVbml0U291cmNlID0gZnVuY3Rpb24gKFZwYWlkU291cmNlKSB7XG4gICAgcmV0dXJuIFZwYWlkU291cmNlLmluZGV4T2YoJy5zd2YnKSAhPSAtMTtcbn07XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5lbWJlZFNXRiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBzd2ZvYmplY3QuZW1iZWRTV0YoXG4gICAgICAgICAgICB0aGlzLnVuaXRTcmMsXG4gICAgICAgICAgICB0aGlzLnNka1VuaXF1ZSxcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy53aWR0aCxcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5oZWlnaHQsXG4gICAgICAgICAgICB0aGlzLmZsYXNoVmVyc2lvbixcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRoaXMuZmxhc2h2YXJzKCksXG4gICAgICAgICAgICB0aGlzLnBhcmFtcyxcbiAgICAgICAgICAgIHt9XG4gICAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgIH1cbn07XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5pbml0RXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyLm9uKCdyZWFkeScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5WUEFJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2RrVW5pcXVlKTtcbiAgICAgICAgdGhpcy5tZXRob2RzU3RhdGUgPSB0cnVlO1xuICAgIH0uYmluZCh0aGlzKSk7XG59O1xuXG5GbGFzaENsaWVudC5wcm90b3R5cGUuaW5pdFdyYXBwZXIgPSBmdW5jdGlvbiAodmFzdFVybCkge1xuICAgIHRyeSB7XG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gbmV3IFdyYXBwZXIoXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYWlkLFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLndpZHRoLFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmhlaWdodCxcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zaWQsXG4gICAgICAgICAgICB2YXN0VXJsXG4gICAgICAgICkud3JhcCh0aGlzLmlkKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgfVxuXG4gICAgdGhpcy5pbml0RXZlbnRzKCk7XG59O1xuXG5GbGFzaENsaWVudC5wcm90b3R5cGUuYWRkV3JhcHBlckVsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBibG9ja2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICB0aGlzLnNka1VuaXF1ZSA9ICdTZGtJbnRlZ3JhdGlvbicgKyB0aGlzLmlkO1xuICAgIGJsb2NrZXIuY2xhc3NOYW1lID0gJ2ZsYXNoLWJsb2NrZXInO1xuICAgIGJsb2NrZXIuaW5uZXJIVE1MID0gJzxkaXYgaWQ9XCInICsgdGhpcy5zZGtVbmlxdWUgKyAnXCI+PC9kaXY+JztcbiAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoYmxvY2tlcik7XG59O1xuXG5GbGFzaENsaWVudC5wcm90b3R5cGUuZmxhc2h2YXJzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG9uUmVhZHk6IFwid2luZG93LlZwYWlkZmxhc2hXcmFwcGVyc1tcIiArIHRoaXMuaWQgKyBcIl0uc3RhcnRGbGFzaFdyYXBwZXJcIlxuICAgIH1cbn07IiwiLyoqXG4gKiBAcGFyYW0gYWlkIHtudW1iZXJ9XG4gKiBAcGFyYW0gd2lkdGgge251bWJlcn1cbiAqIEBwYXJhbSBoZWlnaHQge251bWJlcn1cbiAqIEBwYXJhbSBzaWQge251bWJlcn1cbiAqIEBwYXJhbSBjb25maWdVcmwge3N0cmluZ31cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBXcmFwcGVyKGFpZCwgd2lkdGgsIGhlaWdodCwgc2lkLCBjb25maWdVcmwpIHtcbiAgICBpZiAoIWFpZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NldCBhaWQnKVxuICAgIH1cblxuICAgIHRoaXMuaG9zdCA9IGVuY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uaG9zdCk7XG4gICAgdGhpcy5jZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0IHx8IDMwMDtcbiAgICB0aGlzLndpZHRoID0gd2lkdGggfHwgNDAwO1xuICAgIHRoaXMuc2lkID0gc2lkIHx8IDA7XG4gICAgdGhpcy5haWQgPSBhaWQ7XG4gICAgdGhpcy5jb25maWdVcmwgPSBjb25maWdVcmw7XG59XG5cbldyYXBwZXIucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbiAoYWRJZCkge1xuICAgIHZhciBjb25maWcgPSB0aGlzLmdldENvbmZpZyhhZElkKSxcbiAgICAgICAgZXZlbnRNYW5hZ2VyID0gbmV3IEV2ZW50TWFuYWdlcigpLFxuICAgICAgICB3aWR0aCA9IHRoaXMud2lkdGgsXG4gICAgICAgIGhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuXG4gICAgaWYgKCF3aW5kb3cuVnBhaWRmbGFzaFdyYXBwZXJzKSB7XG4gICAgICAgIHdpbmRvdy5WcGFpZGZsYXNoV3JhcHBlcnMgPSB7fVxuICAgIH1cblxuICAgIHdpbmRvdy5WcGFpZGZsYXNoV3JhcHBlcnNbYWRJZF0gPSB7fTtcblxuICAgIHdpbmRvdy5WcGFpZGZsYXNoV3JhcHBlcnNbYWRJZF0gPSB7XG4gICAgICAgIGFkTG9hZGVkQ2xvc3VyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ2xvYWRlZCcpO1xuICAgICAgICAgICAgd2luZG93W1wiU2RrSW50ZWdyYXRpb25cIiArIGFkSWRdLnN0YXJ0QWQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRFcnJvckNsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdlcnJvcicpO1xuICAgICAgICB9LFxuICAgICAgICBhZENvbXBsZXRlQ2xvc3VyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ2NvbXBsZXRlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIHBhdXNlZENsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdwYXVzZWQnKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVzdW1lZENsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdyZXN1bWVkJyk7XG4gICAgICAgIH0sXG4gICAgICAgIG11dGVDbG9zdXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcignbXV0ZScpO1xuICAgICAgICB9LFxuICAgICAgICB1bm11dGVDbG9zdXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcigndW5tdXRlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkU3RhcnRlZENsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdzdGFydGVkJyk7XG4gICAgICAgIH0sXG4gICAgICAgIHN0YXJ0Rmxhc2hXcmFwcGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcigncmVhZHknKTtcbiAgICAgICAgICAgIHZhciBTZGtJbnRlZ3JhdGlvbiA9IHdpbmRvd1tcIlNka0ludGVncmF0aW9uXCIgKyBhZElkXTtcbiAgICAgICAgICAgIFNka0ludGVncmF0aW9uLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBTZGtJbnRlZ3JhdGlvbi5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICBTZGtJbnRlZ3JhdGlvbi5sb2FkQWQoY29uZmlnKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZXZlbnRNYW5hZ2VyO1xufTtcblxuV3JhcHBlci5wcm90b3R5cGUuZ2V0Q29uZmlnID0gZnVuY3Rpb24gKGFkSWQpIHtcbiAgICB2YXIgdHBsID0gXCJ3aW5kb3cuVnBhaWRmbGFzaFdyYXBwZXJzW1wiICsgYWRJZCArIFwiXVwiO1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGFkQ29tcGxldGVDbG9zdXJlOiB0cGwgKyBcIi5hZENvbXBsZXRlQ2xvc3VyZVwiLFxuICAgICAgICBhZFN0YXJ0ZWRDbG9zdXJlOiB0cGwgKyBcIi5hZFN0YXJ0ZWRDbG9zdXJlXCIsXG4gICAgICAgIGFkTG9hZGVkQ2xvc3VyZTogdHBsICsgXCIuYWRMb2FkZWRDbG9zdXJlXCIsXG4gICAgICAgIGFkRXJyb3JDbG9zdXJlOiB0cGwgKyBcIi5hZEVycm9yQ2xvc3VyZVwiLFxuICAgICAgICByZXN1bWVkQ2xvc3VyZTogdHBsICsgXCIucmVzdW1lZENsb3N1cmVcIixcbiAgICAgICAgcGF1c2VkQ2xvc3VyZTogdHBsICsgXCIucGF1c2VkQ2xvc3VyZVwiLFxuICAgICAgICB1bm11dGVDbG9zdXJlOiB0cGwgKyBcIi51bm11dGVDbG9zdXJlXCIsXG4gICAgICAgIG11dGVDbG9zdXJlOiB0cGwgKyBcIi5tdXRlQ2xvc3VyZVwiLFxuICAgICAgICB2b2x1bWU6IDEsXG4gICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxuICAgICAgICB2YXN0VXJsOiB0aGlzLmdldFZhc3RVcmwoKVxuICAgIH0pXG59O1xuXG5XcmFwcGVyLnByb3RvdHlwZS5nZXRWYXN0VXJsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ1VybCB8fCAnLy92YXN0LnZpZGVlLnR2L3Zhc3QtcHJveHkvP2FpZD0nICsgdGhpcy5haWQgK1xuICAgICAgICAnJmNvbnRlbnRfcGFnZV91cmw9JyArIHRoaXMuaG9zdCArXG4gICAgICAgICcmcGxheWVyX2hlaWdodD0nICsgdGhpcy5oZWlnaHQgK1xuICAgICAgICAnJnBsYXllcl93aWR0aD0nICsgdGhpcy53aWR0aCArXG4gICAgICAgICcmc2lkPScgKyB0aGlzLnNpZCArXG4gICAgICAgICcmY2I9JyArIHRoaXMuY2Rcbn07XG4iLCJmdW5jdGlvbiBKc0NsaWVudChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmV2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIoKTtcbiAgICB0aGlzLm1ldGhvZHNTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMucHJveHlFdmVudHMgPSBbJ2xvYWRlZCcsICdlcnJvcicsICdjb21wbGV0ZScsICdzdGFydGVkJywgJ3BhdXNlZCcsICdyZXNpemUnXTtcbn1cblxuSnNDbGllbnQucHJvdG90eXBlLmVtYmVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBbXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuaWZyYW1lKCkuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlGd2luZG93ID0gdGhpcy5pZnJhbWUoKS5jb250ZW50V2luZG93O1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9BZExheWVyKCkuYXBwZW5kQ2hpbGQodGhpcy52aWRlb1RhZygpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlGd2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0FkTGF5ZXIoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pRndpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuc2NyaXB0KCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuaUZ3aW5kb3cuZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW4gPSAwO1xuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9LmJpbmQodGhpcykpLFxuXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuc2NyaXB0KCkuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LCBmYWxzZSlcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgIF1cbn07XG5cbkpzQ2xpZW50LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKFZwYWlkU291cmNlLCBjb25maWdVcmwpIHtcbiAgICBpZiAoIVZwYWlkU291cmNlIHx8ICFjb25maWdVcmwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZXQgY29ycmVjdCBvcHRpb25zJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnZpZGVvVGFnKCkuY2FuUGxheVR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIVE1MNSB2aWRlbyBub3Qgc3VwcG9ydCcpO1xuICAgIH1cblxuICAgIHRoaXMuVnBhaWRTb3VyY2UgPSBWcGFpZFNvdXJjZTtcbiAgICB0aGlzLmNvbmZpZ1VybCA9IGNvbmZpZ1VybDtcblxuICAgIFByb21pc2UuYWxsKHRoaXMuZW1iZWQoKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5WUEFJRCA9IHRoaXMuaUZ3aW5kb3cuZ2V0VlBBSURBZCgpO1xuICAgICAgICAgICAgdGhpcy5pbml0VlBBSUQoKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAuY2F1Z2h0KGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQodGhpcy5pZnJhbWUoKSk7XG59O1xuXG5Kc0NsaWVudC5wcm90b3R5cGUuaW5pdFZQQUlEID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBldmVudE1hbmFnZXIgPSB0aGlzLmV2ZW50TWFuYWdlcjtcblxuICAgIHRoaXMuVlBBSUQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5WUEFJRC5zdGFydEFkKCk7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdsb2FkZWQnKTtcbiAgICB9LmJpbmQodGhpcyksICdBZExvYWRlZCcpO1xuXG4gICAgdGhpcy5WUEFJRC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm1ldGhvZHNTdGF0ZSA9IHRydWU7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdzdGFydGVkJyk7XG4gICAgfS5iaW5kKHRoaXMpLCAnQWRTdGFydGVkJyk7XG5cbiAgICB0aGlzLlZQQUlELnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdwYXVzZWQnKTtcbiAgICB9LCAnQWRQYXVzZWQnKTtcblxuICAgIHRoaXMuVlBBSUQuc3Vic2NyaWJlKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ2Vycm9yJywgZXJyKTtcbiAgICB9LCAnQWRFcnJvcicpO1xuXG4gICAgdGhpcy5WUEFJRC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcigncGxheWluZycpO1xuICAgIH0sICdBZFBsYXlpbmcnKTtcblxuICAgIHRoaXMuVlBBSUQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ3N0b3BwZWQnKTtcbiAgICB9LCAnQWRTdG9wcGVkJyk7XG5cbiAgICB0aGlzLlZQQUlELnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdyZXNpemUnKTtcbiAgICB9LCAnQWRTaXplQ2hhbmdlJyk7XG5cbiAgICB0aGlzLlZQQUlELnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdjb21wbGV0ZScpO1xuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICB9LmJpbmQodGhpcyksICdBZFZpZGVvQ29tcGxldGUnKTtcblxuICAgIHRoaXMuVlBBSUQuaGFuZHNoYWtlVmVyc2lvbigyKTtcblxuICAgIHRoaXMuVlBBSUQuaW5pdEFkKFxuICAgICAgICB0aGlzLm9wdGlvbnMud2lkdGgsXG4gICAgICAgIHRoaXMub3B0aW9ucy5oZWlnaHQsXG4gICAgICAgICdub3JtYWwnLFxuICAgICAgICAwLFxuICAgICAgICB0aGlzLmNvbmZpZ1VybCxcbiAgICAgICAge1xuICAgICAgICAgICAgdmlkZW9TbG90Q2FuQXV0b1BsYXk6IHRydWUsXG4gICAgICAgICAgICB2aWRlb1Nsb3Q6IHRoaXMudmlkZW9UYWcoKSxcbiAgICAgICAgICAgIHNsb3Q6IHRoaXMudmlkZW9BZExheWVyKClcbiAgICAgICAgfVxuICAgICk7XG59O1xuXG5Kc0NsaWVudC5wcm90b3R5cGUudmlkZW9UYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3ZpZGVvVGFnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92aWRlb1RhZztcbiAgICB9XG5cbiAgICB0aGlzLl92aWRlb1RhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgdGhpcy5fdmlkZW9UYWcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgXCIxMDAlXCIpO1xuICAgIHRoaXMuX3ZpZGVvVGFnLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBcIjEwMCVcIik7XG4gICAgdGhpcy5fdmlkZW9UYWcuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXG4gICAgcmV0dXJuIHRoaXMuX3ZpZGVvVGFnO1xufTtcblxuSnNDbGllbnQucHJvdG90eXBlLnZpZGVvQWRMYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdmlkZW9BZExheWVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92aWRlb0FkTGF5ZXI7XG4gICAgfVxuXG4gICAgdGhpcy5fdmlkZW9BZExheWVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fdmlkZW9BZExheWVyLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHRoaXMub3B0aW9ucy53aWR0aCk7XG4gICAgdGhpcy5fdmlkZW9BZExheWVyLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCB0aGlzLm9wdGlvbnMuaGVpZ2h0KTtcblxuICAgIHJldHVybiB0aGlzLl92aWRlb0FkTGF5ZXI7XG59O1xuXG5Kc0NsaWVudC5wcm90b3R5cGUuc2NyaXB0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9zY3JpcHRUYWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmlwdFRhZztcbiAgICB9XG5cbiAgICB0aGlzLl9zY3JpcHRUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICB0aGlzLl9zY3JpcHRUYWcuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHQvamF2YXNjcmlwdFwiKTtcbiAgICB0aGlzLl9zY3JpcHRUYWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIHRoaXMuVnBhaWRTb3VyY2UpO1xuICAgIHRoaXMuX3NjcmlwdFRhZy5zZXRBdHRyaWJ1dGUoXCJhc3luY1wiLCBcIlwiKTtcblxuICAgIHJldHVybiB0aGlzLl9zY3JpcHRUYWc7XG59O1xuXG5Kc0NsaWVudC5wcm90b3R5cGUuaWZyYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pRnJhbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lGcmFtZTtcbiAgICB9XG5cbiAgICB0aGlzLl9pRnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpRnJhbWUnKTtcbiAgICB0aGlzLl9pRnJhbWUuc2V0QXR0cmlidXRlKFwiYWxsb3dmdWxsc2NyZWVuXCIsIFwidHJ1ZVwiKTtcbiAgICB0aGlzLl9pRnJhbWUuc3JjID0gXCJhYm91dDpibGFua1wiO1xuICAgIHRoaXMuX2lGcmFtZS53aWR0aCA9IHRoaXMub3B0aW9ucy53aWR0aDtcbiAgICB0aGlzLl9pRnJhbWUuaGVpZ2h0ID0gdGhpcy5vcHRpb25zLmhlaWdodDtcbiAgICB0aGlzLl9pRnJhbWUuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuXG4gICAgcmV0dXJuIHRoaXMuX2lGcmFtZTtcbn07XG5cbkpzQ2xpZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuVlBBSUQuc3RvcEFkKCk7XG4gICAgZGVsZXRlIHRoaXMuVlBBSUQ7XG5cbiAgICB0aGlzLl9pRnJhbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9pRnJhbWUpO1xuXG4gICAgZGVsZXRlIHRoaXMuX3ZpZGVvQWRMYXllcjtcbiAgICBkZWxldGUgdGhpcy5fc2NyaXB0VGFnO1xuICAgIGRlbGV0ZSB0aGlzLl92aWRlb1RhZztcbiAgICBkZWxldGUgdGhpcy5faUZyYW1lO1xufTtcbiIsIndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgcGFyc2VyID0ge1xuICAgICAgICBudW1iZXI6IGZ1bmN0aW9uKGVsLCBrZXkpe1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5wYXJzZShlbCwga2V5KTtcblxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXJyYXk6IGZ1bmN0aW9uKGVsLCBrZXkpe1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5wYXJzZShlbCwga2V5KTtcbiAgICAgICAgICAgIGlmKCF2YWx1ZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuc3BsaXQoJyAnKTtcbiAgICAgICAgfSxcbiAgICAgICAgYm9vbDogZnVuY3Rpb24oZWwsIGtleSl7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnBhcnNlKGVsLCBrZXkpO1xuXG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBKU09OLnBhcnNlKHZhbHVlKVxuICAgICAgICAgICAgfWNhdGNoKGVycil7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBmYWxzZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gISF2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uKGVsLCBrZXkpe1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW91dHN0cmVhbS0nICsga2V5KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNjcmlwdFRhZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XG5cbiAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBzY3JpcHRUYWdzKSB7XG4gICAgICAgICAgICB2YXIgYWlkID0gcGFyc2VyLm51bWJlcihzY3JpcHRUYWdzW2l0ZW1dLCAnYWlkJyk7XG5cbiAgICAgICAgICAgIGlmICghIWFpZCAmJiAhaXNOYU4oYWlkKSkge1xuICAgICAgICAgICAgICAgIGluaXRPdXRzdHJlYW0oe1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogcGFyc2VyLm51bWJlcihzY3JpcHRUYWdzW2l0ZW1dLCAnd2lkdGgnKSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBwYXJzZXIubnVtYmVyKHNjcmlwdFRhZ3NbaXRlbV0sICdoZWlnaHQnKSxcbiAgICAgICAgICAgICAgICAgICAgaXNTU1A6IHBhcnNlci5ib29sKHNjcmlwdFRhZ3NbaXRlbV0sICdTU1AnKSxcbiAgICAgICAgICAgICAgICAgICAgVlBBSURNb2RlOiBwYXJzZXIuYXJyYXkoc2NyaXB0VGFnc1tpdGVtXSwgJ21vZGUnKSxcbiAgICAgICAgICAgICAgICAgICAgYWlkOiBhaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lckVsOiBjcmVhdGVFbChzY3JpcHRUYWdzW2l0ZW1dKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSkoKTtcblxuXG4gICAgZnVuY3Rpb24gaW5pdE91dHN0cmVhbShvcHRpb25zKSB7XG4gICAgICAgIG5ldyBPdXRzdHJlYW0oe1xuICAgICAgICAgICAgYWlkOiBvcHRpb25zLmFpZCxcbiAgICAgICAgICAgIGlzU1NQOiBvcHRpb25zLmlzU1NQLFxuICAgICAgICAgICAgVlBBSURNb2RlOiBvcHRpb25zLlZQQUlETW9kZSxcbiAgICAgICAgICAgIHdpZHRoOiBpc05hTihvcHRpb25zLndpZHRoKSA/IDQwMCA6IG9wdGlvbnMud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGlzTmFOKG9wdGlvbnMuaGVpZ2h0KSA/IDMwMCA6IG9wdGlvbnMuaGVpZ2h0LFxuICAgICAgICAgICAgY29udGFpbmVyRWw6IG9wdGlvbnMuY29udGFpbmVyRWxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc05hTih2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbCAhPSB2YWw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRWwoZWwpIHtcbiAgICAgICAgdmFyIGFkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgICAgIHBhcmVudEVsID0gZWwucGFyZW50Tm9kZTtcblxuICAgICAgICBpZiAocGFyZW50RWwudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09IFwiSEVBRFwiKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFkQ29udGFpbmVyKTtcblxuICAgICAgICAgICAgcmV0dXJuIGFkQ29udGFpbmVyO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyZW50RWwuaW5zZXJ0QmVmb3JlKGFkQ29udGFpbmVyLCBlbCk7XG5cbiAgICAgICAgcmV0dXJuIGFkQ29udGFpbmVyO1xuICAgIH1cbn07XG4iLCIvKiBAcHJlc2VydmVcbiAqIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuICogXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSBQZXRrYSBBbnRvbm92XG4gKiBcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqIFxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICogXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4gKiBUSEUgU09GVFdBUkUuXG4gKiBcbiAqL1xuLyoqXG4gKiBibHVlYmlyZCBidWlsZCB2ZXJzaW9uIDMuNC4wXG4gKiBGZWF0dXJlcyBlbmFibGVkOiBjb3JlLCByYWNlLCBjYWxsX2dldCwgZ2VuZXJhdG9ycywgbWFwLCBub2RlaWZ5LCBwcm9taXNpZnksIHByb3BzLCByZWR1Y2UsIHNldHRsZSwgc29tZSwgdXNpbmcsIHRpbWVycywgZmlsdGVyLCBhbnksIGVhY2hcbiovXG4hZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciBmO1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/Zj13aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9mPWdsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmKGY9c2VsZiksZi5Qcm9taXNlPWUoKX19KGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiBfZGVyZXFfPT1cImZ1bmN0aW9uXCImJl9kZXJlcV87aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIF9kZXJlcV89PVwiZnVuY3Rpb25cIiYmX2RlcmVxXztmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciBTb21lUHJvbWlzZUFycmF5ID0gUHJvbWlzZS5fU29tZVByb21pc2VBcnJheTtcbmZ1bmN0aW9uIGFueShwcm9taXNlcykge1xuICAgIHZhciByZXQgPSBuZXcgU29tZVByb21pc2VBcnJheShwcm9taXNlcyk7XG4gICAgdmFyIHByb21pc2UgPSByZXQucHJvbWlzZSgpO1xuICAgIHJldC5zZXRIb3dNYW55KDEpO1xuICAgIHJldC5zZXRVbndyYXAoKTtcbiAgICByZXQuaW5pdCgpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5Qcm9taXNlLmFueSA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiBhbnkocHJvbWlzZXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuYW55ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBhbnkodGhpcyk7XG59O1xuXG59O1xuXG59LHt9XSwyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIGZpcnN0TGluZUVycm9yO1xudHJ5IHt0aHJvdyBuZXcgRXJyb3IoKTsgfSBjYXRjaCAoZSkge2ZpcnN0TGluZUVycm9yID0gZTt9XG52YXIgc2NoZWR1bGUgPSBfZGVyZXFfKFwiLi9zY2hlZHVsZVwiKTtcbnZhciBRdWV1ZSA9IF9kZXJlcV8oXCIuL3F1ZXVlXCIpO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xuXG5mdW5jdGlvbiBBc3luYygpIHtcbiAgICB0aGlzLl9jdXN0b21TY2hlZHVsZXIgPSBmYWxzZTtcbiAgICB0aGlzLl9pc1RpY2tVc2VkID0gZmFsc2U7XG4gICAgdGhpcy5fbGF0ZVF1ZXVlID0gbmV3IFF1ZXVlKDE2KTtcbiAgICB0aGlzLl9ub3JtYWxRdWV1ZSA9IG5ldyBRdWV1ZSgxNik7XG4gICAgdGhpcy5faGF2ZURyYWluZWRRdWV1ZXMgPSBmYWxzZTtcbiAgICB0aGlzLl90cmFtcG9saW5lRW5hYmxlZCA9IHRydWU7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuZHJhaW5RdWV1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuX2RyYWluUXVldWVzKCk7XG4gICAgfTtcbiAgICB0aGlzLl9zY2hlZHVsZSA9IHNjaGVkdWxlO1xufVxuXG5Bc3luYy5wcm90b3R5cGUuc2V0U2NoZWR1bGVyID0gZnVuY3Rpb24oZm4pIHtcbiAgICB2YXIgcHJldiA9IHRoaXMuX3NjaGVkdWxlO1xuICAgIHRoaXMuX3NjaGVkdWxlID0gZm47XG4gICAgdGhpcy5fY3VzdG9tU2NoZWR1bGVyID0gdHJ1ZTtcbiAgICByZXR1cm4gcHJldjtcbn07XG5cbkFzeW5jLnByb3RvdHlwZS5oYXNDdXN0b21TY2hlZHVsZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VzdG9tU2NoZWR1bGVyO1xufTtcblxuQXN5bmMucHJvdG90eXBlLmVuYWJsZVRyYW1wb2xpbmUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl90cmFtcG9saW5lRW5hYmxlZCA9IHRydWU7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuZGlzYWJsZVRyYW1wb2xpbmVJZk5lY2Vzc2FyeSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh1dGlsLmhhc0RldlRvb2xzKSB7XG4gICAgICAgIHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkID0gZmFsc2U7XG4gICAgfVxufTtcblxuQXN5bmMucHJvdG90eXBlLmhhdmVJdGVtc1F1ZXVlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNUaWNrVXNlZCB8fCB0aGlzLl9oYXZlRHJhaW5lZFF1ZXVlcztcbn07XG5cblxuQXN5bmMucHJvdG90eXBlLmZhdGFsRXJyb3IgPSBmdW5jdGlvbihlLCBpc05vZGUpIHtcbiAgICBpZiAoaXNOb2RlKSB7XG4gICAgICAgIHByb2Nlc3Muc3RkZXJyLndyaXRlKFwiRmF0YWwgXCIgKyAoZSBpbnN0YW5jZW9mIEVycm9yID8gZS5zdGFjayA6IGUpICtcbiAgICAgICAgICAgIFwiXFxuXCIpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50aHJvd0xhdGVyKGUpO1xuICAgIH1cbn07XG5cbkFzeW5jLnByb3RvdHlwZS50aHJvd0xhdGVyID0gZnVuY3Rpb24oZm4sIGFyZykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGFyZyA9IGZuO1xuICAgICAgICBmbiA9IGZ1bmN0aW9uICgpIHsgdGhyb3cgYXJnOyB9O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZuKGFyZyk7XG4gICAgICAgIH0sIDApO1xuICAgIH0gZWxzZSB0cnkge1xuICAgICAgICB0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZuKGFyZyk7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYXN5bmMgc2NoZWR1bGVyIGF2YWlsYWJsZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gQXN5bmNJbnZva2VMYXRlcihmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgIHRoaXMuX2xhdGVRdWV1ZS5wdXNoKGZuLCByZWNlaXZlciwgYXJnKTtcbiAgICB0aGlzLl9xdWV1ZVRpY2soKTtcbn1cblxuZnVuY3Rpb24gQXN5bmNJbnZva2UoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICB0aGlzLl9ub3JtYWxRdWV1ZS5wdXNoKGZuLCByZWNlaXZlciwgYXJnKTtcbiAgICB0aGlzLl9xdWV1ZVRpY2soKTtcbn1cblxuZnVuY3Rpb24gQXN5bmNTZXR0bGVQcm9taXNlcyhwcm9taXNlKSB7XG4gICAgdGhpcy5fbm9ybWFsUXVldWUuX3B1c2hPbmUocHJvbWlzZSk7XG4gICAgdGhpcy5fcXVldWVUaWNrKCk7XG59XG5cbmlmICghdXRpbC5oYXNEZXZUb29scykge1xuICAgIEFzeW5jLnByb3RvdHlwZS5pbnZva2VMYXRlciA9IEFzeW5jSW52b2tlTGF0ZXI7XG4gICAgQXN5bmMucHJvdG90eXBlLmludm9rZSA9IEFzeW5jSW52b2tlO1xuICAgIEFzeW5jLnByb3RvdHlwZS5zZXR0bGVQcm9taXNlcyA9IEFzeW5jU2V0dGxlUHJvbWlzZXM7XG59IGVsc2Uge1xuICAgIEFzeW5jLnByb3RvdHlwZS5pbnZva2VMYXRlciA9IGZ1bmN0aW9uIChmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgICAgICBpZiAodGhpcy5fdHJhbXBvbGluZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIEFzeW5jSW52b2tlTGF0ZXIuY2FsbCh0aGlzLCBmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBmbi5jYWxsKHJlY2VpdmVyLCBhcmcpO1xuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBBc3luYy5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24gKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgICAgIGlmICh0aGlzLl90cmFtcG9saW5lRW5hYmxlZCkge1xuICAgICAgICAgICAgQXN5bmNJbnZva2UuY2FsbCh0aGlzLCBmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBmbi5jYWxsKHJlY2VpdmVyLCBhcmcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQXN5bmMucHJvdG90eXBlLnNldHRsZVByb21pc2VzID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgICBpZiAodGhpcy5fdHJhbXBvbGluZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIEFzeW5jU2V0dGxlUHJvbWlzZXMuY2FsbCh0aGlzLCBwcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHByb21pc2UuX3NldHRsZVByb21pc2VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbkFzeW5jLnByb3RvdHlwZS5pbnZva2VGaXJzdCA9IGZ1bmN0aW9uIChmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgIHRoaXMuX25vcm1hbFF1ZXVlLnVuc2hpZnQoZm4sIHJlY2VpdmVyLCBhcmcpO1xuICAgIHRoaXMuX3F1ZXVlVGljaygpO1xufTtcblxuQXN5bmMucHJvdG90eXBlLl9kcmFpblF1ZXVlID0gZnVuY3Rpb24ocXVldWUpIHtcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoKCkgPiAwKSB7XG4gICAgICAgIHZhciBmbiA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgZm4uX3NldHRsZVByb21pc2VzKCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVjZWl2ZXIgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICB2YXIgYXJnID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgZm4uY2FsbChyZWNlaXZlciwgYXJnKTtcbiAgICB9XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuX2RyYWluUXVldWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2RyYWluUXVldWUodGhpcy5fbm9ybWFsUXVldWUpO1xuICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgdGhpcy5faGF2ZURyYWluZWRRdWV1ZXMgPSB0cnVlO1xuICAgIHRoaXMuX2RyYWluUXVldWUodGhpcy5fbGF0ZVF1ZXVlKTtcbn07XG5cbkFzeW5jLnByb3RvdHlwZS5fcXVldWVUaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5faXNUaWNrVXNlZCkge1xuICAgICAgICB0aGlzLl9pc1RpY2tVc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2NoZWR1bGUodGhpcy5kcmFpblF1ZXVlcyk7XG4gICAgfVxufTtcblxuQXN5bmMucHJvdG90eXBlLl9yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9pc1RpY2tVc2VkID0gZmFsc2U7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFzeW5jO1xubW9kdWxlLmV4cG9ydHMuZmlyc3RMaW5lRXJyb3IgPSBmaXJzdExpbmVFcnJvcjtcblxufSx7XCIuL3F1ZXVlXCI6MjYsXCIuL3NjaGVkdWxlXCI6MjksXCIuL3V0aWxcIjozNn1dLDM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBkZWJ1Zykge1xudmFyIGNhbGxlZEJpbmQgPSBmYWxzZTtcbnZhciByZWplY3RUaGlzID0gZnVuY3Rpb24oXywgZSkge1xuICAgIHRoaXMuX3JlamVjdChlKTtcbn07XG5cbnZhciB0YXJnZXRSZWplY3RlZCA9IGZ1bmN0aW9uKGUsIGNvbnRleHQpIHtcbiAgICBjb250ZXh0LnByb21pc2VSZWplY3Rpb25RdWV1ZWQgPSB0cnVlO1xuICAgIGNvbnRleHQuYmluZGluZ1Byb21pc2UuX3RoZW4ocmVqZWN0VGhpcywgcmVqZWN0VGhpcywgbnVsbCwgdGhpcywgZSk7XG59O1xuXG52YXIgYmluZGluZ1Jlc29sdmVkID0gZnVuY3Rpb24odGhpc0FyZywgY29udGV4dCkge1xuICAgIGlmICgoKHRoaXMuX2JpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICB0aGlzLl9yZXNvbHZlQ2FsbGJhY2soY29udGV4dC50YXJnZXQpO1xuICAgIH1cbn07XG5cbnZhciBiaW5kaW5nUmVqZWN0ZWQgPSBmdW5jdGlvbihlLCBjb250ZXh0KSB7XG4gICAgaWYgKCFjb250ZXh0LnByb21pc2VSZWplY3Rpb25RdWV1ZWQpIHRoaXMuX3JlamVjdChlKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAodGhpc0FyZykge1xuICAgIGlmICghY2FsbGVkQmluZCkge1xuICAgICAgICBjYWxsZWRCaW5kID0gdHJ1ZTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBkZWJ1Zy5wcm9wYWdhdGVGcm9tRnVuY3Rpb24oKTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2JvdW5kVmFsdWUgPSBkZWJ1Zy5ib3VuZFZhbHVlRnVuY3Rpb24oKTtcbiAgICB9XG4gICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodGhpc0FyZyk7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX3Byb3BhZ2F0ZUZyb20odGhpcywgMSk7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIHJldC5fc2V0Qm91bmRUbyhtYXliZVByb21pc2UpO1xuICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0ge1xuICAgICAgICAgICAgcHJvbWlzZVJlamVjdGlvblF1ZXVlZDogZmFsc2UsXG4gICAgICAgICAgICBwcm9taXNlOiByZXQsXG4gICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgICAgIGJpbmRpbmdQcm9taXNlOiBtYXliZVByb21pc2VcbiAgICAgICAgfTtcbiAgICAgICAgdGFyZ2V0Ll90aGVuKElOVEVSTkFMLCB0YXJnZXRSZWplY3RlZCwgdW5kZWZpbmVkLCByZXQsIGNvbnRleHQpO1xuICAgICAgICBtYXliZVByb21pc2UuX3RoZW4oXG4gICAgICAgICAgICBiaW5kaW5nUmVzb2x2ZWQsIGJpbmRpbmdSZWplY3RlZCwgdW5kZWZpbmVkLCByZXQsIGNvbnRleHQpO1xuICAgICAgICByZXQuX3NldE9uQ2FuY2VsKG1heWJlUHJvbWlzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0Ll9yZXNvbHZlQ2FsbGJhY2sodGFyZ2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRCb3VuZFRvID0gZnVuY3Rpb24gKG9iaikge1xuICAgIGlmIChvYmogIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMjA5NzE1MjtcbiAgICAgICAgdGhpcy5fYm91bmRUbyA9IG9iajtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkICYgKH4yMDk3MTUyKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNCb3VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMjA5NzE1MikgPT09IDIwOTcxNTI7XG59O1xuXG5Qcm9taXNlLmJpbmQgPSBmdW5jdGlvbiAodGhpc0FyZywgdmFsdWUpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS5iaW5kKHRoaXNBcmcpO1xufTtcbn07XG5cbn0se31dLDQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgb2xkO1xuaWYgKHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiKSBvbGQgPSBQcm9taXNlO1xuZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICB0cnkgeyBpZiAoUHJvbWlzZSA9PT0gYmx1ZWJpcmQpIFByb21pc2UgPSBvbGQ7IH1cbiAgICBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gYmx1ZWJpcmQ7XG59XG52YXIgYmx1ZWJpcmQgPSBfZGVyZXFfKFwiLi9wcm9taXNlXCIpKCk7XG5ibHVlYmlyZC5ub0NvbmZsaWN0ID0gbm9Db25mbGljdDtcbm1vZHVsZS5leHBvcnRzID0gYmx1ZWJpcmQ7XG5cbn0se1wiLi9wcm9taXNlXCI6MjJ9XSw1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIGNyID0gT2JqZWN0LmNyZWF0ZTtcbmlmIChjcikge1xuICAgIHZhciBjYWxsZXJDYWNoZSA9IGNyKG51bGwpO1xuICAgIHZhciBnZXR0ZXJDYWNoZSA9IGNyKG51bGwpO1xuICAgIGNhbGxlckNhY2hlW1wiIHNpemVcIl0gPSBnZXR0ZXJDYWNoZVtcIiBzaXplXCJdID0gMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgY2FuRXZhbHVhdGUgPSB1dGlsLmNhbkV2YWx1YXRlO1xudmFyIGlzSWRlbnRpZmllciA9IHV0aWwuaXNJZGVudGlmaWVyO1xuXG52YXIgZ2V0TWV0aG9kQ2FsbGVyO1xudmFyIGdldEdldHRlcjtcbmlmICghdHJ1ZSkge1xudmFyIG1ha2VNZXRob2RDYWxsZXIgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJlbnN1cmVNZXRob2RcIiwgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgJ3VzZSBzdHJpY3QnICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgZW5zdXJlTWV0aG9kKG9iaiwgJ21ldGhvZE5hbWUnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgc3dpdGNoKGxlbikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIG9iai5tZXRob2ROYW1lKHRoaXNbMF0pOyAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG9iai5tZXRob2ROYW1lKHRoaXNbMF0sIHRoaXNbMV0pOyAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIG9iai5tZXRob2ROYW1lKHRoaXNbMF0sIHRoaXNbMV0sIHRoaXNbMl0pOyAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIG9iai5tZXRob2ROYW1lKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLm1ldGhvZE5hbWUuYXBwbHkob2JqLCB0aGlzKTsgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICBcIi5yZXBsYWNlKC9tZXRob2ROYW1lL2csIG1ldGhvZE5hbWUpKShlbnN1cmVNZXRob2QpO1xufTtcblxudmFyIG1ha2VHZXR0ZXIgPSBmdW5jdGlvbiAocHJvcGVydHlOYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcIm9ialwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIHJldHVybiBvYmoucHJvcGVydHlOYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIFwiLnJlcGxhY2UoXCJwcm9wZXJ0eU5hbWVcIiwgcHJvcGVydHlOYW1lKSk7XG59O1xuXG52YXIgZ2V0Q29tcGlsZWQgPSBmdW5jdGlvbihuYW1lLCBjb21waWxlciwgY2FjaGUpIHtcbiAgICB2YXIgcmV0ID0gY2FjaGVbbmFtZV07XG4gICAgaWYgKHR5cGVvZiByZXQgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBpZiAoIWlzSWRlbnRpZmllcihuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0ID0gY29tcGlsZXIobmFtZSk7XG4gICAgICAgIGNhY2hlW25hbWVdID0gcmV0O1xuICAgICAgICBjYWNoZVtcIiBzaXplXCJdKys7XG4gICAgICAgIGlmIChjYWNoZVtcIiBzaXplXCJdID4gNTEyKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGNhY2hlKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIGRlbGV0ZSBjYWNoZVtrZXlzW2ldXTtcbiAgICAgICAgICAgIGNhY2hlW1wiIHNpemVcIl0gPSBrZXlzLmxlbmd0aCAtIDI1NjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuZ2V0TWV0aG9kQ2FsbGVyID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBnZXRDb21waWxlZChuYW1lLCBtYWtlTWV0aG9kQ2FsbGVyLCBjYWxsZXJDYWNoZSk7XG59O1xuXG5nZXRHZXR0ZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGdldENvbXBpbGVkKG5hbWUsIG1ha2VHZXR0ZXIsIGdldHRlckNhY2hlKTtcbn07XG59XG5cbmZ1bmN0aW9uIGVuc3VyZU1ldGhvZChvYmosIG1ldGhvZE5hbWUpIHtcbiAgICB2YXIgZm47XG4gICAgaWYgKG9iaiAhPSBudWxsKSBmbiA9IG9ialttZXRob2ROYW1lXTtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBcIk9iamVjdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcob2JqKSArIFwiIGhhcyBubyBtZXRob2QgJ1wiICtcbiAgICAgICAgICAgIHV0aWwudG9TdHJpbmcobWV0aG9kTmFtZSkgKyBcIidcIjtcbiAgICAgICAgdGhyb3cgbmV3IFByb21pc2UuVHlwZUVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gZm47XG59XG5cbmZ1bmN0aW9uIGNhbGxlcihvYmopIHtcbiAgICB2YXIgbWV0aG9kTmFtZSA9IHRoaXMucG9wKCk7XG4gICAgdmFyIGZuID0gZW5zdXJlTWV0aG9kKG9iaiwgbWV0aG9kTmFtZSk7XG4gICAgcmV0dXJuIGZuLmFwcGx5KG9iaiwgdGhpcyk7XG59XG5Qcm9taXNlLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcbiAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTs7XG4gICAgaWYgKCF0cnVlKSB7XG4gICAgICAgIGlmIChjYW5FdmFsdWF0ZSkge1xuICAgICAgICAgICAgdmFyIG1heWJlQ2FsbGVyID0gZ2V0TWV0aG9kQ2FsbGVyKG1ldGhvZE5hbWUpO1xuICAgICAgICAgICAgaWYgKG1heWJlQ2FsbGVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICAgICAgICAgIG1heWJlQ2FsbGVyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYXJncywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhcmdzLnB1c2gobWV0aG9kTmFtZSk7XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oY2FsbGVyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYXJncywgdW5kZWZpbmVkKTtcbn07XG5cbmZ1bmN0aW9uIG5hbWVkR2V0dGVyKG9iaikge1xuICAgIHJldHVybiBvYmpbdGhpc107XG59XG5mdW5jdGlvbiBpbmRleGVkR2V0dGVyKG9iaikge1xuICAgIHZhciBpbmRleCA9ICt0aGlzO1xuICAgIGlmIChpbmRleCA8IDApIGluZGV4ID0gTWF0aC5tYXgoMCwgaW5kZXggKyBvYmoubGVuZ3RoKTtcbiAgICByZXR1cm4gb2JqW2luZGV4XTtcbn1cblByb21pc2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUpIHtcbiAgICB2YXIgaXNJbmRleCA9ICh0eXBlb2YgcHJvcGVydHlOYW1lID09PSBcIm51bWJlclwiKTtcbiAgICB2YXIgZ2V0dGVyO1xuICAgIGlmICghaXNJbmRleCkge1xuICAgICAgICBpZiAoY2FuRXZhbHVhdGUpIHtcbiAgICAgICAgICAgIHZhciBtYXliZUdldHRlciA9IGdldEdldHRlcihwcm9wZXJ0eU5hbWUpO1xuICAgICAgICAgICAgZ2V0dGVyID0gbWF5YmVHZXR0ZXIgIT09IG51bGwgPyBtYXliZUdldHRlciA6IG5hbWVkR2V0dGVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2V0dGVyID0gbmFtZWRHZXR0ZXI7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBnZXR0ZXIgPSBpbmRleGVkR2V0dGVyO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGhlbihnZXR0ZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBwcm9wZXJ0eU5hbWUsIHVuZGVmaW5lZCk7XG59O1xufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uLCBkZWJ1Zykge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgYXN5bmMgPSBQcm9taXNlLl9hc3luYztcblxuUHJvbWlzZS5wcm90b3R5cGVbXCJicmVha1wiXSA9IFByb21pc2UucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghZGVidWcuY2FuY2VsbGF0aW9uKCkpIHJldHVybiB0aGlzLl93YXJuKFwiY2FuY2VsbGF0aW9uIGlzIGRpc2FibGVkXCIpO1xuXG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIHZhciBjaGlsZCA9IHByb21pc2U7XG4gICAgd2hpbGUgKHByb21pc2UuaXNDYW5jZWxsYWJsZSgpKSB7XG4gICAgICAgIGlmICghcHJvbWlzZS5fY2FuY2VsQnkoY2hpbGQpKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQuX2lzRm9sbG93aW5nKCkpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hpbGQuX2NhbmNlbEJyYW5jaGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJlbnQgPSBwcm9taXNlLl9jYW5jZWxsYXRpb25QYXJlbnQ7XG4gICAgICAgIGlmIChwYXJlbnQgPT0gbnVsbCB8fCAhcGFyZW50LmlzQ2FuY2VsbGFibGUoKSkge1xuICAgICAgICAgICAgaWYgKHByb21pc2UuX2lzRm9sbG93aW5nKCkpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9mb2xsb3dlZSgpLmNhbmNlbCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9jYW5jZWxCcmFuY2hlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAocHJvbWlzZS5faXNGb2xsb3dpbmcoKSkgcHJvbWlzZS5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIGNoaWxkID0gcHJvbWlzZTtcbiAgICAgICAgICAgIHByb21pc2UgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fYnJhbmNoSGFzQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbC0tO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Vub3VnaEJyYW5jaGVzSGF2ZUNhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgdGhpcy5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA8PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NhbmNlbEJ5ID0gZnVuY3Rpb24oY2FuY2VsbGVyKSB7XG4gICAgaWYgKGNhbmNlbGxlciA9PT0gdGhpcykge1xuICAgICAgICB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gMDtcbiAgICAgICAgdGhpcy5faW52b2tlT25DYW5jZWwoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYnJhbmNoSGFzQ2FuY2VsbGVkKCk7XG4gICAgICAgIGlmICh0aGlzLl9lbm91Z2hCcmFuY2hlc0hhdmVDYW5jZWxsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5faW52b2tlT25DYW5jZWwoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9jYW5jZWxCcmFuY2hlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9lbm91Z2hCcmFuY2hlc0hhdmVDYW5jZWxsZWQoKSkge1xuICAgICAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmlzQ2FuY2VsbGFibGUoKSkgcmV0dXJuO1xuXG4gICAgdGhpcy5fc2V0Q2FuY2VsbGVkKCk7XG4gICAgYXN5bmMuaW52b2tlKHRoaXMuX2NhbmNlbFByb21pc2VzLCB0aGlzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NhbmNlbFByb21pc2VzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2xlbmd0aCgpID4gMCkgdGhpcy5fc2V0dGxlUHJvbWlzZXMoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldE9uQ2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fb25DYW5jZWxGaWVsZCA9IHVuZGVmaW5lZDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzQ2FuY2VsbGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1BlbmRpbmcoKSAmJiAhdGhpcy5pc0NhbmNlbGxlZCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2RvSW52b2tlT25DYW5jZWwgPSBmdW5jdGlvbihvbkNhbmNlbENhbGxiYWNrLCBpbnRlcm5hbE9ubHkpIHtcbiAgICBpZiAodXRpbC5pc0FycmF5KG9uQ2FuY2VsQ2FsbGJhY2spKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb25DYW5jZWxDYWxsYmFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fZG9JbnZva2VPbkNhbmNlbChvbkNhbmNlbENhbGxiYWNrW2ldLCBpbnRlcm5hbE9ubHkpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChvbkNhbmNlbENhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvbkNhbmNlbENhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGlmICghaW50ZXJuYWxPbmx5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0cnlDYXRjaChvbkNhbmNlbENhbGxiYWNrKS5jYWxsKHRoaXMuX2JvdW5kVmFsdWUoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGUgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F0dGFjaEV4dHJhVHJhY2UoZS5lKTtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlLmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uQ2FuY2VsQ2FsbGJhY2suX3Jlc3VsdENhbmNlbGxlZCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pbnZva2VPbkNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbkNhbmNlbENhbGxiYWNrID0gdGhpcy5fb25DYW5jZWwoKTtcbiAgICB0aGlzLl91bnNldE9uQ2FuY2VsKCk7XG4gICAgYXN5bmMuaW52b2tlKHRoaXMuX2RvSW52b2tlT25DYW5jZWwsIHRoaXMsIG9uQ2FuY2VsQ2FsbGJhY2spO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2ludm9rZUludGVybmFsT25DYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5pc0NhbmNlbGxhYmxlKCkpIHtcbiAgICAgICAgdGhpcy5fZG9JbnZva2VPbkNhbmNlbCh0aGlzLl9vbkNhbmNlbCgpLCB0cnVlKTtcbiAgICAgICAgdGhpcy5fdW5zZXRPbkNhbmNlbCgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNhbmNlbCgpO1xufTtcblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE5FWFRfRklMVEVSKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgZ2V0S2V5cyA9IF9kZXJlcV8oXCIuL2VzNVwiKS5rZXlzO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG5cbmZ1bmN0aW9uIGNhdGNoRmlsdGVyKGluc3RhbmNlcywgY2IsIHByb21pc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgYm91bmRUbyA9IHByb21pc2UuX2JvdW5kVmFsdWUoKTtcbiAgICAgICAgcHJlZGljYXRlTG9vcDogZm9yICh2YXIgaSA9IDA7IGkgPCBpbnN0YW5jZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gaW5zdGFuY2VzW2ldO1xuXG4gICAgICAgICAgICBpZiAoaXRlbSA9PT0gRXJyb3IgfHxcbiAgICAgICAgICAgICAgICAoaXRlbSAhPSBudWxsICYmIGl0ZW0ucHJvdG90eXBlIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnlDYXRjaChjYikuY2FsbChib3VuZFRvLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlc1ByZWRpY2F0ZSA9IHRyeUNhdGNoKGl0ZW0pLmNhbGwoYm91bmRUbywgZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXNQcmVkaWNhdGUgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVzUHJlZGljYXRlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hlc1ByZWRpY2F0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ5Q2F0Y2goY2IpLmNhbGwoYm91bmRUbywgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh1dGlsLmlzT2JqZWN0KGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBnZXRLZXlzKGl0ZW0pO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwga2V5cy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1ba2V5XSAhPSBlW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHByZWRpY2F0ZUxvb3A7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyeUNhdGNoKGNiKS5jYWxsKGJvdW5kVG8sIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBORVhUX0ZJTFRFUjtcbiAgICB9O1xufVxuXG5yZXR1cm4gY2F0Y2hGaWx0ZXI7XG59O1xuXG59LHtcIi4vZXM1XCI6MTMsXCIuL3V0aWxcIjozNn1dLDg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciBsb25nU3RhY2tUcmFjZXMgPSBmYWxzZTtcbnZhciBjb250ZXh0U3RhY2sgPSBbXTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Byb21pc2VDcmVhdGVkID0gZnVuY3Rpb24oKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IGZ1bmN0aW9uKCkge307XG5Qcm9taXNlLnByb3RvdHlwZS5fcG9wQ29udGV4dCA9IGZ1bmN0aW9uKCkge3JldHVybiBudWxsO307XG5Qcm9taXNlLl9wZWVrQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dCA9IGZ1bmN0aW9uKCkge307XG5cbmZ1bmN0aW9uIENvbnRleHQoKSB7XG4gICAgdGhpcy5fdHJhY2UgPSBuZXcgQ29udGV4dC5DYXB0dXJlZFRyYWNlKHBlZWtDb250ZXh0KCkpO1xufVxuQ29udGV4dC5wcm90b3R5cGUuX3B1c2hDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl90cmFjZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX3RyYWNlLl9wcm9taXNlQ3JlYXRlZCA9IG51bGw7XG4gICAgICAgIGNvbnRleHRTdGFjay5wdXNoKHRoaXMuX3RyYWNlKTtcbiAgICB9XG59O1xuXG5Db250ZXh0LnByb3RvdHlwZS5fcG9wQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgdHJhY2UgPSBjb250ZXh0U3RhY2sucG9wKCk7XG4gICAgICAgIHZhciByZXQgPSB0cmFjZS5fcHJvbWlzZUNyZWF0ZWQ7XG4gICAgICAgIHRyYWNlLl9wcm9taXNlQ3JlYXRlZCA9IG51bGw7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlQ29udGV4dCgpIHtcbiAgICBpZiAobG9uZ1N0YWNrVHJhY2VzKSByZXR1cm4gbmV3IENvbnRleHQoKTtcbn1cblxuZnVuY3Rpb24gcGVla0NvbnRleHQoKSB7XG4gICAgdmFyIGxhc3RJbmRleCA9IGNvbnRleHRTdGFjay5sZW5ndGggLSAxO1xuICAgIGlmIChsYXN0SW5kZXggPj0gMCkge1xuICAgICAgICByZXR1cm4gY29udGV4dFN0YWNrW2xhc3RJbmRleF07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5Db250ZXh0LkNhcHR1cmVkVHJhY2UgPSBudWxsO1xuQ29udGV4dC5jcmVhdGUgPSBjcmVhdGVDb250ZXh0O1xuQ29udGV4dC5kZWFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7fTtcbkNvbnRleHQuYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgUHJvbWlzZV9wdXNoQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dDtcbiAgICB2YXIgUHJvbWlzZV9wb3BDb250ZXh0ID0gUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfUGVla0NvbnRleHQgPSBQcm9taXNlLl9wZWVrQ29udGV4dDtcbiAgICB2YXIgUHJvbWlzZV9wZWVrQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dDtcbiAgICB2YXIgUHJvbWlzZV9wcm9taXNlQ3JlYXRlZCA9IFByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZDtcbiAgICBDb250ZXh0LmRlYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3B1c2hDb250ZXh0ID0gUHJvbWlzZV9wdXNoQ29udGV4dDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBQcm9taXNlX3BvcENvbnRleHQ7XG4gICAgICAgIFByb21pc2UuX3BlZWtDb250ZXh0ID0gUHJvbWlzZV9QZWVrQ29udGV4dDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3BlZWtDb250ZXh0ID0gUHJvbWlzZV9wZWVrQ29udGV4dDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb21pc2VDcmVhdGVkID0gUHJvbWlzZV9wcm9taXNlQ3JlYXRlZDtcbiAgICAgICAgbG9uZ1N0YWNrVHJhY2VzID0gZmFsc2U7XG4gICAgfTtcbiAgICBsb25nU3RhY2tUcmFjZXMgPSB0cnVlO1xuICAgIFByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IENvbnRleHQucHJvdG90eXBlLl9wdXNoQ29udGV4dDtcbiAgICBQcm9taXNlLnByb3RvdHlwZS5fcG9wQ29udGV4dCA9IENvbnRleHQucHJvdG90eXBlLl9wb3BDb250ZXh0O1xuICAgIFByb21pc2UuX3BlZWtDb250ZXh0ID0gUHJvbWlzZS5wcm90b3R5cGUuX3BlZWtDb250ZXh0ID0gcGVla0NvbnRleHQ7XG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb21pc2VDcmVhdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjdHggPSB0aGlzLl9wZWVrQ29udGV4dCgpO1xuICAgICAgICBpZiAoY3R4ICYmIGN0eC5fcHJvbWlzZUNyZWF0ZWQgPT0gbnVsbCkgY3R4Ll9wcm9taXNlQ3JlYXRlZCA9IHRoaXM7XG4gICAgfTtcbn07XG5yZXR1cm4gQ29udGV4dDtcbn07XG5cbn0se31dLDk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIENvbnRleHQpIHtcbnZhciBnZXREb21haW4gPSBQcm9taXNlLl9nZXREb21haW47XG52YXIgYXN5bmMgPSBQcm9taXNlLl9hc3luYztcbnZhciBXYXJuaW5nID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpLldhcm5pbmc7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgY2FuQXR0YWNoVHJhY2UgPSB1dGlsLmNhbkF0dGFjaFRyYWNlO1xudmFyIHVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQ7XG52YXIgcG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb247XG52YXIgYmx1ZWJpcmRGcmFtZVBhdHRlcm4gPVxuICAgIC9bXFxcXFxcL11ibHVlYmlyZFtcXFxcXFwvXWpzW1xcXFxcXC9dKHJlbGVhc2V8ZGVidWd8aW5zdHJ1bWVudGVkKS87XG52YXIgc3RhY2tGcmFtZVBhdHRlcm4gPSBudWxsO1xudmFyIGZvcm1hdFN0YWNrID0gbnVsbDtcbnZhciBpbmRlbnRTdGFja0ZyYW1lcyA9IGZhbHNlO1xudmFyIHByaW50V2FybmluZztcbnZhciBkZWJ1Z2dpbmcgPSAhISh1dGlsLmVudihcIkJMVUVCSVJEX0RFQlVHXCIpICE9IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICh0cnVlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5lbnYoXCJCTFVFQklSRF9ERUJVR1wiKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuZW52KFwiTk9ERV9FTlZcIikgPT09IFwiZGV2ZWxvcG1lbnRcIikpO1xuXG52YXIgd2FybmluZ3MgPSAhISh1dGlsLmVudihcIkJMVUVCSVJEX1dBUk5JTkdTXCIpICE9IDAgJiZcbiAgICAoZGVidWdnaW5nIHx8IHV0aWwuZW52KFwiQkxVRUJJUkRfV0FSTklOR1NcIikpKTtcblxudmFyIGxvbmdTdGFja1RyYWNlcyA9ICEhKHV0aWwuZW52KFwiQkxVRUJJUkRfTE9OR19TVEFDS19UUkFDRVNcIikgIT0gMCAmJlxuICAgIChkZWJ1Z2dpbmcgfHwgdXRpbC5lbnYoXCJCTFVFQklSRF9MT05HX1NUQUNLX1RSQUNFU1wiKSkpO1xuXG52YXIgd0ZvcmdvdHRlblJldHVybiA9IHV0aWwuZW52KFwiQkxVRUJJUkRfV19GT1JHT1RURU5fUkVUVVJOXCIpICE9IDAgJiZcbiAgICAod2FybmluZ3MgfHwgISF1dGlsLmVudihcIkJMVUVCSVJEX1dfRk9SR09UVEVOX1JFVFVSTlwiKSk7XG5cblByb21pc2UucHJvdG90eXBlLnN1cHByZXNzVW5oYW5kbGVkUmVqZWN0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLl90YXJnZXQoKTtcbiAgICB0YXJnZXQuX2JpdEZpZWxkID0gKCh0YXJnZXQuX2JpdEZpZWxkICYgKH4xMDQ4NTc2KSkgfFxuICAgICAgICAgICAgICAgICAgICAgIDUyNDI4OCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZW5zdXJlUG9zc2libGVSZWplY3Rpb25IYW5kbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICgodGhpcy5fYml0RmllbGQgJiA1MjQyODgpICE9PSAwKSByZXR1cm47XG4gICAgdGhpcy5fc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKTtcbiAgICBhc3luYy5pbnZva2VMYXRlcih0aGlzLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb24sIHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbm90aWZ5VW5oYW5kbGVkUmVqZWN0aW9uSXNIYW5kbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIGZpcmVSZWplY3Rpb25FdmVudChcInJlamVjdGlvbkhhbmRsZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkLCB1bmRlZmluZWQsIHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFJldHVybmVkTm9uVW5kZWZpbmVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDI2ODQzNTQ1Njtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZXR1cm5lZE5vblVuZGVmaW5lZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAyNjg0MzU0NTYpICE9PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5faXNSZWplY3Rpb25VbmhhbmRsZWQoKSkge1xuICAgICAgICB2YXIgcmVhc29uID0gdGhpcy5fc2V0dGxlZFZhbHVlKCk7XG4gICAgICAgIHRoaXMuX3NldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQoKTtcbiAgICAgICAgZmlyZVJlamVjdGlvbkV2ZW50KFwidW5oYW5kbGVkUmVqZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uLCByZWFzb24sIHRoaXMpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAyNjIxNDQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdW5zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjI2MjE0NCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNVbmhhbmRsZWRSZWplY3Rpb25Ob3RpZmllZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMjYyMTQ0KSA+IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDEwNDg1NzY7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkICYgKH4xMDQ4NTc2KTtcbiAgICBpZiAodGhpcy5faXNVbmhhbmRsZWRSZWplY3Rpb25Ob3RpZmllZCgpKSB7XG4gICAgICAgIHRoaXMuX3Vuc2V0VW5oYW5kbGVkUmVqZWN0aW9uSXNOb3RpZmllZCgpO1xuICAgICAgICB0aGlzLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb25Jc0hhbmRsZWQoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNSZWplY3Rpb25VbmhhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDEwNDg1NzYpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl93YXJuID0gZnVuY3Rpb24obWVzc2FnZSwgc2hvdWxkVXNlT3duVHJhY2UsIHByb21pc2UpIHtcbiAgICByZXR1cm4gd2FybihtZXNzYWdlLCBzaG91bGRVc2VPd25UcmFjZSwgcHJvbWlzZSB8fCB0aGlzKTtcbn07XG5cblByb21pc2Uub25Qb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9IGZ1bmN0aW9uIChmbikge1xuICAgIHZhciBkb21haW4gPSBnZXREb21haW4oKTtcbiAgICBwb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9XG4gICAgICAgIHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiID8gKGRvbWFpbiA9PT0gbnVsbCA/IGZuIDogZG9tYWluLmJpbmQoZm4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG59O1xuXG5Qcm9taXNlLm9uVW5oYW5kbGVkUmVqZWN0aW9uSGFuZGxlZCA9IGZ1bmN0aW9uIChmbikge1xuICAgIHZhciBkb21haW4gPSBnZXREb21haW4oKTtcbiAgICB1bmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkID1cbiAgICAgICAgdHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIgPyAoZG9tYWluID09PSBudWxsID8gZm4gOiBkb21haW4uYmluZChmbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbn07XG5cbnZhciBkaXNhYmxlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7fTtcblByb21pc2UubG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChhc3luYy5oYXZlSXRlbXNRdWV1ZWQoKSAmJiAhY29uZmlnLmxvbmdTdGFja1RyYWNlcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYW5ub3QgZW5hYmxlIGxvbmcgc3RhY2sgdHJhY2VzIGFmdGVyIHByb21pc2VzIGhhdmUgYmVlbiBjcmVhdGVkXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgaWYgKCFjb25maWcubG9uZ1N0YWNrVHJhY2VzICYmIGxvbmdTdGFja1RyYWNlc0lzU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgdmFyIFByb21pc2VfY2FwdHVyZVN0YWNrVHJhY2UgPSBQcm9taXNlLnByb3RvdHlwZS5fY2FwdHVyZVN0YWNrVHJhY2U7XG4gICAgICAgIHZhciBQcm9taXNlX2F0dGFjaEV4dHJhVHJhY2UgPSBQcm9taXNlLnByb3RvdHlwZS5fYXR0YWNoRXh0cmFUcmFjZTtcbiAgICAgICAgY29uZmlnLmxvbmdTdGFja1RyYWNlcyA9IHRydWU7XG4gICAgICAgIGRpc2FibGVMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChhc3luYy5oYXZlSXRlbXNRdWV1ZWQoKSAmJiAhY29uZmlnLmxvbmdTdGFja1RyYWNlcykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbm5vdCBlbmFibGUgbG9uZyBzdGFjayB0cmFjZXMgYWZ0ZXIgcHJvbWlzZXMgaGF2ZSBiZWVuIGNyZWF0ZWRcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2NhcHR1cmVTdGFja1RyYWNlID0gUHJvbWlzZV9jYXB0dXJlU3RhY2tUcmFjZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hFeHRyYVRyYWNlID0gUHJvbWlzZV9hdHRhY2hFeHRyYVRyYWNlO1xuICAgICAgICAgICAgQ29udGV4dC5kZWFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzKCk7XG4gICAgICAgICAgICBhc3luYy5lbmFibGVUcmFtcG9saW5lKCk7XG4gICAgICAgICAgICBjb25maWcubG9uZ1N0YWNrVHJhY2VzID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZSA9IGxvbmdTdGFja1RyYWNlc0NhcHR1cmVTdGFja1RyYWNlO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fYXR0YWNoRXh0cmFUcmFjZSA9IGxvbmdTdGFja1RyYWNlc0F0dGFjaEV4dHJhVHJhY2U7XG4gICAgICAgIENvbnRleHQuYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMoKTtcbiAgICAgICAgYXN5bmMuZGlzYWJsZVRyYW1wb2xpbmVJZk5lY2Vzc2FyeSgpO1xuICAgIH1cbn07XG5cblByb21pc2UuaGFzTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjb25maWcubG9uZ1N0YWNrVHJhY2VzICYmIGxvbmdTdGFja1RyYWNlc0lzU3VwcG9ydGVkKCk7XG59O1xuXG52YXIgZmlyZURvbUV2ZW50ID0gKGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7XG4gICAgICAgIGV2ZW50LmluaXRDdXN0b21FdmVudChcInRlc3Rpbmd0aGVldmVudFwiLCBmYWxzZSwgdHJ1ZSwge30pO1xuICAgICAgICB1dGlsLmdsb2JhbC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgZG9tRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO1xuICAgICAgICAgICAgZG9tRXZlbnQuaW5pdEN1c3RvbUV2ZW50KG5hbWUudG9Mb3dlckNhc2UoKSwgZmFsc2UsIHRydWUsIGV2ZW50KTtcbiAgICAgICAgICAgIHJldHVybiAhdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChkb21FdmVudCk7XG4gICAgICAgIH07XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufSkoKTtcblxudmFyIGZpcmVHbG9iYWxFdmVudCA9IChmdW5jdGlvbigpIHtcbiAgICBpZiAodXRpbC5pc05vZGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3MuZW1pdC5hcHBseShwcm9jZXNzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdXRpbC5nbG9iYWwpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IFwib25cIiArIG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSB1dGlsLmdsb2JhbFttZXRob2ROYW1lXTtcbiAgICAgICAgICAgIGlmICghbWV0aG9kKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBtZXRob2QuYXBwbHkodXRpbC5nbG9iYWwsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdChuYW1lLCBwcm9taXNlKSB7XG4gICAgcmV0dXJuIHtwcm9taXNlOiBwcm9taXNlfTtcbn1cblxudmFyIGV2ZW50VG9PYmplY3RHZW5lcmF0b3IgPSB7XG4gICAgcHJvbWlzZUNyZWF0ZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VGdWxmaWxsZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VSZWplY3RlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3QsXG4gICAgcHJvbWlzZVJlc29sdmVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlQ2FuY2VsbGVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlQ2hhaW5lZDogZnVuY3Rpb24obmFtZSwgcHJvbWlzZSwgY2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIHtwcm9taXNlOiBwcm9taXNlLCBjaGlsZDogY2hpbGR9O1xuICAgIH0sXG4gICAgd2FybmluZzogZnVuY3Rpb24obmFtZSwgd2FybmluZykge1xuICAgICAgICByZXR1cm4ge3dhcm5pbmc6IHdhcm5pbmd9O1xuICAgIH0sXG4gICAgdW5oYW5kbGVkUmVqZWN0aW9uOiBmdW5jdGlvbiAobmFtZSwgcmVhc29uLCBwcm9taXNlKSB7XG4gICAgICAgIHJldHVybiB7cmVhc29uOiByZWFzb24sIHByb21pc2U6IHByb21pc2V9O1xuICAgIH0sXG4gICAgcmVqZWN0aW9uSGFuZGxlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3Rcbn07XG5cbnZhciBhY3RpdmVGaXJlRXZlbnQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBnbG9iYWxFdmVudEZpcmVkID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgZ2xvYmFsRXZlbnRGaXJlZCA9IGZpcmVHbG9iYWxFdmVudC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlKTtcbiAgICAgICAgZ2xvYmFsRXZlbnRGaXJlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGRvbUV2ZW50RmlyZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBkb21FdmVudEZpcmVkID0gZmlyZURvbUV2ZW50KG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VG9PYmplY3RHZW5lcmF0b3JbbmFtZV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUpO1xuICAgICAgICBkb21FdmVudEZpcmVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tRXZlbnRGaXJlZCB8fCBnbG9iYWxFdmVudEZpcmVkO1xufTtcblxuUHJvbWlzZS5jb25maWcgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgb3B0cyA9IE9iamVjdChvcHRzKTtcbiAgICBpZiAoXCJsb25nU3RhY2tUcmFjZXNcIiBpbiBvcHRzKSB7XG4gICAgICAgIGlmIChvcHRzLmxvbmdTdGFja1RyYWNlcykge1xuICAgICAgICAgICAgUHJvbWlzZS5sb25nU3RhY2tUcmFjZXMoKTtcbiAgICAgICAgfSBlbHNlIGlmICghb3B0cy5sb25nU3RhY2tUcmFjZXMgJiYgUHJvbWlzZS5oYXNMb25nU3RhY2tUcmFjZXMoKSkge1xuICAgICAgICAgICAgZGlzYWJsZUxvbmdTdGFja1RyYWNlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChcIndhcm5pbmdzXCIgaW4gb3B0cykge1xuICAgICAgICB2YXIgd2FybmluZ3NPcHRpb24gPSBvcHRzLndhcm5pbmdzO1xuICAgICAgICBjb25maWcud2FybmluZ3MgPSAhIXdhcm5pbmdzT3B0aW9uO1xuICAgICAgICB3Rm9yZ290dGVuUmV0dXJuID0gY29uZmlnLndhcm5pbmdzO1xuXG4gICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KHdhcm5pbmdzT3B0aW9uKSkge1xuICAgICAgICAgICAgaWYgKFwid0ZvcmdvdHRlblJldHVyblwiIGluIHdhcm5pbmdzT3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgd0ZvcmdvdHRlblJldHVybiA9ICEhd2FybmluZ3NPcHRpb24ud0ZvcmdvdHRlblJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoXCJjYW5jZWxsYXRpb25cIiBpbiBvcHRzICYmIG9wdHMuY2FuY2VsbGF0aW9uICYmICFjb25maWcuY2FuY2VsbGF0aW9uKSB7XG4gICAgICAgIGlmIChhc3luYy5oYXZlSXRlbXNRdWV1ZWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIFwiY2Fubm90IGVuYWJsZSBjYW5jZWxsYXRpb24gYWZ0ZXIgcHJvbWlzZXMgYXJlIGluIHVzZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fY2xlYXJDYW5jZWxsYXRpb25EYXRhID1cbiAgICAgICAgICAgIGNhbmNlbGxhdGlvbkNsZWFyQ2FuY2VsbGF0aW9uRGF0YTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fb25DYW5jZWwgPSBjYW5jZWxsYXRpb25PbkNhbmNlbDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3NldE9uQ2FuY2VsID0gY2FuY2VsbGF0aW9uU2V0T25DYW5jZWw7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayA9XG4gICAgICAgICAgICBjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjaztcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBjYW5jZWxsYXRpb25FeGVjdXRlO1xuICAgICAgICBwcm9wYWdhdGVGcm9tRnVuY3Rpb24gPSBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tO1xuICAgICAgICBjb25maWcuY2FuY2VsbGF0aW9uID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKFwibW9uaXRvcmluZ1wiIGluIG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMubW9uaXRvcmluZyAmJiAhY29uZmlnLm1vbml0b3JpbmcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5tb25pdG9yaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBhY3RpdmVGaXJlRXZlbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAoIW9wdHMubW9uaXRvcmluZyAmJiBjb25maWcubW9uaXRvcmluZykge1xuICAgICAgICAgICAgY29uZmlnLm1vbml0b3JpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBkZWZhdWx0RmlyZUV2ZW50O1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZnVuY3Rpb24gZGVmYXVsdEZpcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG5cblByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBkZWZhdWx0RmlyZUV2ZW50O1xuUHJvbWlzZS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBmdW5jdGlvbihleGVjdXRvciwgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn07XG5Qcm9taXNlLnByb3RvdHlwZS5fb25DYW5jZWwgPSBmdW5jdGlvbiAoKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9zZXRPbkNhbmNlbCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7IDsgfTtcblByb21pc2UucHJvdG90eXBlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uKG9uQ2FuY2VsKSB7XG4gICAgO1xufTtcblByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZSA9IGZ1bmN0aW9uICgpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2UgPSBmdW5jdGlvbiAoKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9jbGVhckNhbmNlbGxhdGlvbkRhdGEgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBmdW5jdGlvbiAocGFyZW50LCBmbGFncykge1xuICAgIDtcbiAgICA7XG59O1xuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25FeGVjdXRlKGV4ZWN1dG9yLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0LCBmdW5jdGlvbihvbkNhbmNlbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbkNhbmNlbCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIm9uQ2FuY2VsIG11c3QgYmUgYSBmdW5jdGlvbiwgZ290OiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLnRvU3RyaW5nKG9uQ2FuY2VsKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhvbkNhbmNlbCk7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhvbkNhbmNlbCkge1xuICAgIGlmICghdGhpcy5pc0NhbmNlbGxhYmxlKCkpIHJldHVybiB0aGlzO1xuXG4gICAgdmFyIHByZXZpb3VzT25DYW5jZWwgPSB0aGlzLl9vbkNhbmNlbCgpO1xuICAgIGlmIChwcmV2aW91c09uQ2FuY2VsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHV0aWwuaXNBcnJheShwcmV2aW91c09uQ2FuY2VsKSkge1xuICAgICAgICAgICAgcHJldmlvdXNPbkNhbmNlbC5wdXNoKG9uQ2FuY2VsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NldE9uQ2FuY2VsKFtwcmV2aW91c09uQ2FuY2VsLCBvbkNhbmNlbF0pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc2V0T25DYW5jZWwob25DYW5jZWwpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2FuY2VsbGF0aW9uT25DYW5jZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29uQ2FuY2VsRmllbGQ7XG59XG5cbmZ1bmN0aW9uIGNhbmNlbGxhdGlvblNldE9uQ2FuY2VsKG9uQ2FuY2VsKSB7XG4gICAgdGhpcy5fb25DYW5jZWxGaWVsZCA9IG9uQ2FuY2VsO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25DbGVhckNhbmNlbGxhdGlvbkRhdGEoKSB7XG4gICAgdGhpcy5fY2FuY2VsbGF0aW9uUGFyZW50ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX29uQ2FuY2VsRmllbGQgPSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGNhbmNlbGxhdGlvblByb3BhZ2F0ZUZyb20ocGFyZW50LCBmbGFncykge1xuICAgIGlmICgoZmxhZ3MgJiAxKSAhPT0gMCkge1xuICAgICAgICB0aGlzLl9jYW5jZWxsYXRpb25QYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHZhciBicmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gcGFyZW50Ll9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsO1xuICAgICAgICBpZiAoYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBicmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gMDtcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnQuX2JyYW5jaGVzUmVtYWluaW5nVG9DYW5jZWwgPSBicmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsICsgMTtcbiAgICB9XG4gICAgaWYgKChmbGFncyAmIDIpICE9PSAwICYmIHBhcmVudC5faXNCb3VuZCgpKSB7XG4gICAgICAgIHRoaXMuX3NldEJvdW5kVG8ocGFyZW50Ll9ib3VuZFRvKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJpbmRpbmdQcm9wYWdhdGVGcm9tKHBhcmVudCwgZmxhZ3MpIHtcbiAgICBpZiAoKGZsYWdzICYgMikgIT09IDAgJiYgcGFyZW50Ll9pc0JvdW5kKCkpIHtcbiAgICAgICAgdGhpcy5fc2V0Qm91bmRUbyhwYXJlbnQuX2JvdW5kVG8pO1xuICAgIH1cbn1cbnZhciBwcm9wYWdhdGVGcm9tRnVuY3Rpb24gPSBiaW5kaW5nUHJvcGFnYXRlRnJvbTtcblxuZnVuY3Rpb24gYm91bmRWYWx1ZUZ1bmN0aW9uKCkge1xuICAgIHZhciByZXQgPSB0aGlzLl9ib3VuZFRvO1xuICAgIGlmIChyZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAocmV0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgaWYgKHJldC5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldC52YWx1ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGxvbmdTdGFja1RyYWNlc0NhcHR1cmVTdGFja1RyYWNlKCkge1xuICAgIHRoaXMuX3RyYWNlID0gbmV3IENhcHR1cmVkVHJhY2UodGhpcy5fcGVla0NvbnRleHQoKSk7XG59XG5cbmZ1bmN0aW9uIGxvbmdTdGFja1RyYWNlc0F0dGFjaEV4dHJhVHJhY2UoZXJyb3IsIGlnbm9yZVNlbGYpIHtcbiAgICBpZiAoY2FuQXR0YWNoVHJhY2UoZXJyb3IpKSB7XG4gICAgICAgIHZhciB0cmFjZSA9IHRoaXMuX3RyYWNlO1xuICAgICAgICBpZiAodHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKGlnbm9yZVNlbGYpIHRyYWNlID0gdHJhY2UuX3BhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdHJhY2UuYXR0YWNoRXh0cmFUcmFjZShlcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoIWVycm9yLl9fc3RhY2tDbGVhbmVkX18pIHtcbiAgICAgICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcik7XG4gICAgICAgICAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKGVycm9yLCBcInN0YWNrXCIsXG4gICAgICAgICAgICAgICAgcGFyc2VkLm1lc3NhZ2UgKyBcIlxcblwiICsgcGFyc2VkLnN0YWNrLmpvaW4oXCJcXG5cIikpO1xuICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChlcnJvciwgXCJfX3N0YWNrQ2xlYW5lZF9fXCIsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjaGVja0ZvcmdvdHRlblJldHVybnMocmV0dXJuVmFsdWUsIHByb21pc2VDcmVhdGVkLCBuYW1lLCBwcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCkge1xuICAgIGlmIChyZXR1cm5WYWx1ZSA9PT0gdW5kZWZpbmVkICYmIHByb21pc2VDcmVhdGVkICE9PSBudWxsICYmXG4gICAgICAgIHdGb3Jnb3R0ZW5SZXR1cm4pIHtcbiAgICAgICAgaWYgKHBhcmVudCAhPT0gdW5kZWZpbmVkICYmIHBhcmVudC5fcmV0dXJuZWROb25VbmRlZmluZWQoKSkgcmV0dXJuO1xuICAgICAgICBpZiAoKHByb21pc2UuX2JpdEZpZWxkICYgNjU1MzUpID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgaWYgKG5hbWUpIG5hbWUgPSBuYW1lICsgXCIgXCI7XG4gICAgICAgIHZhciBtc2cgPSBcImEgcHJvbWlzZSB3YXMgY3JlYXRlZCBpbiBhIFwiICsgbmFtZSArXG4gICAgICAgICAgICBcImhhbmRsZXIgYnV0IHdhcyBub3QgcmV0dXJuZWQgZnJvbSBpdFwiO1xuICAgICAgICBwcm9taXNlLl93YXJuKG1zZywgdHJ1ZSwgcHJvbWlzZUNyZWF0ZWQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVwcmVjYXRlZChuYW1lLCByZXBsYWNlbWVudCkge1xuICAgIHZhciBtZXNzYWdlID0gbmFtZSArXG4gICAgICAgIFwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uLlwiO1xuICAgIGlmIChyZXBsYWNlbWVudCkgbWVzc2FnZSArPSBcIiBVc2UgXCIgKyByZXBsYWNlbWVudCArIFwiIGluc3RlYWQuXCI7XG4gICAgcmV0dXJuIHdhcm4obWVzc2FnZSk7XG59XG5cbmZ1bmN0aW9uIHdhcm4obWVzc2FnZSwgc2hvdWxkVXNlT3duVHJhY2UsIHByb21pc2UpIHtcbiAgICBpZiAoIWNvbmZpZy53YXJuaW5ncykgcmV0dXJuO1xuICAgIHZhciB3YXJuaW5nID0gbmV3IFdhcm5pbmcobWVzc2FnZSk7XG4gICAgdmFyIGN0eDtcbiAgICBpZiAoc2hvdWxkVXNlT3duVHJhY2UpIHtcbiAgICAgICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZSh3YXJuaW5nKTtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgKGN0eCA9IFByb21pc2UuX3BlZWtDb250ZXh0KCkpKSB7XG4gICAgICAgIGN0eC5hdHRhY2hFeHRyYVRyYWNlKHdhcm5pbmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZSh3YXJuaW5nKTtcbiAgICAgICAgd2FybmluZy5zdGFjayA9IHBhcnNlZC5tZXNzYWdlICsgXCJcXG5cIiArIHBhcnNlZC5zdGFjay5qb2luKFwiXFxuXCIpO1xuICAgIH1cblxuICAgIGlmICghYWN0aXZlRmlyZUV2ZW50KFwid2FybmluZ1wiLCB3YXJuaW5nKSkge1xuICAgICAgICBmb3JtYXRBbmRMb2dFcnJvcih3YXJuaW5nLCBcIlwiLCB0cnVlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlY29uc3RydWN0U3RhY2sobWVzc2FnZSwgc3RhY2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgIHN0YWNrc1tpXS5wdXNoKFwiRnJvbSBwcmV2aW91cyBldmVudDpcIik7XG4gICAgICAgIHN0YWNrc1tpXSA9IHN0YWNrc1tpXS5qb2luKFwiXFxuXCIpO1xuICAgIH1cbiAgICBpZiAoaSA8IHN0YWNrcy5sZW5ndGgpIHtcbiAgICAgICAgc3RhY2tzW2ldID0gc3RhY2tzW2ldLmpvaW4oXCJcXG5cIik7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlICsgXCJcXG5cIiArIHN0YWNrcy5qb2luKFwiXFxuXCIpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVEdXBsaWNhdGVPckVtcHR5SnVtcHMoc3RhY2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKHN0YWNrc1tpXS5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICgoaSArIDEgPCBzdGFja3MubGVuZ3RoKSAmJiBzdGFja3NbaV1bMF0gPT09IHN0YWNrc1tpKzFdWzBdKSkge1xuICAgICAgICAgICAgc3RhY2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ29tbW9uUm9vdHMoc3RhY2tzKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBzdGFja3NbMF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzdGFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHByZXYgPSBzdGFja3NbaV07XG4gICAgICAgIHZhciBjdXJyZW50TGFzdEluZGV4ID0gY3VycmVudC5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgY3VycmVudExhc3RMaW5lID0gY3VycmVudFtjdXJyZW50TGFzdEluZGV4XTtcbiAgICAgICAgdmFyIGNvbW1vblJvb3RNZWV0UG9pbnQgPSAtMTtcblxuICAgICAgICBmb3IgKHZhciBqID0gcHJldi5sZW5ndGggLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgaWYgKHByZXZbal0gPT09IGN1cnJlbnRMYXN0TGluZSkge1xuICAgICAgICAgICAgICAgIGNvbW1vblJvb3RNZWV0UG9pbnQgPSBqO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IGNvbW1vblJvb3RNZWV0UG9pbnQ7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgICAgICB2YXIgbGluZSA9IHByZXZbal07XG4gICAgICAgICAgICBpZiAoY3VycmVudFtjdXJyZW50TGFzdEluZGV4XSA9PT0gbGluZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQucG9wKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudExhc3RJbmRleC0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gcHJldjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNsZWFuU3RhY2soc3RhY2spIHtcbiAgICB2YXIgcmV0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICB2YXIgaXNUcmFjZUxpbmUgPSBcIiAgICAoTm8gc3RhY2sgdHJhY2UpXCIgPT09IGxpbmUgfHxcbiAgICAgICAgICAgIHN0YWNrRnJhbWVQYXR0ZXJuLnRlc3QobGluZSk7XG4gICAgICAgIHZhciBpc0ludGVybmFsRnJhbWUgPSBpc1RyYWNlTGluZSAmJiBzaG91bGRJZ25vcmUobGluZSk7XG4gICAgICAgIGlmIChpc1RyYWNlTGluZSAmJiAhaXNJbnRlcm5hbEZyYW1lKSB7XG4gICAgICAgICAgICBpZiAoaW5kZW50U3RhY2tGcmFtZXMgJiYgbGluZS5jaGFyQXQoMCkgIT09IFwiIFwiKSB7XG4gICAgICAgICAgICAgICAgbGluZSA9IFwiICAgIFwiICsgbGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldC5wdXNoKGxpbmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHN0YWNrRnJhbWVzQXNBcnJheShlcnJvcikge1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrLnJlcGxhY2UoL1xccyskL2csIFwiXCIpLnNwbGl0KFwiXFxuXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhY2subGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBzdGFja1tpXTtcbiAgICAgICAgaWYgKFwiICAgIChObyBzdGFjayB0cmFjZSlcIiA9PT0gbGluZSB8fCBzdGFja0ZyYW1lUGF0dGVybi50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgc3RhY2sgPSBzdGFjay5zbGljZShpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YWNrO1xufVxuXG5mdW5jdGlvbiBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcikge1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrO1xuICAgIHZhciBtZXNzYWdlID0gZXJyb3IudG9TdHJpbmcoKTtcbiAgICBzdGFjayA9IHR5cGVvZiBzdGFjayA9PT0gXCJzdHJpbmdcIiAmJiBzdGFjay5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyBzdGFja0ZyYW1lc0FzQXJyYXkoZXJyb3IpIDogW1wiICAgIChObyBzdGFjayB0cmFjZSlcIl07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGNsZWFuU3RhY2soc3RhY2spXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0QW5kTG9nRXJyb3IoZXJyb3IsIHRpdGxlLCBpc1NvZnQpIHtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2U7XG4gICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KGVycm9yKSkge1xuICAgICAgICAgICAgdmFyIHN0YWNrID0gZXJyb3Iuc3RhY2s7XG4gICAgICAgICAgICBtZXNzYWdlID0gdGl0bGUgKyBmb3JtYXRTdGFjayhzdGFjaywgZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRpdGxlICsgU3RyaW5nKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHByaW50V2FybmluZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBwcmludFdhcm5pbmcobWVzc2FnZSwgaXNTb2Z0KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uc29sZS5sb2cgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUubG9nID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZmlyZVJlamVjdGlvbkV2ZW50KG5hbWUsIGxvY2FsSGFuZGxlciwgcmVhc29uLCBwcm9taXNlKSB7XG4gICAgdmFyIGxvY2FsRXZlbnRGaXJlZCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgbG9jYWxIYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGxvY2FsRXZlbnRGaXJlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gXCJyZWplY3Rpb25IYW5kbGVkXCIpIHtcbiAgICAgICAgICAgICAgICBsb2NhbEhhbmRsZXIocHJvbWlzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2FsSGFuZGxlcihyZWFzb24sIHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUpO1xuICAgIH1cblxuICAgIGlmIChuYW1lID09PSBcInVuaGFuZGxlZFJlamVjdGlvblwiKSB7XG4gICAgICAgIGlmICghYWN0aXZlRmlyZUV2ZW50KG5hbWUsIHJlYXNvbiwgcHJvbWlzZSkgJiYgIWxvY2FsRXZlbnRGaXJlZCkge1xuICAgICAgICAgICAgZm9ybWF0QW5kTG9nRXJyb3IocmVhc29uLCBcIlVuaGFuZGxlZCByZWplY3Rpb24gXCIpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZlRmlyZUV2ZW50KG5hbWUsIHByb21pc2UpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0Tm9uRXJyb3Iob2JqKSB7XG4gICAgdmFyIHN0cjtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHN0ciA9IFwiW2Z1bmN0aW9uIFwiICtcbiAgICAgICAgICAgIChvYmoubmFtZSB8fCBcImFub255bW91c1wiKSArXG4gICAgICAgICAgICBcIl1cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdHIgPSBvYmogJiYgdHlwZW9mIG9iai50b1N0cmluZyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICA/IG9iai50b1N0cmluZygpIDogdXRpbC50b1N0cmluZyhvYmopO1xuICAgICAgICB2YXIgcnVzZWxlc3NUb1N0cmluZyA9IC9cXFtvYmplY3QgW2EtekEtWjAtOSRfXStcXF0vO1xuICAgICAgICBpZiAocnVzZWxlc3NUb1N0cmluZy50ZXN0KHN0cikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1N0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7XG4gICAgICAgICAgICAgICAgc3RyID0gbmV3U3RyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2goZSkge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHN0ciA9IFwiKGVtcHR5IGFycmF5KVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAoXCIoPFwiICsgc25pcChzdHIpICsgXCI+LCBubyBzdGFjayB0cmFjZSlcIik7XG59XG5cbmZ1bmN0aW9uIHNuaXAoc3RyKSB7XG4gICAgdmFyIG1heENoYXJzID0gNDE7XG4gICAgaWYgKHN0ci5sZW5ndGggPCBtYXhDaGFycykge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICByZXR1cm4gc3RyLnN1YnN0cigwLCBtYXhDaGFycyAtIDMpICsgXCIuLi5cIjtcbn1cblxuZnVuY3Rpb24gbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBjYXB0dXJlU3RhY2tUcmFjZSA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG52YXIgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfTtcbnZhciBwYXJzZUxpbmVJbmZvUmVnZXggPSAvW1xcLzxcXChdKFteOlxcL10rKTooXFxkKyk6KD86XFxkKylcXCk/XFxzKiQvO1xuZnVuY3Rpb24gcGFyc2VMaW5lSW5mbyhsaW5lKSB7XG4gICAgdmFyIG1hdGNoZXMgPSBsaW5lLm1hdGNoKHBhcnNlTGluZUluZm9SZWdleCk7XG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbGVOYW1lOiBtYXRjaGVzWzFdLFxuICAgICAgICAgICAgbGluZTogcGFyc2VJbnQobWF0Y2hlc1syXSwgMTApXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRCb3VuZHMoZmlyc3RMaW5lRXJyb3IsIGxhc3RMaW5lRXJyb3IpIHtcbiAgICBpZiAoIWxvbmdTdGFja1RyYWNlc0lzU3VwcG9ydGVkKCkpIHJldHVybjtcbiAgICB2YXIgZmlyc3RTdGFja0xpbmVzID0gZmlyc3RMaW5lRXJyb3Iuc3RhY2suc3BsaXQoXCJcXG5cIik7XG4gICAgdmFyIGxhc3RTdGFja0xpbmVzID0gbGFzdExpbmVFcnJvci5zdGFjay5zcGxpdChcIlxcblwiKTtcbiAgICB2YXIgZmlyc3RJbmRleCA9IC0xO1xuICAgIHZhciBsYXN0SW5kZXggPSAtMTtcbiAgICB2YXIgZmlyc3RGaWxlTmFtZTtcbiAgICB2YXIgbGFzdEZpbGVOYW1lO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3RTdGFja0xpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUxpbmVJbmZvKGZpcnN0U3RhY2tMaW5lc1tpXSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGZpcnN0RmlsZU5hbWUgPSByZXN1bHQuZmlsZU5hbWU7XG4gICAgICAgICAgICBmaXJzdEluZGV4ID0gcmVzdWx0LmxpbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RTdGFja0xpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUxpbmVJbmZvKGxhc3RTdGFja0xpbmVzW2ldKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgbGFzdEZpbGVOYW1lID0gcmVzdWx0LmZpbGVOYW1lO1xuICAgICAgICAgICAgbGFzdEluZGV4ID0gcmVzdWx0LmxpbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmlyc3RJbmRleCA8IDAgfHwgbGFzdEluZGV4IDwgMCB8fCAhZmlyc3RGaWxlTmFtZSB8fCAhbGFzdEZpbGVOYW1lIHx8XG4gICAgICAgIGZpcnN0RmlsZU5hbWUgIT09IGxhc3RGaWxlTmFtZSB8fCBmaXJzdEluZGV4ID49IGxhc3RJbmRleCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICBpZiAoYmx1ZWJpcmRGcmFtZVBhdHRlcm4udGVzdChsaW5lKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHZhciBpbmZvID0gcGFyc2VMaW5lSW5mbyhsaW5lKTtcbiAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgIGlmIChpbmZvLmZpbGVOYW1lID09PSBmaXJzdEZpbGVOYW1lICYmXG4gICAgICAgICAgICAgICAgKGZpcnN0SW5kZXggPD0gaW5mby5saW5lICYmIGluZm8ubGluZSA8PSBsYXN0SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIENhcHR1cmVkVHJhY2UocGFyZW50KSB7XG4gICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgIHRoaXMuX3Byb21pc2VzQ3JlYXRlZCA9IDA7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuX2xlbmd0aCA9IDEgKyAocGFyZW50ID09PSB1bmRlZmluZWQgPyAwIDogcGFyZW50Ll9sZW5ndGgpO1xuICAgIGNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIENhcHR1cmVkVHJhY2UpO1xuICAgIGlmIChsZW5ndGggPiAzMikgdGhpcy51bmN5Y2xlKCk7XG59XG51dGlsLmluaGVyaXRzKENhcHR1cmVkVHJhY2UsIEVycm9yKTtcbkNvbnRleHQuQ2FwdHVyZWRUcmFjZSA9IENhcHR1cmVkVHJhY2U7XG5cbkNhcHR1cmVkVHJhY2UucHJvdG90eXBlLnVuY3ljbGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoO1xuICAgIGlmIChsZW5ndGggPCAyKSByZXR1cm47XG4gICAgdmFyIG5vZGVzID0gW107XG4gICAgdmFyIHN0YWNrVG9JbmRleCA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIG5vZGUgPSB0aGlzOyBub2RlICE9PSB1bmRlZmluZWQ7ICsraSkge1xuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICBub2RlID0gbm9kZS5fcGFyZW50O1xuICAgIH1cbiAgICBsZW5ndGggPSB0aGlzLl9sZW5ndGggPSBpO1xuICAgIGZvciAodmFyIGkgPSBsZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgc3RhY2sgPSBub2Rlc1tpXS5zdGFjaztcbiAgICAgICAgaWYgKHN0YWNrVG9JbmRleFtzdGFja10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3RhY2tUb0luZGV4W3N0YWNrXSA9IGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY3VycmVudFN0YWNrID0gbm9kZXNbaV0uc3RhY2s7XG4gICAgICAgIHZhciBpbmRleCA9IHN0YWNrVG9JbmRleFtjdXJyZW50U3RhY2tdO1xuICAgICAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCAmJiBpbmRleCAhPT0gaSkge1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgIG5vZGVzW2luZGV4IC0gMV0uX3BhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBub2Rlc1tpbmRleCAtIDFdLl9sZW5ndGggPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZXNbaV0uX3BhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIG5vZGVzW2ldLl9sZW5ndGggPSAxO1xuICAgICAgICAgICAgdmFyIGN5Y2xlRWRnZU5vZGUgPSBpID4gMCA/IG5vZGVzW2kgLSAxXSA6IHRoaXM7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA8IGxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQgPSBub2Rlc1tpbmRleCArIDFdO1xuICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX3BhcmVudC51bmN5Y2xlKCk7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fbGVuZ3RoID1cbiAgICAgICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fcGFyZW50Ll9sZW5ndGggKyAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fbGVuZ3RoID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjdXJyZW50Q2hpbGRMZW5ndGggPSBjeWNsZUVkZ2VOb2RlLl9sZW5ndGggKyAxO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgLSAyOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgICAgIG5vZGVzW2pdLl9sZW5ndGggPSBjdXJyZW50Q2hpbGRMZW5ndGg7XG4gICAgICAgICAgICAgICAgY3VycmVudENoaWxkTGVuZ3RoKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5DYXB0dXJlZFRyYWNlLnByb3RvdHlwZS5hdHRhY2hFeHRyYVRyYWNlID0gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IuX19zdGFja0NsZWFuZWRfXykgcmV0dXJuO1xuICAgIHRoaXMudW5jeWNsZSgpO1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcik7XG4gICAgdmFyIG1lc3NhZ2UgPSBwYXJzZWQubWVzc2FnZTtcbiAgICB2YXIgc3RhY2tzID0gW3BhcnNlZC5zdGFja107XG5cbiAgICB2YXIgdHJhY2UgPSB0aGlzO1xuICAgIHdoaWxlICh0cmFjZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN0YWNrcy5wdXNoKGNsZWFuU3RhY2sodHJhY2Uuc3RhY2suc3BsaXQoXCJcXG5cIikpKTtcbiAgICAgICAgdHJhY2UgPSB0cmFjZS5fcGFyZW50O1xuICAgIH1cbiAgICByZW1vdmVDb21tb25Sb290cyhzdGFja3MpO1xuICAgIHJlbW92ZUR1cGxpY2F0ZU9yRW1wdHlKdW1wcyhzdGFja3MpO1xuICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AoZXJyb3IsIFwic3RhY2tcIiwgcmVjb25zdHJ1Y3RTdGFjayhtZXNzYWdlLCBzdGFja3MpKTtcbiAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKGVycm9yLCBcIl9fc3RhY2tDbGVhbmVkX19cIiwgdHJ1ZSk7XG59O1xuXG52YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSAoZnVuY3Rpb24gc3RhY2tEZXRlY3Rpb24oKSB7XG4gICAgdmFyIHY4c3RhY2tGcmFtZVBhdHRlcm4gPSAvXlxccyphdFxccyovO1xuICAgIHZhciB2OHN0YWNrRm9ybWF0dGVyID0gZnVuY3Rpb24oc3RhY2ssIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHJldHVybiBzdGFjaztcblxuICAgICAgICBpZiAoZXJyb3IubmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBlcnJvci5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvci50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtYXROb25FcnJvcihlcnJvcik7XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID09PSBcIm51bWJlclwiICYmXG4gICAgICAgIHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IHY4c3RhY2tGcmFtZVBhdHRlcm47XG4gICAgICAgIGZvcm1hdFN0YWNrID0gdjhzdGFja0Zvcm1hdHRlcjtcbiAgICAgICAgdmFyIGNhcHR1cmVTdGFja1RyYWNlID0gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U7XG5cbiAgICAgICAgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuIGJsdWViaXJkRnJhbWVQYXR0ZXJuLnRlc3QobGluZSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyZWNlaXZlciwgaWdub3JlVW50aWwpIHtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICAgICAgY2FwdHVyZVN0YWNrVHJhY2UocmVjZWl2ZXIsIGlnbm9yZVVudGlsKTtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCAtPSA2O1xuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKCk7XG5cbiAgICBpZiAodHlwZW9mIGVyci5zdGFjayA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICBlcnIuc3RhY2suc3BsaXQoXCJcXG5cIilbMF0uaW5kZXhPZihcInN0YWNrRGV0ZWN0aW9uQFwiKSA+PSAwKSB7XG4gICAgICAgIHN0YWNrRnJhbWVQYXR0ZXJuID0gL0AvO1xuICAgICAgICBmb3JtYXRTdGFjayA9IHY4c3RhY2tGb3JtYXR0ZXI7XG4gICAgICAgIGluZGVudFN0YWNrRnJhbWVzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhcHR1cmVTdGFja1RyYWNlKG8pIHtcbiAgICAgICAgICAgIG8uc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgaGFzU3RhY2tBZnRlclRocm93O1xuICAgIHRyeSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgICBoYXNTdGFja0FmdGVyVGhyb3cgPSAoXCJzdGFja1wiIGluIGUpO1xuICAgIH1cbiAgICBpZiAoIShcInN0YWNrXCIgaW4gZXJyKSAmJiBoYXNTdGFja0FmdGVyVGhyb3cgJiZcbiAgICAgICAgdHlwZW9mIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IHY4c3RhY2tGcmFtZVBhdHRlcm47XG4gICAgICAgIGZvcm1hdFN0YWNrID0gdjhzdGFja0Zvcm1hdHRlcjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhcHR1cmVTdGFja1RyYWNlKG8pIHtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICAgICAgdHJ5IHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICAgICAgICAgIGNhdGNoKGUpIHsgby5zdGFjayA9IGUuc3RhY2s7IH1cbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCAtPSA2O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZvcm1hdFN0YWNrID0gZnVuY3Rpb24oc3RhY2ssIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHJldHVybiBzdGFjaztcblxuICAgICAgICBpZiAoKHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGVycm9yID09PSBcImZ1bmN0aW9uXCIpICYmXG4gICAgICAgICAgICBlcnJvci5uYW1lICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm1hdE5vbkVycm9yKGVycm9yKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG51bGw7XG5cbn0pKFtdKTtcblxuaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBjb25zb2xlLndhcm4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBwcmludFdhcm5pbmcgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgfTtcbiAgICBpZiAodXRpbC5pc05vZGUgJiYgcHJvY2Vzcy5zdGRlcnIuaXNUVFkpIHtcbiAgICAgICAgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24obWVzc2FnZSwgaXNTb2Z0KSB7XG4gICAgICAgICAgICB2YXIgY29sb3IgPSBpc1NvZnQgPyBcIlxcdTAwMWJbMzNtXCIgOiBcIlxcdTAwMWJbMzFtXCI7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oY29sb3IgKyBtZXNzYWdlICsgXCJcXHUwMDFiWzBtXFxuXCIpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoIXV0aWwuaXNOb2RlICYmIHR5cGVvZiAobmV3IEVycm9yKCkuc3RhY2spID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHByaW50V2FybmluZyA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGlzU29mdCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiJWNcIiArIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NvZnQgPyBcImNvbG9yOiBkYXJrb3JhbmdlXCIgOiBcImNvbG9yOiByZWRcIik7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG52YXIgY29uZmlnID0ge1xuICAgIHdhcm5pbmdzOiB3YXJuaW5ncyxcbiAgICBsb25nU3RhY2tUcmFjZXM6IGZhbHNlLFxuICAgIGNhbmNlbGxhdGlvbjogZmFsc2UsXG4gICAgbW9uaXRvcmluZzogZmFsc2Vcbn07XG5cbmlmIChsb25nU3RhY2tUcmFjZXMpIFByb21pc2UubG9uZ1N0YWNrVHJhY2VzKCk7XG5cbnJldHVybiB7XG4gICAgbG9uZ1N0YWNrVHJhY2VzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5sb25nU3RhY2tUcmFjZXM7XG4gICAgfSxcbiAgICB3YXJuaW5nczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb25maWcud2FybmluZ3M7XG4gICAgfSxcbiAgICBjYW5jZWxsYXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uZmlnLmNhbmNlbGxhdGlvbjtcbiAgICB9LFxuICAgIG1vbml0b3Jpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uZmlnLm1vbml0b3Jpbmc7XG4gICAgfSxcbiAgICBwcm9wYWdhdGVGcm9tRnVuY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvcGFnYXRlRnJvbUZ1bmN0aW9uO1xuICAgIH0sXG4gICAgYm91bmRWYWx1ZUZ1bmN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJvdW5kVmFsdWVGdW5jdGlvbjtcbiAgICB9LFxuICAgIGNoZWNrRm9yZ290dGVuUmV0dXJuczogY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zLFxuICAgIHNldEJvdW5kczogc2V0Qm91bmRzLFxuICAgIHdhcm46IHdhcm4sXG4gICAgZGVwcmVjYXRlZDogZGVwcmVjYXRlZCxcbiAgICBDYXB0dXJlZFRyYWNlOiBDYXB0dXJlZFRyYWNlLFxuICAgIGZpcmVEb21FdmVudDogZmlyZURvbUV2ZW50LFxuICAgIGZpcmVHbG9iYWxFdmVudDogZmlyZUdsb2JhbEV2ZW50XG59O1xufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwxMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xuZnVuY3Rpb24gcmV0dXJuZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG59XG5mdW5jdGlvbiB0aHJvd2VyKCkge1xuICAgIHRocm93IHRoaXMucmVhc29uO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZVtcInJldHVyblwiXSA9XG5Qcm9taXNlLnByb3RvdHlwZS50aGVuUmV0dXJuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkgdmFsdWUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgIHJldHVybmVyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwge3ZhbHVlOiB2YWx1ZX0sIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZVtcInRocm93XCJdID1cblByb21pc2UucHJvdG90eXBlLnRoZW5UaHJvdyA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihcbiAgICAgICAgdGhyb3dlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtyZWFzb246IHJlYXNvbn0sIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5jYXRjaFRocm93ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICB1bmRlZmluZWQsIHRocm93ZXIsIHVuZGVmaW5lZCwge3JlYXNvbjogcmVhc29ufSwgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgX3JlYXNvbiA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbigpIHt0aHJvdyBfcmVhc29uO307XG4gICAgICAgIHJldHVybiB0aGlzLmNhdWdodChyZWFzb24sIGhhbmRsZXIpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLmNhdGNoUmV0dXJuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPD0gMSkge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB2YWx1ZS5zdXBwcmVzc1VuaGFuZGxlZFJlamVjdGlvbnMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICB1bmRlZmluZWQsIHJldHVybmVyLCB1bmRlZmluZWQsIHt2YWx1ZTogdmFsdWV9LCB1bmRlZmluZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfdmFsdWUgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIGlmIChfdmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSBfdmFsdWUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24oKSB7cmV0dXJuIF92YWx1ZTt9O1xuICAgICAgICByZXR1cm4gdGhpcy5jYXVnaHQodmFsdWUsIGhhbmRsZXIpO1xuICAgIH1cbn07XG59O1xuXG59LHt9XSwxMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciBQcm9taXNlUmVkdWNlID0gUHJvbWlzZS5yZWR1Y2U7XG52YXIgUHJvbWlzZUFsbCA9IFByb21pc2UuYWxsO1xuXG5mdW5jdGlvbiBwcm9taXNlQWxsVGhpcygpIHtcbiAgICByZXR1cm4gUHJvbWlzZUFsbCh0aGlzKTtcbn1cblxuZnVuY3Rpb24gUHJvbWlzZU1hcFNlcmllcyhwcm9taXNlcywgZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZShwcm9taXNlcywgZm4sIElOVEVSTkFMLCBJTlRFUk5BTCk7XG59XG5cblByb21pc2UucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gdGhpcy5tYXBTZXJpZXMoZm4pXG4gICAgICAgICAgICAuX3RoZW4ocHJvbWlzZUFsbFRoaXMsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubWFwU2VyaWVzID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgcmV0dXJuIFByb21pc2VSZWR1Y2UodGhpcywgZm4sIElOVEVSTkFMLCBJTlRFUk5BTCk7XG59O1xuXG5Qcm9taXNlLmVhY2ggPSBmdW5jdGlvbiAocHJvbWlzZXMsIGZuKSB7XG4gICAgcmV0dXJuIFByb21pc2VNYXBTZXJpZXMocHJvbWlzZXMsIGZuKVxuICAgICAgICAgICAgLl90aGVuKHByb21pc2VBbGxUaGlzLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcHJvbWlzZXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLm1hcFNlcmllcyA9IFByb21pc2VNYXBTZXJpZXM7XG59O1xuXG59LHt9XSwxMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgT2JqZWN0ZnJlZXplID0gZXM1LmZyZWV6ZTtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBpbmhlcml0cyA9IHV0aWwuaW5oZXJpdHM7XG52YXIgbm90RW51bWVyYWJsZVByb3AgPSB1dGlsLm5vdEVudW1lcmFibGVQcm9wO1xuXG5mdW5jdGlvbiBzdWJFcnJvcihuYW1lUHJvcGVydHksIGRlZmF1bHRNZXNzYWdlKSB7XG4gICAgZnVuY3Rpb24gU3ViRXJyb3IobWVzc2FnZSkge1xuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU3ViRXJyb3IpKSByZXR1cm4gbmV3IFN1YkVycm9yKG1lc3NhZ2UpO1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm1lc3NhZ2VcIixcbiAgICAgICAgICAgIHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IGRlZmF1bHRNZXNzYWdlKTtcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJuYW1lXCIsIG5hbWVQcm9wZXJ0eSk7XG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBFcnJvci5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluaGVyaXRzKFN1YkVycm9yLCBFcnJvcik7XG4gICAgcmV0dXJuIFN1YkVycm9yO1xufVxuXG52YXIgX1R5cGVFcnJvciwgX1JhbmdlRXJyb3I7XG52YXIgV2FybmluZyA9IHN1YkVycm9yKFwiV2FybmluZ1wiLCBcIndhcm5pbmdcIik7XG52YXIgQ2FuY2VsbGF0aW9uRXJyb3IgPSBzdWJFcnJvcihcIkNhbmNlbGxhdGlvbkVycm9yXCIsIFwiY2FuY2VsbGF0aW9uIGVycm9yXCIpO1xudmFyIFRpbWVvdXRFcnJvciA9IHN1YkVycm9yKFwiVGltZW91dEVycm9yXCIsIFwidGltZW91dCBlcnJvclwiKTtcbnZhciBBZ2dyZWdhdGVFcnJvciA9IHN1YkVycm9yKFwiQWdncmVnYXRlRXJyb3JcIiwgXCJhZ2dyZWdhdGUgZXJyb3JcIik7XG50cnkge1xuICAgIF9UeXBlRXJyb3IgPSBUeXBlRXJyb3I7XG4gICAgX1JhbmdlRXJyb3IgPSBSYW5nZUVycm9yO1xufSBjYXRjaChlKSB7XG4gICAgX1R5cGVFcnJvciA9IHN1YkVycm9yKFwiVHlwZUVycm9yXCIsIFwidHlwZSBlcnJvclwiKTtcbiAgICBfUmFuZ2VFcnJvciA9IHN1YkVycm9yKFwiUmFuZ2VFcnJvclwiLCBcInJhbmdlIGVycm9yXCIpO1xufVxuXG52YXIgbWV0aG9kcyA9IChcImpvaW4gcG9wIHB1c2ggc2hpZnQgdW5zaGlmdCBzbGljZSBmaWx0ZXIgZm9yRWFjaCBzb21lIFwiICtcbiAgICBcImV2ZXJ5IG1hcCBpbmRleE9mIGxhc3RJbmRleE9mIHJlZHVjZSByZWR1Y2VSaWdodCBzb3J0IHJldmVyc2VcIikuc3BsaXQoXCIgXCIpO1xuXG5mb3IgKHZhciBpID0gMDsgaSA8IG1ldGhvZHMubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAodHlwZW9mIEFycmF5LnByb3RvdHlwZVttZXRob2RzW2ldXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIEFnZ3JlZ2F0ZUVycm9yLnByb3RvdHlwZVttZXRob2RzW2ldXSA9IEFycmF5LnByb3RvdHlwZVttZXRob2RzW2ldXTtcbiAgICB9XG59XG5cbmVzNS5kZWZpbmVQcm9wZXJ0eShBZ2dyZWdhdGVFcnJvci5wcm90b3R5cGUsIFwibGVuZ3RoXCIsIHtcbiAgICB2YWx1ZTogMCxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbn0pO1xuQWdncmVnYXRlRXJyb3IucHJvdG90eXBlW1wiaXNPcGVyYXRpb25hbFwiXSA9IHRydWU7XG52YXIgbGV2ZWwgPSAwO1xuQWdncmVnYXRlRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGluZGVudCA9IEFycmF5KGxldmVsICogNCArIDEpLmpvaW4oXCIgXCIpO1xuICAgIHZhciByZXQgPSBcIlxcblwiICsgaW5kZW50ICsgXCJBZ2dyZWdhdGVFcnJvciBvZjpcIiArIFwiXFxuXCI7XG4gICAgbGV2ZWwrKztcbiAgICBpbmRlbnQgPSBBcnJheShsZXZlbCAqIDQgKyAxKS5qb2luKFwiIFwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHN0ciA9IHRoaXNbaV0gPT09IHRoaXMgPyBcIltDaXJjdWxhciBBZ2dyZWdhdGVFcnJvcl1cIiA6IHRoaXNbaV0gKyBcIlwiO1xuICAgICAgICB2YXIgbGluZXMgPSBzdHIuc3BsaXQoXCJcXG5cIik7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGluZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgIGxpbmVzW2pdID0gaW5kZW50ICsgbGluZXNbal07XG4gICAgICAgIH1cbiAgICAgICAgc3RyID0gbGluZXMuam9pbihcIlxcblwiKTtcbiAgICAgICAgcmV0ICs9IHN0ciArIFwiXFxuXCI7XG4gICAgfVxuICAgIGxldmVsLS07XG4gICAgcmV0dXJuIHJldDtcbn07XG5cbmZ1bmN0aW9uIE9wZXJhdGlvbmFsRXJyb3IobWVzc2FnZSkge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBPcGVyYXRpb25hbEVycm9yKSlcbiAgICAgICAgcmV0dXJuIG5ldyBPcGVyYXRpb25hbEVycm9yKG1lc3NhZ2UpO1xuICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibmFtZVwiLCBcIk9wZXJhdGlvbmFsRXJyb3JcIik7XG4gICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJtZXNzYWdlXCIsIG1lc3NhZ2UpO1xuICAgIHRoaXMuY2F1c2UgPSBtZXNzYWdlO1xuICAgIHRoaXNbXCJpc09wZXJhdGlvbmFsXCJdID0gdHJ1ZTtcblxuICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJtZXNzYWdlXCIsIG1lc3NhZ2UubWVzc2FnZSk7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwic3RhY2tcIiwgbWVzc2FnZS5zdGFjayk7XG4gICAgfSBlbHNlIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICB9XG5cbn1cbmluaGVyaXRzKE9wZXJhdGlvbmFsRXJyb3IsIEVycm9yKTtcblxudmFyIGVycm9yVHlwZXMgPSBFcnJvcltcIl9fQmx1ZWJpcmRFcnJvclR5cGVzX19cIl07XG5pZiAoIWVycm9yVHlwZXMpIHtcbiAgICBlcnJvclR5cGVzID0gT2JqZWN0ZnJlZXplKHtcbiAgICAgICAgQ2FuY2VsbGF0aW9uRXJyb3I6IENhbmNlbGxhdGlvbkVycm9yLFxuICAgICAgICBUaW1lb3V0RXJyb3I6IFRpbWVvdXRFcnJvcixcbiAgICAgICAgT3BlcmF0aW9uYWxFcnJvcjogT3BlcmF0aW9uYWxFcnJvcixcbiAgICAgICAgUmVqZWN0aW9uRXJyb3I6IE9wZXJhdGlvbmFsRXJyb3IsXG4gICAgICAgIEFnZ3JlZ2F0ZUVycm9yOiBBZ2dyZWdhdGVFcnJvclxuICAgIH0pO1xuICAgIGVzNS5kZWZpbmVQcm9wZXJ0eShFcnJvciwgXCJfX0JsdWViaXJkRXJyb3JUeXBlc19fXCIsIHtcbiAgICAgICAgdmFsdWU6IGVycm9yVHlwZXMsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2VcbiAgICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgRXJyb3I6IEVycm9yLFxuICAgIFR5cGVFcnJvcjogX1R5cGVFcnJvcixcbiAgICBSYW5nZUVycm9yOiBfUmFuZ2VFcnJvcixcbiAgICBDYW5jZWxsYXRpb25FcnJvcjogZXJyb3JUeXBlcy5DYW5jZWxsYXRpb25FcnJvcixcbiAgICBPcGVyYXRpb25hbEVycm9yOiBlcnJvclR5cGVzLk9wZXJhdGlvbmFsRXJyb3IsXG4gICAgVGltZW91dEVycm9yOiBlcnJvclR5cGVzLlRpbWVvdXRFcnJvcixcbiAgICBBZ2dyZWdhdGVFcnJvcjogZXJyb3JUeXBlcy5BZ2dyZWdhdGVFcnJvcixcbiAgICBXYXJuaW5nOiBXYXJuaW5nXG59O1xuXG59LHtcIi4vZXM1XCI6MTMsXCIuL3V0aWxcIjozNn1dLDEzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBpc0VTNSA9IChmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHJldHVybiB0aGlzID09PSB1bmRlZmluZWQ7XG59KSgpO1xuXG5pZiAoaXNFUzUpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgZnJlZXplOiBPYmplY3QuZnJlZXplLFxuICAgICAgICBkZWZpbmVQcm9wZXJ0eTogT2JqZWN0LmRlZmluZVByb3BlcnR5LFxuICAgICAgICBnZXREZXNjcmlwdG9yOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFxuICAgICAgICBrZXlzOiBPYmplY3Qua2V5cyxcbiAgICAgICAgbmFtZXM6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLFxuICAgICAgICBnZXRQcm90b3R5cGVPZjogT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5LFxuICAgICAgICBpc0VTNTogaXNFUzUsXG4gICAgICAgIHByb3BlcnR5SXNXcml0YWJsZTogZnVuY3Rpb24ob2JqLCBwcm9wKSB7XG4gICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBwcm9wKTtcbiAgICAgICAgICAgIHJldHVybiAhISghZGVzY3JpcHRvciB8fCBkZXNjcmlwdG9yLndyaXRhYmxlIHx8IGRlc2NyaXB0b3Iuc2V0KTtcbiAgICAgICAgfVxuICAgIH07XG59IGVsc2Uge1xuICAgIHZhciBoYXMgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbiAgICB2YXIgc3RyID0ge30udG9TdHJpbmc7XG4gICAgdmFyIHByb3RvID0ge30uY29uc3RydWN0b3IucHJvdG90eXBlO1xuXG4gICAgdmFyIE9iamVjdEtleXMgPSBmdW5jdGlvbiAobykge1xuICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvKSB7XG4gICAgICAgICAgICBpZiAoaGFzLmNhbGwobywga2V5KSkge1xuICAgICAgICAgICAgICAgIHJldC5wdXNoKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG4gICAgdmFyIE9iamVjdEdldERlc2NyaXB0b3IgPSBmdW5jdGlvbihvLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIHt2YWx1ZTogb1trZXldfTtcbiAgICB9O1xuXG4gICAgdmFyIE9iamVjdERlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gKG8sIGtleSwgZGVzYykge1xuICAgICAgICBvW2tleV0gPSBkZXNjLnZhbHVlO1xuICAgICAgICByZXR1cm4gbztcbiAgICB9O1xuXG4gICAgdmFyIE9iamVjdEZyZWV6ZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuXG4gICAgdmFyIE9iamVjdEdldFByb3RvdHlwZU9mID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdChvYmopLmNvbnN0cnVjdG9yLnByb3RvdHlwZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3RvO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBBcnJheUlzQXJyYXkgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyLmNhbGwob2JqKSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgaXNBcnJheTogQXJyYXlJc0FycmF5LFxuICAgICAgICBrZXlzOiBPYmplY3RLZXlzLFxuICAgICAgICBuYW1lczogT2JqZWN0S2V5cyxcbiAgICAgICAgZGVmaW5lUHJvcGVydHk6IE9iamVjdERlZmluZVByb3BlcnR5LFxuICAgICAgICBnZXREZXNjcmlwdG9yOiBPYmplY3RHZXREZXNjcmlwdG9yLFxuICAgICAgICBmcmVlemU6IE9iamVjdEZyZWV6ZSxcbiAgICAgICAgZ2V0UHJvdG90eXBlT2Y6IE9iamVjdEdldFByb3RvdHlwZU9mLFxuICAgICAgICBpc0VTNTogaXNFUzUsXG4gICAgICAgIHByb3BlcnR5SXNXcml0YWJsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbn0se31dLDE0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBJTlRFUk5BTCkge1xudmFyIFByb21pc2VNYXAgPSBQcm9taXNlLm1hcDtcblxuUHJvbWlzZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGZuLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIFByb21pc2VNYXAodGhpcywgZm4sIG9wdGlvbnMsIElOVEVSTkFMKTtcbn07XG5cblByb21pc2UuZmlsdGVyID0gZnVuY3Rpb24gKHByb21pc2VzLCBmbiwgb3B0aW9ucykge1xuICAgIHJldHVybiBQcm9taXNlTWFwKHByb21pc2VzLCBmbiwgb3B0aW9ucywgSU5URVJOQUwpO1xufTtcbn07XG5cbn0se31dLDE1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCB0cnlDb252ZXJ0VG9Qcm9taXNlKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgQ2FuY2VsbGF0aW9uRXJyb3IgPSBQcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcblxuZnVuY3Rpb24gUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dChwcm9taXNlLCB0eXBlLCBoYW5kbGVyKSB7XG4gICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG4gICAgdGhpcy5jYWxsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNhbmNlbFByb21pc2UgPSBudWxsO1xufVxuXG5QYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0LnByb3RvdHlwZS5pc0ZpbmFsbHlIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gMDtcbn07XG5cbmZ1bmN0aW9uIEZpbmFsbHlIYW5kbGVyQ2FuY2VsUmVhY3Rpb24oZmluYWxseUhhbmRsZXIpIHtcbiAgICB0aGlzLmZpbmFsbHlIYW5kbGVyID0gZmluYWxseUhhbmRsZXI7XG59XG5cbkZpbmFsbHlIYW5kbGVyQ2FuY2VsUmVhY3Rpb24ucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBjaGVja0NhbmNlbCh0aGlzLmZpbmFsbHlIYW5kbGVyKTtcbn07XG5cbmZ1bmN0aW9uIGNoZWNrQ2FuY2VsKGN0eCwgcmVhc29uKSB7XG4gICAgaWYgKGN0eC5jYW5jZWxQcm9taXNlICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjdHguY2FuY2VsUHJvbWlzZS5fcmVqZWN0KHJlYXNvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguY2FuY2VsUHJvbWlzZS5fY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmNhbmNlbFByb21pc2UgPSBudWxsO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBzdWNjZWVkKCkge1xuICAgIHJldHVybiBmaW5hbGx5SGFuZGxlci5jYWxsKHRoaXMsIHRoaXMucHJvbWlzZS5fdGFyZ2V0KCkuX3NldHRsZWRWYWx1ZSgpKTtcbn1cbmZ1bmN0aW9uIGZhaWwocmVhc29uKSB7XG4gICAgaWYgKGNoZWNrQ2FuY2VsKHRoaXMsIHJlYXNvbikpIHJldHVybjtcbiAgICBlcnJvck9iai5lID0gcmVhc29uO1xuICAgIHJldHVybiBlcnJvck9iajtcbn1cbmZ1bmN0aW9uIGZpbmFsbHlIYW5kbGVyKHJlYXNvbk9yVmFsdWUpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcbiAgICB2YXIgaGFuZGxlciA9IHRoaXMuaGFuZGxlcjtcblxuICAgIGlmICghdGhpcy5jYWxsZWQpIHtcbiAgICAgICAgdGhpcy5jYWxsZWQgPSB0cnVlO1xuICAgICAgICB2YXIgcmV0ID0gdGhpcy5pc0ZpbmFsbHlIYW5kbGVyKClcbiAgICAgICAgICAgID8gaGFuZGxlci5jYWxsKHByb21pc2UuX2JvdW5kVmFsdWUoKSlcbiAgICAgICAgICAgIDogaGFuZGxlci5jYWxsKHByb21pc2UuX2JvdW5kVmFsdWUoKSwgcmVhc29uT3JWYWx1ZSk7XG4gICAgICAgIGlmIChyZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcHJvbWlzZS5fc2V0UmV0dXJuZWROb25VbmRlZmluZWQoKTtcbiAgICAgICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHJldCwgcHJvbWlzZSk7XG4gICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbmNlbFByb21pc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlLmlzQ2FuY2VsbGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFzb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDYW5jZWxsYXRpb25FcnJvcihcImxhdGUgY2FuY2VsbGF0aW9uIG9ic2VydmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZShyZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JPYmouZSA9IHJlYXNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXliZVByb21pc2UuaXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fYXR0YWNoQ2FuY2VsbGF0aW9uQ2FsbGJhY2soXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEZpbmFsbHlIYW5kbGVyQ2FuY2VsUmVhY3Rpb24odGhpcykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXliZVByb21pc2UuX3RoZW4oXG4gICAgICAgICAgICAgICAgICAgIHN1Y2NlZWQsIGZhaWwsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9taXNlLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICBjaGVja0NhbmNlbCh0aGlzKTtcbiAgICAgICAgZXJyb3JPYmouZSA9IHJlYXNvbk9yVmFsdWU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjaGVja0NhbmNlbCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHJlYXNvbk9yVmFsdWU7XG4gICAgfVxufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5fcGFzc1Rocm91Z2ggPSBmdW5jdGlvbihoYW5kbGVyLCB0eXBlLCBzdWNjZXNzLCBmYWlsKSB7XG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0aGlzLnRoZW4oKTtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihzdWNjZXNzLFxuICAgICAgICAgICAgICAgICAgICAgIGZhaWwsXG4gICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgIG5ldyBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0KHRoaXMsIHR5cGUsIGhhbmRsZXIpLFxuICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5sYXN0bHkgPVxuUHJvbWlzZS5wcm90b3R5cGVbXCJmaW5hbGx5XCJdID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFzc1Rocm91Z2goaGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseUhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsbHlIYW5kbGVyKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnRhcCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bhc3NUaHJvdWdoKGhhbmRsZXIsIDEsIGZpbmFsbHlIYW5kbGVyKTtcbn07XG5cbnJldHVybiBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0O1xufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDE2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZWplY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIElOVEVSTkFMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlDb252ZXJ0VG9Qcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBQcm94eWFibGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKSB7XG52YXIgZXJyb3JzID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpO1xudmFyIFR5cGVFcnJvciA9IGVycm9ycy5UeXBlRXJyb3I7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciB5aWVsZEhhbmRsZXJzID0gW107XG5cbmZ1bmN0aW9uIHByb21pc2VGcm9tWWllbGRIYW5kbGVyKHZhbHVlLCB5aWVsZEhhbmRsZXJzLCB0cmFjZVBhcmVudCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeWllbGRIYW5kbGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0cmFjZVBhcmVudC5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHlpZWxkSGFuZGxlcnNbaV0pKHZhbHVlKTtcbiAgICAgICAgdHJhY2VQYXJlbnQuX3BvcENvbnRleHQoKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgIHRyYWNlUGFyZW50Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICAgICAgdmFyIHJldCA9IFByb21pc2UucmVqZWN0KGVycm9yT2JqLmUpO1xuICAgICAgICAgICAgdHJhY2VQYXJlbnQuX3BvcENvbnRleHQoKTtcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocmVzdWx0LCB0cmFjZVBhcmVudCk7XG4gICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gbWF5YmVQcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gUHJvbWlzZVNwYXduKGdlbmVyYXRvckZ1bmN0aW9uLCByZWNlaXZlciwgeWllbGRIYW5kbGVyLCBzdGFjaykge1xuICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSkge1xuICAgICAgICB2YXIgaW50ZXJuYWwgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHZhciBfZmluYWxseVByb21pc2UgPSB0aGlzLl9maW5hbGx5UHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZSA9IGludGVybmFsLmxhc3RseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfZmluYWxseVByb21pc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBpbnRlcm5hbC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgaW50ZXJuYWwuX3NldE9uQ2FuY2VsKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICB9XG4gICAgdGhpcy5fc3RhY2sgPSBzdGFjaztcbiAgICB0aGlzLl9nZW5lcmF0b3JGdW5jdGlvbiA9IGdlbmVyYXRvckZ1bmN0aW9uO1xuICAgIHRoaXMuX3JlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgdGhpcy5fZ2VuZXJhdG9yID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3lpZWxkSGFuZGxlcnMgPSB0eXBlb2YgeWllbGRIYW5kbGVyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyBbeWllbGRIYW5kbGVyXS5jb25jYXQoeWllbGRIYW5kbGVycylcbiAgICAgICAgOiB5aWVsZEhhbmRsZXJzO1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9jYW5jZWxsYXRpb25QaGFzZSA9IGZhbHNlO1xufVxudXRpbC5pbmhlcml0cyhQcm9taXNlU3Bhd24sIFByb3h5YWJsZSk7XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX2lzUmVzb2x2ZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZSA9PT0gbnVsbDtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9wcm9taXNlID0gdGhpcy5fZ2VuZXJhdG9yID0gbnVsbDtcbiAgICBpZiAoZGVidWcuY2FuY2VsbGF0aW9uKCkgJiYgdGhpcy5fZmluYWxseVByb21pc2UgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fZmluYWxseVByb21pc2UuX2Z1bGZpbGwoKTtcbiAgICAgICAgdGhpcy5fZmluYWxseVByb21pc2UgPSBudWxsO1xuICAgIH1cbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Byb21pc2VDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNSZXNvbHZlZCgpKSByZXR1cm47XG4gICAgdmFyIGltcGxlbWVudHNSZXR1cm4gPSB0eXBlb2YgdGhpcy5fZ2VuZXJhdG9yW1wicmV0dXJuXCJdICE9PSBcInVuZGVmaW5lZFwiO1xuXG4gICAgdmFyIHJlc3VsdDtcbiAgICBpZiAoIWltcGxlbWVudHNSZXR1cm4pIHtcbiAgICAgICAgdmFyIHJlYXNvbiA9IG5ldyBQcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yKFxuICAgICAgICAgICAgXCJnZW5lcmF0b3IgLnJldHVybigpIHNlbnRpbmVsXCIpO1xuICAgICAgICBQcm9taXNlLmNvcm91dGluZS5yZXR1cm5TZW50aW5lbCA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZShyZWFzb24pO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgICAgICByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9nZW5lcmF0b3JbXCJ0aHJvd1wiXSkuY2FsbCh0aGlzLl9nZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb24pO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZ2VuZXJhdG9yW1wicmV0dXJuXCJdKS5jYWxsKHRoaXMuX2dlbmVyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgfVxuICAgIHRoaXMuX2NhbmNlbGxhdGlvblBoYXNlID0gdHJ1ZTtcbiAgICB0aGlzLl95aWVsZGVkUHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9nZW5lcmF0b3IubmV4dCkuY2FsbCh0aGlzLl9nZW5lcmF0b3IsIHZhbHVlKTtcbiAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHJlYXNvbik7XG4gICAgdGhpcy5fcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZ2VuZXJhdG9yW1widGhyb3dcIl0pXG4gICAgICAgIC5jYWxsKHRoaXMuX2dlbmVyYXRvciwgcmVhc29uKTtcbiAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl95aWVsZGVkUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLl95aWVsZGVkUHJvbWlzZTtcbiAgICAgICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBudWxsO1xuICAgICAgICBwcm9taXNlLmNhbmNlbCgpO1xuICAgIH1cbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUucHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3J1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9nZW5lcmF0b3IgPSB0aGlzLl9nZW5lcmF0b3JGdW5jdGlvbi5jYWxsKHRoaXMuX3JlY2VpdmVyKTtcbiAgICB0aGlzLl9yZWNlaXZlciA9XG4gICAgICAgIHRoaXMuX2dlbmVyYXRvckZ1bmN0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Byb21pc2VGdWxmaWxsZWQodW5kZWZpbmVkKTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX2NvbnRpbnVlID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZTtcbiAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG4gICAgICAgIGlmICh0aGlzLl9jYW5jZWxsYXRpb25QaGFzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuY2FuY2VsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVzdWx0LmUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICBpZiAocmVzdWx0LmRvbmUgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5fY2xlYW51cCgpO1xuICAgICAgICBpZiAodGhpcy5fY2FuY2VsbGF0aW9uUGhhc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlLmNhbmNlbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh2YWx1ZSwgdGhpcy5fcHJvbWlzZSk7XG4gICAgICAgIGlmICghKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UgPVxuICAgICAgICAgICAgICAgIHByb21pc2VGcm9tWWllbGRIYW5kbGVyKG1heWJlUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl95aWVsZEhhbmRsZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2UpO1xuICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2VSZWplY3RlZChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQSB2YWx1ZSAlcyB3YXMgeWllbGRlZCB0aGF0IGNvdWxkIG5vdCBiZSB0cmVhdGVkIGFzIGEgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcXHUwMDBhXCIucmVwbGFjZShcIiVzXCIsIHZhbHVlKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkZyb20gY29yb3V0aW5lOlxcdTAwMGFcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGFjay5zcGxpdChcIlxcblwiKS5zbGljZSgxLCAtNykuam9pbihcIlxcblwiKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgdmFyIGJpdEZpZWxkID0gbWF5YmVQcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgO1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9wcm94eSh0aGlzLCBudWxsKTtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZChtYXliZVByb21pc2UuX3ZhbHVlKCkpO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICB0aGlzLl9wcm9taXNlUmVqZWN0ZWQobWF5YmVQcm9taXNlLl9yZWFzb24oKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9wcm9taXNlQ2FuY2VsbGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlLmNvcm91dGluZSA9IGZ1bmN0aW9uIChnZW5lcmF0b3JGdW5jdGlvbiwgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgZ2VuZXJhdG9yRnVuY3Rpb24gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiZ2VuZXJhdG9yRnVuY3Rpb24gbXVzdCBiZSBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgdmFyIHlpZWxkSGFuZGxlciA9IE9iamVjdChvcHRpb25zKS55aWVsZEhhbmRsZXI7XG4gICAgdmFyIFByb21pc2VTcGF3biQgPSBQcm9taXNlU3Bhd247XG4gICAgdmFyIHN0YWNrID0gbmV3IEVycm9yKCkuc3RhY2s7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdlbmVyYXRvciA9IGdlbmVyYXRvckZ1bmN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBzcGF3biA9IG5ldyBQcm9taXNlU3Bhd24kKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB5aWVsZEhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrKTtcbiAgICAgICAgdmFyIHJldCA9IHNwYXduLnByb21pc2UoKTtcbiAgICAgICAgc3Bhd24uX2dlbmVyYXRvciA9IGdlbmVyYXRvcjtcbiAgICAgICAgc3Bhd24uX3Byb21pc2VGdWxmaWxsZWQodW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufTtcblxuUHJvbWlzZS5jb3JvdXRpbmUuYWRkWWllbGRIYW5kbGVyID0gZnVuY3Rpb24oZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHlpZWxkSGFuZGxlcnMucHVzaChmbik7XG59O1xuXG5Qcm9taXNlLnNwYXduID0gZnVuY3Rpb24gKGdlbmVyYXRvckZ1bmN0aW9uKSB7XG4gICAgZGVidWcuZGVwcmVjYXRlZChcIlByb21pc2Uuc3Bhd24oKVwiLCBcIlByb21pc2UuY29yb3V0aW5lKClcIik7XG4gICAgaWYgKHR5cGVvZiBnZW5lcmF0b3JGdW5jdGlvbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJnZW5lcmF0b3JGdW5jdGlvbiBtdXN0IGJlIGEgZnVuY3Rpb25cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICB2YXIgc3Bhd24gPSBuZXcgUHJvbWlzZVNwYXduKGdlbmVyYXRvckZ1bmN0aW9uLCB0aGlzKTtcbiAgICB2YXIgcmV0ID0gc3Bhd24ucHJvbWlzZSgpO1xuICAgIHNwYXduLl9ydW4oUHJvbWlzZS5zcGF3bik7XG4gICAgcmV0dXJuIHJldDtcbn07XG59O1xuXG59LHtcIi4vZXJyb3JzXCI6MTIsXCIuL3V0aWxcIjozNn1dLDE3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBJTlRFUk5BTCkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGNhbkV2YWx1YXRlID0gdXRpbC5jYW5FdmFsdWF0ZTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIHJlamVjdDtcblxuaWYgKCF0cnVlKSB7XG5pZiAoY2FuRXZhbHVhdGUpIHtcbiAgICB2YXIgdGhlbkNhbGxiYWNrID0gZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwidmFsdWVcIiwgXCJob2xkZXJcIiwgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBob2xkZXIucEluZGV4ID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBob2xkZXIuY2hlY2tGdWxmaWxsbWVudCh0aGlzKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBcIi5yZXBsYWNlKC9JbmRleC9nLCBpKSk7XG4gICAgfTtcblxuICAgIHZhciBwcm9taXNlU2V0dGVyID0gZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwicHJvbWlzZVwiLCBcImhvbGRlclwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBob2xkZXIucEluZGV4ID0gcHJvbWlzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBcIi5yZXBsYWNlKC9JbmRleC9nLCBpKSk7XG4gICAgfTtcblxuICAgIHZhciBnZW5lcmF0ZUhvbGRlckNsYXNzID0gZnVuY3Rpb24odG90YWwpIHtcbiAgICAgICAgdmFyIHByb3BzID0gbmV3IEFycmF5KHRvdGFsKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgcHJvcHNbaV0gPSBcInRoaXMucFwiICsgKGkrMSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBwcm9wcy5qb2luKFwiID0gXCIpICsgXCIgPSBudWxsO1wiO1xuICAgICAgICB2YXIgY2FuY2VsbGF0aW9uQ29kZT0gXCJ2YXIgcHJvbWlzZTtcXG5cIiArIHByb3BzLm1hcChmdW5jdGlvbihwcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIHByb21pc2UgPSBcIiArIHByb3AgKyBcIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgaWYgKHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuY2FuY2VsKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBcIjtcbiAgICAgICAgfSkuam9pbihcIlxcblwiKTtcbiAgICAgICAgdmFyIHBhc3NlZEFyZ3VtZW50cyA9IHByb3BzLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgdmFyIG5hbWUgPSBcIkhvbGRlciRcIiArIHRvdGFsO1xuXG5cbiAgICAgICAgdmFyIGNvZGUgPSBcInJldHVybiBmdW5jdGlvbih0cnlDYXRjaCwgZXJyb3JPYmosIFByb21pc2UpIHsgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBmdW5jdGlvbiBbVGhlTmFtZV0oZm4pIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgW1RoZVByb3BlcnRpZXNdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdGhpcy5mbiA9IGZuOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdGhpcy5ub3cgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBbVGhlTmFtZV0ucHJvdG90eXBlLmNoZWNrRnVsZmlsbG1lbnQgPSBmdW5jdGlvbihwcm9taXNlKSB7ICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdmFyIG5vdyA9ICsrdGhpcy5ub3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgaWYgKG5vdyA9PT0gW1RoZVRvdGFsXSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuX3B1c2hDb250ZXh0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHRoaXMuZm47ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXQgPSB0cnlDYXRjaChjYWxsYmFjaykoW1RoZVBhc3NlZEFyZ3VtZW50c10pOyAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuX3BvcENvbnRleHQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyZXQuZSwgZmFsc2UpOyAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLl9yZXNvbHZlQ2FsbGJhY2socmV0KTsgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBbVGhlTmFtZV0ucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHsgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgW0NhbmNlbGxhdGlvbkNvZGVdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICByZXR1cm4gW1RoZU5hbWVdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIH0odHJ5Q2F0Y2gsIGVycm9yT2JqLCBQcm9taXNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIFwiO1xuXG4gICAgICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UoL1xcW1RoZU5hbWVcXF0vZywgbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtUaGVUb3RhbFxcXS9nLCB0b3RhbClcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtUaGVQYXNzZWRBcmd1bWVudHNcXF0vZywgcGFzc2VkQXJndW1lbnRzKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1RoZVByb3BlcnRpZXNcXF0vZywgYXNzaWdubWVudClcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtDYW5jZWxsYXRpb25Db2RlXFxdL2csIGNhbmNlbGxhdGlvbkNvZGUpO1xuXG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJ0cnlDYXRjaFwiLCBcImVycm9yT2JqXCIsIFwiUHJvbWlzZVwiLCBjb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRyeUNhdGNoLCBlcnJvck9iaiwgUHJvbWlzZSk7XG4gICAgfTtcblxuICAgIHZhciBob2xkZXJDbGFzc2VzID0gW107XG4gICAgdmFyIHRoZW5DYWxsYmFja3MgPSBbXTtcbiAgICB2YXIgcHJvbWlzZVNldHRlcnMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgODsgKytpKSB7XG4gICAgICAgIGhvbGRlckNsYXNzZXMucHVzaChnZW5lcmF0ZUhvbGRlckNsYXNzKGkgKyAxKSk7XG4gICAgICAgIHRoZW5DYWxsYmFja3MucHVzaCh0aGVuQ2FsbGJhY2soaSArIDEpKTtcbiAgICAgICAgcHJvbWlzZVNldHRlcnMucHVzaChwcm9taXNlU2V0dGVyKGkgKyAxKSk7XG4gICAgfVxuXG4gICAgcmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICB0aGlzLl9yZWplY3QocmVhc29uKTtcbiAgICB9O1xufX1cblxuUHJvbWlzZS5qb2luID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsYXN0ID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7XG4gICAgdmFyIGZuO1xuICAgIGlmIChsYXN0ID4gMCAmJiB0eXBlb2YgYXJndW1lbnRzW2xhc3RdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZm4gPSBhcmd1bWVudHNbbGFzdF07XG4gICAgICAgIGlmICghdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGxhc3QgPD0gOCAmJiBjYW5FdmFsdWF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgICAgICAgICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgICAgIHZhciBIb2xkZXJDbGFzcyA9IGhvbGRlckNsYXNzZXNbbGFzdCAtIDFdO1xuICAgICAgICAgICAgICAgIHZhciBob2xkZXIgPSBuZXcgSG9sZGVyQ2xhc3MoZm4pO1xuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFja3MgPSB0aGVuQ2FsbGJhY2tzO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0OyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UoYXJndW1lbnRzW2ldLCByZXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXRGaWVsZCA9IG1heWJlUHJvbWlzZS5fYml0RmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3RoZW4oY2FsbGJhY2tzW2ldLCByZWplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgcmV0LCBob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VTZXR0ZXJzW2ldKG1heWJlUHJvbWlzZSwgaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3NbaV0uY2FsbChyZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl92YWx1ZSgpLCBob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5fcmVqZWN0KG1heWJlUHJvbWlzZS5fcmVhc29uKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQuX2NhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzW2ldLmNhbGwocmV0LCBtYXliZVByb21pc2UsIGhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFyZXQuX2lzRmF0ZVNlYWxlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldC5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldC5fc2V0T25DYW5jZWwoaG9sZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTs7XG4gICAgaWYgKGZuKSBhcmdzLnBvcCgpO1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZUFycmF5KGFyZ3MpLnByb21pc2UoKTtcbiAgICByZXR1cm4gZm4gIT09IHVuZGVmaW5lZCA/IHJldC5zcHJlYWQoZm4pIDogcmV0O1xufTtcblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDE4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlQXJyYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFwaVJlamVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKSB7XG52YXIgZ2V0RG9tYWluID0gUHJvbWlzZS5fZ2V0RG9tYWluO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgRU1QVFlfQVJSQVkgPSBbXTtcblxuZnVuY3Rpb24gTWFwcGluZ1Byb21pc2VBcnJheShwcm9taXNlcywgZm4sIGxpbWl0LCBfZmlsdGVyKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQocHJvbWlzZXMpO1xuICAgIHRoaXMuX3Byb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIHRoaXMuX2NhbGxiYWNrID0gZG9tYWluID09PSBudWxsID8gZm4gOiBkb21haW4uYmluZChmbik7XG4gICAgdGhpcy5fcHJlc2VydmVkVmFsdWVzID0gX2ZpbHRlciA9PT0gSU5URVJOQUxcbiAgICAgICAgPyBuZXcgQXJyYXkodGhpcy5sZW5ndGgoKSlcbiAgICAgICAgOiBudWxsO1xuICAgIHRoaXMuX2xpbWl0ID0gbGltaXQ7XG4gICAgdGhpcy5faW5GbGlnaHQgPSAwO1xuICAgIHRoaXMuX3F1ZXVlID0gbGltaXQgPj0gMSA/IFtdIDogRU1QVFlfQVJSQVk7XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtMik7XG59XG51dGlsLmluaGVyaXRzKE1hcHBpbmdQcm9taXNlQXJyYXksIFByb21pc2VBcnJheSk7XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkge307XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLl92YWx1ZXM7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoKCk7XG4gICAgdmFyIHByZXNlcnZlZFZhbHVlcyA9IHRoaXMuX3ByZXNlcnZlZFZhbHVlcztcbiAgICB2YXIgbGltaXQgPSB0aGlzLl9saW1pdDtcblxuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgaW5kZXggPSAoaW5kZXggKiAtMSkgLSAxO1xuICAgICAgICB2YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgIGlmIChsaW1pdCA+PSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9pbkZsaWdodC0tO1xuICAgICAgICAgICAgdGhpcy5fZHJhaW5RdWV1ZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobGltaXQgPj0gMSAmJiB0aGlzLl9pbkZsaWdodCA+PSBsaW1pdCkge1xuICAgICAgICAgICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fcXVldWUucHVzaChpbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXNlcnZlZFZhbHVlcyAhPT0gbnVsbCkgcHJlc2VydmVkVmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5fY2FsbGJhY2s7XG4gICAgICAgIHZhciByZWNlaXZlciA9IHByb21pc2UuX2JvdW5kVmFsdWUoKTtcbiAgICAgICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgdmFyIHJldCA9IHRyeUNhdGNoKGNhbGxiYWNrKS5jYWxsKHJlY2VpdmVyLCB2YWx1ZSwgaW5kZXgsIGxlbmd0aCk7XG4gICAgICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHByb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICAgICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICAgICAgcmV0LFxuICAgICAgICAgICAgcHJvbWlzZUNyZWF0ZWQsXG4gICAgICAgICAgICBwcmVzZXJ2ZWRWYWx1ZXMgIT09IG51bGwgPyBcIlByb21pc2UuZmlsdGVyXCIgOiBcIlByb21pc2UubWFwXCIsXG4gICAgICAgICAgICBwcm9taXNlXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3QocmV0LmUpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXQsIHRoaXMuX3Byb21pc2UpO1xuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIHZhciBiaXRGaWVsZCA9IG1heWJlUHJvbWlzZS5fYml0RmllbGQ7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICBpZiAobGltaXQgPj0gMSkgdGhpcy5faW5GbGlnaHQrKztcbiAgICAgICAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fcHJveHkodGhpcywgKGluZGV4ICsgMSkgKiAtMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIHJldCA9IG1heWJlUHJvbWlzZS5fdmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QobWF5YmVQcm9taXNlLl9yZWFzb24oKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpbmRleF0gPSByZXQ7XG4gICAgfVxuICAgIHZhciB0b3RhbFJlc29sdmVkID0gKyt0aGlzLl90b3RhbFJlc29sdmVkO1xuICAgIGlmICh0b3RhbFJlc29sdmVkID49IGxlbmd0aCkge1xuICAgICAgICBpZiAocHJlc2VydmVkVmFsdWVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9maWx0ZXIodmFsdWVzLCBwcmVzZXJ2ZWRWYWx1ZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZHJhaW5RdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcXVldWUgPSB0aGlzLl9xdWV1ZTtcbiAgICB2YXIgbGltaXQgPSB0aGlzLl9saW1pdDtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5fdmFsdWVzO1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwICYmIHRoaXMuX2luRmxpZ2h0IDwgbGltaXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuO1xuICAgICAgICB2YXIgaW5kZXggPSBxdWV1ZS5wb3AoKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZCh2YWx1ZXNbaW5kZXhdLCBpbmRleCk7XG4gICAgfVxufTtcblxuTWFwcGluZ1Byb21pc2VBcnJheS5wcm90b3R5cGUuX2ZpbHRlciA9IGZ1bmN0aW9uIChib29sZWFucywgdmFsdWVzKSB7XG4gICAgdmFyIGxlbiA9IHZhbHVlcy5sZW5ndGg7XG4gICAgdmFyIHJldCA9IG5ldyBBcnJheShsZW4pO1xuICAgIHZhciBqID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIGlmIChib29sZWFuc1tpXSkgcmV0W2orK10gPSB2YWx1ZXNbaV07XG4gICAgfVxuICAgIHJldC5sZW5ndGggPSBqO1xuICAgIHRoaXMuX3Jlc29sdmUocmV0KTtcbn07XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLnByZXNlcnZlZFZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJlc2VydmVkVmFsdWVzO1xufTtcblxuZnVuY3Rpb24gbWFwKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG5cbiAgICB2YXIgbGltaXQgPSAwO1xuICAgIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jb25jdXJyZW5jeSAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFR5cGVFcnJvcihcIidjb25jdXJyZW5jeScgbXVzdCBiZSBhIG51bWJlciBidXQgaXQgaXMgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyhvcHRpb25zLmNvbmN1cnJlbmN5KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGltaXQgPSBvcHRpb25zLmNvbmN1cnJlbmN5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25zIGFyZ3VtZW50IG11c3QgYmUgYW4gb2JqZWN0IGJ1dCBpdCBpcyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcob3B0aW9ucykpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsaW1pdCA9IHR5cGVvZiBsaW1pdCA9PT0gXCJudW1iZXJcIiAmJlxuICAgICAgICBpc0Zpbml0ZShsaW1pdCkgJiYgbGltaXQgPj0gMSA/IGxpbWl0IDogMDtcbiAgICByZXR1cm4gbmV3IE1hcHBpbmdQcm9taXNlQXJyYXkocHJvbWlzZXMsIGZuLCBsaW1pdCwgX2ZpbHRlcikucHJvbWlzZSgpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAoZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbWFwKHRoaXMsIGZuLCBvcHRpb25zLCBudWxsKTtcbn07XG5cblByb21pc2UubWFwID0gZnVuY3Rpb24gKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcikge1xuICAgIHJldHVybiBtYXAocHJvbWlzZXMsIGZuLCBvcHRpb25zLCBfZmlsdGVyKTtcbn07XG5cblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDE5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbiwgZGVidWcpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG5cblByb21pc2UubWV0aG9kID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBQcm9taXNlLlR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgcmV0Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICB2YXIgdmFsdWUgPSB0cnlDYXRjaChmbikuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIHByb21pc2VDcmVhdGVkID0gcmV0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgIGRlYnVnLmNoZWNrRm9yZ290dGVuUmV0dXJucyhcbiAgICAgICAgICAgIHZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgXCJQcm9taXNlLm1ldGhvZFwiLCByZXQpO1xuICAgICAgICByZXQuX3Jlc29sdmVGcm9tU3luY1ZhbHVlKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufTtcblxuUHJvbWlzZS5hdHRlbXB0ID0gUHJvbWlzZVtcInRyeVwiXSA9IGZ1bmN0aW9uIChmbikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgcmV0Ll9wdXNoQ29udGV4dCgpO1xuICAgIHZhciB2YWx1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZGVidWcuZGVwcmVjYXRlZChcImNhbGxpbmcgUHJvbWlzZS50cnkgd2l0aCBtb3JlIHRoYW4gMSBhcmd1bWVudFwiKTtcbiAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgdmFyIGN0eCA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgdmFsdWUgPSB1dGlsLmlzQXJyYXkoYXJnKSA/IHRyeUNhdGNoKGZuKS5hcHBseShjdHgsIGFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRyeUNhdGNoKGZuKS5jYWxsKGN0eCwgYXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IHRyeUNhdGNoKGZuKSgpO1xuICAgIH1cbiAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSByZXQuX3BvcENvbnRleHQoKTtcbiAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoXG4gICAgICAgIHZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgXCJQcm9taXNlLnRyeVwiLCByZXQpO1xuICAgIHJldC5fcmVzb2x2ZUZyb21TeW5jVmFsdWUodmFsdWUpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVzb2x2ZUZyb21TeW5jVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHV0aWwuZXJyb3JPYmopIHtcbiAgICAgICAgdGhpcy5fcmVqZWN0Q2FsbGJhY2sodmFsdWUuZSwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxufTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBtYXliZVdyYXBBc0Vycm9yID0gdXRpbC5tYXliZVdyYXBBc0Vycm9yO1xudmFyIGVycm9ycyA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKTtcbnZhciBPcGVyYXRpb25hbEVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xuXG5mdW5jdGlvbiBpc1VudHlwZWRFcnJvcihvYmopIHtcbiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgRXJyb3IgJiZcbiAgICAgICAgZXM1LmdldFByb3RvdHlwZU9mKG9iaikgPT09IEVycm9yLnByb3RvdHlwZTtcbn1cblxudmFyIHJFcnJvcktleSA9IC9eKD86bmFtZXxtZXNzYWdlfHN0YWNrfGNhdXNlKSQvO1xuZnVuY3Rpb24gd3JhcEFzT3BlcmF0aW9uYWxFcnJvcihvYmopIHtcbiAgICB2YXIgcmV0O1xuICAgIGlmIChpc1VudHlwZWRFcnJvcihvYmopKSB7XG4gICAgICAgIHJldCA9IG5ldyBPcGVyYXRpb25hbEVycm9yKG9iaik7XG4gICAgICAgIHJldC5uYW1lID0gb2JqLm5hbWU7XG4gICAgICAgIHJldC5tZXNzYWdlID0gb2JqLm1lc3NhZ2U7XG4gICAgICAgIHJldC5zdGFjayA9IG9iai5zdGFjaztcbiAgICAgICAgdmFyIGtleXMgPSBlczUua2V5cyhvYmopO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgaWYgKCFyRXJyb3JLZXkudGVzdChrZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICB1dGlsLm1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbihvYmopO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIG5vZGViYWNrRm9yUHJvbWlzZShwcm9taXNlLCBtdWx0aUFyZ3MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZXJyLCB2YWx1ZSkge1xuICAgICAgICBpZiAocHJvbWlzZSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlZCA9IHdyYXBBc09wZXJhdGlvbmFsRXJyb3IobWF5YmVXcmFwQXNFcnJvcihlcnIpKTtcbiAgICAgICAgICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2Uod3JhcHBlZCk7XG4gICAgICAgICAgICBwcm9taXNlLl9yZWplY3Qod3JhcHBlZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIW11bHRpQXJncykge1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTs7XG4gICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsKGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbm9kZWJhY2tGb3JQcm9taXNlO1xuXG59LHtcIi4vZXJyb3JzXCI6MTIsXCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSwyMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcblxuZnVuY3Rpb24gc3ByZWFkQWRhcHRlcih2YWwsIG5vZGViYWNrKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIGlmICghdXRpbC5pc0FycmF5KHZhbCkpIHJldHVybiBzdWNjZXNzQWRhcHRlci5jYWxsKHByb21pc2UsIHZhbCwgbm9kZWJhY2spO1xuICAgIHZhciByZXQgPVxuICAgICAgICB0cnlDYXRjaChub2RlYmFjaykuYXBwbHkocHJvbWlzZS5fYm91bmRWYWx1ZSgpLCBbbnVsbF0uY29uY2F0KHZhbCkpO1xuICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIocmV0LmUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3VjY2Vzc0FkYXB0ZXIodmFsLCBub2RlYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB2YXIgcmVjZWl2ZXIgPSBwcm9taXNlLl9ib3VuZFZhbHVlKCk7XG4gICAgdmFyIHJldCA9IHZhbCA9PT0gdW5kZWZpbmVkXG4gICAgICAgID8gdHJ5Q2F0Y2gobm9kZWJhY2spLmNhbGwocmVjZWl2ZXIsIG51bGwpXG4gICAgICAgIDogdHJ5Q2F0Y2gobm9kZWJhY2spLmNhbGwocmVjZWl2ZXIsIG51bGwsIHZhbCk7XG4gICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihyZXQuZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZXJyb3JBZGFwdGVyKHJlYXNvbiwgbm9kZWJhY2spIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgICAgdmFyIG5ld1JlYXNvbiA9IG5ldyBFcnJvcihyZWFzb24gKyBcIlwiKTtcbiAgICAgICAgbmV3UmVhc29uLmNhdXNlID0gcmVhc29uO1xuICAgICAgICByZWFzb24gPSBuZXdSZWFzb247XG4gICAgfVxuICAgIHZhciByZXQgPSB0cnlDYXRjaChub2RlYmFjaykuY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksIHJlYXNvbik7XG4gICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihyZXQuZSk7XG4gICAgfVxufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5hc0NhbGxiYWNrID0gUHJvbWlzZS5wcm90b3R5cGUubm9kZWlmeSA9IGZ1bmN0aW9uIChub2RlYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG5vZGViYWNrID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgYWRhcHRlciA9IHN1Y2Nlc3NBZGFwdGVyO1xuICAgICAgICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIE9iamVjdChvcHRpb25zKS5zcHJlYWQpIHtcbiAgICAgICAgICAgIGFkYXB0ZXIgPSBzcHJlYWRBZGFwdGVyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgZXJyb3JBZGFwdGVyLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIG5vZGViYWNrXG4gICAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG52YXIgbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJjaXJjdWxhciBwcm9taXNlIHJlc29sdXRpb24gY2hhaW5cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xufTtcbnZhciByZWZsZWN0SGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbih0aGlzLl90YXJnZXQoKSk7XG59O1xudmFyIGFwaVJlamVjdGlvbiA9IGZ1bmN0aW9uKG1zZykge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKG1zZykpO1xufTtcbmZ1bmN0aW9uIFByb3h5YWJsZSgpIHt9XG52YXIgVU5ERUZJTkVEX0JJTkRJTkcgPSB7fTtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcblxudmFyIGdldERvbWFpbjtcbmlmICh1dGlsLmlzTm9kZSkge1xuICAgIGdldERvbWFpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmV0ID0gcHJvY2Vzcy5kb21haW47XG4gICAgICAgIGlmIChyZXQgPT09IHVuZGVmaW5lZCkgcmV0ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBnZXREb21haW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cbnV0aWwubm90RW51bWVyYWJsZVByb3AoUHJvbWlzZSwgXCJfZ2V0RG9tYWluXCIsIGdldERvbWFpbik7XG5cbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgQXN5bmMgPSBfZGVyZXFfKFwiLi9hc3luY1wiKTtcbnZhciBhc3luYyA9IG5ldyBBc3luYygpO1xuZXM1LmRlZmluZVByb3BlcnR5KFByb21pc2UsIFwiX2FzeW5jXCIsIHt2YWx1ZTogYXN5bmN9KTtcbnZhciBlcnJvcnMgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIik7XG52YXIgVHlwZUVycm9yID0gUHJvbWlzZS5UeXBlRXJyb3IgPSBlcnJvcnMuVHlwZUVycm9yO1xuUHJvbWlzZS5SYW5nZUVycm9yID0gZXJyb3JzLlJhbmdlRXJyb3I7XG52YXIgQ2FuY2VsbGF0aW9uRXJyb3IgPSBQcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yID0gZXJyb3JzLkNhbmNlbGxhdGlvbkVycm9yO1xuUHJvbWlzZS5UaW1lb3V0RXJyb3IgPSBlcnJvcnMuVGltZW91dEVycm9yO1xuUHJvbWlzZS5PcGVyYXRpb25hbEVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG5Qcm9taXNlLlJlamVjdGlvbkVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG5Qcm9taXNlLkFnZ3JlZ2F0ZUVycm9yID0gZXJyb3JzLkFnZ3JlZ2F0ZUVycm9yO1xudmFyIElOVEVSTkFMID0gZnVuY3Rpb24oKXt9O1xudmFyIEFQUExZID0ge307XG52YXIgTkVYVF9GSUxURVIgPSB7fTtcbnZhciB0cnlDb252ZXJ0VG9Qcm9taXNlID0gX2RlcmVxXyhcIi4vdGhlbmFibGVzXCIpKFByb21pc2UsIElOVEVSTkFMKTtcbnZhciBQcm9taXNlQXJyYXkgPVxuICAgIF9kZXJlcV8oXCIuL3Byb21pc2VfYXJyYXlcIikoUHJvbWlzZSwgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uLCBQcm94eWFibGUpO1xudmFyIENvbnRleHQgPSBfZGVyZXFfKFwiLi9jb250ZXh0XCIpKFByb21pc2UpO1xuIC8qanNoaW50IHVudXNlZDpmYWxzZSovXG52YXIgY3JlYXRlQ29udGV4dCA9IENvbnRleHQuY3JlYXRlO1xudmFyIGRlYnVnID0gX2RlcmVxXyhcIi4vZGVidWdnYWJpbGl0eVwiKShQcm9taXNlLCBDb250ZXh0KTtcbnZhciBDYXB0dXJlZFRyYWNlID0gZGVidWcuQ2FwdHVyZWRUcmFjZTtcbnZhciBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0ID1cbiAgICBfZGVyZXFfKFwiLi9maW5hbGx5XCIpKFByb21pc2UsIHRyeUNvbnZlcnRUb1Byb21pc2UpO1xudmFyIGNhdGNoRmlsdGVyID0gX2RlcmVxXyhcIi4vY2F0Y2hfZmlsdGVyXCIpKE5FWFRfRklMVEVSKTtcbnZhciBub2RlYmFja0ZvclByb21pc2UgPSBfZGVyZXFfKFwiLi9ub2RlYmFja1wiKTtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuZnVuY3Rpb24gY2hlY2soc2VsZiwgZXhlY3V0b3IpIHtcbiAgICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGV4ZWN1dG9yKSk7XG4gICAgfVxuICAgIGlmIChzZWxmLmNvbnN0cnVjdG9yICE9PSBQcm9taXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgaW52b2tlZCBkaXJlY3RseVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSAwO1xuICAgIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcHJvbWlzZTAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVjZWl2ZXIwID0gdW5kZWZpbmVkO1xuICAgIGlmIChleGVjdXRvciAhPT0gSU5URVJOQUwpIHtcbiAgICAgICAgY2hlY2sodGhpcywgZXhlY3V0b3IpO1xuICAgICAgICB0aGlzLl9yZXNvbHZlRnJvbUV4ZWN1dG9yKGV4ZWN1dG9yKTtcbiAgICB9XG4gICAgdGhpcy5fcHJvbWlzZUNyZWF0ZWQoKTtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlQ3JlYXRlZFwiLCB0aGlzKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBQcm9taXNlXVwiO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuY2F1Z2h0ID0gUHJvbWlzZS5wcm90b3R5cGVbXCJjYXRjaFwiXSA9IGZ1bmN0aW9uIChmbikge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgIHZhciBjYXRjaEluc3RhbmNlcyA9IG5ldyBBcnJheShsZW4gLSAxKSxcbiAgICAgICAgICAgIGogPSAwLCBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuIC0gMTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgY2F0Y2hJbnN0YW5jZXNbaisrXSA9IGl0ZW07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYW4gb2JqZWN0IGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGl0ZW0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaEluc3RhbmNlcy5sZW5ndGggPSBqO1xuICAgICAgICBmbiA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIGNhdGNoRmlsdGVyKGNhdGNoSW5zdGFuY2VzLCBmbiwgdGhpcykpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgZm4pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmVmbGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihyZWZsZWN0SGFuZGxlcixcbiAgICAgICAgcmVmbGVjdEhhbmRsZXIsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAoZGlkRnVsZmlsbCwgZGlkUmVqZWN0KSB7XG4gICAgaWYgKGRlYnVnLndhcm5pbmdzKCkgJiYgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgdHlwZW9mIGRpZEZ1bGZpbGwgIT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICB0eXBlb2YgZGlkUmVqZWN0ICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdmFyIG1zZyA9IFwiLnRoZW4oKSBvbmx5IGFjY2VwdHMgZnVuY3Rpb25zIGJ1dCB3YXMgcGFzc2VkOiBcIiArXG4gICAgICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyhkaWRGdWxmaWxsKTtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBtc2cgKz0gXCIsIFwiICsgdXRpbC5jbGFzc1N0cmluZyhkaWRSZWplY3QpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3dhcm4obXNnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oZGlkRnVsZmlsbCwgZGlkUmVqZWN0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRvbmUgPSBmdW5jdGlvbiAoZGlkRnVsZmlsbCwgZGlkUmVqZWN0KSB7XG4gICAgdmFyIHByb21pc2UgPVxuICAgICAgICB0aGlzLl90aGVuKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgcHJvbWlzZS5fc2V0SXNGaW5hbCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc3ByZWFkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hbGwoKS5fdGhlbihmbiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIEFQUExZLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXQgPSB7XG4gICAgICAgIGlzRnVsZmlsbGVkOiBmYWxzZSxcbiAgICAgICAgaXNSZWplY3RlZDogZmFsc2UsXG4gICAgICAgIGZ1bGZpbGxtZW50VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgcmVqZWN0aW9uUmVhc29uOiB1bmRlZmluZWRcbiAgICB9O1xuICAgIGlmICh0aGlzLmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgcmV0LmZ1bGZpbGxtZW50VmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICAgIHJldC5pc0Z1bGZpbGxlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICByZXQucmVqZWN0aW9uUmVhc29uID0gdGhpcy5yZWFzb24oKTtcbiAgICAgICAgcmV0LmlzUmVqZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLl93YXJuKFwiLmFsbCgpIHdhcyBwYXNzZWQgYXJndW1lbnRzIGJ1dCBpdCBkb2VzIG5vdCB0YWtlIGFueVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlQXJyYXkodGhpcykucHJvbWlzZSgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gdGhpcy5jYXVnaHQodXRpbC5vcmlnaW5hdGVzRnJvbVJlamVjdGlvbiwgZm4pO1xufTtcblxuUHJvbWlzZS5pcyA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICByZXR1cm4gdmFsIGluc3RhbmNlb2YgUHJvbWlzZTtcbn07XG5cblByb21pc2UuZnJvbU5vZGUgPSBQcm9taXNlLmZyb21DYWxsYmFjayA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdmFyIG11bHRpQXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gISFPYmplY3QoYXJndW1lbnRzWzFdKS5tdWx0aUFyZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2goZm4pKG5vZGViYWNrRm9yUHJvbWlzZShyZXQsIG11bHRpQXJncykpO1xuICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHJldC5fcmVqZWN0Q2FsbGJhY2socmVzdWx0LmUsIHRydWUpO1xuICAgIH1cbiAgICBpZiAoIXJldC5faXNGYXRlU2VhbGVkKCkpIHJldC5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UuYWxsID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlQXJyYXkocHJvbWlzZXMpLnByb21pc2UoKTtcbn07XG5cblByb21pc2UuY2FzdCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICB2YXIgcmV0ID0gdHJ5Q29udmVydFRvUHJvbWlzZShvYmopO1xuICAgIGlmICghKHJldCBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICByZXQuX3NldEZ1bGZpbGxlZCgpO1xuICAgICAgICByZXQuX3JlamVjdGlvbkhhbmRsZXIwID0gb2JqO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5yZXNvbHZlID0gUHJvbWlzZS5mdWxmaWxsZWQgPSBQcm9taXNlLmNhc3Q7XG5cblByb21pc2UucmVqZWN0ID0gUHJvbWlzZS5yZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICByZXQuX3JlamVjdENhbGxiYWNrKHJlYXNvbiwgdHJ1ZSk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2Uuc2V0U2NoZWR1bGVyID0gZnVuY3Rpb24oZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHJldHVybiBhc3luYy5zZXRTY2hlZHVsZXIoZm4pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3RoZW4gPSBmdW5jdGlvbiAoXG4gICAgZGlkRnVsZmlsbCxcbiAgICBkaWRSZWplY3QsXG4gICAgXywgICAgcmVjZWl2ZXIsXG4gICAgaW50ZXJuYWxEYXRhXG4pIHtcbiAgICB2YXIgaGF2ZUludGVybmFsRGF0YSA9IGludGVybmFsRGF0YSAhPT0gdW5kZWZpbmVkO1xuICAgIHZhciBwcm9taXNlID0gaGF2ZUludGVybmFsRGF0YSA/IGludGVybmFsRGF0YSA6IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgdmFyIGJpdEZpZWxkID0gdGFyZ2V0Ll9iaXRGaWVsZDtcblxuICAgIGlmICghaGF2ZUludGVybmFsRGF0YSkge1xuICAgICAgICBwcm9taXNlLl9wcm9wYWdhdGVGcm9tKHRoaXMsIDMpO1xuICAgICAgICBwcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICBpZiAocmVjZWl2ZXIgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKCh0aGlzLl9iaXRGaWVsZCAmIDIwOTcxNTIpICE9PSAwKSkge1xuICAgICAgICAgICAgaWYgKCEoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyID0gdGhpcy5fYm91bmRWYWx1ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlciA9IHRhcmdldCA9PT0gdGhpcyA/IHVuZGVmaW5lZCA6IHRoaXMuX2JvdW5kVG87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KFwicHJvbWlzZUNoYWluZWRcIiwgdGhpcywgcHJvbWlzZSk7XG4gICAgfVxuXG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIGlmICghKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgdmFyIGhhbmRsZXIsIHZhbHVlLCBzZXR0bGVyID0gdGFyZ2V0Ll9zZXR0bGVQcm9taXNlQ3R4O1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGFyZ2V0Ll9yZWplY3Rpb25IYW5kbGVyMDtcbiAgICAgICAgICAgIGhhbmRsZXIgPSBkaWRGdWxmaWxsO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRhcmdldC5fZnVsZmlsbG1lbnRIYW5kbGVyMDtcbiAgICAgICAgICAgIGhhbmRsZXIgPSBkaWRSZWplY3Q7XG4gICAgICAgICAgICB0YXJnZXQuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldHRsZXIgPSB0YXJnZXQuX3NldHRsZVByb21pc2VMYXRlQ2FuY2VsbGF0aW9uT2JzZXJ2ZXI7XG4gICAgICAgICAgICB2YWx1ZSA9IG5ldyBDYW5jZWxsYXRpb25FcnJvcihcImxhdGUgY2FuY2VsbGF0aW9uIG9ic2VydmVyXCIpO1xuICAgICAgICAgICAgdGFyZ2V0Ll9hdHRhY2hFeHRyYVRyYWNlKHZhbHVlKTtcbiAgICAgICAgICAgIGhhbmRsZXIgPSBkaWRSZWplY3Q7XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYy5pbnZva2Uoc2V0dGxlciwgdGFyZ2V0LCB7XG4gICAgICAgICAgICBoYW5kbGVyOiBkb21haW4gPT09IG51bGwgPyBoYW5kbGVyXG4gICAgICAgICAgICAgICAgOiAodHlwZW9mIGhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIiAmJiBkb21haW4uYmluZChoYW5kbGVyKSksXG4gICAgICAgICAgICBwcm9taXNlOiBwcm9taXNlLFxuICAgICAgICAgICAgcmVjZWl2ZXI6IHJlY2VpdmVyLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldC5fYWRkQ2FsbGJhY2tzKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCwgcHJvbWlzZSwgcmVjZWl2ZXIsIGRvbWFpbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2U7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9iaXRGaWVsZCAmIDY1NTM1O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzRmF0ZVNlYWxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMTE3NTA2MDQ4KSAhPT0gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0ZvbGxvd2luZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNjcxMDg4NjQpID09PSA2NzEwODg2NDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRMZW5ndGggPSBmdW5jdGlvbiAobGVuKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSAodGhpcy5fYml0RmllbGQgJiAtNjU1MzYpIHxcbiAgICAgICAgKGxlbiAmIDY1NTM1KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRGdWxmaWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDMzNTU0NDMyO1xuICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VGdWxmaWxsZWRcIiwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0UmVqZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDE2Nzc3MjE2O1xuICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VSZWplY3RlZFwiLCB0aGlzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRGb2xsb3dpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDY3MTA4ODY0O1xuICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VSZXNvbHZlZFwiLCB0aGlzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRJc0ZpbmFsID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCA0MTk0MzA0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzRmluYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDQxOTQzMDQpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjY1NTM2KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgNjU1MzY7XG4gICAgdGhpcy5fZmlyZUV2ZW50KFwicHJvbWlzZUNhbmNlbGxlZFwiLCB0aGlzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRBc3luY0d1YXJhbnRlZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoYXN5bmMuaGFzQ3VzdG9tU2NoZWR1bGVyKCkpIHJldHVybjtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMTM0MjE3NzI4O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlY2VpdmVyQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICB2YXIgcmV0ID0gaW5kZXggPT09IDAgPyB0aGlzLl9yZWNlaXZlcjAgOiB0aGlzW1xuICAgICAgICAgICAgaW5kZXggKiA0IC0gNCArIDNdO1xuICAgIGlmIChyZXQgPT09IFVOREVGSU5FRF9CSU5ESU5HKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChyZXQgPT09IHVuZGVmaW5lZCAmJiB0aGlzLl9pc0JvdW5kKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JvdW5kVmFsdWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpc1tcbiAgICAgICAgICAgIGluZGV4ICogNCAtIDQgKyAyXTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mdWxmaWxsbWVudEhhbmRsZXJBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHJldHVybiB0aGlzW1xuICAgICAgICAgICAgaW5kZXggKiA0IC0gNCArIDBdO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlamVjdGlvbkhhbmRsZXJBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHJldHVybiB0aGlzW1xuICAgICAgICAgICAgaW5kZXggKiA0IC0gNCArIDFdO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2JvdW5kVmFsdWUgPSBmdW5jdGlvbigpIHt9O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbWlncmF0ZUNhbGxiYWNrMCA9IGZ1bmN0aW9uIChmb2xsb3dlcikge1xuICAgIHZhciBiaXRGaWVsZCA9IGZvbGxvd2VyLl9iaXRGaWVsZDtcbiAgICB2YXIgZnVsZmlsbCA9IGZvbGxvd2VyLl9mdWxmaWxsbWVudEhhbmRsZXIwO1xuICAgIHZhciByZWplY3QgPSBmb2xsb3dlci5fcmVqZWN0aW9uSGFuZGxlcjA7XG4gICAgdmFyIHByb21pc2UgPSBmb2xsb3dlci5fcHJvbWlzZTA7XG4gICAgdmFyIHJlY2VpdmVyID0gZm9sbG93ZXIuX3JlY2VpdmVyQXQoMCk7XG4gICAgaWYgKHJlY2VpdmVyID09PSB1bmRlZmluZWQpIHJlY2VpdmVyID0gVU5ERUZJTkVEX0JJTkRJTkc7XG4gICAgdGhpcy5fYWRkQ2FsbGJhY2tzKGZ1bGZpbGwsIHJlamVjdCwgcHJvbWlzZSwgcmVjZWl2ZXIsIG51bGwpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX21pZ3JhdGVDYWxsYmFja0F0ID0gZnVuY3Rpb24gKGZvbGxvd2VyLCBpbmRleCkge1xuICAgIHZhciBmdWxmaWxsID0gZm9sbG93ZXIuX2Z1bGZpbGxtZW50SGFuZGxlckF0KGluZGV4KTtcbiAgICB2YXIgcmVqZWN0ID0gZm9sbG93ZXIuX3JlamVjdGlvbkhhbmRsZXJBdChpbmRleCk7XG4gICAgdmFyIHByb21pc2UgPSBmb2xsb3dlci5fcHJvbWlzZUF0KGluZGV4KTtcbiAgICB2YXIgcmVjZWl2ZXIgPSBmb2xsb3dlci5fcmVjZWl2ZXJBdChpbmRleCk7XG4gICAgaWYgKHJlY2VpdmVyID09PSB1bmRlZmluZWQpIHJlY2VpdmVyID0gVU5ERUZJTkVEX0JJTkRJTkc7XG4gICAgdGhpcy5fYWRkQ2FsbGJhY2tzKGZ1bGZpbGwsIHJlamVjdCwgcHJvbWlzZSwgcmVjZWl2ZXIsIG51bGwpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2FkZENhbGxiYWNrcyA9IGZ1bmN0aW9uIChcbiAgICBmdWxmaWxsLFxuICAgIHJlamVjdCxcbiAgICBwcm9taXNlLFxuICAgIHJlY2VpdmVyLFxuICAgIGRvbWFpblxuKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5fbGVuZ3RoKCk7XG5cbiAgICBpZiAoaW5kZXggPj0gNjU1MzUgLSA0KSB7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fc2V0TGVuZ3RoKDApO1xuICAgIH1cblxuICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICB0aGlzLl9wcm9taXNlMCA9IHByb21pc2U7XG4gICAgICAgIHRoaXMuX3JlY2VpdmVyMCA9IHJlY2VpdmVyO1xuICAgICAgICBpZiAodHlwZW9mIGZ1bGZpbGwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMCA9XG4gICAgICAgICAgICAgICAgZG9tYWluID09PSBudWxsID8gZnVsZmlsbCA6IGRvbWFpbi5iaW5kKGZ1bGZpbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmVqZWN0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwID1cbiAgICAgICAgICAgICAgICBkb21haW4gPT09IG51bGwgPyByZWplY3QgOiBkb21haW4uYmluZChyZWplY3QpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJhc2UgPSBpbmRleCAqIDQgLSA0O1xuICAgICAgICB0aGlzW2Jhc2UgKyAyXSA9IHByb21pc2U7XG4gICAgICAgIHRoaXNbYmFzZSArIDNdID0gcmVjZWl2ZXI7XG4gICAgICAgIGlmICh0eXBlb2YgZnVsZmlsbCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzW2Jhc2UgKyAwXSA9XG4gICAgICAgICAgICAgICAgZG9tYWluID09PSBudWxsID8gZnVsZmlsbCA6IGRvbWFpbi5iaW5kKGZ1bGZpbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmVqZWN0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXNbYmFzZSArIDFdID1cbiAgICAgICAgICAgICAgICBkb21haW4gPT09IG51bGwgPyByZWplY3QgOiBkb21haW4uYmluZChyZWplY3QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3NldExlbmd0aChpbmRleCArIDEpO1xuICAgIHJldHVybiBpbmRleDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9wcm94eSA9IGZ1bmN0aW9uIChwcm94eWFibGUsIGFyZykge1xuICAgIHRoaXMuX2FkZENhbGxiYWNrcyh1bmRlZmluZWQsIHVuZGVmaW5lZCwgYXJnLCBwcm94eWFibGUsIG51bGwpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Jlc29sdmVDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlLCBzaG91bGRCaW5kKSB7XG4gICAgaWYgKCgodGhpcy5fYml0RmllbGQgJiAxMTc1MDYwNDgpICE9PSAwKSkgcmV0dXJuO1xuICAgIGlmICh2YWx1ZSA9PT0gdGhpcylcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdENhbGxiYWNrKG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yKCksIGZhbHNlKTtcbiAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh2YWx1ZSwgdGhpcyk7XG4gICAgaWYgKCEobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkpIHJldHVybiB0aGlzLl9mdWxmaWxsKHZhbHVlKTtcblxuICAgIGlmIChzaG91bGRCaW5kKSB0aGlzLl9wcm9wYWdhdGVGcm9tKG1heWJlUHJvbWlzZSwgMik7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG1heWJlUHJvbWlzZS5fdGFyZ2V0KCk7XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdGhpcykge1xuICAgICAgICB0aGlzLl9yZWplY3QobWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IoKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgYml0RmllbGQgPSBwcm9taXNlLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuX2xlbmd0aCgpO1xuICAgICAgICBpZiAobGVuID4gMCkgcHJvbWlzZS5fbWlncmF0ZUNhbGxiYWNrMCh0aGlzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgcHJvbWlzZS5fbWlncmF0ZUNhbGxiYWNrQXQodGhpcywgaSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2V0Rm9sbG93aW5nKCk7XG4gICAgICAgIHRoaXMuX3NldExlbmd0aCgwKTtcbiAgICAgICAgdGhpcy5fc2V0Rm9sbG93ZWUocHJvbWlzZSk7XG4gICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICB0aGlzLl9mdWxmaWxsKHByb21pc2UuX3ZhbHVlKCkpO1xuICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgdGhpcy5fcmVqZWN0KHByb21pc2UuX3JlYXNvbigpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVhc29uID0gbmV3IENhbmNlbGxhdGlvbkVycm9yKFwibGF0ZSBjYW5jZWxsYXRpb24gb2JzZXJ2ZXJcIik7XG4gICAgICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2UocmVhc29uKTtcbiAgICAgICAgdGhpcy5fcmVqZWN0KHJlYXNvbik7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlamVjdENhbGxiYWNrID1cbmZ1bmN0aW9uKHJlYXNvbiwgc3luY2hyb25vdXMsIGlnbm9yZU5vbkVycm9yV2FybmluZ3MpIHtcbiAgICB2YXIgdHJhY2UgPSB1dGlsLmVuc3VyZUVycm9yT2JqZWN0KHJlYXNvbik7XG4gICAgdmFyIGhhc1N0YWNrID0gdHJhY2UgPT09IHJlYXNvbjtcbiAgICBpZiAoIWhhc1N0YWNrICYmICFpZ25vcmVOb25FcnJvcldhcm5pbmdzICYmIGRlYnVnLndhcm5pbmdzKCkpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBcImEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQgd2l0aCBhIG5vbi1lcnJvcjogXCIgK1xuICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyhyZWFzb24pO1xuICAgICAgICB0aGlzLl93YXJuKG1lc3NhZ2UsIHRydWUpO1xuICAgIH1cbiAgICB0aGlzLl9hdHRhY2hFeHRyYVRyYWNlKHRyYWNlLCBzeW5jaHJvbm91cyA/IGhhc1N0YWNrIDogZmFsc2UpO1xuICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Jlc29sdmVGcm9tRXhlY3V0b3IgPSBmdW5jdGlvbiAoZXhlY3V0b3IpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdGhpcy5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICB0aGlzLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciBzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgdmFyIHIgPSB0aGlzLl9leGVjdXRlKGV4ZWN1dG9yLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBwcm9taXNlLl9yZXNvbHZlQ2FsbGJhY2sodmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVhc29uLCBzeW5jaHJvbm91cyk7XG4gICAgfSk7XG4gICAgc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICB0aGlzLl9wb3BDb250ZXh0KCk7XG5cbiAgICBpZiAociAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHIsIHRydWUpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlRnJvbUhhbmRsZXIgPSBmdW5jdGlvbiAoXG4gICAgaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlXG4pIHtcbiAgICB2YXIgYml0RmllbGQgPSBwcm9taXNlLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDY1NTM2KSAhPT0gMCkpIHJldHVybjtcbiAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciB4O1xuICAgIGlmIChyZWNlaXZlciA9PT0gQVBQTFkpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUubGVuZ3RoICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICB4ID0gZXJyb3JPYmo7XG4gICAgICAgICAgICB4LmUgPSBuZXcgVHlwZUVycm9yKFwiY2Fubm90IC5zcHJlYWQoKSBhIG5vbi1hcnJheTogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyh2YWx1ZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeCA9IHRyeUNhdGNoKGhhbmRsZXIpLmFwcGx5KHRoaXMuX2JvdW5kVmFsdWUoKSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgeCA9IHRyeUNhdGNoKGhhbmRsZXIpLmNhbGwocmVjZWl2ZXIsIHZhbHVlKTtcbiAgICB9XG4gICAgdmFyIHByb21pc2VDcmVhdGVkID0gcHJvbWlzZS5fcG9wQ29udGV4dCgpO1xuICAgIGJpdEZpZWxkID0gcHJvbWlzZS5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiA2NTUzNikgIT09IDApKSByZXR1cm47XG5cbiAgICBpZiAoeCA9PT0gTkVYVF9GSUxURVIpIHtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0KHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHggPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHguZSwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnLmNoZWNrRm9yZ290dGVuUmV0dXJucyh4LCBwcm9taXNlQ3JlYXRlZCwgXCJcIiwgIHByb21pc2UsIHRoaXMpO1xuICAgICAgICBwcm9taXNlLl9yZXNvbHZlQ2FsbGJhY2soeCk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3RhcmdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXQgPSB0aGlzO1xuICAgIHdoaWxlIChyZXQuX2lzRm9sbG93aW5nKCkpIHJldCA9IHJldC5fZm9sbG93ZWUoKTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2ZvbGxvd2VlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldEZvbGxvd2VlID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwID0gcHJvbWlzZTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlID0gZnVuY3Rpb24ocHJvbWlzZSwgaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlKSB7XG4gICAgdmFyIGlzUHJvbWlzZSA9IHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlO1xuICAgIHZhciBiaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkO1xuICAgIHZhciBhc3luY0d1YXJhbnRlZWQgPSAoKGJpdEZpZWxkICYgMTM0MjE3NzI4KSAhPT0gMCk7XG4gICAgaWYgKCgoYml0RmllbGQgJiA2NTUzNikgIT09IDApKSB7XG4gICAgICAgIGlmIChpc1Byb21pc2UpIHByb21pc2UuX2ludm9rZUludGVybmFsT25DYW5jZWwoKTtcblxuICAgICAgICBpZiAocmVjZWl2ZXIgaW5zdGFuY2VvZiBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0ICYmXG4gICAgICAgICAgICByZWNlaXZlci5pc0ZpbmFsbHlIYW5kbGVyKCkpIHtcbiAgICAgICAgICAgIHJlY2VpdmVyLmNhbmNlbFByb21pc2UgPSBwcm9taXNlO1xuICAgICAgICAgICAgaWYgKHRyeUNhdGNoKGhhbmRsZXIpLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9yZWplY3QoZXJyb3JPYmouZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlciA9PT0gcmVmbGVjdEhhbmRsZXIpIHtcbiAgICAgICAgICAgIHByb21pc2UuX2Z1bGZpbGwocmVmbGVjdEhhbmRsZXIuY2FsbChyZWNlaXZlcikpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlY2VpdmVyIGluc3RhbmNlb2YgUHJveHlhYmxlKSB7XG4gICAgICAgICAgICByZWNlaXZlci5fcHJvbWlzZUNhbmNlbGxlZChwcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UgfHwgcHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2VBcnJheSkge1xuICAgICAgICAgICAgcHJvbWlzZS5fY2FuY2VsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWNlaXZlci5jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBpZiAoIWlzUHJvbWlzZSkge1xuICAgICAgICAgICAgaGFuZGxlci5jYWxsKHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoYXN5bmNHdWFyYW50ZWVkKSBwcm9taXNlLl9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbiAgICAgICAgICAgIHRoaXMuX3NldHRsZVByb21pc2VGcm9tSGFuZGxlcihoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChyZWNlaXZlciBpbnN0YW5jZW9mIFByb3h5YWJsZSkge1xuICAgICAgICBpZiAoIXJlY2VpdmVyLl9pc1Jlc29sdmVkKCkpIHtcbiAgICAgICAgICAgIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyLl9wcm9taXNlRnVsZmlsbGVkKHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIuX3Byb21pc2VSZWplY3RlZCh2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZSkge1xuICAgICAgICBpZiAoYXN5bmNHdWFyYW50ZWVkKSBwcm9taXNlLl9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbiAgICAgICAgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb21pc2UuX3JlamVjdCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZUxhdGVDYW5jZWxsYXRpb25PYnNlcnZlciA9IGZ1bmN0aW9uKGN0eCkge1xuICAgIHZhciBoYW5kbGVyID0gY3R4LmhhbmRsZXI7XG4gICAgdmFyIHByb21pc2UgPSBjdHgucHJvbWlzZTtcbiAgICB2YXIgcmVjZWl2ZXIgPSBjdHgucmVjZWl2ZXI7XG4gICAgdmFyIHZhbHVlID0gY3R4LnZhbHVlO1xuICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGlmICghKHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuICAgICAgICAgICAgaGFuZGxlci5jYWxsKHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlRnJvbUhhbmRsZXIoaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAocHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0KHZhbHVlKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZUN0eCA9IGZ1bmN0aW9uKGN0eCkge1xuICAgIHRoaXMuX3NldHRsZVByb21pc2UoY3R4LnByb21pc2UsIGN0eC5oYW5kbGVyLCBjdHgucmVjZWl2ZXIsIGN0eC52YWx1ZSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZTAgPSBmdW5jdGlvbihoYW5kbGVyLCB2YWx1ZSwgYml0RmllbGQpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2UwO1xuICAgIHZhciByZWNlaXZlciA9IHRoaXMuX3JlY2VpdmVyQXQoMCk7XG4gICAgdGhpcy5fcHJvbWlzZTAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVjZWl2ZXIwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3NldHRsZVByb21pc2UocHJvbWlzZSwgaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9jbGVhckNhbGxiYWNrRGF0YUF0SW5kZXggPSBmdW5jdGlvbihpbmRleCkge1xuICAgIHZhciBiYXNlID0gaW5kZXggKiA0IC0gNDtcbiAgICB0aGlzW2Jhc2UgKyAyXSA9XG4gICAgdGhpc1tiYXNlICsgM10gPVxuICAgIHRoaXNbYmFzZSArIDBdID1cbiAgICB0aGlzW2Jhc2UgKyAxXSA9IHVuZGVmaW5lZDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mdWxmaWxsID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gdGhpcy5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiAxMTc1MDYwNDgpID4+PiAxNikpIHJldHVybjtcbiAgICBpZiAodmFsdWUgPT09IHRoaXMpIHtcbiAgICAgICAgdmFyIGVyciA9IG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yKCk7XG4gICAgICAgIHRoaXMuX2F0dGFjaEV4dHJhVHJhY2UoZXJyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdChlcnIpO1xuICAgIH1cbiAgICB0aGlzLl9zZXRGdWxmaWxsZWQoKTtcbiAgICB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMCA9IHZhbHVlO1xuXG4gICAgaWYgKChiaXRGaWVsZCAmIDY1NTM1KSA+IDApIHtcbiAgICAgICAgaWYgKCgoYml0RmllbGQgJiAxMzQyMTc3MjgpICE9PSAwKSkge1xuICAgICAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFzeW5jLnNldHRsZVByb21pc2VzKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlamVjdCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB2YXIgYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDExNzUwNjA0OCkgPj4+IDE2KSkgcmV0dXJuO1xuICAgIHRoaXMuX3NldFJlamVjdGVkKCk7XG4gICAgdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMCA9IHJlYXNvbjtcblxuICAgIGlmICh0aGlzLl9pc0ZpbmFsKCkpIHtcbiAgICAgICAgcmV0dXJuIGFzeW5jLmZhdGFsRXJyb3IocmVhc29uLCB1dGlsLmlzTm9kZSk7XG4gICAgfVxuXG4gICAgaWYgKChiaXRGaWVsZCAmIDY1NTM1KSA+IDApIHtcbiAgICAgICAgYXN5bmMuc2V0dGxlUHJvbWlzZXModGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZW5zdXJlUG9zc2libGVSZWplY3Rpb25IYW5kbGVkKCk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Z1bGZpbGxQcm9taXNlcyA9IGZ1bmN0aW9uIChsZW4sIHZhbHVlKSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgaGFuZGxlciA9IHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlckF0KGkpO1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2VBdChpKTtcbiAgICAgICAgdmFyIHJlY2VpdmVyID0gdGhpcy5fcmVjZWl2ZXJBdChpKTtcbiAgICAgICAgdGhpcy5fY2xlYXJDYWxsYmFja0RhdGFBdEluZGV4KGkpO1xuICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlKHByb21pc2UsIGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlamVjdFByb21pc2VzID0gZnVuY3Rpb24gKGxlbiwgcmVhc29uKSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgaGFuZGxlciA9IHRoaXMuX3JlamVjdGlvbkhhbmRsZXJBdChpKTtcbiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlQXQoaSk7XG4gICAgICAgIHZhciByZWNlaXZlciA9IHRoaXMuX3JlY2VpdmVyQXQoaSk7XG4gICAgICAgIHRoaXMuX2NsZWFyQ2FsbGJhY2tEYXRhQXRJbmRleChpKTtcbiAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZShwcm9taXNlLCBoYW5kbGVyLCByZWNlaXZlciwgcmVhc29uKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gdGhpcy5fYml0RmllbGQ7XG4gICAgdmFyIGxlbiA9IChiaXRGaWVsZCAmIDY1NTM1KTtcblxuICAgIGlmIChsZW4gPiAwKSB7XG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgMTY4NDI3NTIpICE9PSAwKSkge1xuICAgICAgICAgICAgdmFyIHJlYXNvbiA9IHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjA7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlMCh0aGlzLl9yZWplY3Rpb25IYW5kbGVyMCwgcmVhc29uLCBiaXRGaWVsZCk7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3RQcm9taXNlcyhsZW4sIHJlYXNvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMDtcbiAgICAgICAgICAgIHRoaXMuX3NldHRsZVByb21pc2UwKHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAsIHZhbHVlLCBiaXRGaWVsZCk7XG4gICAgICAgICAgICB0aGlzLl9mdWxmaWxsUHJvbWlzZXMobGVuLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2V0TGVuZ3RoKDApO1xuICAgIH1cbiAgICB0aGlzLl9jbGVhckNhbmNlbGxhdGlvbkRhdGEoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVkVmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwO1xuICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjA7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gZGVmZXJSZXNvbHZlKHYpIHt0aGlzLnByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2KTt9XG5mdW5jdGlvbiBkZWZlclJlamVjdCh2KSB7dGhpcy5wcm9taXNlLl9yZWplY3RDYWxsYmFjayh2LCBmYWxzZSk7fVxuXG5Qcm9taXNlLmRlZmVyID0gUHJvbWlzZS5wZW5kaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcuZGVwcmVjYXRlZChcIlByb21pc2UuZGVmZXJcIiwgXCJuZXcgUHJvbWlzZVwiKTtcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9taXNlOiBwcm9taXNlLFxuICAgICAgICByZXNvbHZlOiBkZWZlclJlc29sdmUsXG4gICAgICAgIHJlamVjdDogZGVmZXJSZWplY3RcbiAgICB9O1xufTtcblxudXRpbC5ub3RFbnVtZXJhYmxlUHJvcChQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICBcIl9tYWtlU2VsZlJlc29sdXRpb25FcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICBtYWtlU2VsZlJlc29sdXRpb25FcnJvcik7XG5cbl9kZXJlcV8oXCIuL21ldGhvZFwiKShQcm9taXNlLCBJTlRFUk5BTCwgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uLFxuICAgIGRlYnVnKTtcbl9kZXJlcV8oXCIuL2JpbmRcIikoUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGRlYnVnKTtcbl9kZXJlcV8oXCIuL2NhbmNlbFwiKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbiwgZGVidWcpO1xuX2RlcmVxXyhcIi4vZGlyZWN0X3Jlc29sdmVcIikoUHJvbWlzZSk7XG5fZGVyZXFfKFwiLi9zeW5jaHJvbm91c19pbnNwZWN0aW9uXCIpKFByb21pc2UpO1xuX2RlcmVxXyhcIi4vam9pblwiKShcbiAgICBQcm9taXNlLCBQcm9taXNlQXJyYXksIHRyeUNvbnZlcnRUb1Byb21pc2UsIElOVEVSTkFMLCBkZWJ1Zyk7XG5Qcm9taXNlLlByb21pc2UgPSBQcm9taXNlO1xuUHJvbWlzZS52ZXJzaW9uID0gXCIzLjQuMFwiO1xuX2RlcmVxXygnLi9tYXAuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbiwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwsIGRlYnVnKTtcbl9kZXJlcV8oJy4vY2FsbF9nZXQuanMnKShQcm9taXNlKTtcbl9kZXJlcV8oJy4vdXNpbmcuanMnKShQcm9taXNlLCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsIGNyZWF0ZUNvbnRleHQsIElOVEVSTkFMLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL3RpbWVycy5qcycpKFByb21pc2UsIElOVEVSTkFMLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL2dlbmVyYXRvcnMuanMnKShQcm9taXNlLCBhcGlSZWplY3Rpb24sIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBQcm94eWFibGUsIGRlYnVnKTtcbl9kZXJlcV8oJy4vbm9kZWlmeS5qcycpKFByb21pc2UpO1xuX2RlcmVxXygnLi9wcm9taXNpZnkuanMnKShQcm9taXNlLCBJTlRFUk5BTCk7XG5fZGVyZXFfKCcuL3Byb3BzLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24pO1xuX2RlcmVxXygnLi9yYWNlLmpzJykoUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbik7XG5fZGVyZXFfKCcuL3JlZHVjZS5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBJTlRFUk5BTCwgZGVidWcpO1xuX2RlcmVxXygnLi9zZXR0bGUuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGRlYnVnKTtcbl9kZXJlcV8oJy4vc29tZS5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uKTtcbl9kZXJlcV8oJy4vZmlsdGVyLmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xuX2RlcmVxXygnLi9lYWNoLmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xuX2RlcmVxXygnLi9hbnkuanMnKShQcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIHV0aWwudG9GYXN0UHJvcGVydGllcyhQcm9taXNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICB1dGlsLnRvRmFzdFByb3BlcnRpZXMoUHJvbWlzZS5wcm90b3R5cGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZnVuY3Rpb24gZmlsbFR5cGVzKHZhbHVlKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICB2YXIgcCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgcC5fZnVsZmlsbG1lbnRIYW5kbGVyMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHAuX3JlamVjdGlvbkhhbmRsZXIwID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBwLl9wcm9taXNlMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgcC5fcmVjZWl2ZXIwID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIC8vIENvbXBsZXRlIHNsYWNrIHRyYWNraW5nLCBvcHQgb3V0IG9mIGZpZWxkLXR5cGUgdHJhY2tpbmcgYW5kICAgICAgICAgICBcbiAgICAvLyBzdGFiaWxpemUgbWFwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKHthOiAxfSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyh7YjogMn0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXMoe2M6IDN9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyhmdW5jdGlvbigpe30pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXModW5kZWZpbmVkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKGZhbHNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyhuZXcgUHJvbWlzZShJTlRFUk5BTCkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBkZWJ1Zy5zZXRCb3VuZHMoQXN5bmMuZmlyc3RMaW5lRXJyb3IsIHV0aWwubGFzdExpbmVFcnJvcik7ICAgICAgICAgICAgICAgXG4gICAgcmV0dXJuIFByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG59O1xuXG59LHtcIi4vYW55LmpzXCI6MSxcIi4vYXN5bmNcIjoyLFwiLi9iaW5kXCI6MyxcIi4vY2FsbF9nZXQuanNcIjo1LFwiLi9jYW5jZWxcIjo2LFwiLi9jYXRjaF9maWx0ZXJcIjo3LFwiLi9jb250ZXh0XCI6OCxcIi4vZGVidWdnYWJpbGl0eVwiOjksXCIuL2RpcmVjdF9yZXNvbHZlXCI6MTAsXCIuL2VhY2guanNcIjoxMSxcIi4vZXJyb3JzXCI6MTIsXCIuL2VzNVwiOjEzLFwiLi9maWx0ZXIuanNcIjoxNCxcIi4vZmluYWxseVwiOjE1LFwiLi9nZW5lcmF0b3JzLmpzXCI6MTYsXCIuL2pvaW5cIjoxNyxcIi4vbWFwLmpzXCI6MTgsXCIuL21ldGhvZFwiOjE5LFwiLi9ub2RlYmFja1wiOjIwLFwiLi9ub2RlaWZ5LmpzXCI6MjEsXCIuL3Byb21pc2VfYXJyYXlcIjoyMyxcIi4vcHJvbWlzaWZ5LmpzXCI6MjQsXCIuL3Byb3BzLmpzXCI6MjUsXCIuL3JhY2UuanNcIjoyNyxcIi4vcmVkdWNlLmpzXCI6MjgsXCIuL3NldHRsZS5qc1wiOjMwLFwiLi9zb21lLmpzXCI6MzEsXCIuL3N5bmNocm9ub3VzX2luc3BlY3Rpb25cIjozMixcIi4vdGhlbmFibGVzXCI6MzMsXCIuL3RpbWVycy5qc1wiOjM0LFwiLi91c2luZy5qc1wiOjM1LFwiLi91dGlsXCI6MzZ9XSwyMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgYXBpUmVqZWN0aW9uLCBQcm94eWFibGUpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBpc0FycmF5ID0gdXRpbC5pc0FycmF5O1xuXG5mdW5jdGlvbiB0b1Jlc29sdXRpb25WYWx1ZSh2YWwpIHtcbiAgICBzd2l0Y2godmFsKSB7XG4gICAgY2FzZSAtMjogcmV0dXJuIFtdO1xuICAgIGNhc2UgLTM6IHJldHVybiB7fTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFByb21pc2VBcnJheSh2YWx1ZXMpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgaWYgKHZhbHVlcyBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZS5fcHJvcGFnYXRlRnJvbSh2YWx1ZXMsIDMpO1xuICAgIH1cbiAgICBwcm9taXNlLl9zZXRPbkNhbmNlbCh0aGlzKTtcbiAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICB0aGlzLl90b3RhbFJlc29sdmVkID0gMDtcbiAgICB0aGlzLl9pbml0KHVuZGVmaW5lZCwgLTIpO1xufVxudXRpbC5pbmhlcml0cyhQcm9taXNlQXJyYXksIFByb3h5YWJsZSk7XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLnByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gaW5pdChfLCByZXNvbHZlVmFsdWVJZkVtcHR5KSB7XG4gICAgdmFyIHZhbHVlcyA9IHRyeUNvbnZlcnRUb1Byb21pc2UodGhpcy5fdmFsdWVzLCB0aGlzLl9wcm9taXNlKTtcbiAgICBpZiAodmFsdWVzIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuX3RhcmdldCgpO1xuICAgICAgICB2YXIgYml0RmllbGQgPSB2YWx1ZXMuX2JpdEZpZWxkO1xuICAgICAgICA7XG4gICAgICAgIHRoaXMuX3ZhbHVlcyA9IHZhbHVlcztcblxuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcy5fdGhlbihcbiAgICAgICAgICAgICAgICBpbml0LFxuICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdCxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICByZXNvbHZlVmFsdWVJZkVtcHR5XG4gICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlcy5fdmFsdWUoKTtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdCh2YWx1ZXMuX3JlYXNvbigpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YWx1ZXMgPSB1dGlsLmFzQXJyYXkodmFsdWVzKTtcbiAgICBpZiAodmFsdWVzID09PSBudWxsKSB7XG4gICAgICAgIHZhciBlcnIgPSBhcGlSZWplY3Rpb24oXG4gICAgICAgICAgICBcImV4cGVjdGluZyBhbiBhcnJheSBvciBhbiBpdGVyYWJsZSBvYmplY3QgYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcodmFsdWVzKSkucmVhc29uKCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3JlamVjdENhbGxiYWNrKGVyciwgZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKHJlc29sdmVWYWx1ZUlmRW1wdHkgPT09IC01KSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlRW1wdHlBcnJheSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0b1Jlc29sdXRpb25WYWx1ZShyZXNvbHZlVmFsdWVJZkVtcHR5KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pdGVyYXRlKHZhbHVlcyk7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pdGVyYXRlID0gZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgdmFyIGxlbiA9IHRoaXMuZ2V0QWN0dWFsTGVuZ3RoKHZhbHVlcy5sZW5ndGgpO1xuICAgIHRoaXMuX2xlbmd0aCA9IGxlbjtcbiAgICB0aGlzLl92YWx1ZXMgPSB0aGlzLnNob3VsZENvcHlWYWx1ZXMoKSA/IG5ldyBBcnJheShsZW4pIDogdGhpcy5fdmFsdWVzO1xuICAgIHZhciByZXN1bHQgPSB0aGlzLl9wcm9taXNlO1xuICAgIHZhciBpc1Jlc29sdmVkID0gZmFsc2U7XG4gICAgdmFyIGJpdEZpZWxkID0gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHZhbHVlc1tpXSwgcmVzdWx0KTtcblxuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIGJpdEZpZWxkID0gbWF5YmVQcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJpdEZpZWxkID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1Jlc29sdmVkKSB7XG4gICAgICAgICAgICBpZiAoYml0RmllbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtYXliZVByb21pc2Uuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYml0RmllbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fcHJveHkodGhpcywgaSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzW2ldID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0aGlzLl9wcm9taXNlRnVsZmlsbGVkKG1heWJlUHJvbWlzZS5fdmFsdWUoKSwgaSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRoaXMuX3Byb21pc2VSZWplY3RlZChtYXliZVByb21pc2UuX3JlYXNvbigpLCBpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRoaXMuX3Byb21pc2VDYW5jZWxsZWQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpc1Jlc29sdmVkID0gdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZChtYXliZVByb21pc2UsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghaXNSZXNvbHZlZCkgcmVzdWx0Ll9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX2lzUmVzb2x2ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcyA9PT0gbnVsbDtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSB8fCAhdGhpcy5fcHJvbWlzZS5pc0NhbmNlbGxhYmxlKCkpIHJldHVybjtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX2NhbmNlbCgpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRoaXMuX3ZhbHVlcyA9IG51bGw7XG4gICAgdGhpcy5fcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVhc29uLCBmYWxzZSk7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICB2YXIgdG90YWxSZXNvbHZlZCA9ICsrdGhpcy5fdG90YWxSZXNvbHZlZDtcbiAgICBpZiAodG90YWxSZXNvbHZlZCA+PSB0aGlzLl9sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUNhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZVJlamVjdGVkID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRoaXMuX3RvdGFsUmVzb2x2ZWQrKztcbiAgICB0aGlzLl9yZWplY3QocmVhc29uKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5fdmFsdWVzO1xuICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgIGlmICh2YWx1ZXMgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHZhbHVlcy5jYW5jZWwoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlc1tpXSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbaV0uY2FuY2VsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLnNob3VsZENvcHlWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLmdldEFjdHVhbExlbmd0aCA9IGZ1bmN0aW9uIChsZW4pIHtcbiAgICByZXR1cm4gbGVuO1xufTtcblxucmV0dXJuIFByb21pc2VBcnJheTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciBUSElTID0ge307XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgbm9kZWJhY2tGb3JQcm9taXNlID0gX2RlcmVxXyhcIi4vbm9kZWJhY2tcIik7XG52YXIgd2l0aEFwcGVuZGVkID0gdXRpbC53aXRoQXBwZW5kZWQ7XG52YXIgbWF5YmVXcmFwQXNFcnJvciA9IHV0aWwubWF5YmVXcmFwQXNFcnJvcjtcbnZhciBjYW5FdmFsdWF0ZSA9IHV0aWwuY2FuRXZhbHVhdGU7XG52YXIgVHlwZUVycm9yID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpLlR5cGVFcnJvcjtcbnZhciBkZWZhdWx0U3VmZml4ID0gXCJBc3luY1wiO1xudmFyIGRlZmF1bHRQcm9taXNpZmllZCA9IHtfX2lzUHJvbWlzaWZpZWRfXzogdHJ1ZX07XG52YXIgbm9Db3B5UHJvcHMgPSBbXG4gICAgXCJhcml0eVwiLCAgICBcImxlbmd0aFwiLFxuICAgIFwibmFtZVwiLFxuICAgIFwiYXJndW1lbnRzXCIsXG4gICAgXCJjYWxsZXJcIixcbiAgICBcImNhbGxlZVwiLFxuICAgIFwicHJvdG90eXBlXCIsXG4gICAgXCJfX2lzUHJvbWlzaWZpZWRfX1wiXG5dO1xudmFyIG5vQ29weVByb3BzUGF0dGVybiA9IG5ldyBSZWdFeHAoXCJeKD86XCIgKyBub0NvcHlQcm9wcy5qb2luKFwifFwiKSArIFwiKSRcIik7XG5cbnZhciBkZWZhdWx0RmlsdGVyID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB1dGlsLmlzSWRlbnRpZmllcihuYW1lKSAmJlxuICAgICAgICBuYW1lLmNoYXJBdCgwKSAhPT0gXCJfXCIgJiZcbiAgICAgICAgbmFtZSAhPT0gXCJjb25zdHJ1Y3RvclwiO1xufTtcblxuZnVuY3Rpb24gcHJvcHNGaWx0ZXIoa2V5KSB7XG4gICAgcmV0dXJuICFub0NvcHlQcm9wc1BhdHRlcm4udGVzdChrZXkpO1xufVxuXG5mdW5jdGlvbiBpc1Byb21pc2lmaWVkKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZuLl9faXNQcm9taXNpZmllZF9fID09PSB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYXNQcm9taXNpZmllZChvYmosIGtleSwgc3VmZml4KSB7XG4gICAgdmFyIHZhbCA9IHV0aWwuZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0KG9iaiwga2V5ICsgc3VmZml4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UHJvbWlzaWZpZWQpO1xuICAgIHJldHVybiB2YWwgPyBpc1Byb21pc2lmaWVkKHZhbCkgOiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGNoZWNrVmFsaWQocmV0LCBzdWZmaXgsIHN1ZmZpeFJlZ2V4cCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgIHZhciBrZXkgPSByZXRbaV07XG4gICAgICAgIGlmIChzdWZmaXhSZWdleHAudGVzdChrZXkpKSB7XG4gICAgICAgICAgICB2YXIga2V5V2l0aG91dEFzeW5jU3VmZml4ID0ga2V5LnJlcGxhY2Uoc3VmZml4UmVnZXhwLCBcIlwiKTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmV0Lmxlbmd0aDsgaiArPSAyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJldFtqXSA9PT0ga2V5V2l0aG91dEFzeW5jU3VmZml4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcHJvbWlzaWZ5IGFuIEFQSSB0aGF0IGhhcyBub3JtYWwgbWV0aG9kcyB3aXRoICclcyctc3VmZml4XFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcIiVzXCIsIHN1ZmZpeCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcHJvbWlzaWZpYWJsZU1ldGhvZHMob2JqLCBzdWZmaXgsIHN1ZmZpeFJlZ2V4cCwgZmlsdGVyKSB7XG4gICAgdmFyIGtleXMgPSB1dGlsLmluaGVyaXRlZERhdGFLZXlzKG9iaik7XG4gICAgdmFyIHJldCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgIHZhciBwYXNzZXNEZWZhdWx0RmlsdGVyID0gZmlsdGVyID09PSBkZWZhdWx0RmlsdGVyXG4gICAgICAgICAgICA/IHRydWUgOiBkZWZhdWx0RmlsdGVyKGtleSwgdmFsdWUsIG9iaik7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgIWlzUHJvbWlzaWZpZWQodmFsdWUpICYmXG4gICAgICAgICAgICAhaGFzUHJvbWlzaWZpZWQob2JqLCBrZXksIHN1ZmZpeCkgJiZcbiAgICAgICAgICAgIGZpbHRlcihrZXksIHZhbHVlLCBvYmosIHBhc3Nlc0RlZmF1bHRGaWx0ZXIpKSB7XG4gICAgICAgICAgICByZXQucHVzaChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjaGVja1ZhbGlkKHJldCwgc3VmZml4LCBzdWZmaXhSZWdleHApO1xuICAgIHJldHVybiByZXQ7XG59XG5cbnZhciBlc2NhcGVJZGVudFJlZ2V4ID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWyRdKS8sIFwiXFxcXCRcIik7XG59O1xuXG52YXIgbWFrZU5vZGVQcm9taXNpZmllZEV2YWw7XG5pZiAoIXRydWUpIHtcbnZhciBzd2l0Y2hDYXNlQXJndW1lbnRPcmRlciA9IGZ1bmN0aW9uKGxpa2VseUFyZ3VtZW50Q291bnQpIHtcbiAgICB2YXIgcmV0ID0gW2xpa2VseUFyZ3VtZW50Q291bnRdO1xuICAgIHZhciBtaW4gPSBNYXRoLm1heCgwLCBsaWtlbHlBcmd1bWVudENvdW50IC0gMSAtIDMpO1xuICAgIGZvcih2YXIgaSA9IGxpa2VseUFyZ3VtZW50Q291bnQgLSAxOyBpID49IG1pbjsgLS1pKSB7XG4gICAgICAgIHJldC5wdXNoKGkpO1xuICAgIH1cbiAgICBmb3IodmFyIGkgPSBsaWtlbHlBcmd1bWVudENvdW50ICsgMTsgaSA8PSAzOyArK2kpIHtcbiAgICAgICAgcmV0LnB1c2goaSk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG52YXIgYXJndW1lbnRTZXF1ZW5jZSA9IGZ1bmN0aW9uKGFyZ3VtZW50Q291bnQpIHtcbiAgICByZXR1cm4gdXRpbC5maWxsZWRSYW5nZShhcmd1bWVudENvdW50LCBcIl9hcmdcIiwgXCJcIik7XG59O1xuXG52YXIgcGFyYW1ldGVyRGVjbGFyYXRpb24gPSBmdW5jdGlvbihwYXJhbWV0ZXJDb3VudCkge1xuICAgIHJldHVybiB1dGlsLmZpbGxlZFJhbmdlKFxuICAgICAgICBNYXRoLm1heChwYXJhbWV0ZXJDb3VudCwgMyksIFwiX2FyZ1wiLCBcIlwiKTtcbn07XG5cbnZhciBwYXJhbWV0ZXJDb3VudCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbi5sZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KE1hdGgubWluKGZuLmxlbmd0aCwgMTAyMyArIDEpLCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG59O1xuXG5tYWtlTm9kZVByb21pc2lmaWVkRXZhbCA9XG5mdW5jdGlvbihjYWxsYmFjaywgcmVjZWl2ZXIsIG9yaWdpbmFsTmFtZSwgZm4sIF8sIG11bHRpQXJncykge1xuICAgIHZhciBuZXdQYXJhbWV0ZXJDb3VudCA9IE1hdGgubWF4KDAsIHBhcmFtZXRlckNvdW50KGZuKSAtIDEpO1xuICAgIHZhciBhcmd1bWVudE9yZGVyID0gc3dpdGNoQ2FzZUFyZ3VtZW50T3JkZXIobmV3UGFyYW1ldGVyQ291bnQpO1xuICAgIHZhciBzaG91bGRQcm94eVRoaXMgPSB0eXBlb2YgY2FsbGJhY2sgPT09IFwic3RyaW5nXCIgfHwgcmVjZWl2ZXIgPT09IFRISVM7XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUNhbGxGb3JBcmd1bWVudENvdW50KGNvdW50KSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRTZXF1ZW5jZShjb3VudCkuam9pbihcIiwgXCIpO1xuICAgICAgICB2YXIgY29tbWEgPSBjb3VudCA+IDAgPyBcIiwgXCIgOiBcIlwiO1xuICAgICAgICB2YXIgcmV0O1xuICAgICAgICBpZiAoc2hvdWxkUHJveHlUaGlzKSB7XG4gICAgICAgICAgICByZXQgPSBcInJldCA9IGNhbGxiYWNrLmNhbGwodGhpcywge3thcmdzfX0sIG5vZGViYWNrKTsgYnJlYWs7XFxuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXQgPSByZWNlaXZlciA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBcInJldCA9IGNhbGxiYWNrKHt7YXJnc319LCBub2RlYmFjayk7IGJyZWFrO1xcblwiXG4gICAgICAgICAgICAgICAgOiBcInJldCA9IGNhbGxiYWNrLmNhbGwocmVjZWl2ZXIsIHt7YXJnc319LCBub2RlYmFjayk7IGJyZWFrO1xcblwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQucmVwbGFjZShcInt7YXJnc319XCIsIGFyZ3MpLnJlcGxhY2UoXCIsIFwiLCBjb21tYSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVBcmd1bWVudFN3aXRjaENhc2UoKSB7XG4gICAgICAgIHZhciByZXQgPSBcIlwiO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50T3JkZXIubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHJldCArPSBcImNhc2UgXCIgKyBhcmd1bWVudE9yZGVyW2ldICtcIjpcIiArXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVDYWxsRm9yQXJndW1lbnRDb3VudChhcmd1bWVudE9yZGVyW2ldKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldCArPSBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICBkZWZhdWx0OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkobGVuICsgMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgYXJnc1tpXSA9IG5vZGViYWNrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgW0NvZGVGb3JDYWxsXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICBcIi5yZXBsYWNlKFwiW0NvZGVGb3JDYWxsXVwiLCAoc2hvdWxkUHJveHlUaGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJyZXQgPSBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTtcXG5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwicmV0ID0gY2FsbGJhY2suYXBwbHkocmVjZWl2ZXIsIGFyZ3MpO1xcblwiKSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgdmFyIGdldEZ1bmN0aW9uQ29kZSA9IHR5cGVvZiBjYWxsYmFjayA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChcInRoaXMgIT0gbnVsbCA/IHRoaXNbJ1wiK2NhbGxiYWNrK1wiJ10gOiBmblwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiZm5cIjtcbiAgICB2YXIgYm9keSA9IFwiJ3VzZSBzdHJpY3QnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIHZhciByZXQgPSBmdW5jdGlvbiAoUGFyYW1ldGVycykgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBwcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgbm9kZWJhY2sgPSBub2RlYmFja0ZvclByb21pc2UocHJvbWlzZSwgXCIgKyBtdWx0aUFyZ3MgKyBcIik7ICAgXFxuXFxcbiAgICAgICAgICAgIHZhciByZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHRyeUNhdGNoKFtHZXRGdW5jdGlvbkNvZGVdKTsgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHN3aXRjaChsZW4pIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBbQ29kZUZvclN3aXRjaENhc2VdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhtYXliZVdyYXBBc0Vycm9yKHJldC5lKSwgdHJ1ZSwgdHJ1ZSk7XFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGlmICghcHJvbWlzZS5faXNGYXRlU2VhbGVkKCkpIHByb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpOyAgICAgXFxuXFxcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgfTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AocmV0LCAnX19pc1Byb21pc2lmaWVkX18nLCB0cnVlKTsgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgcmV0dXJuIHJldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICBcIi5yZXBsYWNlKFwiW0NvZGVGb3JTd2l0Y2hDYXNlXVwiLCBnZW5lcmF0ZUFyZ3VtZW50U3dpdGNoQ2FzZSgpKVxuICAgICAgICAucmVwbGFjZShcIltHZXRGdW5jdGlvbkNvZGVdXCIsIGdldEZ1bmN0aW9uQ29kZSk7XG4gICAgYm9keSA9IGJvZHkucmVwbGFjZShcIlBhcmFtZXRlcnNcIiwgcGFyYW1ldGVyRGVjbGFyYXRpb24obmV3UGFyYW1ldGVyQ291bnQpKTtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwiUHJvbWlzZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJmblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJyZWNlaXZlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aXRoQXBwZW5kZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWF5YmVXcmFwQXNFcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJub2RlYmFja0ZvclByb21pc2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHJ5Q2F0Y2hcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZXJyb3JPYmpcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibm90RW51bWVyYWJsZVByb3BcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSU5URVJOQUxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkpKFxuICAgICAgICAgICAgICAgICAgICBQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICBmbixcbiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXIsXG4gICAgICAgICAgICAgICAgICAgIHdpdGhBcHBlbmRlZCxcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVXcmFwQXNFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgbm9kZWJhY2tGb3JQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICB1dGlsLnRyeUNhdGNoLFxuICAgICAgICAgICAgICAgICAgICB1dGlsLmVycm9yT2JqLFxuICAgICAgICAgICAgICAgICAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wLFxuICAgICAgICAgICAgICAgICAgICBJTlRFUk5BTCk7XG59O1xufVxuXG5mdW5jdGlvbiBtYWtlTm9kZVByb21pc2lmaWVkQ2xvc3VyZShjYWxsYmFjaywgcmVjZWl2ZXIsIF8sIGZuLCBfXywgbXVsdGlBcmdzKSB7XG4gICAgdmFyIGRlZmF1bHRUaGlzID0gKGZ1bmN0aW9uKCkge3JldHVybiB0aGlzO30pKCk7XG4gICAgdmFyIG1ldGhvZCA9IGNhbGxiYWNrO1xuICAgIGlmICh0eXBlb2YgbWV0aG9kID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gZm47XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb21pc2lmaWVkKCkge1xuICAgICAgICB2YXIgX3JlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgICAgIGlmIChyZWNlaXZlciA9PT0gVEhJUykgX3JlY2VpdmVyID0gdGhpcztcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHByb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgICAgIHZhciBjYiA9IHR5cGVvZiBtZXRob2QgPT09IFwic3RyaW5nXCIgJiYgdGhpcyAhPT0gZGVmYXVsdFRoaXNcbiAgICAgICAgICAgID8gdGhpc1ttZXRob2RdIDogY2FsbGJhY2s7XG4gICAgICAgIHZhciBmbiA9IG5vZGViYWNrRm9yUHJvbWlzZShwcm9taXNlLCBtdWx0aUFyZ3MpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY2IuYXBwbHkoX3JlY2VpdmVyLCB3aXRoQXBwZW5kZWQoYXJndW1lbnRzLCBmbikpO1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKG1heWJlV3JhcEFzRXJyb3IoZSksIHRydWUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcHJvbWlzZS5faXNGYXRlU2VhbGVkKCkpIHByb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChwcm9taXNpZmllZCwgXCJfX2lzUHJvbWlzaWZpZWRfX1wiLCB0cnVlKTtcbiAgICByZXR1cm4gcHJvbWlzaWZpZWQ7XG59XG5cbnZhciBtYWtlTm9kZVByb21pc2lmaWVkID0gY2FuRXZhbHVhdGVcbiAgICA/IG1ha2VOb2RlUHJvbWlzaWZpZWRFdmFsXG4gICAgOiBtYWtlTm9kZVByb21pc2lmaWVkQ2xvc3VyZTtcblxuZnVuY3Rpb24gcHJvbWlzaWZ5QWxsKG9iaiwgc3VmZml4LCBmaWx0ZXIsIHByb21pc2lmaWVyLCBtdWx0aUFyZ3MpIHtcbiAgICB2YXIgc3VmZml4UmVnZXhwID0gbmV3IFJlZ0V4cChlc2NhcGVJZGVudFJlZ2V4KHN1ZmZpeCkgKyBcIiRcIik7XG4gICAgdmFyIG1ldGhvZHMgPVxuICAgICAgICBwcm9taXNpZmlhYmxlTWV0aG9kcyhvYmosIHN1ZmZpeCwgc3VmZml4UmVnZXhwLCBmaWx0ZXIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG1ldGhvZHMubGVuZ3RoOyBpIDwgbGVuOyBpKz0gMikge1xuICAgICAgICB2YXIga2V5ID0gbWV0aG9kc1tpXTtcbiAgICAgICAgdmFyIGZuID0gbWV0aG9kc1tpKzFdO1xuICAgICAgICB2YXIgcHJvbWlzaWZpZWRLZXkgPSBrZXkgKyBzdWZmaXg7XG4gICAgICAgIGlmIChwcm9taXNpZmllciA9PT0gbWFrZU5vZGVQcm9taXNpZmllZCkge1xuICAgICAgICAgICAgb2JqW3Byb21pc2lmaWVkS2V5XSA9XG4gICAgICAgICAgICAgICAgbWFrZU5vZGVQcm9taXNpZmllZChrZXksIFRISVMsIGtleSwgZm4sIHN1ZmZpeCwgbXVsdGlBcmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwcm9taXNpZmllZCA9IHByb21pc2lmaWVyKGZuLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFrZU5vZGVQcm9taXNpZmllZChrZXksIFRISVMsIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiwgc3VmZml4LCBtdWx0aUFyZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKHByb21pc2lmaWVkLCBcIl9faXNQcm9taXNpZmllZF9fXCIsIHRydWUpO1xuICAgICAgICAgICAgb2JqW3Byb21pc2lmaWVkS2V5XSA9IHByb21pc2lmaWVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHV0aWwudG9GYXN0UHJvcGVydGllcyhvYmopO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIHByb21pc2lmeShjYWxsYmFjaywgcmVjZWl2ZXIsIG11bHRpQXJncykge1xuICAgIHJldHVybiBtYWtlTm9kZVByb21pc2lmaWVkKGNhbGxiYWNrLCByZWNlaXZlciwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaywgbnVsbCwgbXVsdGlBcmdzKTtcbn1cblxuUHJvbWlzZS5wcm9taXNpZnkgPSBmdW5jdGlvbiAoZm4sIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIGlmIChpc1Byb21pc2lmaWVkKGZuKSkge1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfVxuICAgIG9wdGlvbnMgPSBPYmplY3Qob3B0aW9ucyk7XG4gICAgdmFyIHJlY2VpdmVyID0gb3B0aW9ucy5jb250ZXh0ID09PSB1bmRlZmluZWQgPyBUSElTIDogb3B0aW9ucy5jb250ZXh0O1xuICAgIHZhciBtdWx0aUFyZ3MgPSAhIW9wdGlvbnMubXVsdGlBcmdzO1xuICAgIHZhciByZXQgPSBwcm9taXNpZnkoZm4sIHJlY2VpdmVyLCBtdWx0aUFyZ3MpO1xuICAgIHV0aWwuY29weURlc2NyaXB0b3JzKGZuLCByZXQsIHByb3BzRmlsdGVyKTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm9taXNpZnlBbGwgPSBmdW5jdGlvbiAodGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiB0YXJnZXQgIT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgdGFyZ2V0ICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ0aGUgdGFyZ2V0IG9mIHByb21pc2lmeUFsbCBtdXN0IGJlIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgb3B0aW9ucyA9IE9iamVjdChvcHRpb25zKTtcbiAgICB2YXIgbXVsdGlBcmdzID0gISFvcHRpb25zLm11bHRpQXJncztcbiAgICB2YXIgc3VmZml4ID0gb3B0aW9ucy5zdWZmaXg7XG4gICAgaWYgKHR5cGVvZiBzdWZmaXggIT09IFwic3RyaW5nXCIpIHN1ZmZpeCA9IGRlZmF1bHRTdWZmaXg7XG4gICAgdmFyIGZpbHRlciA9IG9wdGlvbnMuZmlsdGVyO1xuICAgIGlmICh0eXBlb2YgZmlsdGVyICE9PSBcImZ1bmN0aW9uXCIpIGZpbHRlciA9IGRlZmF1bHRGaWx0ZXI7XG4gICAgdmFyIHByb21pc2lmaWVyID0gb3B0aW9ucy5wcm9taXNpZmllcjtcbiAgICBpZiAodHlwZW9mIHByb21pc2lmaWVyICE9PSBcImZ1bmN0aW9uXCIpIHByb21pc2lmaWVyID0gbWFrZU5vZGVQcm9taXNpZmllZDtcblxuICAgIGlmICghdXRpbC5pc0lkZW50aWZpZXIoc3VmZml4KSkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInN1ZmZpeCBtdXN0IGJlIGEgdmFsaWQgaWRlbnRpZmllclxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuXG4gICAgdmFyIGtleXMgPSB1dGlsLmluaGVyaXRlZERhdGFLZXlzKHRhcmdldCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHRhcmdldFtrZXlzW2ldXTtcbiAgICAgICAgaWYgKGtleXNbaV0gIT09IFwiY29uc3RydWN0b3JcIiAmJlxuICAgICAgICAgICAgdXRpbC5pc0NsYXNzKHZhbHVlKSkge1xuICAgICAgICAgICAgcHJvbWlzaWZ5QWxsKHZhbHVlLnByb3RvdHlwZSwgc3VmZml4LCBmaWx0ZXIsIHByb21pc2lmaWVyLFxuICAgICAgICAgICAgICAgIG11bHRpQXJncyk7XG4gICAgICAgICAgICBwcm9taXNpZnlBbGwodmFsdWUsIHN1ZmZpeCwgZmlsdGVyLCBwcm9taXNpZmllciwgbXVsdGlBcmdzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNpZnlBbGwodGFyZ2V0LCBzdWZmaXgsIGZpbHRlciwgcHJvbWlzaWZpZXIsIG11bHRpQXJncyk7XG59O1xufTtcblxuXG59LHtcIi4vZXJyb3JzXCI6MTIsXCIuL25vZGViYWNrXCI6MjAsXCIuL3V0aWxcIjozNn1dLDI1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihcbiAgICBQcm9taXNlLCBQcm9taXNlQXJyYXksIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGlzT2JqZWN0ID0gdXRpbC5pc09iamVjdDtcbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgRXM2TWFwO1xuaWYgKHR5cGVvZiBNYXAgPT09IFwiZnVuY3Rpb25cIikgRXM2TWFwID0gTWFwO1xuXG52YXIgbWFwVG9FbnRyaWVzID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIHNpemUgPSAwO1xuXG4gICAgZnVuY3Rpb24gZXh0cmFjdEVudHJ5KHZhbHVlLCBrZXkpIHtcbiAgICAgICAgdGhpc1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgdGhpc1tpbmRleCArIHNpemVdID0ga2V5O1xuICAgICAgICBpbmRleCsrO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiBtYXBUb0VudHJpZXMobWFwKSB7XG4gICAgICAgIHNpemUgPSBtYXAuc2l6ZTtcbiAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICB2YXIgcmV0ID0gbmV3IEFycmF5KG1hcC5zaXplICogMik7XG4gICAgICAgIG1hcC5mb3JFYWNoKGV4dHJhY3RFbnRyeSwgcmV0KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufSkoKTtcblxudmFyIGVudHJpZXNUb01hcCA9IGZ1bmN0aW9uKGVudHJpZXMpIHtcbiAgICB2YXIgcmV0ID0gbmV3IEVzNk1hcCgpO1xuICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aCAvIDIgfCAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGtleSA9IGVudHJpZXNbbGVuZ3RoICsgaV07XG4gICAgICAgIHZhciB2YWx1ZSA9IGVudHJpZXNbaV07XG4gICAgICAgIHJldC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5mdW5jdGlvbiBQcm9wZXJ0aWVzUHJvbWlzZUFycmF5KG9iaikge1xuICAgIHZhciBpc01hcCA9IGZhbHNlO1xuICAgIHZhciBlbnRyaWVzO1xuICAgIGlmIChFczZNYXAgIT09IHVuZGVmaW5lZCAmJiBvYmogaW5zdGFuY2VvZiBFczZNYXApIHtcbiAgICAgICAgZW50cmllcyA9IG1hcFRvRW50cmllcyhvYmopO1xuICAgICAgICBpc01hcCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGtleXMgPSBlczUua2V5cyhvYmopO1xuICAgICAgICB2YXIgbGVuID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIGVudHJpZXMgPSBuZXcgQXJyYXkobGVuICogMik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgZW50cmllc1tpXSA9IG9ialtrZXldO1xuICAgICAgICAgICAgZW50cmllc1tpICsgbGVuXSA9IGtleTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNvbnN0cnVjdG9yJChlbnRyaWVzKTtcbiAgICB0aGlzLl9pc01hcCA9IGlzTWFwO1xuICAgIHRoaXMuX2luaXQkKHVuZGVmaW5lZCwgLTMpO1xufVxudXRpbC5pbmhlcml0cyhQcm9wZXJ0aWVzUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5Qcm9wZXJ0aWVzUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG5Qcm9wZXJ0aWVzUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICB0aGlzLl92YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgdmFyIHRvdGFsUmVzb2x2ZWQgPSArK3RoaXMuX3RvdGFsUmVzb2x2ZWQ7XG4gICAgaWYgKHRvdGFsUmVzb2x2ZWQgPj0gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWw7XG4gICAgICAgIGlmICh0aGlzLl9pc01hcCkge1xuICAgICAgICAgICAgdmFsID0gZW50cmllc1RvTWFwKHRoaXMuX3ZhbHVlcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWwgPSB7fTtcbiAgICAgICAgICAgIHZhciBrZXlPZmZzZXQgPSB0aGlzLmxlbmd0aCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMubGVuZ3RoKCk7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgIHZhbFt0aGlzLl92YWx1ZXNbaSArIGtleU9mZnNldF1dID0gdGhpcy5fdmFsdWVzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Jlc29sdmUodmFsKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb3BlcnRpZXNQcm9taXNlQXJyYXkucHJvdG90eXBlLnNob3VsZENvcHlWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUHJvcGVydGllc1Byb21pc2VBcnJheS5wcm90b3R5cGUuZ2V0QWN0dWFsTGVuZ3RoID0gZnVuY3Rpb24gKGxlbikge1xuICAgIHJldHVybiBsZW4gPj4gMTtcbn07XG5cbmZ1bmN0aW9uIHByb3BzKHByb21pc2VzKSB7XG4gICAgdmFyIHJldDtcbiAgICB2YXIgY2FzdFZhbHVlID0gdHJ5Q29udmVydFRvUHJvbWlzZShwcm9taXNlcyk7XG5cbiAgICBpZiAoIWlzT2JqZWN0KGNhc3RWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImNhbm5vdCBhd2FpdCBwcm9wZXJ0aWVzIG9mIGEgbm9uLW9iamVjdFxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfSBlbHNlIGlmIChjYXN0VmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldCA9IGNhc3RWYWx1ZS5fdGhlbihcbiAgICAgICAgICAgIFByb21pc2UucHJvcHMsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gbmV3IFByb3BlcnRpZXNQcm9taXNlQXJyYXkoY2FzdFZhbHVlKS5wcm9taXNlKCk7XG4gICAgfVxuXG4gICAgaWYgKGNhc3RWYWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0Ll9wcm9wYWdhdGVGcm9tKGNhc3RWYWx1ZSwgMik7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cblByb21pc2UucHJvdG90eXBlLnByb3BzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBwcm9wcyh0aGlzKTtcbn07XG5cblByb21pc2UucHJvcHMgPSBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICByZXR1cm4gcHJvcHMocHJvbWlzZXMpO1xufTtcbn07XG5cbn0se1wiLi9lczVcIjoxMyxcIi4vdXRpbFwiOjM2fV0sMjY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBhcnJheU1vdmUoc3JjLCBzcmNJbmRleCwgZHN0LCBkc3RJbmRleCwgbGVuKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBsZW47ICsraikge1xuICAgICAgICBkc3RbaiArIGRzdEluZGV4XSA9IHNyY1tqICsgc3JjSW5kZXhdO1xuICAgICAgICBzcmNbaiArIHNyY0luZGV4XSA9IHZvaWQgMDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFF1ZXVlKGNhcGFjaXR5KSB7XG4gICAgdGhpcy5fY2FwYWNpdHkgPSBjYXBhY2l0eTtcbiAgICB0aGlzLl9sZW5ndGggPSAwO1xuICAgIHRoaXMuX2Zyb250ID0gMDtcbn1cblxuUXVldWUucHJvdG90eXBlLl93aWxsQmVPdmVyQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgIHJldHVybiB0aGlzLl9jYXBhY2l0eSA8IHNpemU7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUuX3B1c2hPbmUgPSBmdW5jdGlvbiAoYXJnKSB7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoKCk7XG4gICAgdGhpcy5fY2hlY2tDYXBhY2l0eShsZW5ndGggKyAxKTtcbiAgICB2YXIgaSA9ICh0aGlzLl9mcm9udCArIGxlbmd0aCkgJiAodGhpcy5fY2FwYWNpdHkgLSAxKTtcbiAgICB0aGlzW2ldID0gYXJnO1xuICAgIHRoaXMuX2xlbmd0aCA9IGxlbmd0aCArIDE7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUuX3Vuc2hpZnRPbmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciBjYXBhY2l0eSA9IHRoaXMuX2NhcGFjaXR5O1xuICAgIHRoaXMuX2NoZWNrQ2FwYWNpdHkodGhpcy5sZW5ndGgoKSArIDEpO1xuICAgIHZhciBmcm9udCA9IHRoaXMuX2Zyb250O1xuICAgIHZhciBpID0gKCgoKCBmcm9udCAtIDEgKSAmXG4gICAgICAgICAgICAgICAgICAgICggY2FwYWNpdHkgLSAxKSApIF4gY2FwYWNpdHkgKSAtIGNhcGFjaXR5ICk7XG4gICAgdGhpc1tpXSA9IHZhbHVlO1xuICAgIHRoaXMuX2Zyb250ID0gaTtcbiAgICB0aGlzLl9sZW5ndGggPSB0aGlzLmxlbmd0aCgpICsgMTtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICB0aGlzLl91bnNoaWZ0T25lKGFyZyk7XG4gICAgdGhpcy5fdW5zaGlmdE9uZShyZWNlaXZlcik7XG4gICAgdGhpcy5fdW5zaGlmdE9uZShmbik7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCgpICsgMztcbiAgICBpZiAodGhpcy5fd2lsbEJlT3ZlckNhcGFjaXR5KGxlbmd0aCkpIHtcbiAgICAgICAgdGhpcy5fcHVzaE9uZShmbik7XG4gICAgICAgIHRoaXMuX3B1c2hPbmUocmVjZWl2ZXIpO1xuICAgICAgICB0aGlzLl9wdXNoT25lKGFyZyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGogPSB0aGlzLl9mcm9udCArIGxlbmd0aCAtIDM7XG4gICAgdGhpcy5fY2hlY2tDYXBhY2l0eShsZW5ndGgpO1xuICAgIHZhciB3cmFwTWFzayA9IHRoaXMuX2NhcGFjaXR5IC0gMTtcbiAgICB0aGlzWyhqICsgMCkgJiB3cmFwTWFza10gPSBmbjtcbiAgICB0aGlzWyhqICsgMSkgJiB3cmFwTWFza10gPSByZWNlaXZlcjtcbiAgICB0aGlzWyhqICsgMikgJiB3cmFwTWFza10gPSBhcmc7XG4gICAgdGhpcy5fbGVuZ3RoID0gbGVuZ3RoO1xufTtcblxuUXVldWUucHJvdG90eXBlLnNoaWZ0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmcm9udCA9IHRoaXMuX2Zyb250LFxuICAgICAgICByZXQgPSB0aGlzW2Zyb250XTtcblxuICAgIHRoaXNbZnJvbnRdID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2Zyb250ID0gKGZyb250ICsgMSkgJiAodGhpcy5fY2FwYWNpdHkgLSAxKTtcbiAgICB0aGlzLl9sZW5ndGgtLTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUXVldWUucHJvdG90eXBlLmxlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fbGVuZ3RoO1xufTtcblxuUXVldWUucHJvdG90eXBlLl9jaGVja0NhcGFjaXR5ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICBpZiAodGhpcy5fY2FwYWNpdHkgPCBzaXplKSB7XG4gICAgICAgIHRoaXMuX3Jlc2l6ZVRvKHRoaXMuX2NhcGFjaXR5IDw8IDEpO1xuICAgIH1cbn07XG5cblF1ZXVlLnByb3RvdHlwZS5fcmVzaXplVG8gPSBmdW5jdGlvbiAoY2FwYWNpdHkpIHtcbiAgICB2YXIgb2xkQ2FwYWNpdHkgPSB0aGlzLl9jYXBhY2l0eTtcbiAgICB0aGlzLl9jYXBhY2l0eSA9IGNhcGFjaXR5O1xuICAgIHZhciBmcm9udCA9IHRoaXMuX2Zyb250O1xuICAgIHZhciBsZW5ndGggPSB0aGlzLl9sZW5ndGg7XG4gICAgdmFyIG1vdmVJdGVtc0NvdW50ID0gKGZyb250ICsgbGVuZ3RoKSAmIChvbGRDYXBhY2l0eSAtIDEpO1xuICAgIGFycmF5TW92ZSh0aGlzLCAwLCB0aGlzLCBvbGRDYXBhY2l0eSwgbW92ZUl0ZW1zQ291bnQpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBRdWV1ZTtcblxufSx7fV0sMjc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFxuICAgIFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24pIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcblxudmFyIHJhY2VMYXRlciA9IGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbihhcnJheSkge1xuICAgICAgICByZXR1cm4gcmFjZShhcnJheSwgcHJvbWlzZSk7XG4gICAgfSk7XG59O1xuXG5mdW5jdGlvbiByYWNlKHByb21pc2VzLCBwYXJlbnQpIHtcbiAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShwcm9taXNlcyk7XG5cbiAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXR1cm4gcmFjZUxhdGVyKG1heWJlUHJvbWlzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbWlzZXMgPSB1dGlsLmFzQXJyYXkocHJvbWlzZXMpO1xuICAgICAgICBpZiAocHJvbWlzZXMgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGFuIGFycmF5IG9yIGFuIGl0ZXJhYmxlIG9iamVjdCBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhwcm9taXNlcykpO1xuICAgIH1cblxuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgaWYgKHBhcmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldC5fcHJvcGFnYXRlRnJvbShwYXJlbnQsIDMpO1xuICAgIH1cbiAgICB2YXIgZnVsZmlsbCA9IHJldC5fZnVsZmlsbDtcbiAgICB2YXIgcmVqZWN0ID0gcmV0Ll9yZWplY3Q7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHByb21pc2VzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciB2YWwgPSBwcm9taXNlc1tpXTtcblxuICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQgJiYgIShpIGluIHByb21pc2VzKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBQcm9taXNlLmNhc3QodmFsKS5fdGhlbihmdWxmaWxsLCByZWplY3QsIHVuZGVmaW5lZCwgcmV0LCBudWxsKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuUHJvbWlzZS5yYWNlID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIHJhY2UocHJvbWlzZXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5yYWNlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiByYWNlKHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMjg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFByb21pc2VBcnJheSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpUmVqZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlDb252ZXJ0VG9Qcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRFUk5BTCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcpIHtcbnZhciBnZXREb21haW4gPSBQcm9taXNlLl9nZXREb21haW47XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuXG5mdW5jdGlvbiBSZWR1Y3Rpb25Qcm9taXNlQXJyYXkocHJvbWlzZXMsIGZuLCBpbml0aWFsVmFsdWUsIF9lYWNoKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQocHJvbWlzZXMpO1xuICAgIHZhciBkb21haW4gPSBnZXREb21haW4oKTtcbiAgICB0aGlzLl9mbiA9IGRvbWFpbiA9PT0gbnVsbCA/IGZuIDogZG9tYWluLmJpbmQoZm4pO1xuICAgIGlmIChpbml0aWFsVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpbml0aWFsVmFsdWUgPSBQcm9taXNlLnJlc29sdmUoaW5pdGlhbFZhbHVlKTtcbiAgICAgICAgaW5pdGlhbFZhbHVlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayh0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5faW5pdGlhbFZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgIHRoaXMuX2N1cnJlbnRDYW5jZWxsYWJsZSA9IG51bGw7XG4gICAgdGhpcy5fZWFjaFZhbHVlcyA9IF9lYWNoID09PSBJTlRFUk5BTCA/IFtdIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Byb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtNSk7XG59XG51dGlsLmluaGVyaXRzKFJlZHVjdGlvblByb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZ290QWNjdW0gPSBmdW5jdGlvbihhY2N1bSkge1xuICAgIGlmICh0aGlzLl9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQgJiYgYWNjdW0gIT09IElOVEVSTkFMKSB7XG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMucHVzaChhY2N1bSk7XG4gICAgfVxufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZWFjaENvbXBsZXRlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLl9lYWNoVmFsdWVzLnB1c2godmFsdWUpO1xuICAgIHJldHVybiB0aGlzLl9lYWNoVmFsdWVzO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uKCkge307XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmVFbXB0eUFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQgPyB0aGlzLl9lYWNoVmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9pbml0aWFsVmFsdWUpO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zaG91bGRDb3B5VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX3Byb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgdGhpcy5fdmFsdWVzID0gbnVsbDtcbn07XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKHNlbmRlcikge1xuICAgIGlmIChzZW5kZXIgPT09IHRoaXMuX2luaXRpYWxWYWx1ZSkgcmV0dXJuIHRoaXMuX2NhbmNlbCgpO1xuICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICB0aGlzLl9yZXN1bHRDYW5jZWxsZWQkKCk7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRDYW5jZWxsYWJsZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdGhpcy5fY3VycmVudENhbmNlbGxhYmxlLmNhbmNlbCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5faW5pdGlhbFZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB0aGlzLl9pbml0aWFsVmFsdWUuY2FuY2VsKCk7XG4gICAgfVxufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faXRlcmF0ZSA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgdmFyIHZhbHVlO1xuICAgIHZhciBpO1xuICAgIHZhciBsZW5ndGggPSB2YWx1ZXMubGVuZ3RoO1xuICAgIGlmICh0aGlzLl9pbml0aWFsVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZSA9IHRoaXMuX2luaXRpYWxWYWx1ZTtcbiAgICAgICAgaSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBQcm9taXNlLnJlc29sdmUodmFsdWVzWzBdKTtcbiAgICAgICAgaSA9IDE7XG4gICAgfVxuXG4gICAgdGhpcy5fY3VycmVudENhbmNlbGxhYmxlID0gdmFsdWU7XG5cbiAgICBpZiAoIXZhbHVlLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0ge1xuICAgICAgICAgICAgICAgIGFjY3VtOiBudWxsLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZXNbaV0sXG4gICAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiBsZW5ndGgsXG4gICAgICAgICAgICAgICAgYXJyYXk6IHRoaXNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLl90aGVuKGdvdEFjY3VtLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY3R4LCB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2VhY2hWYWx1ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlXG4gICAgICAgICAgICAuX3RoZW4odGhpcy5fZWFjaENvbXBsZXRlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgdmFsdWUuX3RoZW4oY29tcGxldGVkLCBjb21wbGV0ZWQsIHVuZGVmaW5lZCwgdmFsdWUsIHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmVkdWNlID0gZnVuY3Rpb24gKGZuLCBpbml0aWFsVmFsdWUpIHtcbiAgICByZXR1cm4gcmVkdWNlKHRoaXMsIGZuLCBpbml0aWFsVmFsdWUsIG51bGwpO1xufTtcblxuUHJvbWlzZS5yZWR1Y2UgPSBmdW5jdGlvbiAocHJvbWlzZXMsIGZuLCBpbml0aWFsVmFsdWUsIF9lYWNoKSB7XG4gICAgcmV0dXJuIHJlZHVjZShwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpO1xufTtcblxuZnVuY3Rpb24gY29tcGxldGVkKHZhbHVlT3JSZWFzb24sIGFycmF5KSB7XG4gICAgaWYgKHRoaXMuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICBhcnJheS5fcmVzb2x2ZSh2YWx1ZU9yUmVhc29uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhcnJheS5fcmVqZWN0KHZhbHVlT3JSZWFzb24pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVkdWNlKHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCkge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgdmFyIGFycmF5ID0gbmV3IFJlZHVjdGlvblByb21pc2VBcnJheShwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpO1xuICAgIHJldHVybiBhcnJheS5wcm9taXNlKCk7XG59XG5cbmZ1bmN0aW9uIGdvdEFjY3VtKGFjY3VtKSB7XG4gICAgdGhpcy5hY2N1bSA9IGFjY3VtO1xuICAgIHRoaXMuYXJyYXkuX2dvdEFjY3VtKGFjY3VtKTtcbiAgICB2YXIgdmFsdWUgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHRoaXMudmFsdWUsIHRoaXMuYXJyYXkuX3Byb21pc2UpO1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdGhpcy5hcnJheS5fY3VycmVudENhbmNlbGxhYmxlID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB2YWx1ZS5fdGhlbihnb3RWYWx1ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMsIHVuZGVmaW5lZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGdvdFZhbHVlLmNhbGwodGhpcywgdmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ290VmFsdWUodmFsdWUpIHtcbiAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5O1xuICAgIHZhciBwcm9taXNlID0gYXJyYXkuX3Byb21pc2U7XG4gICAgdmFyIGZuID0gdHJ5Q2F0Y2goYXJyYXkuX2ZuKTtcbiAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciByZXQ7XG4gICAgaWYgKGFycmF5Ll9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0ID0gZm4uY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksIHZhbHVlLCB0aGlzLmluZGV4LCB0aGlzLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gZm4uY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY3VtLCB2YWx1ZSwgdGhpcy5pbmRleCwgdGhpcy5sZW5ndGgpO1xuICAgIH1cbiAgICBpZiAocmV0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICBhcnJheS5fY3VycmVudENhbmNlbGxhYmxlID0gcmV0O1xuICAgIH1cbiAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICByZXQsXG4gICAgICAgIHByb21pc2VDcmVhdGVkLFxuICAgICAgICBhcnJheS5fZWFjaFZhbHVlcyAhPT0gdW5kZWZpbmVkID8gXCJQcm9taXNlLmVhY2hcIiA6IFwiUHJvbWlzZS5yZWR1Y2VcIixcbiAgICAgICAgcHJvbWlzZVxuICAgICk7XG4gICAgcmV0dXJuIHJldDtcbn1cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBzY2hlZHVsZTtcbnZhciBub0FzeW5jU2NoZWR1bGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYXN5bmMgc2NoZWR1bGVyIGF2YWlsYWJsZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG59O1xudmFyIE5hdGl2ZVByb21pc2UgPSB1dGlsLmdldE5hdGl2ZVByb21pc2UoKTtcbmlmICh1dGlsLmlzTm9kZSAmJiB0eXBlb2YgTXV0YXRpb25PYnNlcnZlciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHZhciBHbG9iYWxTZXRJbW1lZGlhdGUgPSBnbG9iYWwuc2V0SW1tZWRpYXRlO1xuICAgIHZhciBQcm9jZXNzTmV4dFRpY2sgPSBwcm9jZXNzLm5leHRUaWNrO1xuICAgIHNjaGVkdWxlID0gdXRpbC5pc1JlY2VudE5vZGVcbiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uKGZuKSB7IEdsb2JhbFNldEltbWVkaWF0ZS5jYWxsKGdsb2JhbCwgZm4pOyB9XG4gICAgICAgICAgICAgICAgOiBmdW5jdGlvbihmbikgeyBQcm9jZXNzTmV4dFRpY2suY2FsbChwcm9jZXNzLCBmbik7IH07XG59IGVsc2UgaWYgKHR5cGVvZiBOYXRpdmVQcm9taXNlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB2YXIgbmF0aXZlUHJvbWlzZSA9IE5hdGl2ZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIHNjaGVkdWxlID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgbmF0aXZlUHJvbWlzZS50aGVuKGZuKTtcbiAgICB9O1xufSBlbHNlIGlmICgodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09IFwidW5kZWZpbmVkXCIpICYmXG4gICAgICAgICAgISh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICB3aW5kb3cubmF2aWdhdG9yICYmXG4gICAgICAgICAgICB3aW5kb3cubmF2aWdhdG9yLnN0YW5kYWxvbmUpKSB7XG4gICAgc2NoZWR1bGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB2YXIgb3B0cyA9IHthdHRyaWJ1dGVzOiB0cnVlfTtcbiAgICAgICAgdmFyIHRvZ2dsZVNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZGl2MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHZhciBvMiA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC50b2dnbGUoXCJmb29cIik7XG4gICAgICAgICAgICB0b2dnbGVTY2hlZHVsZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIG8yLm9ic2VydmUoZGl2Miwgb3B0cyk7XG5cbiAgICAgICAgdmFyIHNjaGVkdWxlVG9nZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodG9nZ2xlU2NoZWR1bGVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdG9nZ2xlU2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkaXYyLmNsYXNzTGlzdC50b2dnbGUoXCJmb29cIik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gc2NoZWR1bGUoZm4pIHtcbiAgICAgICAgICAgIHZhciBvID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgby5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgby5vYnNlcnZlKGRpdiwgb3B0cyk7XG4gICAgICAgICAgICBzY2hlZHVsZVRvZ2dsZSgpO1xuICAgICAgICB9O1xuICAgIH0pKCk7XG59IGVsc2UgaWYgKHR5cGVvZiBzZXRJbW1lZGlhdGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBzY2hlZHVsZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBzZXRJbW1lZGlhdGUoZm4pO1xuICAgIH07XG59IGVsc2UgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgc2NoZWR1bGUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgc2V0VGltZW91dChmbiwgMCk7XG4gICAgfTtcbn0gZWxzZSB7XG4gICAgc2NoZWR1bGUgPSBub0FzeW5jU2NoZWR1bGVyO1xufVxubW9kdWxlLmV4cG9ydHMgPSBzY2hlZHVsZTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDMwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuICAgIGZ1bmN0aW9uKFByb21pc2UsIFByb21pc2VBcnJheSwgZGVidWcpIHtcbnZhciBQcm9taXNlSW5zcGVjdGlvbiA9IFByb21pc2UuUHJvbWlzZUluc3BlY3Rpb247XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG5cbmZ1bmN0aW9uIFNldHRsZWRQcm9taXNlQXJyYXkodmFsdWVzKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQodmFsdWVzKTtcbn1cbnV0aWwuaW5oZXJpdHMoU2V0dGxlZFByb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuU2V0dGxlZFByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VSZXNvbHZlZCA9IGZ1bmN0aW9uIChpbmRleCwgaW5zcGVjdGlvbikge1xuICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSBpbnNwZWN0aW9uO1xuICAgIHZhciB0b3RhbFJlc29sdmVkID0gKyt0aGlzLl90b3RhbFJlc29sdmVkO1xuICAgIGlmICh0b3RhbFJlc29sdmVkID49IHRoaXMuX2xlbmd0aCkge1xuICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX3ZhbHVlcyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5TZXR0bGVkUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2VJbnNwZWN0aW9uKCk7XG4gICAgcmV0Ll9iaXRGaWVsZCA9IDMzNTU0NDMyO1xuICAgIHJldC5fc2V0dGxlZFZhbHVlRmllbGQgPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZVJlc29sdmVkKGluZGV4LCByZXQpO1xufTtcblNldHRsZWRQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlUmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uLCBpbmRleCkge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZUluc3BlY3Rpb24oKTtcbiAgICByZXQuX2JpdEZpZWxkID0gMTY3NzcyMTY7XG4gICAgcmV0Ll9zZXR0bGVkVmFsdWVGaWVsZCA9IHJlYXNvbjtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZVJlc29sdmVkKGluZGV4LCByZXQpO1xufTtcblxuUHJvbWlzZS5zZXR0bGUgPSBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICBkZWJ1Zy5kZXByZWNhdGVkKFwiLnNldHRsZSgpXCIsIFwiLnJlZmxlY3QoKVwiKTtcbiAgICByZXR1cm4gbmV3IFNldHRsZWRQcm9taXNlQXJyYXkocHJvbWlzZXMpLnByb21pc2UoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnNldHRsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5zZXR0bGUodGhpcyk7XG59O1xufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDMxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24pIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBSYW5nZUVycm9yID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpLlJhbmdlRXJyb3I7XG52YXIgQWdncmVnYXRlRXJyb3IgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIikuQWdncmVnYXRlRXJyb3I7XG52YXIgaXNBcnJheSA9IHV0aWwuaXNBcnJheTtcbnZhciBDQU5DRUxMQVRJT04gPSB7fTtcblxuXG5mdW5jdGlvbiBTb21lUHJvbWlzZUFycmF5KHZhbHVlcykge1xuICAgIHRoaXMuY29uc3RydWN0b3IkKHZhbHVlcyk7XG4gICAgdGhpcy5faG93TWFueSA9IDA7XG4gICAgdGhpcy5fdW53cmFwID0gZmFsc2U7XG4gICAgdGhpcy5faW5pdGlhbGl6ZWQgPSBmYWxzZTtcbn1cbnV0aWwuaW5oZXJpdHMoU29tZVByb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9ob3dNYW55ID09PSAwKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmUoW10pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2luaXQkKHVuZGVmaW5lZCwgLTUpO1xuICAgIHZhciBpc0FycmF5UmVzb2x2ZWQgPSBpc0FycmF5KHRoaXMuX3ZhbHVlcyk7XG4gICAgaWYgKCF0aGlzLl9pc1Jlc29sdmVkKCkgJiZcbiAgICAgICAgaXNBcnJheVJlc29sdmVkICYmXG4gICAgICAgIHRoaXMuX2hvd01hbnkgPiB0aGlzLl9jYW5Qb3NzaWJseUZ1bGZpbGwoKSkge1xuICAgICAgICB0aGlzLl9yZWplY3QodGhpcy5fZ2V0UmFuZ2VFcnJvcih0aGlzLmxlbmd0aCgpKSk7XG4gICAgfVxufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XG4gICAgdGhpcy5faW5pdCgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuc2V0VW53cmFwID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX3Vud3JhcCA9IHRydWU7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5ob3dNYW55ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9ob3dNYW55O1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuc2V0SG93TWFueSA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIHRoaXMuX2hvd01hbnkgPSBjb3VudDtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5fYWRkRnVsZmlsbGVkKHZhbHVlKTtcbiAgICBpZiAodGhpcy5fZnVsZmlsbGVkKCkgPT09IHRoaXMuaG93TWFueSgpKSB7XG4gICAgICAgIHRoaXMuX3ZhbHVlcy5sZW5ndGggPSB0aGlzLmhvd01hbnkoKTtcbiAgICAgICAgaWYgKHRoaXMuaG93TWFueSgpID09PSAxICYmIHRoaXMuX3Vud3JhcCkge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXNbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG5cbn07XG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZVJlamVjdGVkID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRoaXMuX2FkZFJlamVjdGVkKHJlYXNvbik7XG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrT3V0Y29tZSgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VDYW5jZWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3ZhbHVlcyBpbnN0YW5jZW9mIFByb21pc2UgfHwgdGhpcy5fdmFsdWVzID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbCgpO1xuICAgIH1cbiAgICB0aGlzLl9hZGRSZWplY3RlZChDQU5DRUxMQVRJT04pO1xuICAgIHJldHVybiB0aGlzLl9jaGVja091dGNvbWUoKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9jaGVja091dGNvbWUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5ob3dNYW55KCkgPiB0aGlzLl9jYW5Qb3NzaWJseUZ1bGZpbGwoKSkge1xuICAgICAgICB2YXIgZSA9IG5ldyBBZ2dyZWdhdGVFcnJvcigpO1xuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5sZW5ndGgoKTsgaSA8IHRoaXMuX3ZhbHVlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3ZhbHVlc1tpXSAhPT0gQ0FOQ0VMTEFUSU9OKSB7XG4gICAgICAgICAgICAgICAgZS5wdXNoKHRoaXMuX3ZhbHVlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0KGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9mdWxmaWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RvdGFsUmVzb2x2ZWQ7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVqZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcy5sZW5ndGggLSB0aGlzLmxlbmd0aCgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2FkZFJlamVjdGVkID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRoaXMuX3ZhbHVlcy5wdXNoKHJlYXNvbik7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fYWRkRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5fdmFsdWVzW3RoaXMuX3RvdGFsUmVzb2x2ZWQrK10gPSB2YWx1ZTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9jYW5Qb3NzaWJseUZ1bGZpbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubGVuZ3RoKCkgLSB0aGlzLl9yZWplY3RlZCgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2dldFJhbmdlRXJyb3IgPSBmdW5jdGlvbiAoY291bnQpIHtcbiAgICB2YXIgbWVzc2FnZSA9IFwiSW5wdXQgYXJyYXkgbXVzdCBjb250YWluIGF0IGxlYXN0IFwiICtcbiAgICAgICAgICAgIHRoaXMuX2hvd01hbnkgKyBcIiBpdGVtcyBidXQgY29udGFpbnMgb25seSBcIiArIGNvdW50ICsgXCIgaXRlbXNcIjtcbiAgICByZXR1cm4gbmV3IFJhbmdlRXJyb3IobWVzc2FnZSk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzb2x2ZUVtcHR5QXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcmVqZWN0KHRoaXMuX2dldFJhbmdlRXJyb3IoMCkpO1xufTtcblxuZnVuY3Rpb24gc29tZShwcm9taXNlcywgaG93TWFueSkge1xuICAgIGlmICgoaG93TWFueSB8IDApICE9PSBob3dNYW55IHx8IGhvd01hbnkgPCAwKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBwb3NpdGl2ZSBpbnRlZ2VyXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgdmFyIHJldCA9IG5ldyBTb21lUHJvbWlzZUFycmF5KHByb21pc2VzKTtcbiAgICB2YXIgcHJvbWlzZSA9IHJldC5wcm9taXNlKCk7XG4gICAgcmV0LnNldEhvd01hbnkoaG93TWFueSk7XG4gICAgcmV0LmluaXQoKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuUHJvbWlzZS5zb21lID0gZnVuY3Rpb24gKHByb21pc2VzLCBob3dNYW55KSB7XG4gICAgcmV0dXJuIHNvbWUocHJvbWlzZXMsIGhvd01hbnkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc29tZSA9IGZ1bmN0aW9uIChob3dNYW55KSB7XG4gICAgcmV0dXJuIHNvbWUodGhpcywgaG93TWFueSk7XG59O1xuXG5Qcm9taXNlLl9Tb21lUHJvbWlzZUFycmF5ID0gU29tZVByb21pc2VBcnJheTtcbn07XG5cbn0se1wiLi9lcnJvcnNcIjoxMixcIi4vdXRpbFwiOjM2fV0sMzI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbmZ1bmN0aW9uIFByb21pc2VJbnNwZWN0aW9uKHByb21pc2UpIHtcbiAgICBpZiAocHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByb21pc2UgPSBwcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSBwcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgdGhpcy5fc2V0dGxlZFZhbHVlRmllbGQgPSBwcm9taXNlLl9pc0ZhdGVTZWFsZWQoKVxuICAgICAgICAgICAgPyBwcm9taXNlLl9zZXR0bGVkVmFsdWUoKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gMDtcbiAgICAgICAgdGhpcy5fc2V0dGxlZFZhbHVlRmllbGQgPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuXG5Qcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuX3NldHRsZWRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWVGaWVsZDtcbn07XG5cbnZhciB2YWx1ZSA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2Fubm90IGdldCBmdWxmaWxsbWVudCB2YWx1ZSBvZiBhIG5vbi1mdWxmaWxsZWQgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbn07XG5cbnZhciByZWFzb24gPSBQcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuZXJyb3IgPVxuUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLnJlYXNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW5ub3QgZ2V0IHJlamVjdGlvbiByZWFzb24gb2YgYSBub24tcmVqZWN0ZWQgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbn07XG5cbnZhciBpc0Z1bGZpbGxlZCA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDA7XG59O1xuXG52YXIgaXNSZWplY3RlZCA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc1JlamVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDA7XG59O1xuXG52YXIgaXNQZW5kaW5nID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNTAzOTcxODQpID09PSAwO1xufTtcblxudmFyIGlzUmVzb2x2ZWQgPSBQcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuaXNSZXNvbHZlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNTAzMzE2NDgpICE9PSAwO1xufTtcblxuUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzQ2FuY2VsbGVkID1cblByb21pc2UucHJvdG90eXBlLl9pc0NhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA2NTUzNikgPT09IDY1NTM2O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0KCkuX2lzQ2FuY2VsbGVkKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5pc1BlbmRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaXNQZW5kaW5nLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNSZWplY3RlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBpc1JlamVjdGVkLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNGdWxmaWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaXNGdWxmaWxsZWQuY2FsbCh0aGlzLl90YXJnZXQoKSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5pc1Jlc29sdmVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGlzUmVzb2x2ZWQuY2FsbCh0aGlzLl90YXJnZXQoKSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB2YWx1ZS5jYWxsKHRoaXMuX3RhcmdldCgpKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnJlYXNvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLl90YXJnZXQoKTtcbiAgICB0YXJnZXQuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKTtcbiAgICByZXR1cm4gcmVhc29uLmNhbGwodGFyZ2V0KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl92YWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWFzb24gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZSgpO1xufTtcblxuUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbiA9IFByb21pc2VJbnNwZWN0aW9uO1xufTtcblxufSx7fV0sMzM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIGlzT2JqZWN0ID0gdXRpbC5pc09iamVjdDtcblxuZnVuY3Rpb24gdHJ5Q29udmVydFRvUHJvbWlzZShvYmosIGNvbnRleHQpIHtcbiAgICBpZiAoaXNPYmplY3Qob2JqKSkge1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgUHJvbWlzZSkgcmV0dXJuIG9iajtcbiAgICAgICAgdmFyIHRoZW4gPSBnZXRUaGVuKG9iaik7XG4gICAgICAgIGlmICh0aGVuID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgaWYgKGNvbnRleHQpIGNvbnRleHQuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgICAgICB2YXIgcmV0ID0gUHJvbWlzZS5yZWplY3QodGhlbi5lKTtcbiAgICAgICAgICAgIGlmIChjb250ZXh0KSBjb250ZXh0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGlmIChpc0FueUJsdWViaXJkUHJvbWlzZShvYmopKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgICAgICAgICBvYmouX3RoZW4oXG4gICAgICAgICAgICAgICAgICAgIHJldC5fZnVsZmlsbCxcbiAgICAgICAgICAgICAgICAgICAgcmV0Ll9yZWplY3QsXG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgcmV0LFxuICAgICAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRvVGhlbmFibGUob2JqLCB0aGVuLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBkb0dldFRoZW4ob2JqKSB7XG4gICAgcmV0dXJuIG9iai50aGVuO1xufVxuXG5mdW5jdGlvbiBnZXRUaGVuKG9iaikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkb0dldFRoZW4ob2JqKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGVycm9yT2JqLmUgPSBlO1xuICAgICAgICByZXR1cm4gZXJyb3JPYmo7XG4gICAgfVxufVxuXG52YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuZnVuY3Rpb24gaXNBbnlCbHVlYmlyZFByb21pc2Uob2JqKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGhhc1Byb3AuY2FsbChvYmosIFwiX3Byb21pc2UwXCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZG9UaGVuYWJsZSh4LCB0aGVuLCBjb250ZXh0KSB7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgdmFyIHJldCA9IHByb21pc2U7XG4gICAgaWYgKGNvbnRleHQpIGNvbnRleHQuX3B1c2hDb250ZXh0KCk7XG4gICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICBpZiAoY29udGV4dCkgY29udGV4dC5fcG9wQ29udGV4dCgpO1xuICAgIHZhciBzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgdmFyIHJlc3VsdCA9IHV0aWwudHJ5Q2F0Y2godGhlbikuY2FsbCh4LCByZXNvbHZlLCByZWplY3QpO1xuICAgIHN5bmNocm9ub3VzID0gZmFsc2U7XG5cbiAgICBpZiAocHJvbWlzZSAmJiByZXN1bHQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHJlc3VsdC5lLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgcHJvbWlzZSA9IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZSh2YWx1ZSkge1xuICAgICAgICBpZiAoIXByb21pc2UpIHJldHVybjtcbiAgICAgICAgcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHZhbHVlKTtcbiAgICAgICAgcHJvbWlzZSA9IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAgICAgICBpZiAoIXByb21pc2UpIHJldHVybjtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVhc29uLCBzeW5jaHJvbm91cywgdHJ1ZSk7XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5yZXR1cm4gdHJ5Q29udmVydFRvUHJvbWlzZTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwzNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIGRlYnVnKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgVGltZW91dEVycm9yID0gUHJvbWlzZS5UaW1lb3V0RXJyb3I7XG5cbmZ1bmN0aW9uIEhhbmRsZVdyYXBwZXIoaGFuZGxlKSAge1xuICAgIHRoaXMuaGFuZGxlID0gaGFuZGxlO1xufVxuXG5IYW5kbGVXcmFwcGVyLnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaGFuZGxlKTtcbn07XG5cbnZhciBhZnRlclZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGRlbGF5KCt0aGlzKS50aGVuUmV0dXJuKHZhbHVlKTsgfTtcbnZhciBkZWxheSA9IFByb21pc2UuZGVsYXkgPSBmdW5jdGlvbiAobXMsIHZhbHVlKSB7XG4gICAgdmFyIHJldDtcbiAgICB2YXIgaGFuZGxlO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldCA9IFByb21pc2UucmVzb2x2ZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAuX3RoZW4oYWZ0ZXJWYWx1ZSwgbnVsbCwgbnVsbCwgbXMsIHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSAmJiB2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldC5fc2V0T25DYW5jZWwodmFsdWUpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICBoYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyByZXQuX2Z1bGZpbGwoKTsgfSwgK21zKTtcbiAgICAgICAgaWYgKGRlYnVnLmNhbmNlbGxhdGlvbigpKSB7XG4gICAgICAgICAgICByZXQuX3NldE9uQ2FuY2VsKG5ldyBIYW5kbGVXcmFwcGVyKGhhbmRsZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldC5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRlbGF5ID0gZnVuY3Rpb24gKG1zKSB7XG4gICAgcmV0dXJuIGRlbGF5KG1zLCB0aGlzKTtcbn07XG5cbnZhciBhZnRlclRpbWVvdXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgbWVzc2FnZSwgcGFyZW50KSB7XG4gICAgdmFyIGVycjtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgZXJyID0gbWVzc2FnZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVyciA9IG5ldyBUaW1lb3V0RXJyb3IoXCJvcGVyYXRpb24gdGltZWQgb3V0XCIpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZXJyID0gbmV3IFRpbWVvdXRFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgdXRpbC5tYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24oZXJyKTtcbiAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKGVycik7XG4gICAgcHJvbWlzZS5fcmVqZWN0KGVycik7XG5cbiAgICBpZiAocGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgcGFyZW50LmNhbmNlbCgpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIHN1Y2Nlc3NDbGVhcih2YWx1ZSkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmhhbmRsZSk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBmYWlsdXJlQ2xlYXIocmVhc29uKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaGFuZGxlKTtcbiAgICB0aHJvdyByZWFzb247XG59XG5cblByb21pc2UucHJvdG90eXBlLnRpbWVvdXQgPSBmdW5jdGlvbiAobXMsIG1lc3NhZ2UpIHtcbiAgICBtcyA9ICttcztcbiAgICB2YXIgcmV0LCBwYXJlbnQ7XG5cbiAgICB2YXIgaGFuZGxlV3JhcHBlciA9IG5ldyBIYW5kbGVXcmFwcGVyKHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZW91dFRpbWVvdXQoKSB7XG4gICAgICAgIGlmIChyZXQuaXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgIGFmdGVyVGltZW91dChyZXQsIG1lc3NhZ2UsIHBhcmVudCk7XG4gICAgICAgIH1cbiAgICB9LCBtcykpO1xuXG4gICAgaWYgKGRlYnVnLmNhbmNlbGxhdGlvbigpKSB7XG4gICAgICAgIHBhcmVudCA9IHRoaXMudGhlbigpO1xuICAgICAgICByZXQgPSBwYXJlbnQuX3RoZW4oc3VjY2Vzc0NsZWFyLCBmYWlsdXJlQ2xlYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBoYW5kbGVXcmFwcGVyLCB1bmRlZmluZWQpO1xuICAgICAgICByZXQuX3NldE9uQ2FuY2VsKGhhbmRsZVdyYXBwZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IHRoaXMuX3RoZW4oc3VjY2Vzc0NsZWFyLCBmYWlsdXJlQ2xlYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBoYW5kbGVXcmFwcGVyLCB1bmRlZmluZWQpO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG59O1xuXG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChQcm9taXNlLCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgY3JlYXRlQ29udGV4dCwgSU5URVJOQUwsIGRlYnVnKSB7XG4gICAgdmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xuICAgIHZhciBUeXBlRXJyb3IgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIikuVHlwZUVycm9yO1xuICAgIHZhciBpbmhlcml0cyA9IF9kZXJlcV8oXCIuL3V0aWxcIikuaW5oZXJpdHM7XG4gICAgdmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbiAgICB2YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuICAgIHZhciBOVUxMID0ge307XG5cbiAgICBmdW5jdGlvbiB0aHJvd2VyKGUpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGU7fSwgMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FzdFByZXNlcnZpbmdEaXNwb3NhYmxlKHRoZW5hYmxlKSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHRoZW5hYmxlKTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSAhPT0gdGhlbmFibGUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGVuYWJsZS5faXNEaXNwb3NhYmxlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGVuYWJsZS5fZ2V0RGlzcG9zZXIgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgdGhlbmFibGUuX2lzRGlzcG9zYWJsZSgpKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UuX3NldERpc3Bvc2FibGUodGhlbmFibGUuX2dldERpc3Bvc2VyKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXliZVByb21pc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpc3Bvc2UocmVzb3VyY2VzLCBpbnNwZWN0aW9uKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IHJlc291cmNlcy5sZW5ndGg7XG4gICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIGZ1bmN0aW9uIGl0ZXJhdG9yKCkge1xuICAgICAgICAgICAgaWYgKGkgPj0gbGVuKSByZXR1cm4gcmV0Ll9mdWxmaWxsKCk7XG4gICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gY2FzdFByZXNlcnZpbmdEaXNwb3NhYmxlKHJlc291cmNlc1tpKytdKTtcbiAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlICYmXG4gICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9pc0Rpc3Bvc2FibGUoKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX2dldERpc3Bvc2VyKCkudHJ5RGlzcG9zZShpbnNwZWN0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy5wcm9taXNlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aHJvd2VyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF5YmVQcm9taXNlLl90aGVuKGl0ZXJhdG9yLCB0aHJvd2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZXJhdG9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaXRlcmF0b3IoKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBEaXNwb3NlcihkYXRhLCBwcm9taXNlLCBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLl9wcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxuXG4gICAgRGlzcG9zZXIucHJvdG90eXBlLmRhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUucHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG4gICAgfTtcblxuICAgIERpc3Bvc2VyLnByb3RvdHlwZS5yZXNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvbWlzZSgpLmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb21pc2UoKS52YWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOVUxMO1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUudHJ5RGlzcG9zZSA9IGZ1bmN0aW9uKGluc3BlY3Rpb24pIHtcbiAgICAgICAgdmFyIHJlc291cmNlID0gdGhpcy5yZXNvdXJjZSgpO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuX2NvbnRleHQ7XG4gICAgICAgIGlmIChjb250ZXh0ICE9PSB1bmRlZmluZWQpIGNvbnRleHQuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgIHZhciByZXQgPSByZXNvdXJjZSAhPT0gTlVMTFxuICAgICAgICAgICAgPyB0aGlzLmRvRGlzcG9zZShyZXNvdXJjZSwgaW5zcGVjdGlvbikgOiBudWxsO1xuICAgICAgICBpZiAoY29udGV4dCAhPT0gdW5kZWZpbmVkKSBjb250ZXh0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3Vuc2V0RGlzcG9zYWJsZSgpO1xuICAgICAgICB0aGlzLl9kYXRhID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG4gICAgRGlzcG9zZXIuaXNEaXNwb3NlciA9IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIHJldHVybiAoZCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGQucmVzb3VyY2UgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBkLnRyeURpc3Bvc2UgPT09IFwiZnVuY3Rpb25cIik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEZ1bmN0aW9uRGlzcG9zZXIoZm4sIHByb21pc2UsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciQoZm4sIHByb21pc2UsIGNvbnRleHQpO1xuICAgIH1cbiAgICBpbmhlcml0cyhGdW5jdGlvbkRpc3Bvc2VyLCBEaXNwb3Nlcik7XG5cbiAgICBGdW5jdGlvbkRpc3Bvc2VyLnByb3RvdHlwZS5kb0Rpc3Bvc2UgPSBmdW5jdGlvbiAocmVzb3VyY2UsIGluc3BlY3Rpb24pIHtcbiAgICAgICAgdmFyIGZuID0gdGhpcy5kYXRhKCk7XG4gICAgICAgIHJldHVybiBmbi5jYWxsKHJlc291cmNlLCByZXNvdXJjZSwgaW5zcGVjdGlvbik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG1heWJlVW53cmFwRGlzcG9zZXIodmFsdWUpIHtcbiAgICAgICAgaWYgKERpc3Bvc2VyLmlzRGlzcG9zZXIodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc291cmNlc1t0aGlzLmluZGV4XS5fc2V0RGlzcG9zYWJsZSh2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUucHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBSZXNvdXJjZUxpc3QobGVuZ3RoKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLnByb21pc2UgPSBudWxsO1xuICAgICAgICB0aGlzW2xlbmd0aC0xXSA9IG51bGw7XG4gICAgfVxuXG4gICAgUmVzb3VyY2VMaXN0LnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzW2ldO1xuICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBQcm9taXNlLnVzaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA8IDIpIHJldHVybiBhcGlSZWplY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICBcInlvdSBtdXN0IHBhc3MgYXQgbGVhc3QgMiBhcmd1bWVudHMgdG8gUHJvbWlzZS51c2luZ1wiKTtcbiAgICAgICAgdmFyIGZuID0gYXJndW1lbnRzW2xlbiAtIDFdO1xuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbnB1dDtcbiAgICAgICAgdmFyIHNwcmVhZEFyZ3MgPSB0cnVlO1xuICAgICAgICBpZiAobGVuID09PSAyICYmIEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICAgICAgaW5wdXQgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICBsZW4gPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgICAgICBzcHJlYWRBcmdzID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnB1dCA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgIGxlbi0tO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXNvdXJjZXMgPSBuZXcgUmVzb3VyY2VMaXN0KGxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciByZXNvdXJjZSA9IGlucHV0W2ldO1xuICAgICAgICAgICAgaWYgKERpc3Bvc2VyLmlzRGlzcG9zZXIocmVzb3VyY2UpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3Bvc2VyID0gcmVzb3VyY2U7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UgPSByZXNvdXJjZS5wcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuX3NldERpc3Bvc2FibGUoZGlzcG9zZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXNvdXJjZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2UgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl90aGVuKG1heWJlVW53cmFwRGlzcG9zZXIsIG51bGwsIG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXM6IHJlc291cmNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaVxuICAgICAgICAgICAgICAgICAgICB9LCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc291cmNlc1tpXSA9IHJlc291cmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlZmxlY3RlZFJlc291cmNlcyA9IG5ldyBBcnJheShyZXNvdXJjZXMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWZsZWN0ZWRSZXNvdXJjZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHJlZmxlY3RlZFJlc291cmNlc1tpXSA9IFByb21pc2UucmVzb2x2ZShyZXNvdXJjZXNbaV0pLnJlZmxlY3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXN1bHRQcm9taXNlID0gUHJvbWlzZS5hbGwocmVmbGVjdGVkUmVzb3VyY2VzKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oaW5zcGVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluc3BlY3Rpb25zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnNwZWN0aW9uID0gaW5zcGVjdGlvbnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JPYmouZSA9IGluc3BlY3Rpb24uZXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaW5zcGVjdGlvbi5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRQcm9taXNlLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluc3BlY3Rpb25zW2ldID0gaW5zcGVjdGlvbi52YWx1ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuXG4gICAgICAgICAgICAgICAgZm4gPSB0cnlDYXRjaChmbik7XG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IHNwcmVhZEFyZ3NcbiAgICAgICAgICAgICAgICAgICAgPyBmbi5hcHBseSh1bmRlZmluZWQsIGluc3BlY3Rpb25zKSA6IGZuKGluc3BlY3Rpb25zKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgICAgICAgICAgICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICAgICAgICAgICAgICByZXQsIHByb21pc2VDcmVhdGVkLCBcIlByb21pc2UudXNpbmdcIiwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gcmVzdWx0UHJvbWlzZS5sYXN0bHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5zcGVjdGlvbiA9IG5ldyBQcm9taXNlLlByb21pc2VJbnNwZWN0aW9uKHJlc3VsdFByb21pc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGRpc3Bvc2UocmVzb3VyY2VzLCBpbnNwZWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlc291cmNlcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgcHJvbWlzZS5fc2V0T25DYW5jZWwocmVzb3VyY2VzKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl9zZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKGRpc3Bvc2VyKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAxMzEwNzI7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VyID0gZGlzcG9zZXI7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl9pc0Rpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAxMzEwNzIpID4gMDtcbiAgICB9O1xuXG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX2dldERpc3Bvc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzcG9zZXI7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl91bnNldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjEzMTA3Mik7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VyID0gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICBQcm9taXNlLnByb3RvdHlwZS5kaXNwb3NlciA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBpZiAodHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25EaXNwb3NlcihmbiwgdGhpcywgY3JlYXRlQ29udGV4dCgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgfTtcblxufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwzNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgY2FuRXZhbHVhdGUgPSB0eXBlb2YgbmF2aWdhdG9yID09IFwidW5kZWZpbmVkXCI7XG5cbnZhciBlcnJvck9iaiA9IHtlOiB7fX07XG52YXIgdHJ5Q2F0Y2hUYXJnZXQ7XG52YXIgZ2xvYmFsT2JqZWN0ID0gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDpcbiAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDpcbiAgICB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDpcbiAgICB0aGlzICE9PSB1bmRlZmluZWQgPyB0aGlzIDogbnVsbDtcblxuZnVuY3Rpb24gdHJ5Q2F0Y2hlcigpIHtcbiAgICB0cnkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdHJ5Q2F0Y2hUYXJnZXQ7XG4gICAgICAgIHRyeUNhdGNoVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmouZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9XG59XG5mdW5jdGlvbiB0cnlDYXRjaChmbikge1xuICAgIHRyeUNhdGNoVGFyZ2V0ID0gZm47XG4gICAgcmV0dXJuIHRyeUNhdGNoZXI7XG59XG5cbnZhciBpbmhlcml0cyA9IGZ1bmN0aW9uKENoaWxkLCBQYXJlbnQpIHtcbiAgICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gICAgZnVuY3Rpb24gVCgpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IENoaWxkO1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yJCA9IFBhcmVudDtcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHlOYW1lIGluIFBhcmVudC5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIGlmIChoYXNQcm9wLmNhbGwoUGFyZW50LnByb3RvdHlwZSwgcHJvcGVydHlOYW1lKSAmJlxuICAgICAgICAgICAgICAgIHByb3BlcnR5TmFtZS5jaGFyQXQocHJvcGVydHlOYW1lLmxlbmd0aC0xKSAhPT0gXCIkXCJcbiAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpc1twcm9wZXJ0eU5hbWUgKyBcIiRcIl0gPSBQYXJlbnQucHJvdG90eXBlW3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgVC5wcm90b3R5cGUgPSBQYXJlbnQucHJvdG90eXBlO1xuICAgIENoaWxkLnByb3RvdHlwZSA9IG5ldyBUKCk7XG4gICAgcmV0dXJuIENoaWxkLnByb3RvdHlwZTtcbn07XG5cblxuZnVuY3Rpb24gaXNQcmltaXRpdmUodmFsKSB7XG4gICAgcmV0dXJuIHZhbCA9PSBudWxsIHx8IHZhbCA9PT0gdHJ1ZSB8fCB2YWwgPT09IGZhbHNlIHx8XG4gICAgICAgIHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIjtcblxufVxuXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIG1heWJlV3JhcEFzRXJyb3IobWF5YmVFcnJvcikge1xuICAgIGlmICghaXNQcmltaXRpdmUobWF5YmVFcnJvcikpIHJldHVybiBtYXliZUVycm9yO1xuXG4gICAgcmV0dXJuIG5ldyBFcnJvcihzYWZlVG9TdHJpbmcobWF5YmVFcnJvcikpO1xufVxuXG5mdW5jdGlvbiB3aXRoQXBwZW5kZWQodGFyZ2V0LCBhcHBlbmRlZSkge1xuICAgIHZhciBsZW4gPSB0YXJnZXQubGVuZ3RoO1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkobGVuICsgMSk7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHJldFtpXSA9IHRhcmdldFtpXTtcbiAgICB9XG4gICAgcmV0W2ldID0gYXBwZW5kZWU7XG4gICAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0KG9iaiwga2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgICBpZiAoZXM1LmlzRVM1KSB7XG4gICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG5cbiAgICAgICAgaWYgKGRlc2MgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2MuZ2V0ID09IG51bGwgJiYgZGVzYy5zZXQgPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICA/IGRlc2MudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkgPyBvYmpba2V5XSA6IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5vdEVudW1lcmFibGVQcm9wKG9iaiwgbmFtZSwgdmFsdWUpIHtcbiAgICBpZiAoaXNQcmltaXRpdmUob2JqKSkgcmV0dXJuIG9iajtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH07XG4gICAgZXM1LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwgZGVzY3JpcHRvcik7XG4gICAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gdGhyb3dlcihyKSB7XG4gICAgdGhyb3cgcjtcbn1cblxudmFyIGluaGVyaXRlZERhdGFLZXlzID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBleGNsdWRlZFByb3RvdHlwZXMgPSBbXG4gICAgICAgIEFycmF5LnByb3RvdHlwZSxcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgICAgRnVuY3Rpb24ucHJvdG90eXBlXG4gICAgXTtcblxuICAgIHZhciBpc0V4Y2x1ZGVkUHJvdG8gPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleGNsdWRlZFByb3RvdHlwZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChleGNsdWRlZFByb3RvdHlwZXNbaV0gPT09IHZhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgaWYgKGVzNS5pc0VTNSkge1xuICAgICAgICB2YXIgZ2V0S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgICAgICB2YXIgdmlzaXRlZEtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgd2hpbGUgKG9iaiAhPSBudWxsICYmICFpc0V4Y2x1ZGVkUHJvdG8ob2JqKSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlzO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMgPSBnZXRLZXlzKG9iaik7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2aXNpdGVkS2V5c1trZXldKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaXRlZEtleXNba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXNjICE9IG51bGwgJiYgZGVzYy5nZXQgPT0gbnVsbCAmJiBkZXNjLnNldCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9iaiA9IGVzNS5nZXRQcm90b3R5cGVPZihvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICBpZiAoaXNFeGNsdWRlZFByb3RvKG9iaikpIHJldHVybiBbXTtcbiAgICAgICAgICAgIHZhciByZXQgPSBbXTtcblxuICAgICAgICAgICAgLypqc2hpbnQgZm9yaW46ZmFsc2UgKi9cbiAgICAgICAgICAgIGVudW1lcmF0aW9uOiBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1Byb3AuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4Y2x1ZGVkUHJvdG90eXBlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1Byb3AuY2FsbChleGNsdWRlZFByb3RvdHlwZXNbaV0sIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBlbnVtZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH07XG4gICAgfVxuXG59KSgpO1xuXG52YXIgdGhpc0Fzc2lnbm1lbnRQYXR0ZXJuID0gL3RoaXNcXHMqXFwuXFxzKlxcUytcXHMqPS87XG5mdW5jdGlvbiBpc0NsYXNzKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IGVzNS5uYW1lcyhmbi5wcm90b3R5cGUpO1xuXG4gICAgICAgICAgICB2YXIgaGFzTWV0aG9kcyA9IGVzNS5pc0VTNSAmJiBrZXlzLmxlbmd0aCA+IDE7XG4gICAgICAgICAgICB2YXIgaGFzTWV0aG9kc090aGVyVGhhbkNvbnN0cnVjdG9yID0ga2V5cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgIShrZXlzLmxlbmd0aCA9PT0gMSAmJiBrZXlzWzBdID09PSBcImNvbnN0cnVjdG9yXCIpO1xuICAgICAgICAgICAgdmFyIGhhc1RoaXNBc3NpZ25tZW50QW5kU3RhdGljTWV0aG9kcyA9XG4gICAgICAgICAgICAgICAgdGhpc0Fzc2lnbm1lbnRQYXR0ZXJuLnRlc3QoZm4gKyBcIlwiKSAmJiBlczUubmFtZXMoZm4pLmxlbmd0aCA+IDA7XG5cbiAgICAgICAgICAgIGlmIChoYXNNZXRob2RzIHx8IGhhc01ldGhvZHNPdGhlclRoYW5Db25zdHJ1Y3RvciB8fFxuICAgICAgICAgICAgICAgIGhhc1RoaXNBc3NpZ25tZW50QW5kU3RhdGljTWV0aG9kcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRvRmFzdFByb3BlcnRpZXMob2JqKSB7XG4gICAgLypqc2hpbnQgLVcwMjcsLVcwNTUsLVcwMzEqL1xuICAgIGZ1bmN0aW9uIEZha2VDb25zdHJ1Y3RvcigpIHt9XG4gICAgRmFrZUNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IG9iajtcbiAgICB2YXIgbCA9IDg7XG4gICAgd2hpbGUgKGwtLSkgbmV3IEZha2VDb25zdHJ1Y3RvcigpO1xuICAgIHJldHVybiBvYmo7XG4gICAgZXZhbChvYmopO1xufVxuXG52YXIgcmlkZW50ID0gL15bYS16JF9dW2EteiRfMC05XSokL2k7XG5mdW5jdGlvbiBpc0lkZW50aWZpZXIoc3RyKSB7XG4gICAgcmV0dXJuIHJpZGVudC50ZXN0KHN0cik7XG59XG5cbmZ1bmN0aW9uIGZpbGxlZFJhbmdlKGNvdW50LCBwcmVmaXgsIHN1ZmZpeCkge1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkoY291bnQpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgIHJldFtpXSA9IHByZWZpeCArIGkgKyBzdWZmaXg7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHNhZmVUb1N0cmluZyhvYmopIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gb2JqICsgXCJcIjtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBcIltubyBzdHJpbmcgcmVwcmVzZW50YXRpb25dXCI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0Vycm9yKG9iaikge1xuICAgIHJldHVybiBvYmogIT09IG51bGwgJiZcbiAgICAgICAgICAgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICB0eXBlb2Ygb2JqLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgdHlwZW9mIG9iai5uYW1lID09PSBcInN0cmluZ1wiO1xufVxuXG5mdW5jdGlvbiBtYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24oZSkge1xuICAgIHRyeSB7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKGUsIFwiaXNPcGVyYXRpb25hbFwiLCB0cnVlKTtcbiAgICB9XG4gICAgY2F0Y2goaWdub3JlKSB7fVxufVxuXG5mdW5jdGlvbiBvcmlnaW5hdGVzRnJvbVJlamVjdGlvbihlKSB7XG4gICAgaWYgKGUgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAoKGUgaW5zdGFuY2VvZiBFcnJvcltcIl9fQmx1ZWJpcmRFcnJvclR5cGVzX19cIl0uT3BlcmF0aW9uYWxFcnJvcikgfHxcbiAgICAgICAgZVtcImlzT3BlcmF0aW9uYWxcIl0gPT09IHRydWUpO1xufVxuXG5mdW5jdGlvbiBjYW5BdHRhY2hUcmFjZShvYmopIHtcbiAgICByZXR1cm4gaXNFcnJvcihvYmopICYmIGVzNS5wcm9wZXJ0eUlzV3JpdGFibGUob2JqLCBcInN0YWNrXCIpO1xufVxuXG52YXIgZW5zdXJlRXJyb3JPYmplY3QgPSAoZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEoXCJzdGFja1wiIGluIG5ldyBFcnJvcigpKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjYW5BdHRhY2hUcmFjZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIHRyeSB7dGhyb3cgbmV3IEVycm9yKHNhZmVUb1N0cmluZyh2YWx1ZSkpO31cbiAgICAgICAgICAgIGNhdGNoKGVycikge3JldHVybiBlcnI7fVxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGNhbkF0dGFjaFRyYWNlKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihzYWZlVG9TdHJpbmcodmFsdWUpKTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG5mdW5jdGlvbiBjbGFzc1N0cmluZyhvYmopIHtcbiAgICByZXR1cm4ge30udG9TdHJpbmcuY2FsbChvYmopO1xufVxuXG5mdW5jdGlvbiBjb3B5RGVzY3JpcHRvcnMoZnJvbSwgdG8sIGZpbHRlcikge1xuICAgIHZhciBrZXlzID0gZXM1Lm5hbWVzKGZyb20pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgaWYgKGZpbHRlcihrZXkpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGVzNS5kZWZpbmVQcm9wZXJ0eSh0bywga2V5LCBlczUuZ2V0RGVzY3JpcHRvcihmcm9tLCBrZXkpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIGFzQXJyYXkgPSBmdW5jdGlvbih2KSB7XG4gICAgaWYgKGVzNS5pc0FycmF5KHYpKSB7XG4gICAgICAgIHJldHVybiB2O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvcikge1xuICAgIHZhciBBcnJheUZyb20gPSB0eXBlb2YgQXJyYXkuZnJvbSA9PT0gXCJmdW5jdGlvblwiID8gZnVuY3Rpb24odikge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh2KTtcbiAgICB9IDogZnVuY3Rpb24odikge1xuICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgIHZhciBpdCA9IHZbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICB2YXIgaXRSZXN1bHQ7XG4gICAgICAgIHdoaWxlICghKChpdFJlc3VsdCA9IGl0Lm5leHQoKSkuZG9uZSkpIHtcbiAgICAgICAgICAgIHJldC5wdXNoKGl0UmVzdWx0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG5cbiAgICBhc0FycmF5ID0gZnVuY3Rpb24odikge1xuICAgICAgICBpZiAoZXM1LmlzQXJyYXkodikpIHtcbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9IGVsc2UgaWYgKHYgIT0gbnVsbCAmJiB0eXBlb2YgdltTeW1ib2wuaXRlcmF0b3JdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheUZyb20odik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cblxudmFyIGlzTm9kZSA9IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIGNsYXNzU3RyaW5nKHByb2Nlc3MpLnRvTG93ZXJDYXNlKCkgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiO1xuXG5mdW5jdGlvbiBlbnYoa2V5LCBkZWYpIHtcbiAgICByZXR1cm4gaXNOb2RlID8gcHJvY2Vzcy5lbnZba2V5XSA6IGRlZjtcbn1cblxuZnVuY3Rpb24gZ2V0TmF0aXZlUHJvbWlzZSgpIHtcbiAgICBpZiAodHlwZW9mIFByb21pc2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbigpe30pO1xuICAgICAgICAgICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwocHJvbWlzZSkgPT09IFwiW29iamVjdCBQcm9taXNlXVwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxufVxuXG52YXIgcmV0ID0ge1xuICAgIGlzQ2xhc3M6IGlzQ2xhc3MsXG4gICAgaXNJZGVudGlmaWVyOiBpc0lkZW50aWZpZXIsXG4gICAgaW5oZXJpdGVkRGF0YUtleXM6IGluaGVyaXRlZERhdGFLZXlzLFxuICAgIGdldERhdGFQcm9wZXJ0eU9yRGVmYXVsdDogZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0LFxuICAgIHRocm93ZXI6IHRocm93ZXIsXG4gICAgaXNBcnJheTogZXM1LmlzQXJyYXksXG4gICAgYXNBcnJheTogYXNBcnJheSxcbiAgICBub3RFbnVtZXJhYmxlUHJvcDogbm90RW51bWVyYWJsZVByb3AsXG4gICAgaXNQcmltaXRpdmU6IGlzUHJpbWl0aXZlLFxuICAgIGlzT2JqZWN0OiBpc09iamVjdCxcbiAgICBpc0Vycm9yOiBpc0Vycm9yLFxuICAgIGNhbkV2YWx1YXRlOiBjYW5FdmFsdWF0ZSxcbiAgICBlcnJvck9iajogZXJyb3JPYmosXG4gICAgdHJ5Q2F0Y2g6IHRyeUNhdGNoLFxuICAgIGluaGVyaXRzOiBpbmhlcml0cyxcbiAgICB3aXRoQXBwZW5kZWQ6IHdpdGhBcHBlbmRlZCxcbiAgICBtYXliZVdyYXBBc0Vycm9yOiBtYXliZVdyYXBBc0Vycm9yLFxuICAgIHRvRmFzdFByb3BlcnRpZXM6IHRvRmFzdFByb3BlcnRpZXMsXG4gICAgZmlsbGVkUmFuZ2U6IGZpbGxlZFJhbmdlLFxuICAgIHRvU3RyaW5nOiBzYWZlVG9TdHJpbmcsXG4gICAgY2FuQXR0YWNoVHJhY2U6IGNhbkF0dGFjaFRyYWNlLFxuICAgIGVuc3VyZUVycm9yT2JqZWN0OiBlbnN1cmVFcnJvck9iamVjdCxcbiAgICBvcmlnaW5hdGVzRnJvbVJlamVjdGlvbjogb3JpZ2luYXRlc0Zyb21SZWplY3Rpb24sXG4gICAgbWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uOiBtYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24sXG4gICAgY2xhc3NTdHJpbmc6IGNsYXNzU3RyaW5nLFxuICAgIGNvcHlEZXNjcmlwdG9yczogY29weURlc2NyaXB0b3JzLFxuICAgIGhhc0RldlRvb2xzOiB0eXBlb2YgY2hyb21lICE9PSBcInVuZGVmaW5lZFwiICYmIGNocm9tZSAmJlxuICAgICAgICAgICAgICAgICB0eXBlb2YgY2hyb21lLmxvYWRUaW1lcyA9PT0gXCJmdW5jdGlvblwiLFxuICAgIGlzTm9kZTogaXNOb2RlLFxuICAgIGVudjogZW52LFxuICAgIGdsb2JhbDogZ2xvYmFsT2JqZWN0LFxuICAgIGdldE5hdGl2ZVByb21pc2U6IGdldE5hdGl2ZVByb21pc2Vcbn07XG5yZXQuaXNSZWNlbnROb2RlID0gcmV0LmlzTm9kZSAmJiAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZlcnNpb24gPSBwcm9jZXNzLnZlcnNpb25zLm5vZGUuc3BsaXQoXCIuXCIpLm1hcChOdW1iZXIpO1xuICAgIHJldHVybiAodmVyc2lvblswXSA9PT0gMCAmJiB2ZXJzaW9uWzFdID4gMTApIHx8ICh2ZXJzaW9uWzBdID4gMCk7XG59KSgpO1xuXG5pZiAocmV0LmlzTm9kZSkgcmV0LnRvRmFzdFByb3BlcnRpZXMocHJvY2Vzcyk7XG5cbnRyeSB7dGhyb3cgbmV3IEVycm9yKCk7IH0gY2F0Y2ggKGUpIHtyZXQubGFzdExpbmVFcnJvciA9IGU7fVxubW9kdWxlLmV4cG9ydHMgPSByZXQ7XG5cbn0se1wiLi9lczVcIjoxM31dfSx7fSxbNF0pKDQpXG59KTsgICAgICAgICAgICAgICAgICAgIDtpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93ICE9PSBudWxsKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5QID0gd2luZG93LlByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmICE9PSBudWxsKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLlAgPSBzZWxmLlByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSIsIi8qIEZsYXNoIGRldGVjdGlvbiBmcm9tIFNXRk9iamVjdDogY29kZS5nb29nbGUuY29tL3Avc3dmb2JqZWN0XG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgXG4gKiBAcmV0dXJucyBhIHZlcnNpb24gbnVtYmVyIG9yIC0xIGlmIG5vIHBsYXllclxuICovXG52YXIgZ2V0Rmxhc2hWZXJzaW9uID0gZnVuY3Rpb24oKSB7XG5cdFxuXHRcdHZhciBTVyA9IFwiU2hvY2t3YXZlXCIsXG5cdFx0XHRGTEFTSCA9IFwiRmxhc2hcIixcblx0XHRcdFNIT0NLV0FWRV9GTEFTSCA9IFNXICsgXCIgXCIgKyBGTEFTSCxcblx0XHRcdFNIT0NLV0FWRV9GTEFTSF9BWCA9IFNXK0ZMQVNIK1wiLlwiK1NXK0ZMQVNILFxuXHRcdFx0RkxBU0hfTUlNRV9UWVBFID0gXCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiLFxuXHRcdFx0bmF2ID0gbmF2aWdhdG9yLFxuXHRcdFx0cGFyc2UgPSBwYXJzZUZsb2F0LFxuXHRcdFx0cGx1Z2lucyA9IG5hdi5wbHVnaW5zLFxuXHRcdFx0bWltZXMgPSBuYXYubWltZVR5cGVzLFxuXHRcdFx0ZCwgYTtcblx0XHRpZiAoISFwbHVnaW5zICYmIHR5cGVvZiBwbHVnaW5zW1NIT0NLV0FWRV9GTEFTSF0gPT0gXCJvYmplY3RcIikge1xuXHRcdFx0ZCA9IHBsdWdpbnNbU0hPQ0tXQVZFX0ZMQVNIXS5kZXNjcmlwdGlvbjtcblx0XHRcdGlmICghIWQgJiYgISghIW1pbWVzICYmICEhbWltZXNbRkxBU0hfTUlNRV9UWVBFXSAmJiAhbWltZXNbRkxBU0hfTUlNRV9UWVBFXS5lbmFibGVkUGx1Z2luKSkge1xuXHRcdFx0XHRyZXR1cm4gcGFyc2UoIGQucmVwbGFjZSgvXi4qXFxzKyhcXFMrKVxccytcXFMrJC8sIFwiJDFcIikgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSBpZiAoICEhd2luZG93LkFjdGl2ZVhPYmplY3QgKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhID0gbmV3IEFjdGl2ZVhPYmplY3QoU0hPQ0tXQVZFX0ZMQVNIX0FYKTtcblx0XHRcdFx0aWYgKGEpIHtcblx0XHRcdFx0XHRkID0gYS5HZXRWYXJpYWJsZShcIiR2ZXJzaW9uXCIpO1xuXHRcdFx0XHRcdGlmICghIWQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBwYXJzZShkLnJlcGxhY2UoL15cXFMrXFxzKyhcXGQrKSwoXFxkKykuKiQvaSwnJDEuJDInKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjYXRjaChlKSB7fVxuXHRcdH1cblx0XHRyZXR1cm4gLTE7XG5cdFx0XG59OyIsIi8qISAgICBTV0ZPYmplY3QgdjIuMy4yMDEzMDUyMSA8aHR0cDovL2dpdGh1Yi5jb20vc3dmb2JqZWN0L3N3Zm9iamVjdD5cbiAgICBpcyByZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgPGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwPlxuKi9cbnZhciBzd2ZvYmplY3Q9ZnVuY3Rpb24oKXt2YXIgRD1cInVuZGVmaW5lZFwiLHI9XCJvYmplY3RcIixUPVwiU2hvY2t3YXZlIEZsYXNoXCIsWj1cIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoXCIscT1cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCIsUz1cIlNXRk9iamVjdEV4cHJJbnN0XCIseD1cIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLFE9d2luZG93LGg9ZG9jdW1lbnQsdD1uYXZpZ2F0b3IsVj1mYWxzZSxYPVtdLG89W10sUD1bXSxLPVtdLEkscCxFLEIsTD1mYWxzZSxhPWZhbHNlLG0sRyxqPXRydWUsbD1mYWxzZSxPPWZ1bmN0aW9uKCl7dmFyIGFkPXR5cGVvZiBoLmdldEVsZW1lbnRCeUlkIT1EJiZ0eXBlb2YgaC5nZXRFbGVtZW50c0J5VGFnTmFtZSE9RCYmdHlwZW9mIGguY3JlYXRlRWxlbWVudCE9RCxhaz10LnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLGFiPXQucGxhdGZvcm0udG9Mb3dlckNhc2UoKSxhaD1hYj8vd2luLy50ZXN0KGFiKTovd2luLy50ZXN0KGFrKSxhZj1hYj8vbWFjLy50ZXN0KGFiKTovbWFjLy50ZXN0KGFrKSxhaT0vd2Via2l0Ly50ZXN0KGFrKT9wYXJzZUZsb2F0KGFrLnJlcGxhY2UoL14uKndlYmtpdFxcLyhcXGQrKFxcLlxcZCspPykuKiQvLFwiJDFcIikpOmZhbHNlLGFhPXQuYXBwTmFtZT09PVwiTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyXCIsYWo9WzAsMCwwXSxhZT1udWxsO2lmKHR5cGVvZiB0LnBsdWdpbnMhPUQmJnR5cGVvZiB0LnBsdWdpbnNbVF09PXIpe2FlPXQucGx1Z2luc1tUXS5kZXNjcmlwdGlvbjtpZihhZSYmKHR5cGVvZiB0Lm1pbWVUeXBlcyE9RCYmdC5taW1lVHlwZXNbcV0mJnQubWltZVR5cGVzW3FdLmVuYWJsZWRQbHVnaW4pKXtWPXRydWU7YWE9ZmFsc2U7YWU9YWUucmVwbGFjZSgvXi4qXFxzKyhcXFMrXFxzK1xcUyskKS8sXCIkMVwiKTthalswXT1uKGFlLnJlcGxhY2UoL14oLiopXFwuLiokLyxcIiQxXCIpKTthalsxXT1uKGFlLnJlcGxhY2UoL14uKlxcLiguKilcXHMuKiQvLFwiJDFcIikpO2FqWzJdPS9bYS16QS1aXS8udGVzdChhZSk/bihhZS5yZXBsYWNlKC9eLipbYS16QS1aXSsoLiopJC8sXCIkMVwiKSk6MH19ZWxzZXtpZih0eXBlb2YgUS5BY3RpdmVYT2JqZWN0IT1EKXt0cnl7dmFyIGFnPW5ldyBBY3RpdmVYT2JqZWN0KFopO2lmKGFnKXthZT1hZy5HZXRWYXJpYWJsZShcIiR2ZXJzaW9uXCIpO2lmKGFlKXthYT10cnVlO2FlPWFlLnNwbGl0KFwiIFwiKVsxXS5zcGxpdChcIixcIik7YWo9W24oYWVbMF0pLG4oYWVbMV0pLG4oYWVbMl0pXX19fWNhdGNoKGFjKXt9fX1yZXR1cm57dzM6YWQscHY6YWosd2s6YWksaWU6YWEsd2luOmFoLG1hYzphZn19KCksaT1mdW5jdGlvbigpe2lmKCFPLnczKXtyZXR1cm59aWYoKHR5cGVvZiBoLnJlYWR5U3RhdGUhPUQmJihoLnJlYWR5U3RhdGU9PT1cImNvbXBsZXRlXCJ8fGgucmVhZHlTdGF0ZT09PVwiaW50ZXJhY3RpdmVcIikpfHwodHlwZW9mIGgucmVhZHlTdGF0ZT09RCYmKGguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdfHxoLmJvZHkpKSl7ZigpfWlmKCFMKXtpZih0eXBlb2YgaC5hZGRFdmVudExpc3RlbmVyIT1EKXtoLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZixmYWxzZSl9aWYoTy5pZSl7aC5hdHRhY2hFdmVudCh4LGZ1bmN0aW9uIGFhKCl7aWYoaC5yZWFkeVN0YXRlPT1cImNvbXBsZXRlXCIpe2guZGV0YWNoRXZlbnQoeCxhYSk7ZigpfX0pO2lmKFE9PXRvcCl7KGZ1bmN0aW9uIGFjKCl7aWYoTCl7cmV0dXJufXRyeXtoLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbChcImxlZnRcIil9Y2F0Y2goYWQpe3NldFRpbWVvdXQoYWMsMCk7cmV0dXJufWYoKX0oKSl9fWlmKE8ud2speyhmdW5jdGlvbiBhYigpe2lmKEwpe3JldHVybn1pZighL2xvYWRlZHxjb21wbGV0ZS8udGVzdChoLnJlYWR5U3RhdGUpKXtzZXRUaW1lb3V0KGFiLDApO3JldHVybn1mKCl9KCkpfX19KCk7ZnVuY3Rpb24gZigpe2lmKEx8fCFkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0pe3JldHVybn10cnl7dmFyIGFjLGFkPUMoXCJzcGFuXCIpO2FkLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7YWM9aC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uYXBwZW5kQ2hpbGQoYWQpO2FjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYWMpO2FjPW51bGw7YWQ9bnVsbH1jYXRjaChhZSl7cmV0dXJufUw9dHJ1ZTt2YXIgYWE9WC5sZW5ndGg7Zm9yKHZhciBhYj0wO2FiPGFhO2FiKyspe1hbYWJdKCl9fWZ1bmN0aW9uIE0oYWEpe2lmKEwpe2FhKCl9ZWxzZXtYW1gubGVuZ3RoXT1hYX19ZnVuY3Rpb24gcyhhYil7aWYodHlwZW9mIFEuYWRkRXZlbnRMaXN0ZW5lciE9RCl7US5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGFiLGZhbHNlKX1lbHNle2lmKHR5cGVvZiBoLmFkZEV2ZW50TGlzdGVuZXIhPUQpe2guYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixhYixmYWxzZSl9ZWxzZXtpZih0eXBlb2YgUS5hdHRhY2hFdmVudCE9RCl7ZyhRLFwib25sb2FkXCIsYWIpfWVsc2V7aWYodHlwZW9mIFEub25sb2FkPT1cImZ1bmN0aW9uXCIpe3ZhciBhYT1RLm9ubG9hZDtRLm9ubG9hZD1mdW5jdGlvbigpe2FhKCk7YWIoKX19ZWxzZXtRLm9ubG9hZD1hYn19fX19ZnVuY3Rpb24gWSgpe3ZhciBhYT1oLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTt2YXIgYWU9QyhyKTthZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwidmlzaWJpbGl0eTogaGlkZGVuO1wiKTthZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIscSk7dmFyIGFkPWFhLmFwcGVuZENoaWxkKGFlKTtpZihhZCl7dmFyIGFjPTA7KGZ1bmN0aW9uIGFiKCl7aWYodHlwZW9mIGFkLkdldFZhcmlhYmxlIT1EKXt0cnl7dmFyIGFnPWFkLkdldFZhcmlhYmxlKFwiJHZlcnNpb25cIik7aWYoYWcpe2FnPWFnLnNwbGl0KFwiIFwiKVsxXS5zcGxpdChcIixcIik7Ty5wdj1bbihhZ1swXSksbihhZ1sxXSksbihhZ1syXSldfX1jYXRjaChhZil7Ty5wdj1bOCwwLDBdfX1lbHNle2lmKGFjPDEwKXthYysrO3NldFRpbWVvdXQoYWIsMTApO3JldHVybn19YWEucmVtb3ZlQ2hpbGQoYWUpO2FkPW51bGw7SCgpfSgpKX1lbHNle0goKX19ZnVuY3Rpb24gSCgpe3ZhciBhaj1vLmxlbmd0aDtpZihhaj4wKXtmb3IodmFyIGFpPTA7YWk8YWo7YWkrKyl7dmFyIGFiPW9bYWldLmlkO3ZhciBhZT1vW2FpXS5jYWxsYmFja0ZuO3ZhciBhZD17c3VjY2VzczpmYWxzZSxpZDphYn07aWYoTy5wdlswXT4wKXt2YXIgYWg9YyhhYik7aWYoYWgpe2lmKEYob1thaV0uc3dmVmVyc2lvbikmJiEoTy53ayYmTy53azwzMTIpKXt3KGFiLHRydWUpO2lmKGFlKXthZC5zdWNjZXNzPXRydWU7YWQucmVmPXooYWIpO2FkLmlkPWFiO2FlKGFkKX19ZWxzZXtpZihvW2FpXS5leHByZXNzSW5zdGFsbCYmQSgpKXt2YXIgYWw9e307YWwuZGF0YT1vW2FpXS5leHByZXNzSW5zdGFsbDthbC53aWR0aD1haC5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKXx8XCIwXCI7YWwuaGVpZ2h0PWFoLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKXx8XCIwXCI7aWYoYWguZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikpe2FsLnN0eWxlY2xhc3M9YWguZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil9aWYoYWguZ2V0QXR0cmlidXRlKFwiYWxpZ25cIikpe2FsLmFsaWduPWFoLmdldEF0dHJpYnV0ZShcImFsaWduXCIpfXZhciBhaz17fTt2YXIgYWE9YWguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJhbVwiKTt2YXIgYWY9YWEubGVuZ3RoO2Zvcih2YXIgYWc9MDthZzxhZjthZysrKXtpZihhYVthZ10uZ2V0QXR0cmlidXRlKFwibmFtZVwiKS50b0xvd2VyQ2FzZSgpIT1cIm1vdmllXCIpe2FrW2FhW2FnXS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpXT1hYVthZ10uZ2V0QXR0cmlidXRlKFwidmFsdWVcIil9fVIoYWwsYWssYWIsYWUpfWVsc2V7YihhaCk7aWYoYWUpe2FlKGFkKX19fX19ZWxzZXt3KGFiLHRydWUpO2lmKGFlKXt2YXIgYWM9eihhYik7aWYoYWMmJnR5cGVvZiBhYy5TZXRWYXJpYWJsZSE9RCl7YWQuc3VjY2Vzcz10cnVlO2FkLnJlZj1hYzthZC5pZD1hYy5pZH1hZShhZCl9fX19fVhbMF09ZnVuY3Rpb24oKXtpZihWKXtZKCl9ZWxzZXtIKCl9fTtmdW5jdGlvbiB6KGFjKXt2YXIgYWE9bnVsbCxhYj1jKGFjKTtpZihhYiYmYWIubm9kZU5hbWUudG9VcHBlckNhc2UoKT09PVwiT0JKRUNUXCIpe2lmKHR5cGVvZiBhYi5TZXRWYXJpYWJsZSE9PUQpe2FhPWFifWVsc2V7YWE9YWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUocilbMF18fGFifX1yZXR1cm4gYWF9ZnVuY3Rpb24gQSgpe3JldHVybiAhYSYmRihcIjYuMC42NVwiKSYmKE8ud2lufHxPLm1hYykmJiEoTy53ayYmTy53azwzMTIpfWZ1bmN0aW9uIFIoYWQsYWUsYWEsYWMpe3ZhciBhaD1jKGFhKTthYT1XKGFhKTthPXRydWU7RT1hY3x8bnVsbDtCPXtzdWNjZXNzOmZhbHNlLGlkOmFhfTtpZihhaCl7aWYoYWgubm9kZU5hbWUudG9VcHBlckNhc2UoKT09XCJPQkpFQ1RcIil7ST1KKGFoKTtwPW51bGx9ZWxzZXtJPWFoO3A9YWF9YWQuaWQ9UztpZih0eXBlb2YgYWQud2lkdGg9PUR8fCghLyUkLy50ZXN0KGFkLndpZHRoKSYmbihhZC53aWR0aCk8MzEwKSl7YWQud2lkdGg9XCIzMTBcIn1pZih0eXBlb2YgYWQuaGVpZ2h0PT1EfHwoIS8lJC8udGVzdChhZC5oZWlnaHQpJiZuKGFkLmhlaWdodCk8MTM3KSl7YWQuaGVpZ2h0PVwiMTM3XCJ9dmFyIGFnPU8uaWU/XCJBY3RpdmVYXCI6XCJQbHVnSW5cIixhZj1cIk1NcmVkaXJlY3RVUkw9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFEubG9jYXRpb24udG9TdHJpbmcoKS5yZXBsYWNlKC8mL2csXCIlMjZcIikpK1wiJk1NcGxheWVyVHlwZT1cIithZytcIiZNTWRvY3RpdGxlPVwiK2VuY29kZVVSSUNvbXBvbmVudChoLnRpdGxlLnNsaWNlKDAsNDcpK1wiIC0gRmxhc2ggUGxheWVyIEluc3RhbGxhdGlvblwiKTtpZih0eXBlb2YgYWUuZmxhc2h2YXJzIT1EKXthZS5mbGFzaHZhcnMrPVwiJlwiK2FmfWVsc2V7YWUuZmxhc2h2YXJzPWFmfWlmKE8uaWUmJmFoLnJlYWR5U3RhdGUhPTQpe3ZhciBhYj1DKFwiZGl2XCIpO1xuYWErPVwiU1dGT2JqZWN0TmV3XCI7YWIuc2V0QXR0cmlidXRlKFwiaWRcIixhYSk7YWgucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYWIsYWgpO2FoLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7eShhaCl9dShhZCxhZSxhYSl9fWZ1bmN0aW9uIGIoYWIpe2lmKE8uaWUmJmFiLnJlYWR5U3RhdGUhPTQpe2FiLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7dmFyIGFhPUMoXCJkaXZcIik7YWIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYWEsYWIpO2FhLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKEooYWIpLGFhKTt5KGFiKX1lbHNle2FiLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKEooYWIpLGFiKX19ZnVuY3Rpb24gSihhZil7dmFyIGFlPUMoXCJkaXZcIik7aWYoTy53aW4mJk8uaWUpe2FlLmlubmVySFRNTD1hZi5pbm5lckhUTUx9ZWxzZXt2YXIgYWI9YWYuZ2V0RWxlbWVudHNCeVRhZ05hbWUocilbMF07aWYoYWIpe3ZhciBhZz1hYi5jaGlsZE5vZGVzO2lmKGFnKXt2YXIgYWE9YWcubGVuZ3RoO2Zvcih2YXIgYWQ9MDthZDxhYTthZCsrKXtpZighKGFnW2FkXS5ub2RlVHlwZT09MSYmYWdbYWRdLm5vZGVOYW1lPT1cIlBBUkFNXCIpJiYhKGFnW2FkXS5ub2RlVHlwZT09OCkpe2FlLmFwcGVuZENoaWxkKGFnW2FkXS5jbG9uZU5vZGUodHJ1ZSkpfX19fX1yZXR1cm4gYWV9ZnVuY3Rpb24gayhhYSxhYil7dmFyIGFjPUMoXCJkaXZcIik7YWMuaW5uZXJIVE1MPVwiPG9iamVjdCBjbGFzc2lkPSdjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAnPjxwYXJhbSBuYW1lPSdtb3ZpZScgdmFsdWU9J1wiK2FhK1wiJz5cIithYitcIjwvb2JqZWN0PlwiO3JldHVybiBhYy5maXJzdENoaWxkfWZ1bmN0aW9uIHUoYWksYWcsYWIpe3ZhciBhYSxhZD1jKGFiKTthYj1XKGFiKTtpZihPLndrJiZPLndrPDMxMil7cmV0dXJuIGFhfWlmKGFkKXt2YXIgYWM9KE8uaWUpP0MoXCJkaXZcIik6QyhyKSxhZixhaCxhZTtpZih0eXBlb2YgYWkuaWQ9PUQpe2FpLmlkPWFifWZvcihhZSBpbiBhZyl7aWYoYWcuaGFzT3duUHJvcGVydHkoYWUpJiZhZS50b0xvd2VyQ2FzZSgpIT09XCJtb3ZpZVwiKXtlKGFjLGFlLGFnW2FlXSl9fWlmKE8uaWUpe2FjPWsoYWkuZGF0YSxhYy5pbm5lckhUTUwpfWZvcihhZiBpbiBhaSl7aWYoYWkuaGFzT3duUHJvcGVydHkoYWYpKXthaD1hZi50b0xvd2VyQ2FzZSgpO2lmKGFoPT09XCJzdHlsZWNsYXNzXCIpe2FjLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsYWlbYWZdKX1lbHNle2lmKGFoIT09XCJjbGFzc2lkXCImJmFoIT09XCJkYXRhXCIpe2FjLnNldEF0dHJpYnV0ZShhZixhaVthZl0pfX19fWlmKE8uaWUpe1BbUC5sZW5ndGhdPWFpLmlkfWVsc2V7YWMuc2V0QXR0cmlidXRlKFwidHlwZVwiLHEpO2FjLnNldEF0dHJpYnV0ZShcImRhdGFcIixhaS5kYXRhKX1hZC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChhYyxhZCk7YWE9YWN9cmV0dXJuIGFhfWZ1bmN0aW9uIGUoYWMsYWEsYWIpe3ZhciBhZD1DKFwicGFyYW1cIik7YWQuc2V0QXR0cmlidXRlKFwibmFtZVwiLGFhKTthZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLGFiKTthYy5hcHBlbmRDaGlsZChhZCl9ZnVuY3Rpb24geShhYyl7dmFyIGFiPWMoYWMpO2lmKGFiJiZhYi5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPT1cIk9CSkVDVFwiKXtpZihPLmllKXthYi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiOyhmdW5jdGlvbiBhYSgpe2lmKGFiLnJlYWR5U3RhdGU9PTQpe2Zvcih2YXIgYWQgaW4gYWIpe2lmKHR5cGVvZiBhYlthZF09PVwiZnVuY3Rpb25cIil7YWJbYWRdPW51bGx9fWFiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYWIpfWVsc2V7c2V0VGltZW91dChhYSwxMCl9fSgpKX1lbHNle2FiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYWIpfX19ZnVuY3Rpb24gVShhYSl7cmV0dXJuKGFhJiZhYS5ub2RlVHlwZSYmYWEubm9kZVR5cGU9PT0xKX1mdW5jdGlvbiBXKGFhKXtyZXR1cm4oVShhYSkpP2FhLmlkOmFhfWZ1bmN0aW9uIGMoYWMpe2lmKFUoYWMpKXtyZXR1cm4gYWN9dmFyIGFhPW51bGw7dHJ5e2FhPWguZ2V0RWxlbWVudEJ5SWQoYWMpfWNhdGNoKGFiKXt9cmV0dXJuIGFhfWZ1bmN0aW9uIEMoYWEpe3JldHVybiBoLmNyZWF0ZUVsZW1lbnQoYWEpfWZ1bmN0aW9uIG4oYWEpe3JldHVybiBwYXJzZUludChhYSwxMCl9ZnVuY3Rpb24gZyhhYyxhYSxhYil7YWMuYXR0YWNoRXZlbnQoYWEsYWIpO0tbSy5sZW5ndGhdPVthYyxhYSxhYl19ZnVuY3Rpb24gRihhYyl7YWMrPVwiXCI7dmFyIGFiPU8ucHYsYWE9YWMuc3BsaXQoXCIuXCIpO2FhWzBdPW4oYWFbMF0pO2FhWzFdPW4oYWFbMV0pfHwwO2FhWzJdPW4oYWFbMl0pfHwwO3JldHVybihhYlswXT5hYVswXXx8KGFiWzBdPT1hYVswXSYmYWJbMV0+YWFbMV0pfHwoYWJbMF09PWFhWzBdJiZhYlsxXT09YWFbMV0mJmFiWzJdPj1hYVsyXSkpP3RydWU6ZmFsc2V9ZnVuY3Rpb24gdihhZixhYixhZyxhZSl7dmFyIGFkPWguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO2lmKCFhZCl7cmV0dXJufXZhciBhYT0odHlwZW9mIGFnPT1cInN0cmluZ1wiKT9hZzpcInNjcmVlblwiO2lmKGFlKXttPW51bGw7Rz1udWxsfWlmKCFtfHxHIT1hYSl7dmFyIGFjPUMoXCJzdHlsZVwiKTthYy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJ0ZXh0L2Nzc1wiKTthYy5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLGFhKTttPWFkLmFwcGVuZENoaWxkKGFjKTtpZihPLmllJiZ0eXBlb2YgaC5zdHlsZVNoZWV0cyE9RCYmaC5zdHlsZVNoZWV0cy5sZW5ndGg+MCl7bT1oLnN0eWxlU2hlZXRzW2guc3R5bGVTaGVldHMubGVuZ3RoLTFdfUc9YWF9aWYobSl7aWYodHlwZW9mIG0uYWRkUnVsZSE9RCl7bS5hZGRSdWxlKGFmLGFiKX1lbHNle2lmKHR5cGVvZiBoLmNyZWF0ZVRleHROb2RlIT1EKXttLmFwcGVuZENoaWxkKGguY3JlYXRlVGV4dE5vZGUoYWYrXCIge1wiK2FiK1wifVwiKSl9fX19ZnVuY3Rpb24gdyhhZCxhYSl7aWYoIWope3JldHVybn12YXIgYWI9YWE/XCJ2aXNpYmxlXCI6XCJoaWRkZW5cIixhYz1jKGFkKTtpZihMJiZhYyl7YWMuc3R5bGUudmlzaWJpbGl0eT1hYn1lbHNle2lmKHR5cGVvZiBhZD09PVwic3RyaW5nXCIpe3YoXCIjXCIrYWQsXCJ2aXNpYmlsaXR5OlwiK2FiKX19fWZ1bmN0aW9uIE4oYWIpe3ZhciBhYz0vW1xcXFxcXFwiPD5cXC47XS87dmFyIGFhPWFjLmV4ZWMoYWIpIT1udWxsO3JldHVybiBhYSYmdHlwZW9mIGVuY29kZVVSSUNvbXBvbmVudCE9RD9lbmNvZGVVUklDb21wb25lbnQoYWIpOmFifXZhciBkPWZ1bmN0aW9uKCl7aWYoTy5pZSl7d2luZG93LmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixmdW5jdGlvbigpe3ZhciBhZj1LLmxlbmd0aDtmb3IodmFyIGFlPTA7YWU8YWY7YWUrKyl7S1thZV1bMF0uZGV0YWNoRXZlbnQoS1thZV1bMV0sS1thZV1bMl0pfXZhciBhYz1QLmxlbmd0aDtmb3IodmFyIGFkPTA7YWQ8YWM7YWQrKyl7eShQW2FkXSl9Zm9yKHZhciBhYiBpbiBPKXtPW2FiXT1udWxsfU89bnVsbDtmb3IodmFyIGFhIGluIHN3Zm9iamVjdCl7c3dmb2JqZWN0W2FhXT1udWxsfXN3Zm9iamVjdD1udWxsfSl9fSgpO3JldHVybntyZWdpc3Rlck9iamVjdDpmdW5jdGlvbihhZSxhYSxhZCxhYyl7aWYoTy53MyYmYWUmJmFhKXt2YXIgYWI9e307YWIuaWQ9YWU7YWIuc3dmVmVyc2lvbj1hYTthYi5leHByZXNzSW5zdGFsbD1hZDthYi5jYWxsYmFja0ZuPWFjO29bby5sZW5ndGhdPWFiO3coYWUsZmFsc2UpfWVsc2V7aWYoYWMpe2FjKHtzdWNjZXNzOmZhbHNlLGlkOmFlfSl9fX0sZ2V0T2JqZWN0QnlJZDpmdW5jdGlvbihhYSl7aWYoTy53Myl7cmV0dXJuIHooYWEpfX0sZW1iZWRTV0Y6ZnVuY3Rpb24oYWYsYWwsYWksYWssYWIsYWUsYWQsYWgsYWosYWcpe3ZhciBhYz1XKGFsKSxhYT17c3VjY2VzczpmYWxzZSxpZDphY307aWYoTy53MyYmIShPLndrJiZPLndrPDMxMikmJmFmJiZhbCYmYWkmJmFrJiZhYil7dyhhYyxmYWxzZSk7TShmdW5jdGlvbigpe2FpKz1cIlwiO2FrKz1cIlwiO3ZhciBhbj17fTtpZihhaiYmdHlwZW9mIGFqPT09cil7Zm9yKHZhciBhcSBpbiBhail7YW5bYXFdPWFqW2FxXX19YW4uZGF0YT1hZjthbi53aWR0aD1haTthbi5oZWlnaHQ9YWs7dmFyIGFyPXt9O2lmKGFoJiZ0eXBlb2YgYWg9PT1yKXtmb3IodmFyIGFvIGluIGFoKXthclthb109YWhbYW9dfX1pZihhZCYmdHlwZW9mIGFkPT09cil7Zm9yKHZhciBhbSBpbiBhZCl7aWYoYWQuaGFzT3duUHJvcGVydHkoYW0pKXt2YXIgYXA9KGwpP2VuY29kZVVSSUNvbXBvbmVudChhbSk6YW0sYXQ9KGwpP2VuY29kZVVSSUNvbXBvbmVudChhZFthbV0pOmFkW2FtXTtpZih0eXBlb2YgYXIuZmxhc2h2YXJzIT1EKXthci5mbGFzaHZhcnMrPVwiJlwiK2FwK1wiPVwiK2F0fWVsc2V7YXIuZmxhc2h2YXJzPWFwK1wiPVwiK2F0fX19fWlmKEYoYWIpKXt2YXIgYXU9dShhbixhcixhbCk7aWYoYW4uaWQ9PWFjKXt3KGFjLHRydWUpfWFhLnN1Y2Nlc3M9dHJ1ZTthYS5yZWY9YXU7YWEuaWQ9YXUuaWR9ZWxzZXtpZihhZSYmQSgpKXthbi5kYXRhPWFlO1IoYW4sYXIsYWwsYWcpO3JldHVybn1lbHNle3coYWMsdHJ1ZSl9fWlmKGFnKXthZyhhYSl9fSl9ZWxzZXtpZihhZyl7YWcoYWEpfX19LHN3aXRjaE9mZkF1dG9IaWRlU2hvdzpmdW5jdGlvbigpe2o9ZmFsc2V9LGVuYWJsZVVyaUVuY29kaW5nOmZ1bmN0aW9uKGFhKXtsPSh0eXBlb2YgYWE9PT1EKT90cnVlOmFhfSx1YTpPLGdldEZsYXNoUGxheWVyVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybnttYWpvcjpPLnB2WzBdLG1pbm9yOk8ucHZbMV0scmVsZWFzZTpPLnB2WzJdfX0saGFzRmxhc2hQbGF5ZXJWZXJzaW9uOkYsY3JlYXRlU1dGOmZ1bmN0aW9uKGFjLGFiLGFhKXtpZihPLnczKXtyZXR1cm4gdShhYyxhYixhYSl9ZWxzZXtyZXR1cm4gdW5kZWZpbmVkfX0sc2hvd0V4cHJlc3NJbnN0YWxsOmZ1bmN0aW9uKGFjLGFkLGFhLGFiKXtpZihPLnczJiZBKCkpe1IoYWMsYWQsYWEsYWIpfX0scmVtb3ZlU1dGOmZ1bmN0aW9uKGFhKXtpZihPLnczKXt5KGFhKX19LGNyZWF0ZUNTUzpmdW5jdGlvbihhZCxhYyxhYixhYSl7aWYoTy53Myl7dihhZCxhYyxhYixhYSl9fSxhZGREb21Mb2FkRXZlbnQ6TSxhZGRMb2FkRXZlbnQ6cyxnZXRRdWVyeVBhcmFtVmFsdWU6ZnVuY3Rpb24oYWQpe3ZhciBhYz1oLmxvY2F0aW9uLnNlYXJjaHx8aC5sb2NhdGlvbi5oYXNoO1xuaWYoYWMpe2lmKC9cXD8vLnRlc3QoYWMpKXthYz1hYy5zcGxpdChcIj9cIilbMV19aWYoYWQ9PW51bGwpe3JldHVybiBOKGFjKX12YXIgYWI9YWMuc3BsaXQoXCImXCIpO2Zvcih2YXIgYWE9MDthYTxhYi5sZW5ndGg7YWErKyl7aWYoYWJbYWFdLnN1YnN0cmluZygwLGFiW2FhXS5pbmRleE9mKFwiPVwiKSk9PWFkKXtyZXR1cm4gTihhYlthYV0uc3Vic3RyaW5nKChhYlthYV0uaW5kZXhPZihcIj1cIikrMSkpKX19fXJldHVyblwiXCJ9LGV4cHJlc3NJbnN0YWxsQ2FsbGJhY2s6ZnVuY3Rpb24oKXtpZihhKXt2YXIgYWE9YyhTKTtpZihhYSYmSSl7YWEucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoSSxhYSk7aWYocCl7dyhwLHRydWUpO2lmKE8uaWUpe0kuc3R5bGUuZGlzcGxheT1cImJsb2NrXCJ9fWlmKEUpe0UoQil9fWE9ZmFsc2V9fSx2ZXJzaW9uOlwiMi4zXCJ9fSgpO1xuIiwiOyhmdW5jdGlvbihyb290LCB1bmRlZmluZWQpIHtcbnZhciByb290ID0gcm9vdCB8fHdpbmRvdztcbmlmKCFyb290LmNvbnNvbGUpe1xuICAgIHJvb3QuY29uc29sZSA9IHtcbiAgICAgICAgbG9nOiBmdW5jdGlvbihhKXtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGEpe1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuaWYgKCFyb290LkpTT04pIHtcbiAgICByb290LkpTT04gPSB7XG4gICAgICAgIHBhcnNlOiBmdW5jdGlvbihzSlNPTikgeyByZXR1cm4gZXZhbCgnKCcgKyBzSlNPTiArICcpJyk7IH0sXG4gICAgICAgIHN0cmluZ2lmeTogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG4gICAgICAgICAgICB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYSkgPT09ICdbb2JqZWN0IEFycmF5XSc7IH07XG4gICAgICAgICAgICB2YXIgZXNjTWFwID0geydcIic6ICdcXFxcXCInLCAnXFxcXCc6ICdcXFxcXFxcXCcsICdcXGInOiAnXFxcXGInLCAnXFxmJzogJ1xcXFxmJywgJ1xcbic6ICdcXFxcbicsICdcXHInOiAnXFxcXHInLCAnXFx0JzogJ1xcXFx0J307XG4gICAgICAgICAgICB2YXIgZXNjRnVuYyA9IGZ1bmN0aW9uIChtKSB7IHJldHVybiBlc2NNYXBbbV0gfHwgJ1xcXFx1JyArIChtLmNoYXJDb2RlQXQoMCkgKyAweDEwMDAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpOyB9O1xuICAgICAgICAgICAgdmFyIGVzY1JFID0gL1tcXFxcXCJcXHUwMDAwLVxcdTAwMUZcXHUyMDI4XFx1MjAyOV0vZztcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBzdHJpbmdpZnkodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ251bGwnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNGaW5pdGUodmFsdWUpID8gdmFsdWUudG9TdHJpbmcoKSA6ICdudWxsJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZ2lmeSh2YWx1ZS50b0pTT04oKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXMgPSAnWyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyArPSAoaSA/ICcsICcgOiAnJykgKyBzdHJpbmdpZnkodmFsdWVbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcyArICddJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuaGFzT3duUHJvcGVydHkoaykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcC5wdXNoKHN0cmluZ2lmeShrKSArICc6ICcgKyBzdHJpbmdpZnkodmFsdWVba10pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAneycgKyB0bXAuam9pbignLCAnKSArICd9JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gJ1wiJyArIHZhbHVlLnRvU3RyaW5nKCkucmVwbGFjZShlc2NSRSwgZXNjRnVuYykgKyAnXCInO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkoKVxuICAgIH07XG59XG5cbi8vIEZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2tleXNcbmlmICghT2JqZWN0LmtleXMpIHtcbiAgICBPYmplY3Qua2V5cyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuICAgICAgICAgICAgaGFzRG9udEVudW1CdWcgPSAhKHsgdG9TdHJpbmc6IG51bGwgfSkucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyksXG4gICAgICAgICAgICBkb250RW51bXMgPSBbXG4gICAgICAgICAgICAgICAgJ3RvU3RyaW5nJyxcbiAgICAgICAgICAgICAgICAndG9Mb2NhbGVTdHJpbmcnLFxuICAgICAgICAgICAgICAgICd2YWx1ZU9mJyxcbiAgICAgICAgICAgICAgICAnaGFzT3duUHJvcGVydHknLFxuICAgICAgICAgICAgICAgICdpc1Byb3RvdHlwZU9mJyxcbiAgICAgICAgICAgICAgICAncHJvcGVydHlJc0VudW1lcmFibGUnLFxuICAgICAgICAgICAgICAgICdjb25zdHJ1Y3RvcidcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBkb250RW51bXNMZW5ndGggPSBkb250RW51bXMubGVuZ3RoO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyAmJiAodHlwZW9mIG9iaiAhPT0gJ2Z1bmN0aW9uJyB8fCBvYmogPT09IG51bGwpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmtleXMgY2FsbGVkIG9uIG5vbi1vYmplY3QnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdLCBwcm9wLCBpO1xuXG4gICAgICAgICAgICBmb3IgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChwcm9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChoYXNEb250RW51bUJ1Zykge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkb250RW51bXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGRvbnRFbnVtc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRvbnRFbnVtc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgIH0oKSk7XG59XG5cbmlmICghQXJyYXkuaXNBcnJheSkge1xuICAgIEFycmF5LmlzQXJyYXkgPSBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIH07XG59XG5cbmlmICghRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQpIHtcbiAgICBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uKG9UaGlzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgLy8gY2xvc2VzdCB0aGluZyBwb3NzaWJsZSB0byB0aGUgRUNNQVNjcmlwdCA1XG4gICAgICAgICAgICAvLyBpbnRlcm5hbCBJc0NhbGxhYmxlIGZ1bmN0aW9uXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbi5wcm90b3R5cGUuYmluZCAtIHdoYXQgaXMgdHJ5aW5nIHRvIGJlIGJvdW5kIGlzIG5vdCBjYWxsYWJsZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFBcmdzICAgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxuICAgICAgICAgICAgZlRvQmluZCA9IHRoaXMsXG4gICAgICAgICAgICBmTk9QICAgID0gZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgICAgIGZCb3VuZCAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZlRvQmluZC5hcHBseSh0aGlzIGluc3RhbmNlb2YgZk5PUFxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG9UaGlzLFxuICAgICAgICAgICAgICAgICAgICBhQXJncy5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBpZiAodGhpcy5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIC8vIEZ1bmN0aW9uLnByb3RvdHlwZSBkb2Vzbid0IGhhdmUgYSBwcm90b3R5cGUgcHJvcGVydHlcbiAgICAgICAgICAgIGZOT1AucHJvdG90eXBlID0gdGhpcy5wcm90b3R5cGU7XG4gICAgICAgIH1cbiAgICAgICAgZkJvdW5kLnByb3RvdHlwZSA9IG5ldyBmTk9QKCk7XG5cbiAgICAgICAgcmV0dXJuIGZCb3VuZDtcbiAgICB9O1xufVxuXG4vLyBQcm9kdWN0aW9uIHN0ZXBzIG9mIEVDTUEtMjYyLCBFZGl0aW9uIDUsIDE1LjQuNC4xNFxuLy8gUmVmZXJlbmNlOiBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjQuNC4xNFxuaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZikge1xuICAgIEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24oc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KSB7XG5cbiAgICAgICAgdmFyIGs7XG5cbiAgICAgICAgLy8gMS4gTGV0IG8gYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIFRvT2JqZWN0IHBhc3NpbmdcbiAgICAgICAgLy8gICAgdGhlIHRoaXMgdmFsdWUgYXMgdGhlIGFyZ3VtZW50LlxuICAgICAgICBpZiAodGhpcyA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInRoaXNcIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbyA9IE9iamVjdCh0aGlzKTtcblxuICAgICAgICAvLyAyLiBMZXQgbGVuVmFsdWUgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBHZXRcbiAgICAgICAgLy8gICAgaW50ZXJuYWwgbWV0aG9kIG9mIG8gd2l0aCB0aGUgYXJndW1lbnQgXCJsZW5ndGhcIi5cbiAgICAgICAgLy8gMy4gTGV0IGxlbiBiZSBUb1VpbnQzMihsZW5WYWx1ZSkuXG4gICAgICAgIHZhciBsZW4gPSBvLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgICAvLyA0LiBJZiBsZW4gaXMgMCwgcmV0dXJuIC0xLlxuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cblxuICAgICAgICAvLyA1LiBJZiBhcmd1bWVudCBmcm9tSW5kZXggd2FzIHBhc3NlZCBsZXQgbiBiZVxuICAgICAgICAvLyAgICBUb0ludGVnZXIoZnJvbUluZGV4KTsgZWxzZSBsZXQgbiBiZSAwLlxuICAgICAgICB2YXIgbiA9ICtmcm9tSW5kZXggfHwgMDtcblxuICAgICAgICBpZiAoTWF0aC5hYnMobikgPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICBuID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDYuIElmIG4gPj0gbGVuLCByZXR1cm4gLTEuXG4gICAgICAgIGlmIChuID49IGxlbikge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gNy4gSWYgbiA+PSAwLCB0aGVuIExldCBrIGJlIG4uXG4gICAgICAgIC8vIDguIEVsc2UsIG48MCwgTGV0IGsgYmUgbGVuIC0gYWJzKG4pLlxuICAgICAgICAvLyAgICBJZiBrIGlzIGxlc3MgdGhhbiAwLCB0aGVuIGxldCBrIGJlIDAuXG4gICAgICAgIGsgPSBNYXRoLm1heChuID49IDAgPyBuIDogbGVuIC0gTWF0aC5hYnMobiksIDApO1xuXG4gICAgICAgIC8vIDkuIFJlcGVhdCwgd2hpbGUgayA8IGxlblxuICAgICAgICB3aGlsZSAoayA8IGxlbikge1xuICAgICAgICAgICAgLy8gYS4gTGV0IFBrIGJlIFRvU3RyaW5nKGspLlxuICAgICAgICAgICAgLy8gICBUaGlzIGlzIGltcGxpY2l0IGZvciBMSFMgb3BlcmFuZHMgb2YgdGhlIGluIG9wZXJhdG9yXG4gICAgICAgICAgICAvLyBiLiBMZXQga1ByZXNlbnQgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZVxuICAgICAgICAgICAgLy8gICAgSGFzUHJvcGVydHkgaW50ZXJuYWwgbWV0aG9kIG9mIG8gd2l0aCBhcmd1bWVudCBQay5cbiAgICAgICAgICAgIC8vICAgVGhpcyBzdGVwIGNhbiBiZSBjb21iaW5lZCB3aXRoIGNcbiAgICAgICAgICAgIC8vIGMuIElmIGtQcmVzZW50IGlzIHRydWUsIHRoZW5cbiAgICAgICAgICAgIC8vICAgIGkuICBMZXQgZWxlbWVudEsgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBHZXRcbiAgICAgICAgICAgIC8vICAgICAgICBpbnRlcm5hbCBtZXRob2Qgb2YgbyB3aXRoIHRoZSBhcmd1bWVudCBUb1N0cmluZyhrKS5cbiAgICAgICAgICAgIC8vICAgaWkuICBMZXQgc2FtZSBiZSB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZVxuICAgICAgICAgICAgLy8gICAgICAgIFN0cmljdCBFcXVhbGl0eSBDb21wYXJpc29uIEFsZ29yaXRobSB0b1xuICAgICAgICAgICAgLy8gICAgICAgIHNlYXJjaEVsZW1lbnQgYW5kIGVsZW1lbnRLLlxuICAgICAgICAgICAgLy8gIGlpaS4gIElmIHNhbWUgaXMgdHJ1ZSwgcmV0dXJuIGsuXG4gICAgICAgICAgICBpZiAoayBpbiBvICYmIG9ba10gPT09IHNlYXJjaEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGsrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gRXZlbnRNYW5hZ2VyKCkge1xuICAgIHRoaXMuZXZlbnRzID0ge307XG59XG5cbkV2ZW50TWFuYWdlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMuZXZlbnRzW2V2ZW50TmFtZSArICcnXSA9IGNhbGxiYWNrO1xufTtcblxuRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgIHZhciBjYWxsYmFjayA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XG5cbiAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjYWxsYmFjay5jYWxsKG51bGwsIGRhdGEpO1xufTtcbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgcGFyc2VyID0ge1xuICAgICAgICBudW1iZXI6IGZ1bmN0aW9uKGVsLCBrZXkpe1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5wYXJzZShlbCwga2V5KTtcblxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXJyYXk6IGZ1bmN0aW9uKGVsLCBrZXkpe1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5wYXJzZShlbCwga2V5KTtcbiAgICAgICAgICAgIGlmKCF2YWx1ZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuc3BsaXQoJyAnKTtcbiAgICAgICAgfSxcbiAgICAgICAgYm9vbDogZnVuY3Rpb24oZWwsIGtleSl7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnBhcnNlKGVsLCBrZXkpO1xuXG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBKU09OLnBhcnNlKHZhbHVlKVxuICAgICAgICAgICAgfWNhdGNoKGVycil7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBmYWxzZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gISF2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uKGVsLCBrZXkpe1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW91dHN0cmVhbS0nICsga2V5KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNjcmlwdFRhZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XG5cbiAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBzY3JpcHRUYWdzKSB7XG4gICAgICAgICAgICB2YXIgYWlkID0gcGFyc2VyLm51bWJlcihzY3JpcHRUYWdzW2l0ZW1dLCAnYWlkJyk7XG5cbiAgICAgICAgICAgIGlmICghIWFpZCAmJiAhaXNOYU4oYWlkKSkge1xuICAgICAgICAgICAgICAgIGluaXRPdXRzdHJlYW0oe1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogcGFyc2VyLm51bWJlcihzY3JpcHRUYWdzW2l0ZW1dLCAnd2lkdGgnKSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBwYXJzZXIubnVtYmVyKHNjcmlwdFRhZ3NbaXRlbV0sICdoZWlnaHQnKSxcbiAgICAgICAgICAgICAgICAgICAgaXNTU1A6IHBhcnNlci5ib29sKHNjcmlwdFRhZ3NbaXRlbV0sICdTU1AnKSxcbiAgICAgICAgICAgICAgICAgICAgVlBBSURNb2RlOiBwYXJzZXIuYXJyYXkoc2NyaXB0VGFnc1tpdGVtXSwgJ21vZGUnKSxcbiAgICAgICAgICAgICAgICAgICAgYWlkOiBhaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lckVsOiBjcmVhdGVFbChzY3JpcHRUYWdzW2l0ZW1dKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSkoKTtcblxuXG4gICAgZnVuY3Rpb24gaW5pdE91dHN0cmVhbShvcHRpb25zKSB7XG4gICAgICAgIG5ldyBPdXRzdHJlYW0oe1xuICAgICAgICAgICAgYWlkOiBvcHRpb25zLmFpZCxcbiAgICAgICAgICAgIGlzU1NQOiBvcHRpb25zLmlzU1NQLFxuICAgICAgICAgICAgVlBBSURNb2RlOiBvcHRpb25zLlZQQUlETW9kZSxcbiAgICAgICAgICAgIHdpZHRoOiBpc05hTihvcHRpb25zLndpZHRoKSA/IDQwMCA6IG9wdGlvbnMud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGlzTmFOKG9wdGlvbnMuaGVpZ2h0KSA/IDMwMCA6IG9wdGlvbnMuaGVpZ2h0LFxuICAgICAgICAgICAgY29udGFpbmVyRWw6IG9wdGlvbnMuY29udGFpbmVyRWxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc05hTih2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbCAhPSB2YWw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRWwoZWwpIHtcbiAgICAgICAgdmFyIGFkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgICAgIHBhcmVudEVsID0gZWwucGFyZW50Tm9kZTtcblxuICAgICAgICBpZiAocGFyZW50RWwudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09IFwiSEVBRFwiKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFkQ29udGFpbmVyKTtcblxuICAgICAgICAgICAgcmV0dXJuIGFkQ29udGFpbmVyO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyZW50RWwuaW5zZXJ0QmVmb3JlKGFkQ29udGFpbmVyLCBlbCk7XG5cbiAgICAgICAgcmV0dXJuIGFkQ29udGFpbmVyO1xuICAgIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIG9wdGlvbnMuYWlkIHtudW1iZXJ9XG4gKiBAcGFyYW0gb3B0aW9ucy53aWR0aCB7bnVtYmVyfVxuICogQHBhcmFtIG9wdGlvbnMuaGVpZ2h0IHtudW1iZXJ9XG4gKiBAcGFyYW0gb3B0aW9ucy5jb250YWluZXJFbCB7b2JqZWN0fVxuICpcbiAqIEBwYXJhbSBvcHRpb25zIHtvYmplY3R9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gT3V0c3RyZWFtKG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQ3JlYXRlIHdpdGhvdXQgb3B0aW9ucycpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm9wdGlvbnMob3B0aW9ucyB8fCB7fSk7XG4gICAgdGhpcy5ldmVudHMgPSB7fTtcbiAgICB0aGlzLmluaXQoKTtcbn1cblxuLyoqXG4gKiBQciBzYXZlIE1lZGlhRmlsZSBhbmQgQWRQYXJhbWV0ZXJzXG4gKiBAcGFyYW0geG1sIHtzdHJpbmd9XG4gKi9cbk91dHN0cmVhbS5wcm90b3R5cGUucGFyc2VBbmRTYXZlQ29uZmlnID0gZnVuY3Rpb24gKHhtbCkge1xuICAgIHhtbCA9IHByZXBhcmVYTUwoKTtcblxuICAgIHRoaXMuVnBhaWRTb3VyY2UgPSB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ01lZGlhRmlsZScpWzBdLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlO1xuICAgIHRoaXMuY29uZmlnVXJsID0geG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdBZFBhcmFtZXRlcnMnKVswXS5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZTtcblxuICAgIGZ1bmN0aW9uIHByZXBhcmVYTUwoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgX0RPTVBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX0RPTVBhcnNlcikge1xuICAgICAgICAgICAgcmV0dXJuIF9ET01QYXJzZXIucGFyc2VGcm9tU3RyaW5nKHhtbCwgJ3RleHQveG1sJylcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB4bWxEb2MgPSBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxET01cIik7XG4gICAgICAgIHhtbERvYy5sb2FkWE1MKHhtbCk7XG5cbiAgICAgICAgaWYgKHhtbERvYy5wYXJzZUVycm9yLmVycm9yQ29kZSAhPSAwKSB7XG4gICAgICAgICAgICB2YXIgbXlFcnIgPSB4bWxEb2MucGFyc2VFcnJvcjtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJZb3UgaGF2ZSBlcnJvciBcIiArIG15RXJyLnJlYXNvbik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geG1sRG9jO1xuICAgIH1cbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUubG9hZENvbmZpZyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29uZmlnVXJsID0gdGhpcy5nZXRDb25maWdVcmwoKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciB4ZHIgPSBuZXcgWERvbWFpblJlcXVlc3QoKVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChYTUxIdHRwUmVxdWVzdCAmJiAheGRyKSB7XG4gICAgICAgICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICAgICAgeGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh4aHR0cC5yZWFkeVN0YXRlID09IDQgJiYgeGh0dHAuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHhodHRwLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgeGh0dHAub3BlbihcIkdFVFwiLCBjb25maWdVcmwsIHRydWUpO1xuICAgICAgICAgICAgeGh0dHAuc2VuZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVXNlIE1pY3Jvc29mdCBYRFJcbiAgICAgICAgICAgIHhkci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh4ZHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHhkci5vcGVuKFwiZ2V0XCIsIGNvbmZpZ1VybCwgdHJ1ZSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB4ZHIuc2VuZCgpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUub3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgaWYgKHRoaXMuX29wdGlvbnMgfHwgIW9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zICE9IFwib2JqZWN0XCIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignUGxlYXNlIHNldCBjb3JyZWN0IG9wdGlvbnMnKTtcblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VlBBSURNb2RlKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvcHRpb25zLlZQQUlETW9kZSkgJiYgISFvcHRpb25zLlZQQUlETW9kZS5sZW5ndGggPyBvcHRpb25zLlZQQUlETW9kZSA6IFsnZmxhc2gnLCAnanMnXTtcbiAgICB9XG5cbiAgICBvcHRpb25zLlZQQUlETW9kZSA9IGdldFZQQUlETW9kZSgpO1xuXG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY3JlYXRlVlBBSUQoKTtcblxuICAgIHRoaXMubG9hZENvbmZpZygpLnRoZW4oZnVuY3Rpb24gKHhtbCkge1xuICAgICAgICAgICAgdGhpcy5wYXJzZUFuZFNhdmVDb25maWcoeG1sKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFZQQUlEKCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgLmNhdWdodChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICB0aGlzLmluaXRWUEFJRCgpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5pbml0VlBBSUQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdGhpcy5WUEFJRENsaWVudC5pbml0KFxuICAgICAgICAgICAgdGhpcy5WcGFpZFNvdXJjZSxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnVXJsLFxuICAgICAgICAgICAgdGhpcy5nZXRDb25maWdVcmwoKVxuICAgICAgICApO1xuXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIHRyeSB0byB1c2UgYW5vdGhlciBtb2RlXG4gICAgICAgIHZhciBWUEFJRE1vZGUgPSB0aGlzLm9wdGlvbnMoKS5WUEFJRE1vZGUsXG4gICAgICAgICAgICBtb2RlSW5kZXggPSBWUEFJRE1vZGUuaW5kZXhPZih0aGlzLm1vZGUpO1xuXG4gICAgICAgIGlmIChtb2RlSW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgIFZQQUlETW9kZS5zcGxpY2UobW9kZUluZGV4LCAxKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3dpdGNoIFZQQUlkVHlwZSAsIEVSUk9SOiBcIiArIGVyci5tZXNzYWdlKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lcih0aGlzLlZQQUlEQ2xpZW50LmV2ZW50TWFuYWdlcik7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLmdldENvbmZpZ1VybCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZG9tYWluID0gdGhpcy5vcHRpb25zKCkuaXNTU1AgPyBcInZhc3QudmVydGFtZWRpYS5jb20vXCIgOiBcInZhc3QudmlkZWUudHYvXCIsXG4gICAgICAgIGNvbmZpZ1VybCA9IFwiLy9cIiArIGRvbWFpbiArXG4gICAgICAgICAgICBcIj9haWQ9XCIgKyB0aGlzLm9wdGlvbnMoKS5haWQgK1xuICAgICAgICAgICAgXCImY29udGVudF9wYWdlX3VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uaHJlZikgK1xuICAgICAgICAgICAgXCImcGxheWVyX3dpZHRoPVwiICsgdGhpcy5vcHRpb25zKCkud2lkdGggK1xuICAgICAgICAgICAgXCImcGxheWVyX2hlaWdodD1cIiArIHRoaXMub3B0aW9ucygpLmhlaWdodCArXG4gICAgICAgICAgICBcIiZjZD1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgaWYgKHRoaXMubW9kZSA9PSBcImpzXCIpIHtcbiAgICAgICAgY29uZmlnVXJsICs9IFwiJnZwYWlkX3R5cGU9MlwiO1xuICAgIH1cblxuICAgIHJldHVybiBjb25maWdVcmw7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLmNyZWF0ZVZQQUlEID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBWUEFJRE1vZGUgPSB0aGlzLm9wdGlvbnMoKS5WUEFJRE1vZGU7XG4gICAgZm9yICh2YXIgaW5kZXggaW4gVlBBSURNb2RlKSB7XG4gICAgICAgIGlmICh0aGlzLnVzZU1vZGUoVlBBSURNb2RlW2luZGV4XSkpIHtcbiAgICAgICAgICAgIHRoaXMubW9kZSA9IFZQQUlETW9kZVtpbmRleF07XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLnVzZU1vZGUgPSBmdW5jdGlvbiAobW9kZVR5cGUpIHtcbiAgICB2YXIgVlBBSURGYWN0b3J5ID0ge1xuICAgICAgICBmbGFzaDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmxhc2hDbGllbnQob3B0aW9ucyk7XG4gICAgICAgIH0sXG4gICAgICAgIGpzOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKc0NsaWVudChvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBtb2RlVHlwZSA9IG1vZGVUeXBlIGluIFZQQUlERmFjdG9yeSA/IG1vZGVUeXBlIDogJ2ZsYXNoJztcblxuICAgIHRyeSB7XG4gICAgICAgIHRoaXMuVlBBSURDbGllbnQgPSBuZXcgVlBBSURGYWN0b3J5W21vZGVUeXBlXSh0aGlzLm9wdGlvbnMoKSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobW9kZVR5cGUgKyBcIiBpbml0IEVSUk9SOiBcIiArIGVycik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gISF0aGlzLlZQQUlEQ2xpZW50O1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5pbml0RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudE1hbmFnZXIpIHtcbiAgICB2YXIgY29udGV4dCA9IHRoaXMsXG4gICAgICAgIHByb3h5RXZlbnRzID0gdGhpcy5WUEFJRENsaWVudC5wcm94eUV2ZW50cztcblxuICAgIGZvciAodmFyIGkgaW4gcHJveHlFdmVudHMpIHtcbiAgICAgICAgaW5pdEV2ZW50KHByb3h5RXZlbnRzW2ldKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0RXZlbnQocHJveHlFdmVudCkge1xuICAgICAgICBldmVudE1hbmFnZXIub24ocHJveHlFdmVudCwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnRleHQudHJpZ2dlcihwcm94eUV2ZW50LCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5ldmVudHNbZXZlbnROYW1lICsgJyddID0gY2FsbGJhY2s7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5ldmVudHNbZXZlbnROYW1lICsgJyddO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBkYXRhKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gdGhpcy5ldmVudHNbZXZlbnROYW1lXTtcblxuICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNhbGxiYWNrLmNhbGwodGhpcywgZGF0YSk7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5vcHRpb25zLmNvbnRhaW5lckVsLmlubmVySFRNTCA9ICcnXG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLmNhbGxNZXRob2QgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgIG1ldGhvZE5hbWUgPSB0aGlzLm1vZGUgPT0gJ2ZsYXNoJyA/ICd2aWRlZV8nICsgbWV0aG9kTmFtZSA6IG1ldGhvZE5hbWU7XG5cbiAgICBpZiAodGhpcy5WUEFJRENsaWVudC5tZXRob2RzU3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVlBBSURDbGllbnQuVlBBSURbbWV0aG9kTmFtZV0oKTtcbiAgICB9XG5cbiAgICB0aGlzLm9uKCdzdGFydGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLlZQQUlEQ2xpZW50LlZQQUlEW21ldGhvZE5hbWVdKCk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbn07XG5cbi8vIFB1YmxpYyBWUEFJRCBtZXRob2RzXG5PdXRzdHJlYW0ucHJvdG90eXBlLnN0YXJ0QWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsTWV0aG9kKCdzdGFydEFkJyk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuc3RvcEFkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2FsbE1ldGhvZCgnc3RvcEFkJyk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuc2tpcEFkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2FsbE1ldGhvZCgnc2tpcEFkJyk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUubXV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5WUEFJRENsaWVudC5tZXRob2RzU3RhdGUpIHtcbiAgICAgICAgY2xiLmNhbGwodGhpcyk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMub24oJ3N0YXJ0ZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsYi5jYWxsKHRoaXMpXG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIGZ1bmN0aW9uIGNsYigpIHtcbiAgICAgICAgdmFyIG1ldGhvZE5hbWUgPSB0aGlzLm1vZGUgPT0gJ2ZsYXNoJyA/ICd2aWRlZV9nZXRBZFZvbHVtZScgOiAnZ2V0QWRWb2x1bWUnO1xuXG4gICAgICAgIHRoaXMuc2F2ZWRWb2x1bWUgPSB0aGlzLlZQQUlEQ2xpZW50LlZQQUlEW21ldGhvZE5hbWVdKCk7XG5cbiAgICAgICAgbWV0aG9kTmFtZSA9IHRoaXMubW9kZSA9PSAnZmxhc2gnID8gJ3ZpZGVlX3NldEFkVm9sdW1lJyA6ICdzZXRBZFZvbHVtZSc7XG4gICAgICAgIHRoaXMuVlBBSURDbGllbnQuVlBBSURbbWV0aG9kTmFtZV0oMCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLnVubXV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWV0aG9kTmFtZSA9IHRoaXMubW9kZSA9PSAnZmxhc2gnID8gJ3ZpZGVlX3NldEFkVm9sdW1lJyA6ICdzZXRBZFZvbHVtZSc7XG4gICAgdGhpcy5WUEFJRENsaWVudC5WUEFJRFttZXRob2ROYW1lXSh0aGlzLnNhdmVkVm9sdW1lIHx8IDEpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLnNldEFkVm9sdW1lID0gZnVuY3Rpb24gKHZhbCkge1xuICAgIGlmICh0eXBlb2YgdmFsICE9ICdudW1iZXInIHx8IHZhbCAhPSB2YWwpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5jYWxsTWV0aG9kKCdzZXRBZFZvbHVtZScpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLmdldEFkVm9sdW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmNhbGxNZXRob2QoJ2dldEFkVm9sdW1lJyk7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLnBhdXNlQWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsTWV0aG9kKCdwYXVzZUFkJyk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUucmVzdW1lQWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsTWV0aG9kKCdyZXN1bWVBZCcpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLnJlc2l6ZUFkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxcbiAgICAgICAgbWV0aG9kTmFtZSA9IHRoaXMubW9kZSA9PSAnZmxhc2gnID8gJ3ZpZGVlX3NldEFkVm9sdW1lJyA6ICdzZXRBZFZvbHVtZSc7XG4gICAgaWYgKHRoaXMuVlBBSURDbGllbnQubWV0aG9kc1N0YXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlZQQUlEQ2xpZW50LlZQQUlEW21ldGhvZE5hbWVdLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH1cblxuICAgIHRoaXMub24oJ3N0YXJ0ZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuVlBBSURDbGllbnQuVlBBSURbbWV0aG9kTmFtZV0uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLy8gaW5pdFxudmFyIHJvb3QgPSByb290IHx8IHdpbmRvdztcbnJvb3QuT3V0c3RyZWFtID0gT3V0c3RyZWFtO1xuXG4vKiBAcHJlc2VydmVcbiAqIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuICogXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSBQZXRrYSBBbnRvbm92XG4gKiBcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqIFxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICogXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4gKiBUSEUgU09GVFdBUkUuXG4gKiBcbiAqL1xuLyoqXG4gKiBibHVlYmlyZCBidWlsZCB2ZXJzaW9uIDMuNC4wXG4gKiBGZWF0dXJlcyBlbmFibGVkOiBjb3JlLCByYWNlLCBjYWxsX2dldCwgZ2VuZXJhdG9ycywgbWFwLCBub2RlaWZ5LCBwcm9taXNpZnksIHByb3BzLCByZWR1Y2UsIHNldHRsZSwgc29tZSwgdXNpbmcsIHRpbWVycywgZmlsdGVyLCBhbnksIGVhY2hcbiovXG4hZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciBmO1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/Zj13aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9mPWdsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmKGY9c2VsZiksZi5Qcm9taXNlPWUoKX19KGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiBfZGVyZXFfPT1cImZ1bmN0aW9uXCImJl9kZXJlcV87aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIF9kZXJlcV89PVwiZnVuY3Rpb25cIiYmX2RlcmVxXztmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciBTb21lUHJvbWlzZUFycmF5ID0gUHJvbWlzZS5fU29tZVByb21pc2VBcnJheTtcbmZ1bmN0aW9uIGFueShwcm9taXNlcykge1xuICAgIHZhciByZXQgPSBuZXcgU29tZVByb21pc2VBcnJheShwcm9taXNlcyk7XG4gICAgdmFyIHByb21pc2UgPSByZXQucHJvbWlzZSgpO1xuICAgIHJldC5zZXRIb3dNYW55KDEpO1xuICAgIHJldC5zZXRVbndyYXAoKTtcbiAgICByZXQuaW5pdCgpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5Qcm9taXNlLmFueSA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiBhbnkocHJvbWlzZXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuYW55ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBhbnkodGhpcyk7XG59O1xuXG59O1xuXG59LHt9XSwyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIGZpcnN0TGluZUVycm9yO1xudHJ5IHt0aHJvdyBuZXcgRXJyb3IoKTsgfSBjYXRjaCAoZSkge2ZpcnN0TGluZUVycm9yID0gZTt9XG52YXIgc2NoZWR1bGUgPSBfZGVyZXFfKFwiLi9zY2hlZHVsZVwiKTtcbnZhciBRdWV1ZSA9IF9kZXJlcV8oXCIuL3F1ZXVlXCIpO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xuXG5mdW5jdGlvbiBBc3luYygpIHtcbiAgICB0aGlzLl9jdXN0b21TY2hlZHVsZXIgPSBmYWxzZTtcbiAgICB0aGlzLl9pc1RpY2tVc2VkID0gZmFsc2U7XG4gICAgdGhpcy5fbGF0ZVF1ZXVlID0gbmV3IFF1ZXVlKDE2KTtcbiAgICB0aGlzLl9ub3JtYWxRdWV1ZSA9IG5ldyBRdWV1ZSgxNik7XG4gICAgdGhpcy5faGF2ZURyYWluZWRRdWV1ZXMgPSBmYWxzZTtcbiAgICB0aGlzLl90cmFtcG9saW5lRW5hYmxlZCA9IHRydWU7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuZHJhaW5RdWV1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuX2RyYWluUXVldWVzKCk7XG4gICAgfTtcbiAgICB0aGlzLl9zY2hlZHVsZSA9IHNjaGVkdWxlO1xufVxuXG5Bc3luYy5wcm90b3R5cGUuc2V0U2NoZWR1bGVyID0gZnVuY3Rpb24oZm4pIHtcbiAgICB2YXIgcHJldiA9IHRoaXMuX3NjaGVkdWxlO1xuICAgIHRoaXMuX3NjaGVkdWxlID0gZm47XG4gICAgdGhpcy5fY3VzdG9tU2NoZWR1bGVyID0gdHJ1ZTtcbiAgICByZXR1cm4gcHJldjtcbn07XG5cbkFzeW5jLnByb3RvdHlwZS5oYXNDdXN0b21TY2hlZHVsZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VzdG9tU2NoZWR1bGVyO1xufTtcblxuQXN5bmMucHJvdG90eXBlLmVuYWJsZVRyYW1wb2xpbmUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl90cmFtcG9saW5lRW5hYmxlZCA9IHRydWU7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuZGlzYWJsZVRyYW1wb2xpbmVJZk5lY2Vzc2FyeSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh1dGlsLmhhc0RldlRvb2xzKSB7XG4gICAgICAgIHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkID0gZmFsc2U7XG4gICAgfVxufTtcblxuQXN5bmMucHJvdG90eXBlLmhhdmVJdGVtc1F1ZXVlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNUaWNrVXNlZCB8fCB0aGlzLl9oYXZlRHJhaW5lZFF1ZXVlcztcbn07XG5cblxuQXN5bmMucHJvdG90eXBlLmZhdGFsRXJyb3IgPSBmdW5jdGlvbihlLCBpc05vZGUpIHtcbiAgICBpZiAoaXNOb2RlKSB7XG4gICAgICAgIHByb2Nlc3Muc3RkZXJyLndyaXRlKFwiRmF0YWwgXCIgKyAoZSBpbnN0YW5jZW9mIEVycm9yID8gZS5zdGFjayA6IGUpICtcbiAgICAgICAgICAgIFwiXFxuXCIpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50aHJvd0xhdGVyKGUpO1xuICAgIH1cbn07XG5cbkFzeW5jLnByb3RvdHlwZS50aHJvd0xhdGVyID0gZnVuY3Rpb24oZm4sIGFyZykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGFyZyA9IGZuO1xuICAgICAgICBmbiA9IGZ1bmN0aW9uICgpIHsgdGhyb3cgYXJnOyB9O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZuKGFyZyk7XG4gICAgICAgIH0sIDApO1xuICAgIH0gZWxzZSB0cnkge1xuICAgICAgICB0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZuKGFyZyk7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYXN5bmMgc2NoZWR1bGVyIGF2YWlsYWJsZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gQXN5bmNJbnZva2VMYXRlcihmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgIHRoaXMuX2xhdGVRdWV1ZS5wdXNoKGZuLCByZWNlaXZlciwgYXJnKTtcbiAgICB0aGlzLl9xdWV1ZVRpY2soKTtcbn1cblxuZnVuY3Rpb24gQXN5bmNJbnZva2UoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICB0aGlzLl9ub3JtYWxRdWV1ZS5wdXNoKGZuLCByZWNlaXZlciwgYXJnKTtcbiAgICB0aGlzLl9xdWV1ZVRpY2soKTtcbn1cblxuZnVuY3Rpb24gQXN5bmNTZXR0bGVQcm9taXNlcyhwcm9taXNlKSB7XG4gICAgdGhpcy5fbm9ybWFsUXVldWUuX3B1c2hPbmUocHJvbWlzZSk7XG4gICAgdGhpcy5fcXVldWVUaWNrKCk7XG59XG5cbmlmICghdXRpbC5oYXNEZXZUb29scykge1xuICAgIEFzeW5jLnByb3RvdHlwZS5pbnZva2VMYXRlciA9IEFzeW5jSW52b2tlTGF0ZXI7XG4gICAgQXN5bmMucHJvdG90eXBlLmludm9rZSA9IEFzeW5jSW52b2tlO1xuICAgIEFzeW5jLnByb3RvdHlwZS5zZXR0bGVQcm9taXNlcyA9IEFzeW5jU2V0dGxlUHJvbWlzZXM7XG59IGVsc2Uge1xuICAgIEFzeW5jLnByb3RvdHlwZS5pbnZva2VMYXRlciA9IGZ1bmN0aW9uIChmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgICAgICBpZiAodGhpcy5fdHJhbXBvbGluZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIEFzeW5jSW52b2tlTGF0ZXIuY2FsbCh0aGlzLCBmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBmbi5jYWxsKHJlY2VpdmVyLCBhcmcpO1xuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBBc3luYy5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24gKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgICAgIGlmICh0aGlzLl90cmFtcG9saW5lRW5hYmxlZCkge1xuICAgICAgICAgICAgQXN5bmNJbnZva2UuY2FsbCh0aGlzLCBmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBmbi5jYWxsKHJlY2VpdmVyLCBhcmcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQXN5bmMucHJvdG90eXBlLnNldHRsZVByb21pc2VzID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgICBpZiAodGhpcy5fdHJhbXBvbGluZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIEFzeW5jU2V0dGxlUHJvbWlzZXMuY2FsbCh0aGlzLCBwcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHByb21pc2UuX3NldHRsZVByb21pc2VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbkFzeW5jLnByb3RvdHlwZS5pbnZva2VGaXJzdCA9IGZ1bmN0aW9uIChmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgIHRoaXMuX25vcm1hbFF1ZXVlLnVuc2hpZnQoZm4sIHJlY2VpdmVyLCBhcmcpO1xuICAgIHRoaXMuX3F1ZXVlVGljaygpO1xufTtcblxuQXN5bmMucHJvdG90eXBlLl9kcmFpblF1ZXVlID0gZnVuY3Rpb24ocXVldWUpIHtcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoKCkgPiAwKSB7XG4gICAgICAgIHZhciBmbiA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgZm4uX3NldHRsZVByb21pc2VzKCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVjZWl2ZXIgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICB2YXIgYXJnID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgZm4uY2FsbChyZWNlaXZlciwgYXJnKTtcbiAgICB9XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuX2RyYWluUXVldWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2RyYWluUXVldWUodGhpcy5fbm9ybWFsUXVldWUpO1xuICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgdGhpcy5faGF2ZURyYWluZWRRdWV1ZXMgPSB0cnVlO1xuICAgIHRoaXMuX2RyYWluUXVldWUodGhpcy5fbGF0ZVF1ZXVlKTtcbn07XG5cbkFzeW5jLnByb3RvdHlwZS5fcXVldWVUaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5faXNUaWNrVXNlZCkge1xuICAgICAgICB0aGlzLl9pc1RpY2tVc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2NoZWR1bGUodGhpcy5kcmFpblF1ZXVlcyk7XG4gICAgfVxufTtcblxuQXN5bmMucHJvdG90eXBlLl9yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9pc1RpY2tVc2VkID0gZmFsc2U7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFzeW5jO1xubW9kdWxlLmV4cG9ydHMuZmlyc3RMaW5lRXJyb3IgPSBmaXJzdExpbmVFcnJvcjtcblxufSx7XCIuL3F1ZXVlXCI6MjYsXCIuL3NjaGVkdWxlXCI6MjksXCIuL3V0aWxcIjozNn1dLDM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBkZWJ1Zykge1xudmFyIGNhbGxlZEJpbmQgPSBmYWxzZTtcbnZhciByZWplY3RUaGlzID0gZnVuY3Rpb24oXywgZSkge1xuICAgIHRoaXMuX3JlamVjdChlKTtcbn07XG5cbnZhciB0YXJnZXRSZWplY3RlZCA9IGZ1bmN0aW9uKGUsIGNvbnRleHQpIHtcbiAgICBjb250ZXh0LnByb21pc2VSZWplY3Rpb25RdWV1ZWQgPSB0cnVlO1xuICAgIGNvbnRleHQuYmluZGluZ1Byb21pc2UuX3RoZW4ocmVqZWN0VGhpcywgcmVqZWN0VGhpcywgbnVsbCwgdGhpcywgZSk7XG59O1xuXG52YXIgYmluZGluZ1Jlc29sdmVkID0gZnVuY3Rpb24odGhpc0FyZywgY29udGV4dCkge1xuICAgIGlmICgoKHRoaXMuX2JpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICB0aGlzLl9yZXNvbHZlQ2FsbGJhY2soY29udGV4dC50YXJnZXQpO1xuICAgIH1cbn07XG5cbnZhciBiaW5kaW5nUmVqZWN0ZWQgPSBmdW5jdGlvbihlLCBjb250ZXh0KSB7XG4gICAgaWYgKCFjb250ZXh0LnByb21pc2VSZWplY3Rpb25RdWV1ZWQpIHRoaXMuX3JlamVjdChlKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAodGhpc0FyZykge1xuICAgIGlmICghY2FsbGVkQmluZCkge1xuICAgICAgICBjYWxsZWRCaW5kID0gdHJ1ZTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBkZWJ1Zy5wcm9wYWdhdGVGcm9tRnVuY3Rpb24oKTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2JvdW5kVmFsdWUgPSBkZWJ1Zy5ib3VuZFZhbHVlRnVuY3Rpb24oKTtcbiAgICB9XG4gICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodGhpc0FyZyk7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX3Byb3BhZ2F0ZUZyb20odGhpcywgMSk7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIHJldC5fc2V0Qm91bmRUbyhtYXliZVByb21pc2UpO1xuICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0ge1xuICAgICAgICAgICAgcHJvbWlzZVJlamVjdGlvblF1ZXVlZDogZmFsc2UsXG4gICAgICAgICAgICBwcm9taXNlOiByZXQsXG4gICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgICAgIGJpbmRpbmdQcm9taXNlOiBtYXliZVByb21pc2VcbiAgICAgICAgfTtcbiAgICAgICAgdGFyZ2V0Ll90aGVuKElOVEVSTkFMLCB0YXJnZXRSZWplY3RlZCwgdW5kZWZpbmVkLCByZXQsIGNvbnRleHQpO1xuICAgICAgICBtYXliZVByb21pc2UuX3RoZW4oXG4gICAgICAgICAgICBiaW5kaW5nUmVzb2x2ZWQsIGJpbmRpbmdSZWplY3RlZCwgdW5kZWZpbmVkLCByZXQsIGNvbnRleHQpO1xuICAgICAgICByZXQuX3NldE9uQ2FuY2VsKG1heWJlUHJvbWlzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0Ll9yZXNvbHZlQ2FsbGJhY2sodGFyZ2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRCb3VuZFRvID0gZnVuY3Rpb24gKG9iaikge1xuICAgIGlmIChvYmogIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMjA5NzE1MjtcbiAgICAgICAgdGhpcy5fYm91bmRUbyA9IG9iajtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkICYgKH4yMDk3MTUyKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNCb3VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMjA5NzE1MikgPT09IDIwOTcxNTI7XG59O1xuXG5Qcm9taXNlLmJpbmQgPSBmdW5jdGlvbiAodGhpc0FyZywgdmFsdWUpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS5iaW5kKHRoaXNBcmcpO1xufTtcbn07XG5cbn0se31dLDQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgb2xkO1xuaWYgKHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiKSBvbGQgPSBQcm9taXNlO1xuZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICB0cnkgeyBpZiAoUHJvbWlzZSA9PT0gYmx1ZWJpcmQpIFByb21pc2UgPSBvbGQ7IH1cbiAgICBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gYmx1ZWJpcmQ7XG59XG52YXIgYmx1ZWJpcmQgPSBfZGVyZXFfKFwiLi9wcm9taXNlXCIpKCk7XG5ibHVlYmlyZC5ub0NvbmZsaWN0ID0gbm9Db25mbGljdDtcbm1vZHVsZS5leHBvcnRzID0gYmx1ZWJpcmQ7XG5cbn0se1wiLi9wcm9taXNlXCI6MjJ9XSw1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIGNyID0gT2JqZWN0LmNyZWF0ZTtcbmlmIChjcikge1xuICAgIHZhciBjYWxsZXJDYWNoZSA9IGNyKG51bGwpO1xuICAgIHZhciBnZXR0ZXJDYWNoZSA9IGNyKG51bGwpO1xuICAgIGNhbGxlckNhY2hlW1wiIHNpemVcIl0gPSBnZXR0ZXJDYWNoZVtcIiBzaXplXCJdID0gMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgY2FuRXZhbHVhdGUgPSB1dGlsLmNhbkV2YWx1YXRlO1xudmFyIGlzSWRlbnRpZmllciA9IHV0aWwuaXNJZGVudGlmaWVyO1xuXG52YXIgZ2V0TWV0aG9kQ2FsbGVyO1xudmFyIGdldEdldHRlcjtcbmlmICghdHJ1ZSkge1xudmFyIG1ha2VNZXRob2RDYWxsZXIgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJlbnN1cmVNZXRob2RcIiwgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgJ3VzZSBzdHJpY3QnICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgZW5zdXJlTWV0aG9kKG9iaiwgJ21ldGhvZE5hbWUnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgc3dpdGNoKGxlbikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIG9iai5tZXRob2ROYW1lKHRoaXNbMF0pOyAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG9iai5tZXRob2ROYW1lKHRoaXNbMF0sIHRoaXNbMV0pOyAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIG9iai5tZXRob2ROYW1lKHRoaXNbMF0sIHRoaXNbMV0sIHRoaXNbMl0pOyAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIG9iai5tZXRob2ROYW1lKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLm1ldGhvZE5hbWUuYXBwbHkob2JqLCB0aGlzKTsgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICBcIi5yZXBsYWNlKC9tZXRob2ROYW1lL2csIG1ldGhvZE5hbWUpKShlbnN1cmVNZXRob2QpO1xufTtcblxudmFyIG1ha2VHZXR0ZXIgPSBmdW5jdGlvbiAocHJvcGVydHlOYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcIm9ialwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIHJldHVybiBvYmoucHJvcGVydHlOYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIFwiLnJlcGxhY2UoXCJwcm9wZXJ0eU5hbWVcIiwgcHJvcGVydHlOYW1lKSk7XG59O1xuXG52YXIgZ2V0Q29tcGlsZWQgPSBmdW5jdGlvbihuYW1lLCBjb21waWxlciwgY2FjaGUpIHtcbiAgICB2YXIgcmV0ID0gY2FjaGVbbmFtZV07XG4gICAgaWYgKHR5cGVvZiByZXQgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBpZiAoIWlzSWRlbnRpZmllcihuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0ID0gY29tcGlsZXIobmFtZSk7XG4gICAgICAgIGNhY2hlW25hbWVdID0gcmV0O1xuICAgICAgICBjYWNoZVtcIiBzaXplXCJdKys7XG4gICAgICAgIGlmIChjYWNoZVtcIiBzaXplXCJdID4gNTEyKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGNhY2hlKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIGRlbGV0ZSBjYWNoZVtrZXlzW2ldXTtcbiAgICAgICAgICAgIGNhY2hlW1wiIHNpemVcIl0gPSBrZXlzLmxlbmd0aCAtIDI1NjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuZ2V0TWV0aG9kQ2FsbGVyID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBnZXRDb21waWxlZChuYW1lLCBtYWtlTWV0aG9kQ2FsbGVyLCBjYWxsZXJDYWNoZSk7XG59O1xuXG5nZXRHZXR0ZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGdldENvbXBpbGVkKG5hbWUsIG1ha2VHZXR0ZXIsIGdldHRlckNhY2hlKTtcbn07XG59XG5cbmZ1bmN0aW9uIGVuc3VyZU1ldGhvZChvYmosIG1ldGhvZE5hbWUpIHtcbiAgICB2YXIgZm47XG4gICAgaWYgKG9iaiAhPSBudWxsKSBmbiA9IG9ialttZXRob2ROYW1lXTtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBcIk9iamVjdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcob2JqKSArIFwiIGhhcyBubyBtZXRob2QgJ1wiICtcbiAgICAgICAgICAgIHV0aWwudG9TdHJpbmcobWV0aG9kTmFtZSkgKyBcIidcIjtcbiAgICAgICAgdGhyb3cgbmV3IFByb21pc2UuVHlwZUVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gZm47XG59XG5cbmZ1bmN0aW9uIGNhbGxlcihvYmopIHtcbiAgICB2YXIgbWV0aG9kTmFtZSA9IHRoaXMucG9wKCk7XG4gICAgdmFyIGZuID0gZW5zdXJlTWV0aG9kKG9iaiwgbWV0aG9kTmFtZSk7XG4gICAgcmV0dXJuIGZuLmFwcGx5KG9iaiwgdGhpcyk7XG59XG5Qcm9taXNlLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcbiAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTs7XG4gICAgaWYgKCF0cnVlKSB7XG4gICAgICAgIGlmIChjYW5FdmFsdWF0ZSkge1xuICAgICAgICAgICAgdmFyIG1heWJlQ2FsbGVyID0gZ2V0TWV0aG9kQ2FsbGVyKG1ldGhvZE5hbWUpO1xuICAgICAgICAgICAgaWYgKG1heWJlQ2FsbGVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICAgICAgICAgIG1heWJlQ2FsbGVyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYXJncywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhcmdzLnB1c2gobWV0aG9kTmFtZSk7XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oY2FsbGVyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYXJncywgdW5kZWZpbmVkKTtcbn07XG5cbmZ1bmN0aW9uIG5hbWVkR2V0dGVyKG9iaikge1xuICAgIHJldHVybiBvYmpbdGhpc107XG59XG5mdW5jdGlvbiBpbmRleGVkR2V0dGVyKG9iaikge1xuICAgIHZhciBpbmRleCA9ICt0aGlzO1xuICAgIGlmIChpbmRleCA8IDApIGluZGV4ID0gTWF0aC5tYXgoMCwgaW5kZXggKyBvYmoubGVuZ3RoKTtcbiAgICByZXR1cm4gb2JqW2luZGV4XTtcbn1cblByb21pc2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUpIHtcbiAgICB2YXIgaXNJbmRleCA9ICh0eXBlb2YgcHJvcGVydHlOYW1lID09PSBcIm51bWJlclwiKTtcbiAgICB2YXIgZ2V0dGVyO1xuICAgIGlmICghaXNJbmRleCkge1xuICAgICAgICBpZiAoY2FuRXZhbHVhdGUpIHtcbiAgICAgICAgICAgIHZhciBtYXliZUdldHRlciA9IGdldEdldHRlcihwcm9wZXJ0eU5hbWUpO1xuICAgICAgICAgICAgZ2V0dGVyID0gbWF5YmVHZXR0ZXIgIT09IG51bGwgPyBtYXliZUdldHRlciA6IG5hbWVkR2V0dGVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2V0dGVyID0gbmFtZWRHZXR0ZXI7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBnZXR0ZXIgPSBpbmRleGVkR2V0dGVyO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGhlbihnZXR0ZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBwcm9wZXJ0eU5hbWUsIHVuZGVmaW5lZCk7XG59O1xufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uLCBkZWJ1Zykge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgYXN5bmMgPSBQcm9taXNlLl9hc3luYztcblxuUHJvbWlzZS5wcm90b3R5cGVbXCJicmVha1wiXSA9IFByb21pc2UucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghZGVidWcuY2FuY2VsbGF0aW9uKCkpIHJldHVybiB0aGlzLl93YXJuKFwiY2FuY2VsbGF0aW9uIGlzIGRpc2FibGVkXCIpO1xuXG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIHZhciBjaGlsZCA9IHByb21pc2U7XG4gICAgd2hpbGUgKHByb21pc2UuaXNDYW5jZWxsYWJsZSgpKSB7XG4gICAgICAgIGlmICghcHJvbWlzZS5fY2FuY2VsQnkoY2hpbGQpKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQuX2lzRm9sbG93aW5nKCkpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hpbGQuX2NhbmNlbEJyYW5jaGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJlbnQgPSBwcm9taXNlLl9jYW5jZWxsYXRpb25QYXJlbnQ7XG4gICAgICAgIGlmIChwYXJlbnQgPT0gbnVsbCB8fCAhcGFyZW50LmlzQ2FuY2VsbGFibGUoKSkge1xuICAgICAgICAgICAgaWYgKHByb21pc2UuX2lzRm9sbG93aW5nKCkpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9mb2xsb3dlZSgpLmNhbmNlbCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9jYW5jZWxCcmFuY2hlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAocHJvbWlzZS5faXNGb2xsb3dpbmcoKSkgcHJvbWlzZS5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIGNoaWxkID0gcHJvbWlzZTtcbiAgICAgICAgICAgIHByb21pc2UgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fYnJhbmNoSGFzQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbC0tO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Vub3VnaEJyYW5jaGVzSGF2ZUNhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgdGhpcy5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA8PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NhbmNlbEJ5ID0gZnVuY3Rpb24oY2FuY2VsbGVyKSB7XG4gICAgaWYgKGNhbmNlbGxlciA9PT0gdGhpcykge1xuICAgICAgICB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gMDtcbiAgICAgICAgdGhpcy5faW52b2tlT25DYW5jZWwoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYnJhbmNoSGFzQ2FuY2VsbGVkKCk7XG4gICAgICAgIGlmICh0aGlzLl9lbm91Z2hCcmFuY2hlc0hhdmVDYW5jZWxsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5faW52b2tlT25DYW5jZWwoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9jYW5jZWxCcmFuY2hlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9lbm91Z2hCcmFuY2hlc0hhdmVDYW5jZWxsZWQoKSkge1xuICAgICAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmlzQ2FuY2VsbGFibGUoKSkgcmV0dXJuO1xuXG4gICAgdGhpcy5fc2V0Q2FuY2VsbGVkKCk7XG4gICAgYXN5bmMuaW52b2tlKHRoaXMuX2NhbmNlbFByb21pc2VzLCB0aGlzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NhbmNlbFByb21pc2VzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2xlbmd0aCgpID4gMCkgdGhpcy5fc2V0dGxlUHJvbWlzZXMoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldE9uQ2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fb25DYW5jZWxGaWVsZCA9IHVuZGVmaW5lZDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzQ2FuY2VsbGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1BlbmRpbmcoKSAmJiAhdGhpcy5pc0NhbmNlbGxlZCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2RvSW52b2tlT25DYW5jZWwgPSBmdW5jdGlvbihvbkNhbmNlbENhbGxiYWNrLCBpbnRlcm5hbE9ubHkpIHtcbiAgICBpZiAodXRpbC5pc0FycmF5KG9uQ2FuY2VsQ2FsbGJhY2spKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb25DYW5jZWxDYWxsYmFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fZG9JbnZva2VPbkNhbmNlbChvbkNhbmNlbENhbGxiYWNrW2ldLCBpbnRlcm5hbE9ubHkpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChvbkNhbmNlbENhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvbkNhbmNlbENhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGlmICghaW50ZXJuYWxPbmx5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0cnlDYXRjaChvbkNhbmNlbENhbGxiYWNrKS5jYWxsKHRoaXMuX2JvdW5kVmFsdWUoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGUgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F0dGFjaEV4dHJhVHJhY2UoZS5lKTtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlLmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uQ2FuY2VsQ2FsbGJhY2suX3Jlc3VsdENhbmNlbGxlZCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pbnZva2VPbkNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbkNhbmNlbENhbGxiYWNrID0gdGhpcy5fb25DYW5jZWwoKTtcbiAgICB0aGlzLl91bnNldE9uQ2FuY2VsKCk7XG4gICAgYXN5bmMuaW52b2tlKHRoaXMuX2RvSW52b2tlT25DYW5jZWwsIHRoaXMsIG9uQ2FuY2VsQ2FsbGJhY2spO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2ludm9rZUludGVybmFsT25DYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5pc0NhbmNlbGxhYmxlKCkpIHtcbiAgICAgICAgdGhpcy5fZG9JbnZva2VPbkNhbmNlbCh0aGlzLl9vbkNhbmNlbCgpLCB0cnVlKTtcbiAgICAgICAgdGhpcy5fdW5zZXRPbkNhbmNlbCgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNhbmNlbCgpO1xufTtcblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE5FWFRfRklMVEVSKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgZ2V0S2V5cyA9IF9kZXJlcV8oXCIuL2VzNVwiKS5rZXlzO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG5cbmZ1bmN0aW9uIGNhdGNoRmlsdGVyKGluc3RhbmNlcywgY2IsIHByb21pc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgYm91bmRUbyA9IHByb21pc2UuX2JvdW5kVmFsdWUoKTtcbiAgICAgICAgcHJlZGljYXRlTG9vcDogZm9yICh2YXIgaSA9IDA7IGkgPCBpbnN0YW5jZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gaW5zdGFuY2VzW2ldO1xuXG4gICAgICAgICAgICBpZiAoaXRlbSA9PT0gRXJyb3IgfHxcbiAgICAgICAgICAgICAgICAoaXRlbSAhPSBudWxsICYmIGl0ZW0ucHJvdG90eXBlIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnlDYXRjaChjYikuY2FsbChib3VuZFRvLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlc1ByZWRpY2F0ZSA9IHRyeUNhdGNoKGl0ZW0pLmNhbGwoYm91bmRUbywgZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXNQcmVkaWNhdGUgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVzUHJlZGljYXRlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hlc1ByZWRpY2F0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ5Q2F0Y2goY2IpLmNhbGwoYm91bmRUbywgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh1dGlsLmlzT2JqZWN0KGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBnZXRLZXlzKGl0ZW0pO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwga2V5cy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1ba2V5XSAhPSBlW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHByZWRpY2F0ZUxvb3A7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyeUNhdGNoKGNiKS5jYWxsKGJvdW5kVG8sIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBORVhUX0ZJTFRFUjtcbiAgICB9O1xufVxuXG5yZXR1cm4gY2F0Y2hGaWx0ZXI7XG59O1xuXG59LHtcIi4vZXM1XCI6MTMsXCIuL3V0aWxcIjozNn1dLDg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciBsb25nU3RhY2tUcmFjZXMgPSBmYWxzZTtcbnZhciBjb250ZXh0U3RhY2sgPSBbXTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Byb21pc2VDcmVhdGVkID0gZnVuY3Rpb24oKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IGZ1bmN0aW9uKCkge307XG5Qcm9taXNlLnByb3RvdHlwZS5fcG9wQ29udGV4dCA9IGZ1bmN0aW9uKCkge3JldHVybiBudWxsO307XG5Qcm9taXNlLl9wZWVrQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dCA9IGZ1bmN0aW9uKCkge307XG5cbmZ1bmN0aW9uIENvbnRleHQoKSB7XG4gICAgdGhpcy5fdHJhY2UgPSBuZXcgQ29udGV4dC5DYXB0dXJlZFRyYWNlKHBlZWtDb250ZXh0KCkpO1xufVxuQ29udGV4dC5wcm90b3R5cGUuX3B1c2hDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl90cmFjZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX3RyYWNlLl9wcm9taXNlQ3JlYXRlZCA9IG51bGw7XG4gICAgICAgIGNvbnRleHRTdGFjay5wdXNoKHRoaXMuX3RyYWNlKTtcbiAgICB9XG59O1xuXG5Db250ZXh0LnByb3RvdHlwZS5fcG9wQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgdHJhY2UgPSBjb250ZXh0U3RhY2sucG9wKCk7XG4gICAgICAgIHZhciByZXQgPSB0cmFjZS5fcHJvbWlzZUNyZWF0ZWQ7XG4gICAgICAgIHRyYWNlLl9wcm9taXNlQ3JlYXRlZCA9IG51bGw7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlQ29udGV4dCgpIHtcbiAgICBpZiAobG9uZ1N0YWNrVHJhY2VzKSByZXR1cm4gbmV3IENvbnRleHQoKTtcbn1cblxuZnVuY3Rpb24gcGVla0NvbnRleHQoKSB7XG4gICAgdmFyIGxhc3RJbmRleCA9IGNvbnRleHRTdGFjay5sZW5ndGggLSAxO1xuICAgIGlmIChsYXN0SW5kZXggPj0gMCkge1xuICAgICAgICByZXR1cm4gY29udGV4dFN0YWNrW2xhc3RJbmRleF07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5Db250ZXh0LkNhcHR1cmVkVHJhY2UgPSBudWxsO1xuQ29udGV4dC5jcmVhdGUgPSBjcmVhdGVDb250ZXh0O1xuQ29udGV4dC5kZWFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7fTtcbkNvbnRleHQuYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgUHJvbWlzZV9wdXNoQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dDtcbiAgICB2YXIgUHJvbWlzZV9wb3BDb250ZXh0ID0gUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfUGVla0NvbnRleHQgPSBQcm9taXNlLl9wZWVrQ29udGV4dDtcbiAgICB2YXIgUHJvbWlzZV9wZWVrQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dDtcbiAgICB2YXIgUHJvbWlzZV9wcm9taXNlQ3JlYXRlZCA9IFByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZDtcbiAgICBDb250ZXh0LmRlYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3B1c2hDb250ZXh0ID0gUHJvbWlzZV9wdXNoQ29udGV4dDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBQcm9taXNlX3BvcENvbnRleHQ7XG4gICAgICAgIFByb21pc2UuX3BlZWtDb250ZXh0ID0gUHJvbWlzZV9QZWVrQ29udGV4dDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3BlZWtDb250ZXh0ID0gUHJvbWlzZV9wZWVrQ29udGV4dDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb21pc2VDcmVhdGVkID0gUHJvbWlzZV9wcm9taXNlQ3JlYXRlZDtcbiAgICAgICAgbG9uZ1N0YWNrVHJhY2VzID0gZmFsc2U7XG4gICAgfTtcbiAgICBsb25nU3RhY2tUcmFjZXMgPSB0cnVlO1xuICAgIFByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IENvbnRleHQucHJvdG90eXBlLl9wdXNoQ29udGV4dDtcbiAgICBQcm9taXNlLnByb3RvdHlwZS5fcG9wQ29udGV4dCA9IENvbnRleHQucHJvdG90eXBlLl9wb3BDb250ZXh0O1xuICAgIFByb21pc2UuX3BlZWtDb250ZXh0ID0gUHJvbWlzZS5wcm90b3R5cGUuX3BlZWtDb250ZXh0ID0gcGVla0NvbnRleHQ7XG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb21pc2VDcmVhdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjdHggPSB0aGlzLl9wZWVrQ29udGV4dCgpO1xuICAgICAgICBpZiAoY3R4ICYmIGN0eC5fcHJvbWlzZUNyZWF0ZWQgPT0gbnVsbCkgY3R4Ll9wcm9taXNlQ3JlYXRlZCA9IHRoaXM7XG4gICAgfTtcbn07XG5yZXR1cm4gQ29udGV4dDtcbn07XG5cbn0se31dLDk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIENvbnRleHQpIHtcbnZhciBnZXREb21haW4gPSBQcm9taXNlLl9nZXREb21haW47XG52YXIgYXN5bmMgPSBQcm9taXNlLl9hc3luYztcbnZhciBXYXJuaW5nID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpLldhcm5pbmc7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgY2FuQXR0YWNoVHJhY2UgPSB1dGlsLmNhbkF0dGFjaFRyYWNlO1xudmFyIHVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQ7XG52YXIgcG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb247XG52YXIgYmx1ZWJpcmRGcmFtZVBhdHRlcm4gPVxuICAgIC9bXFxcXFxcL11ibHVlYmlyZFtcXFxcXFwvXWpzW1xcXFxcXC9dKHJlbGVhc2V8ZGVidWd8aW5zdHJ1bWVudGVkKS87XG52YXIgc3RhY2tGcmFtZVBhdHRlcm4gPSBudWxsO1xudmFyIGZvcm1hdFN0YWNrID0gbnVsbDtcbnZhciBpbmRlbnRTdGFja0ZyYW1lcyA9IGZhbHNlO1xudmFyIHByaW50V2FybmluZztcbnZhciBkZWJ1Z2dpbmcgPSAhISh1dGlsLmVudihcIkJMVUVCSVJEX0RFQlVHXCIpICE9IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICh0cnVlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5lbnYoXCJCTFVFQklSRF9ERUJVR1wiKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuZW52KFwiTk9ERV9FTlZcIikgPT09IFwiZGV2ZWxvcG1lbnRcIikpO1xuXG52YXIgd2FybmluZ3MgPSAhISh1dGlsLmVudihcIkJMVUVCSVJEX1dBUk5JTkdTXCIpICE9IDAgJiZcbiAgICAoZGVidWdnaW5nIHx8IHV0aWwuZW52KFwiQkxVRUJJUkRfV0FSTklOR1NcIikpKTtcblxudmFyIGxvbmdTdGFja1RyYWNlcyA9ICEhKHV0aWwuZW52KFwiQkxVRUJJUkRfTE9OR19TVEFDS19UUkFDRVNcIikgIT0gMCAmJlxuICAgIChkZWJ1Z2dpbmcgfHwgdXRpbC5lbnYoXCJCTFVFQklSRF9MT05HX1NUQUNLX1RSQUNFU1wiKSkpO1xuXG52YXIgd0ZvcmdvdHRlblJldHVybiA9IHV0aWwuZW52KFwiQkxVRUJJUkRfV19GT1JHT1RURU5fUkVUVVJOXCIpICE9IDAgJiZcbiAgICAod2FybmluZ3MgfHwgISF1dGlsLmVudihcIkJMVUVCSVJEX1dfRk9SR09UVEVOX1JFVFVSTlwiKSk7XG5cblByb21pc2UucHJvdG90eXBlLnN1cHByZXNzVW5oYW5kbGVkUmVqZWN0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLl90YXJnZXQoKTtcbiAgICB0YXJnZXQuX2JpdEZpZWxkID0gKCh0YXJnZXQuX2JpdEZpZWxkICYgKH4xMDQ4NTc2KSkgfFxuICAgICAgICAgICAgICAgICAgICAgIDUyNDI4OCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZW5zdXJlUG9zc2libGVSZWplY3Rpb25IYW5kbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICgodGhpcy5fYml0RmllbGQgJiA1MjQyODgpICE9PSAwKSByZXR1cm47XG4gICAgdGhpcy5fc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKTtcbiAgICBhc3luYy5pbnZva2VMYXRlcih0aGlzLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb24sIHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbm90aWZ5VW5oYW5kbGVkUmVqZWN0aW9uSXNIYW5kbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIGZpcmVSZWplY3Rpb25FdmVudChcInJlamVjdGlvbkhhbmRsZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkLCB1bmRlZmluZWQsIHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFJldHVybmVkTm9uVW5kZWZpbmVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDI2ODQzNTQ1Njtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZXR1cm5lZE5vblVuZGVmaW5lZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAyNjg0MzU0NTYpICE9PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5faXNSZWplY3Rpb25VbmhhbmRsZWQoKSkge1xuICAgICAgICB2YXIgcmVhc29uID0gdGhpcy5fc2V0dGxlZFZhbHVlKCk7XG4gICAgICAgIHRoaXMuX3NldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQoKTtcbiAgICAgICAgZmlyZVJlamVjdGlvbkV2ZW50KFwidW5oYW5kbGVkUmVqZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uLCByZWFzb24sIHRoaXMpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAyNjIxNDQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdW5zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjI2MjE0NCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNVbmhhbmRsZWRSZWplY3Rpb25Ob3RpZmllZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMjYyMTQ0KSA+IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDEwNDg1NzY7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkICYgKH4xMDQ4NTc2KTtcbiAgICBpZiAodGhpcy5faXNVbmhhbmRsZWRSZWplY3Rpb25Ob3RpZmllZCgpKSB7XG4gICAgICAgIHRoaXMuX3Vuc2V0VW5oYW5kbGVkUmVqZWN0aW9uSXNOb3RpZmllZCgpO1xuICAgICAgICB0aGlzLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb25Jc0hhbmRsZWQoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNSZWplY3Rpb25VbmhhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDEwNDg1NzYpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl93YXJuID0gZnVuY3Rpb24obWVzc2FnZSwgc2hvdWxkVXNlT3duVHJhY2UsIHByb21pc2UpIHtcbiAgICByZXR1cm4gd2FybihtZXNzYWdlLCBzaG91bGRVc2VPd25UcmFjZSwgcHJvbWlzZSB8fCB0aGlzKTtcbn07XG5cblByb21pc2Uub25Qb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9IGZ1bmN0aW9uIChmbikge1xuICAgIHZhciBkb21haW4gPSBnZXREb21haW4oKTtcbiAgICBwb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9XG4gICAgICAgIHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiID8gKGRvbWFpbiA9PT0gbnVsbCA/IGZuIDogZG9tYWluLmJpbmQoZm4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG59O1xuXG5Qcm9taXNlLm9uVW5oYW5kbGVkUmVqZWN0aW9uSGFuZGxlZCA9IGZ1bmN0aW9uIChmbikge1xuICAgIHZhciBkb21haW4gPSBnZXREb21haW4oKTtcbiAgICB1bmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkID1cbiAgICAgICAgdHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIgPyAoZG9tYWluID09PSBudWxsID8gZm4gOiBkb21haW4uYmluZChmbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbn07XG5cbnZhciBkaXNhYmxlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7fTtcblByb21pc2UubG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChhc3luYy5oYXZlSXRlbXNRdWV1ZWQoKSAmJiAhY29uZmlnLmxvbmdTdGFja1RyYWNlcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYW5ub3QgZW5hYmxlIGxvbmcgc3RhY2sgdHJhY2VzIGFmdGVyIHByb21pc2VzIGhhdmUgYmVlbiBjcmVhdGVkXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgaWYgKCFjb25maWcubG9uZ1N0YWNrVHJhY2VzICYmIGxvbmdTdGFja1RyYWNlc0lzU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgdmFyIFByb21pc2VfY2FwdHVyZVN0YWNrVHJhY2UgPSBQcm9taXNlLnByb3RvdHlwZS5fY2FwdHVyZVN0YWNrVHJhY2U7XG4gICAgICAgIHZhciBQcm9taXNlX2F0dGFjaEV4dHJhVHJhY2UgPSBQcm9taXNlLnByb3RvdHlwZS5fYXR0YWNoRXh0cmFUcmFjZTtcbiAgICAgICAgY29uZmlnLmxvbmdTdGFja1RyYWNlcyA9IHRydWU7XG4gICAgICAgIGRpc2FibGVMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChhc3luYy5oYXZlSXRlbXNRdWV1ZWQoKSAmJiAhY29uZmlnLmxvbmdTdGFja1RyYWNlcykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbm5vdCBlbmFibGUgbG9uZyBzdGFjayB0cmFjZXMgYWZ0ZXIgcHJvbWlzZXMgaGF2ZSBiZWVuIGNyZWF0ZWRcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2NhcHR1cmVTdGFja1RyYWNlID0gUHJvbWlzZV9jYXB0dXJlU3RhY2tUcmFjZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hFeHRyYVRyYWNlID0gUHJvbWlzZV9hdHRhY2hFeHRyYVRyYWNlO1xuICAgICAgICAgICAgQ29udGV4dC5kZWFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzKCk7XG4gICAgICAgICAgICBhc3luYy5lbmFibGVUcmFtcG9saW5lKCk7XG4gICAgICAgICAgICBjb25maWcubG9uZ1N0YWNrVHJhY2VzID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZSA9IGxvbmdTdGFja1RyYWNlc0NhcHR1cmVTdGFja1RyYWNlO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fYXR0YWNoRXh0cmFUcmFjZSA9IGxvbmdTdGFja1RyYWNlc0F0dGFjaEV4dHJhVHJhY2U7XG4gICAgICAgIENvbnRleHQuYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMoKTtcbiAgICAgICAgYXN5bmMuZGlzYWJsZVRyYW1wb2xpbmVJZk5lY2Vzc2FyeSgpO1xuICAgIH1cbn07XG5cblByb21pc2UuaGFzTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjb25maWcubG9uZ1N0YWNrVHJhY2VzICYmIGxvbmdTdGFja1RyYWNlc0lzU3VwcG9ydGVkKCk7XG59O1xuXG52YXIgZmlyZURvbUV2ZW50ID0gKGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7XG4gICAgICAgIGV2ZW50LmluaXRDdXN0b21FdmVudChcInRlc3Rpbmd0aGVldmVudFwiLCBmYWxzZSwgdHJ1ZSwge30pO1xuICAgICAgICB1dGlsLmdsb2JhbC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgZG9tRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO1xuICAgICAgICAgICAgZG9tRXZlbnQuaW5pdEN1c3RvbUV2ZW50KG5hbWUudG9Mb3dlckNhc2UoKSwgZmFsc2UsIHRydWUsIGV2ZW50KTtcbiAgICAgICAgICAgIHJldHVybiAhdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChkb21FdmVudCk7XG4gICAgICAgIH07XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufSkoKTtcblxudmFyIGZpcmVHbG9iYWxFdmVudCA9IChmdW5jdGlvbigpIHtcbiAgICBpZiAodXRpbC5pc05vZGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3MuZW1pdC5hcHBseShwcm9jZXNzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdXRpbC5nbG9iYWwpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IFwib25cIiArIG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSB1dGlsLmdsb2JhbFttZXRob2ROYW1lXTtcbiAgICAgICAgICAgIGlmICghbWV0aG9kKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBtZXRob2QuYXBwbHkodXRpbC5nbG9iYWwsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdChuYW1lLCBwcm9taXNlKSB7XG4gICAgcmV0dXJuIHtwcm9taXNlOiBwcm9taXNlfTtcbn1cblxudmFyIGV2ZW50VG9PYmplY3RHZW5lcmF0b3IgPSB7XG4gICAgcHJvbWlzZUNyZWF0ZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VGdWxmaWxsZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VSZWplY3RlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3QsXG4gICAgcHJvbWlzZVJlc29sdmVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlQ2FuY2VsbGVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlQ2hhaW5lZDogZnVuY3Rpb24obmFtZSwgcHJvbWlzZSwgY2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIHtwcm9taXNlOiBwcm9taXNlLCBjaGlsZDogY2hpbGR9O1xuICAgIH0sXG4gICAgd2FybmluZzogZnVuY3Rpb24obmFtZSwgd2FybmluZykge1xuICAgICAgICByZXR1cm4ge3dhcm5pbmc6IHdhcm5pbmd9O1xuICAgIH0sXG4gICAgdW5oYW5kbGVkUmVqZWN0aW9uOiBmdW5jdGlvbiAobmFtZSwgcmVhc29uLCBwcm9taXNlKSB7XG4gICAgICAgIHJldHVybiB7cmVhc29uOiByZWFzb24sIHByb21pc2U6IHByb21pc2V9O1xuICAgIH0sXG4gICAgcmVqZWN0aW9uSGFuZGxlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3Rcbn07XG5cbnZhciBhY3RpdmVGaXJlRXZlbnQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBnbG9iYWxFdmVudEZpcmVkID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgZ2xvYmFsRXZlbnRGaXJlZCA9IGZpcmVHbG9iYWxFdmVudC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlKTtcbiAgICAgICAgZ2xvYmFsRXZlbnRGaXJlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGRvbUV2ZW50RmlyZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBkb21FdmVudEZpcmVkID0gZmlyZURvbUV2ZW50KG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VG9PYmplY3RHZW5lcmF0b3JbbmFtZV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUpO1xuICAgICAgICBkb21FdmVudEZpcmVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tRXZlbnRGaXJlZCB8fCBnbG9iYWxFdmVudEZpcmVkO1xufTtcblxuUHJvbWlzZS5jb25maWcgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgb3B0cyA9IE9iamVjdChvcHRzKTtcbiAgICBpZiAoXCJsb25nU3RhY2tUcmFjZXNcIiBpbiBvcHRzKSB7XG4gICAgICAgIGlmIChvcHRzLmxvbmdTdGFja1RyYWNlcykge1xuICAgICAgICAgICAgUHJvbWlzZS5sb25nU3RhY2tUcmFjZXMoKTtcbiAgICAgICAgfSBlbHNlIGlmICghb3B0cy5sb25nU3RhY2tUcmFjZXMgJiYgUHJvbWlzZS5oYXNMb25nU3RhY2tUcmFjZXMoKSkge1xuICAgICAgICAgICAgZGlzYWJsZUxvbmdTdGFja1RyYWNlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChcIndhcm5pbmdzXCIgaW4gb3B0cykge1xuICAgICAgICB2YXIgd2FybmluZ3NPcHRpb24gPSBvcHRzLndhcm5pbmdzO1xuICAgICAgICBjb25maWcud2FybmluZ3MgPSAhIXdhcm5pbmdzT3B0aW9uO1xuICAgICAgICB3Rm9yZ290dGVuUmV0dXJuID0gY29uZmlnLndhcm5pbmdzO1xuXG4gICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KHdhcm5pbmdzT3B0aW9uKSkge1xuICAgICAgICAgICAgaWYgKFwid0ZvcmdvdHRlblJldHVyblwiIGluIHdhcm5pbmdzT3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgd0ZvcmdvdHRlblJldHVybiA9ICEhd2FybmluZ3NPcHRpb24ud0ZvcmdvdHRlblJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoXCJjYW5jZWxsYXRpb25cIiBpbiBvcHRzICYmIG9wdHMuY2FuY2VsbGF0aW9uICYmICFjb25maWcuY2FuY2VsbGF0aW9uKSB7XG4gICAgICAgIGlmIChhc3luYy5oYXZlSXRlbXNRdWV1ZWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIFwiY2Fubm90IGVuYWJsZSBjYW5jZWxsYXRpb24gYWZ0ZXIgcHJvbWlzZXMgYXJlIGluIHVzZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fY2xlYXJDYW5jZWxsYXRpb25EYXRhID1cbiAgICAgICAgICAgIGNhbmNlbGxhdGlvbkNsZWFyQ2FuY2VsbGF0aW9uRGF0YTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fb25DYW5jZWwgPSBjYW5jZWxsYXRpb25PbkNhbmNlbDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3NldE9uQ2FuY2VsID0gY2FuY2VsbGF0aW9uU2V0T25DYW5jZWw7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayA9XG4gICAgICAgICAgICBjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjaztcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBjYW5jZWxsYXRpb25FeGVjdXRlO1xuICAgICAgICBwcm9wYWdhdGVGcm9tRnVuY3Rpb24gPSBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tO1xuICAgICAgICBjb25maWcuY2FuY2VsbGF0aW9uID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKFwibW9uaXRvcmluZ1wiIGluIG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMubW9uaXRvcmluZyAmJiAhY29uZmlnLm1vbml0b3JpbmcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5tb25pdG9yaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBhY3RpdmVGaXJlRXZlbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAoIW9wdHMubW9uaXRvcmluZyAmJiBjb25maWcubW9uaXRvcmluZykge1xuICAgICAgICAgICAgY29uZmlnLm1vbml0b3JpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBkZWZhdWx0RmlyZUV2ZW50O1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZnVuY3Rpb24gZGVmYXVsdEZpcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG5cblByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBkZWZhdWx0RmlyZUV2ZW50O1xuUHJvbWlzZS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBmdW5jdGlvbihleGVjdXRvciwgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn07XG5Qcm9taXNlLnByb3RvdHlwZS5fb25DYW5jZWwgPSBmdW5jdGlvbiAoKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9zZXRPbkNhbmNlbCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7IDsgfTtcblByb21pc2UucHJvdG90eXBlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uKG9uQ2FuY2VsKSB7XG4gICAgO1xufTtcblByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZSA9IGZ1bmN0aW9uICgpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2UgPSBmdW5jdGlvbiAoKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9jbGVhckNhbmNlbGxhdGlvbkRhdGEgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBmdW5jdGlvbiAocGFyZW50LCBmbGFncykge1xuICAgIDtcbiAgICA7XG59O1xuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25FeGVjdXRlKGV4ZWN1dG9yLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0LCBmdW5jdGlvbihvbkNhbmNlbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbkNhbmNlbCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIm9uQ2FuY2VsIG11c3QgYmUgYSBmdW5jdGlvbiwgZ290OiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLnRvU3RyaW5nKG9uQ2FuY2VsKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhvbkNhbmNlbCk7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhvbkNhbmNlbCkge1xuICAgIGlmICghdGhpcy5pc0NhbmNlbGxhYmxlKCkpIHJldHVybiB0aGlzO1xuXG4gICAgdmFyIHByZXZpb3VzT25DYW5jZWwgPSB0aGlzLl9vbkNhbmNlbCgpO1xuICAgIGlmIChwcmV2aW91c09uQ2FuY2VsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHV0aWwuaXNBcnJheShwcmV2aW91c09uQ2FuY2VsKSkge1xuICAgICAgICAgICAgcHJldmlvdXNPbkNhbmNlbC5wdXNoKG9uQ2FuY2VsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NldE9uQ2FuY2VsKFtwcmV2aW91c09uQ2FuY2VsLCBvbkNhbmNlbF0pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc2V0T25DYW5jZWwob25DYW5jZWwpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2FuY2VsbGF0aW9uT25DYW5jZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29uQ2FuY2VsRmllbGQ7XG59XG5cbmZ1bmN0aW9uIGNhbmNlbGxhdGlvblNldE9uQ2FuY2VsKG9uQ2FuY2VsKSB7XG4gICAgdGhpcy5fb25DYW5jZWxGaWVsZCA9IG9uQ2FuY2VsO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25DbGVhckNhbmNlbGxhdGlvbkRhdGEoKSB7XG4gICAgdGhpcy5fY2FuY2VsbGF0aW9uUGFyZW50ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX29uQ2FuY2VsRmllbGQgPSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGNhbmNlbGxhdGlvblByb3BhZ2F0ZUZyb20ocGFyZW50LCBmbGFncykge1xuICAgIGlmICgoZmxhZ3MgJiAxKSAhPT0gMCkge1xuICAgICAgICB0aGlzLl9jYW5jZWxsYXRpb25QYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHZhciBicmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gcGFyZW50Ll9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsO1xuICAgICAgICBpZiAoYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBicmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gMDtcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnQuX2JyYW5jaGVzUmVtYWluaW5nVG9DYW5jZWwgPSBicmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsICsgMTtcbiAgICB9XG4gICAgaWYgKChmbGFncyAmIDIpICE9PSAwICYmIHBhcmVudC5faXNCb3VuZCgpKSB7XG4gICAgICAgIHRoaXMuX3NldEJvdW5kVG8ocGFyZW50Ll9ib3VuZFRvKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJpbmRpbmdQcm9wYWdhdGVGcm9tKHBhcmVudCwgZmxhZ3MpIHtcbiAgICBpZiAoKGZsYWdzICYgMikgIT09IDAgJiYgcGFyZW50Ll9pc0JvdW5kKCkpIHtcbiAgICAgICAgdGhpcy5fc2V0Qm91bmRUbyhwYXJlbnQuX2JvdW5kVG8pO1xuICAgIH1cbn1cbnZhciBwcm9wYWdhdGVGcm9tRnVuY3Rpb24gPSBiaW5kaW5nUHJvcGFnYXRlRnJvbTtcblxuZnVuY3Rpb24gYm91bmRWYWx1ZUZ1bmN0aW9uKCkge1xuICAgIHZhciByZXQgPSB0aGlzLl9ib3VuZFRvO1xuICAgIGlmIChyZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAocmV0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgaWYgKHJldC5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldC52YWx1ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGxvbmdTdGFja1RyYWNlc0NhcHR1cmVTdGFja1RyYWNlKCkge1xuICAgIHRoaXMuX3RyYWNlID0gbmV3IENhcHR1cmVkVHJhY2UodGhpcy5fcGVla0NvbnRleHQoKSk7XG59XG5cbmZ1bmN0aW9uIGxvbmdTdGFja1RyYWNlc0F0dGFjaEV4dHJhVHJhY2UoZXJyb3IsIGlnbm9yZVNlbGYpIHtcbiAgICBpZiAoY2FuQXR0YWNoVHJhY2UoZXJyb3IpKSB7XG4gICAgICAgIHZhciB0cmFjZSA9IHRoaXMuX3RyYWNlO1xuICAgICAgICBpZiAodHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKGlnbm9yZVNlbGYpIHRyYWNlID0gdHJhY2UuX3BhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdHJhY2UuYXR0YWNoRXh0cmFUcmFjZShlcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoIWVycm9yLl9fc3RhY2tDbGVhbmVkX18pIHtcbiAgICAgICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcik7XG4gICAgICAgICAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKGVycm9yLCBcInN0YWNrXCIsXG4gICAgICAgICAgICAgICAgcGFyc2VkLm1lc3NhZ2UgKyBcIlxcblwiICsgcGFyc2VkLnN0YWNrLmpvaW4oXCJcXG5cIikpO1xuICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChlcnJvciwgXCJfX3N0YWNrQ2xlYW5lZF9fXCIsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjaGVja0ZvcmdvdHRlblJldHVybnMocmV0dXJuVmFsdWUsIHByb21pc2VDcmVhdGVkLCBuYW1lLCBwcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCkge1xuICAgIGlmIChyZXR1cm5WYWx1ZSA9PT0gdW5kZWZpbmVkICYmIHByb21pc2VDcmVhdGVkICE9PSBudWxsICYmXG4gICAgICAgIHdGb3Jnb3R0ZW5SZXR1cm4pIHtcbiAgICAgICAgaWYgKHBhcmVudCAhPT0gdW5kZWZpbmVkICYmIHBhcmVudC5fcmV0dXJuZWROb25VbmRlZmluZWQoKSkgcmV0dXJuO1xuICAgICAgICBpZiAoKHByb21pc2UuX2JpdEZpZWxkICYgNjU1MzUpID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgaWYgKG5hbWUpIG5hbWUgPSBuYW1lICsgXCIgXCI7XG4gICAgICAgIHZhciBtc2cgPSBcImEgcHJvbWlzZSB3YXMgY3JlYXRlZCBpbiBhIFwiICsgbmFtZSArXG4gICAgICAgICAgICBcImhhbmRsZXIgYnV0IHdhcyBub3QgcmV0dXJuZWQgZnJvbSBpdFwiO1xuICAgICAgICBwcm9taXNlLl93YXJuKG1zZywgdHJ1ZSwgcHJvbWlzZUNyZWF0ZWQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVwcmVjYXRlZChuYW1lLCByZXBsYWNlbWVudCkge1xuICAgIHZhciBtZXNzYWdlID0gbmFtZSArXG4gICAgICAgIFwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uLlwiO1xuICAgIGlmIChyZXBsYWNlbWVudCkgbWVzc2FnZSArPSBcIiBVc2UgXCIgKyByZXBsYWNlbWVudCArIFwiIGluc3RlYWQuXCI7XG4gICAgcmV0dXJuIHdhcm4obWVzc2FnZSk7XG59XG5cbmZ1bmN0aW9uIHdhcm4obWVzc2FnZSwgc2hvdWxkVXNlT3duVHJhY2UsIHByb21pc2UpIHtcbiAgICBpZiAoIWNvbmZpZy53YXJuaW5ncykgcmV0dXJuO1xuICAgIHZhciB3YXJuaW5nID0gbmV3IFdhcm5pbmcobWVzc2FnZSk7XG4gICAgdmFyIGN0eDtcbiAgICBpZiAoc2hvdWxkVXNlT3duVHJhY2UpIHtcbiAgICAgICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZSh3YXJuaW5nKTtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgKGN0eCA9IFByb21pc2UuX3BlZWtDb250ZXh0KCkpKSB7XG4gICAgICAgIGN0eC5hdHRhY2hFeHRyYVRyYWNlKHdhcm5pbmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZSh3YXJuaW5nKTtcbiAgICAgICAgd2FybmluZy5zdGFjayA9IHBhcnNlZC5tZXNzYWdlICsgXCJcXG5cIiArIHBhcnNlZC5zdGFjay5qb2luKFwiXFxuXCIpO1xuICAgIH1cblxuICAgIGlmICghYWN0aXZlRmlyZUV2ZW50KFwid2FybmluZ1wiLCB3YXJuaW5nKSkge1xuICAgICAgICBmb3JtYXRBbmRMb2dFcnJvcih3YXJuaW5nLCBcIlwiLCB0cnVlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlY29uc3RydWN0U3RhY2sobWVzc2FnZSwgc3RhY2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgIHN0YWNrc1tpXS5wdXNoKFwiRnJvbSBwcmV2aW91cyBldmVudDpcIik7XG4gICAgICAgIHN0YWNrc1tpXSA9IHN0YWNrc1tpXS5qb2luKFwiXFxuXCIpO1xuICAgIH1cbiAgICBpZiAoaSA8IHN0YWNrcy5sZW5ndGgpIHtcbiAgICAgICAgc3RhY2tzW2ldID0gc3RhY2tzW2ldLmpvaW4oXCJcXG5cIik7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlICsgXCJcXG5cIiArIHN0YWNrcy5qb2luKFwiXFxuXCIpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVEdXBsaWNhdGVPckVtcHR5SnVtcHMoc3RhY2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKHN0YWNrc1tpXS5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICgoaSArIDEgPCBzdGFja3MubGVuZ3RoKSAmJiBzdGFja3NbaV1bMF0gPT09IHN0YWNrc1tpKzFdWzBdKSkge1xuICAgICAgICAgICAgc3RhY2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ29tbW9uUm9vdHMoc3RhY2tzKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBzdGFja3NbMF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzdGFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHByZXYgPSBzdGFja3NbaV07XG4gICAgICAgIHZhciBjdXJyZW50TGFzdEluZGV4ID0gY3VycmVudC5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgY3VycmVudExhc3RMaW5lID0gY3VycmVudFtjdXJyZW50TGFzdEluZGV4XTtcbiAgICAgICAgdmFyIGNvbW1vblJvb3RNZWV0UG9pbnQgPSAtMTtcblxuICAgICAgICBmb3IgKHZhciBqID0gcHJldi5sZW5ndGggLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgaWYgKHByZXZbal0gPT09IGN1cnJlbnRMYXN0TGluZSkge1xuICAgICAgICAgICAgICAgIGNvbW1vblJvb3RNZWV0UG9pbnQgPSBqO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IGNvbW1vblJvb3RNZWV0UG9pbnQ7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgICAgICB2YXIgbGluZSA9IHByZXZbal07XG4gICAgICAgICAgICBpZiAoY3VycmVudFtjdXJyZW50TGFzdEluZGV4XSA9PT0gbGluZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQucG9wKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudExhc3RJbmRleC0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gcHJldjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNsZWFuU3RhY2soc3RhY2spIHtcbiAgICB2YXIgcmV0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICB2YXIgaXNUcmFjZUxpbmUgPSBcIiAgICAoTm8gc3RhY2sgdHJhY2UpXCIgPT09IGxpbmUgfHxcbiAgICAgICAgICAgIHN0YWNrRnJhbWVQYXR0ZXJuLnRlc3QobGluZSk7XG4gICAgICAgIHZhciBpc0ludGVybmFsRnJhbWUgPSBpc1RyYWNlTGluZSAmJiBzaG91bGRJZ25vcmUobGluZSk7XG4gICAgICAgIGlmIChpc1RyYWNlTGluZSAmJiAhaXNJbnRlcm5hbEZyYW1lKSB7XG4gICAgICAgICAgICBpZiAoaW5kZW50U3RhY2tGcmFtZXMgJiYgbGluZS5jaGFyQXQoMCkgIT09IFwiIFwiKSB7XG4gICAgICAgICAgICAgICAgbGluZSA9IFwiICAgIFwiICsgbGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldC5wdXNoKGxpbmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHN0YWNrRnJhbWVzQXNBcnJheShlcnJvcikge1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrLnJlcGxhY2UoL1xccyskL2csIFwiXCIpLnNwbGl0KFwiXFxuXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhY2subGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBzdGFja1tpXTtcbiAgICAgICAgaWYgKFwiICAgIChObyBzdGFjayB0cmFjZSlcIiA9PT0gbGluZSB8fCBzdGFja0ZyYW1lUGF0dGVybi50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgc3RhY2sgPSBzdGFjay5zbGljZShpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YWNrO1xufVxuXG5mdW5jdGlvbiBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcikge1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrO1xuICAgIHZhciBtZXNzYWdlID0gZXJyb3IudG9TdHJpbmcoKTtcbiAgICBzdGFjayA9IHR5cGVvZiBzdGFjayA9PT0gXCJzdHJpbmdcIiAmJiBzdGFjay5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyBzdGFja0ZyYW1lc0FzQXJyYXkoZXJyb3IpIDogW1wiICAgIChObyBzdGFjayB0cmFjZSlcIl07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGNsZWFuU3RhY2soc3RhY2spXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0QW5kTG9nRXJyb3IoZXJyb3IsIHRpdGxlLCBpc1NvZnQpIHtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2U7XG4gICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KGVycm9yKSkge1xuICAgICAgICAgICAgdmFyIHN0YWNrID0gZXJyb3Iuc3RhY2s7XG4gICAgICAgICAgICBtZXNzYWdlID0gdGl0bGUgKyBmb3JtYXRTdGFjayhzdGFjaywgZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRpdGxlICsgU3RyaW5nKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHByaW50V2FybmluZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBwcmludFdhcm5pbmcobWVzc2FnZSwgaXNTb2Z0KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uc29sZS5sb2cgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUubG9nID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZmlyZVJlamVjdGlvbkV2ZW50KG5hbWUsIGxvY2FsSGFuZGxlciwgcmVhc29uLCBwcm9taXNlKSB7XG4gICAgdmFyIGxvY2FsRXZlbnRGaXJlZCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgbG9jYWxIYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGxvY2FsRXZlbnRGaXJlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gXCJyZWplY3Rpb25IYW5kbGVkXCIpIHtcbiAgICAgICAgICAgICAgICBsb2NhbEhhbmRsZXIocHJvbWlzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2FsSGFuZGxlcihyZWFzb24sIHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUpO1xuICAgIH1cblxuICAgIGlmIChuYW1lID09PSBcInVuaGFuZGxlZFJlamVjdGlvblwiKSB7XG4gICAgICAgIGlmICghYWN0aXZlRmlyZUV2ZW50KG5hbWUsIHJlYXNvbiwgcHJvbWlzZSkgJiYgIWxvY2FsRXZlbnRGaXJlZCkge1xuICAgICAgICAgICAgZm9ybWF0QW5kTG9nRXJyb3IocmVhc29uLCBcIlVuaGFuZGxlZCByZWplY3Rpb24gXCIpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZlRmlyZUV2ZW50KG5hbWUsIHByb21pc2UpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0Tm9uRXJyb3Iob2JqKSB7XG4gICAgdmFyIHN0cjtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHN0ciA9IFwiW2Z1bmN0aW9uIFwiICtcbiAgICAgICAgICAgIChvYmoubmFtZSB8fCBcImFub255bW91c1wiKSArXG4gICAgICAgICAgICBcIl1cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdHIgPSBvYmogJiYgdHlwZW9mIG9iai50b1N0cmluZyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICA/IG9iai50b1N0cmluZygpIDogdXRpbC50b1N0cmluZyhvYmopO1xuICAgICAgICB2YXIgcnVzZWxlc3NUb1N0cmluZyA9IC9cXFtvYmplY3QgW2EtekEtWjAtOSRfXStcXF0vO1xuICAgICAgICBpZiAocnVzZWxlc3NUb1N0cmluZy50ZXN0KHN0cikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1N0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7XG4gICAgICAgICAgICAgICAgc3RyID0gbmV3U3RyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2goZSkge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHN0ciA9IFwiKGVtcHR5IGFycmF5KVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAoXCIoPFwiICsgc25pcChzdHIpICsgXCI+LCBubyBzdGFjayB0cmFjZSlcIik7XG59XG5cbmZ1bmN0aW9uIHNuaXAoc3RyKSB7XG4gICAgdmFyIG1heENoYXJzID0gNDE7XG4gICAgaWYgKHN0ci5sZW5ndGggPCBtYXhDaGFycykge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICByZXR1cm4gc3RyLnN1YnN0cigwLCBtYXhDaGFycyAtIDMpICsgXCIuLi5cIjtcbn1cblxuZnVuY3Rpb24gbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBjYXB0dXJlU3RhY2tUcmFjZSA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG52YXIgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfTtcbnZhciBwYXJzZUxpbmVJbmZvUmVnZXggPSAvW1xcLzxcXChdKFteOlxcL10rKTooXFxkKyk6KD86XFxkKylcXCk/XFxzKiQvO1xuZnVuY3Rpb24gcGFyc2VMaW5lSW5mbyhsaW5lKSB7XG4gICAgdmFyIG1hdGNoZXMgPSBsaW5lLm1hdGNoKHBhcnNlTGluZUluZm9SZWdleCk7XG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbGVOYW1lOiBtYXRjaGVzWzFdLFxuICAgICAgICAgICAgbGluZTogcGFyc2VJbnQobWF0Y2hlc1syXSwgMTApXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRCb3VuZHMoZmlyc3RMaW5lRXJyb3IsIGxhc3RMaW5lRXJyb3IpIHtcbiAgICBpZiAoIWxvbmdTdGFja1RyYWNlc0lzU3VwcG9ydGVkKCkpIHJldHVybjtcbiAgICB2YXIgZmlyc3RTdGFja0xpbmVzID0gZmlyc3RMaW5lRXJyb3Iuc3RhY2suc3BsaXQoXCJcXG5cIik7XG4gICAgdmFyIGxhc3RTdGFja0xpbmVzID0gbGFzdExpbmVFcnJvci5zdGFjay5zcGxpdChcIlxcblwiKTtcbiAgICB2YXIgZmlyc3RJbmRleCA9IC0xO1xuICAgIHZhciBsYXN0SW5kZXggPSAtMTtcbiAgICB2YXIgZmlyc3RGaWxlTmFtZTtcbiAgICB2YXIgbGFzdEZpbGVOYW1lO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3RTdGFja0xpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUxpbmVJbmZvKGZpcnN0U3RhY2tMaW5lc1tpXSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGZpcnN0RmlsZU5hbWUgPSByZXN1bHQuZmlsZU5hbWU7XG4gICAgICAgICAgICBmaXJzdEluZGV4ID0gcmVzdWx0LmxpbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RTdGFja0xpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUxpbmVJbmZvKGxhc3RTdGFja0xpbmVzW2ldKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgbGFzdEZpbGVOYW1lID0gcmVzdWx0LmZpbGVOYW1lO1xuICAgICAgICAgICAgbGFzdEluZGV4ID0gcmVzdWx0LmxpbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmlyc3RJbmRleCA8IDAgfHwgbGFzdEluZGV4IDwgMCB8fCAhZmlyc3RGaWxlTmFtZSB8fCAhbGFzdEZpbGVOYW1lIHx8XG4gICAgICAgIGZpcnN0RmlsZU5hbWUgIT09IGxhc3RGaWxlTmFtZSB8fCBmaXJzdEluZGV4ID49IGxhc3RJbmRleCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICBpZiAoYmx1ZWJpcmRGcmFtZVBhdHRlcm4udGVzdChsaW5lKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHZhciBpbmZvID0gcGFyc2VMaW5lSW5mbyhsaW5lKTtcbiAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgIGlmIChpbmZvLmZpbGVOYW1lID09PSBmaXJzdEZpbGVOYW1lICYmXG4gICAgICAgICAgICAgICAgKGZpcnN0SW5kZXggPD0gaW5mby5saW5lICYmIGluZm8ubGluZSA8PSBsYXN0SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIENhcHR1cmVkVHJhY2UocGFyZW50KSB7XG4gICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgIHRoaXMuX3Byb21pc2VzQ3JlYXRlZCA9IDA7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuX2xlbmd0aCA9IDEgKyAocGFyZW50ID09PSB1bmRlZmluZWQgPyAwIDogcGFyZW50Ll9sZW5ndGgpO1xuICAgIGNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIENhcHR1cmVkVHJhY2UpO1xuICAgIGlmIChsZW5ndGggPiAzMikgdGhpcy51bmN5Y2xlKCk7XG59XG51dGlsLmluaGVyaXRzKENhcHR1cmVkVHJhY2UsIEVycm9yKTtcbkNvbnRleHQuQ2FwdHVyZWRUcmFjZSA9IENhcHR1cmVkVHJhY2U7XG5cbkNhcHR1cmVkVHJhY2UucHJvdG90eXBlLnVuY3ljbGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoO1xuICAgIGlmIChsZW5ndGggPCAyKSByZXR1cm47XG4gICAgdmFyIG5vZGVzID0gW107XG4gICAgdmFyIHN0YWNrVG9JbmRleCA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIG5vZGUgPSB0aGlzOyBub2RlICE9PSB1bmRlZmluZWQ7ICsraSkge1xuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICBub2RlID0gbm9kZS5fcGFyZW50O1xuICAgIH1cbiAgICBsZW5ndGggPSB0aGlzLl9sZW5ndGggPSBpO1xuICAgIGZvciAodmFyIGkgPSBsZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgc3RhY2sgPSBub2Rlc1tpXS5zdGFjaztcbiAgICAgICAgaWYgKHN0YWNrVG9JbmRleFtzdGFja10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3RhY2tUb0luZGV4W3N0YWNrXSA9IGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY3VycmVudFN0YWNrID0gbm9kZXNbaV0uc3RhY2s7XG4gICAgICAgIHZhciBpbmRleCA9IHN0YWNrVG9JbmRleFtjdXJyZW50U3RhY2tdO1xuICAgICAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCAmJiBpbmRleCAhPT0gaSkge1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgIG5vZGVzW2luZGV4IC0gMV0uX3BhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBub2Rlc1tpbmRleCAtIDFdLl9sZW5ndGggPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZXNbaV0uX3BhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIG5vZGVzW2ldLl9sZW5ndGggPSAxO1xuICAgICAgICAgICAgdmFyIGN5Y2xlRWRnZU5vZGUgPSBpID4gMCA/IG5vZGVzW2kgLSAxXSA6IHRoaXM7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA8IGxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQgPSBub2Rlc1tpbmRleCArIDFdO1xuICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX3BhcmVudC51bmN5Y2xlKCk7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fbGVuZ3RoID1cbiAgICAgICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fcGFyZW50Ll9sZW5ndGggKyAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fbGVuZ3RoID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjdXJyZW50Q2hpbGRMZW5ndGggPSBjeWNsZUVkZ2VOb2RlLl9sZW5ndGggKyAxO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgLSAyOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgICAgIG5vZGVzW2pdLl9sZW5ndGggPSBjdXJyZW50Q2hpbGRMZW5ndGg7XG4gICAgICAgICAgICAgICAgY3VycmVudENoaWxkTGVuZ3RoKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5DYXB0dXJlZFRyYWNlLnByb3RvdHlwZS5hdHRhY2hFeHRyYVRyYWNlID0gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IuX19zdGFja0NsZWFuZWRfXykgcmV0dXJuO1xuICAgIHRoaXMudW5jeWNsZSgpO1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcik7XG4gICAgdmFyIG1lc3NhZ2UgPSBwYXJzZWQubWVzc2FnZTtcbiAgICB2YXIgc3RhY2tzID0gW3BhcnNlZC5zdGFja107XG5cbiAgICB2YXIgdHJhY2UgPSB0aGlzO1xuICAgIHdoaWxlICh0cmFjZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN0YWNrcy5wdXNoKGNsZWFuU3RhY2sodHJhY2Uuc3RhY2suc3BsaXQoXCJcXG5cIikpKTtcbiAgICAgICAgdHJhY2UgPSB0cmFjZS5fcGFyZW50O1xuICAgIH1cbiAgICByZW1vdmVDb21tb25Sb290cyhzdGFja3MpO1xuICAgIHJlbW92ZUR1cGxpY2F0ZU9yRW1wdHlKdW1wcyhzdGFja3MpO1xuICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AoZXJyb3IsIFwic3RhY2tcIiwgcmVjb25zdHJ1Y3RTdGFjayhtZXNzYWdlLCBzdGFja3MpKTtcbiAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKGVycm9yLCBcIl9fc3RhY2tDbGVhbmVkX19cIiwgdHJ1ZSk7XG59O1xuXG52YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSAoZnVuY3Rpb24gc3RhY2tEZXRlY3Rpb24oKSB7XG4gICAgdmFyIHY4c3RhY2tGcmFtZVBhdHRlcm4gPSAvXlxccyphdFxccyovO1xuICAgIHZhciB2OHN0YWNrRm9ybWF0dGVyID0gZnVuY3Rpb24oc3RhY2ssIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHJldHVybiBzdGFjaztcblxuICAgICAgICBpZiAoZXJyb3IubmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBlcnJvci5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvci50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtYXROb25FcnJvcihlcnJvcik7XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID09PSBcIm51bWJlclwiICYmXG4gICAgICAgIHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IHY4c3RhY2tGcmFtZVBhdHRlcm47XG4gICAgICAgIGZvcm1hdFN0YWNrID0gdjhzdGFja0Zvcm1hdHRlcjtcbiAgICAgICAgdmFyIGNhcHR1cmVTdGFja1RyYWNlID0gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U7XG5cbiAgICAgICAgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuIGJsdWViaXJkRnJhbWVQYXR0ZXJuLnRlc3QobGluZSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyZWNlaXZlciwgaWdub3JlVW50aWwpIHtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICAgICAgY2FwdHVyZVN0YWNrVHJhY2UocmVjZWl2ZXIsIGlnbm9yZVVudGlsKTtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCAtPSA2O1xuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKCk7XG5cbiAgICBpZiAodHlwZW9mIGVyci5zdGFjayA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICBlcnIuc3RhY2suc3BsaXQoXCJcXG5cIilbMF0uaW5kZXhPZihcInN0YWNrRGV0ZWN0aW9uQFwiKSA+PSAwKSB7XG4gICAgICAgIHN0YWNrRnJhbWVQYXR0ZXJuID0gL0AvO1xuICAgICAgICBmb3JtYXRTdGFjayA9IHY4c3RhY2tGb3JtYXR0ZXI7XG4gICAgICAgIGluZGVudFN0YWNrRnJhbWVzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhcHR1cmVTdGFja1RyYWNlKG8pIHtcbiAgICAgICAgICAgIG8uc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgaGFzU3RhY2tBZnRlclRocm93O1xuICAgIHRyeSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgICBoYXNTdGFja0FmdGVyVGhyb3cgPSAoXCJzdGFja1wiIGluIGUpO1xuICAgIH1cbiAgICBpZiAoIShcInN0YWNrXCIgaW4gZXJyKSAmJiBoYXNTdGFja0FmdGVyVGhyb3cgJiZcbiAgICAgICAgdHlwZW9mIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IHY4c3RhY2tGcmFtZVBhdHRlcm47XG4gICAgICAgIGZvcm1hdFN0YWNrID0gdjhzdGFja0Zvcm1hdHRlcjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhcHR1cmVTdGFja1RyYWNlKG8pIHtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICAgICAgdHJ5IHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICAgICAgICAgIGNhdGNoKGUpIHsgby5zdGFjayA9IGUuc3RhY2s7IH1cbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCAtPSA2O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZvcm1hdFN0YWNrID0gZnVuY3Rpb24oc3RhY2ssIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHJldHVybiBzdGFjaztcblxuICAgICAgICBpZiAoKHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGVycm9yID09PSBcImZ1bmN0aW9uXCIpICYmXG4gICAgICAgICAgICBlcnJvci5uYW1lICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm1hdE5vbkVycm9yKGVycm9yKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG51bGw7XG5cbn0pKFtdKTtcblxuaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBjb25zb2xlLndhcm4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBwcmludFdhcm5pbmcgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgfTtcbiAgICBpZiAodXRpbC5pc05vZGUgJiYgcHJvY2Vzcy5zdGRlcnIuaXNUVFkpIHtcbiAgICAgICAgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24obWVzc2FnZSwgaXNTb2Z0KSB7XG4gICAgICAgICAgICB2YXIgY29sb3IgPSBpc1NvZnQgPyBcIlxcdTAwMWJbMzNtXCIgOiBcIlxcdTAwMWJbMzFtXCI7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oY29sb3IgKyBtZXNzYWdlICsgXCJcXHUwMDFiWzBtXFxuXCIpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoIXV0aWwuaXNOb2RlICYmIHR5cGVvZiAobmV3IEVycm9yKCkuc3RhY2spID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHByaW50V2FybmluZyA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGlzU29mdCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiJWNcIiArIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NvZnQgPyBcImNvbG9yOiBkYXJrb3JhbmdlXCIgOiBcImNvbG9yOiByZWRcIik7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG52YXIgY29uZmlnID0ge1xuICAgIHdhcm5pbmdzOiB3YXJuaW5ncyxcbiAgICBsb25nU3RhY2tUcmFjZXM6IGZhbHNlLFxuICAgIGNhbmNlbGxhdGlvbjogZmFsc2UsXG4gICAgbW9uaXRvcmluZzogZmFsc2Vcbn07XG5cbmlmIChsb25nU3RhY2tUcmFjZXMpIFByb21pc2UubG9uZ1N0YWNrVHJhY2VzKCk7XG5cbnJldHVybiB7XG4gICAgbG9uZ1N0YWNrVHJhY2VzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5sb25nU3RhY2tUcmFjZXM7XG4gICAgfSxcbiAgICB3YXJuaW5nczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb25maWcud2FybmluZ3M7XG4gICAgfSxcbiAgICBjYW5jZWxsYXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uZmlnLmNhbmNlbGxhdGlvbjtcbiAgICB9LFxuICAgIG1vbml0b3Jpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uZmlnLm1vbml0b3Jpbmc7XG4gICAgfSxcbiAgICBwcm9wYWdhdGVGcm9tRnVuY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvcGFnYXRlRnJvbUZ1bmN0aW9uO1xuICAgIH0sXG4gICAgYm91bmRWYWx1ZUZ1bmN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJvdW5kVmFsdWVGdW5jdGlvbjtcbiAgICB9LFxuICAgIGNoZWNrRm9yZ290dGVuUmV0dXJuczogY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zLFxuICAgIHNldEJvdW5kczogc2V0Qm91bmRzLFxuICAgIHdhcm46IHdhcm4sXG4gICAgZGVwcmVjYXRlZDogZGVwcmVjYXRlZCxcbiAgICBDYXB0dXJlZFRyYWNlOiBDYXB0dXJlZFRyYWNlLFxuICAgIGZpcmVEb21FdmVudDogZmlyZURvbUV2ZW50LFxuICAgIGZpcmVHbG9iYWxFdmVudDogZmlyZUdsb2JhbEV2ZW50XG59O1xufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwxMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xuZnVuY3Rpb24gcmV0dXJuZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG59XG5mdW5jdGlvbiB0aHJvd2VyKCkge1xuICAgIHRocm93IHRoaXMucmVhc29uO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZVtcInJldHVyblwiXSA9XG5Qcm9taXNlLnByb3RvdHlwZS50aGVuUmV0dXJuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkgdmFsdWUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgIHJldHVybmVyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwge3ZhbHVlOiB2YWx1ZX0sIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZVtcInRocm93XCJdID1cblByb21pc2UucHJvdG90eXBlLnRoZW5UaHJvdyA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihcbiAgICAgICAgdGhyb3dlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtyZWFzb246IHJlYXNvbn0sIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5jYXRjaFRocm93ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICB1bmRlZmluZWQsIHRocm93ZXIsIHVuZGVmaW5lZCwge3JlYXNvbjogcmVhc29ufSwgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgX3JlYXNvbiA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbigpIHt0aHJvdyBfcmVhc29uO307XG4gICAgICAgIHJldHVybiB0aGlzLmNhdWdodChyZWFzb24sIGhhbmRsZXIpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLmNhdGNoUmV0dXJuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPD0gMSkge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB2YWx1ZS5zdXBwcmVzc1VuaGFuZGxlZFJlamVjdGlvbnMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICB1bmRlZmluZWQsIHJldHVybmVyLCB1bmRlZmluZWQsIHt2YWx1ZTogdmFsdWV9LCB1bmRlZmluZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfdmFsdWUgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIGlmIChfdmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSBfdmFsdWUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24oKSB7cmV0dXJuIF92YWx1ZTt9O1xuICAgICAgICByZXR1cm4gdGhpcy5jYXVnaHQodmFsdWUsIGhhbmRsZXIpO1xuICAgIH1cbn07XG59O1xuXG59LHt9XSwxMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciBQcm9taXNlUmVkdWNlID0gUHJvbWlzZS5yZWR1Y2U7XG52YXIgUHJvbWlzZUFsbCA9IFByb21pc2UuYWxsO1xuXG5mdW5jdGlvbiBwcm9taXNlQWxsVGhpcygpIHtcbiAgICByZXR1cm4gUHJvbWlzZUFsbCh0aGlzKTtcbn1cblxuZnVuY3Rpb24gUHJvbWlzZU1hcFNlcmllcyhwcm9taXNlcywgZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZShwcm9taXNlcywgZm4sIElOVEVSTkFMLCBJTlRFUk5BTCk7XG59XG5cblByb21pc2UucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gdGhpcy5tYXBTZXJpZXMoZm4pXG4gICAgICAgICAgICAuX3RoZW4ocHJvbWlzZUFsbFRoaXMsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubWFwU2VyaWVzID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgcmV0dXJuIFByb21pc2VSZWR1Y2UodGhpcywgZm4sIElOVEVSTkFMLCBJTlRFUk5BTCk7XG59O1xuXG5Qcm9taXNlLmVhY2ggPSBmdW5jdGlvbiAocHJvbWlzZXMsIGZuKSB7XG4gICAgcmV0dXJuIFByb21pc2VNYXBTZXJpZXMocHJvbWlzZXMsIGZuKVxuICAgICAgICAgICAgLl90aGVuKHByb21pc2VBbGxUaGlzLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcHJvbWlzZXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLm1hcFNlcmllcyA9IFByb21pc2VNYXBTZXJpZXM7XG59O1xuXG59LHt9XSwxMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgT2JqZWN0ZnJlZXplID0gZXM1LmZyZWV6ZTtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBpbmhlcml0cyA9IHV0aWwuaW5oZXJpdHM7XG52YXIgbm90RW51bWVyYWJsZVByb3AgPSB1dGlsLm5vdEVudW1lcmFibGVQcm9wO1xuXG5mdW5jdGlvbiBzdWJFcnJvcihuYW1lUHJvcGVydHksIGRlZmF1bHRNZXNzYWdlKSB7XG4gICAgZnVuY3Rpb24gU3ViRXJyb3IobWVzc2FnZSkge1xuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU3ViRXJyb3IpKSByZXR1cm4gbmV3IFN1YkVycm9yKG1lc3NhZ2UpO1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm1lc3NhZ2VcIixcbiAgICAgICAgICAgIHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IGRlZmF1bHRNZXNzYWdlKTtcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJuYW1lXCIsIG5hbWVQcm9wZXJ0eSk7XG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBFcnJvci5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluaGVyaXRzKFN1YkVycm9yLCBFcnJvcik7XG4gICAgcmV0dXJuIFN1YkVycm9yO1xufVxuXG52YXIgX1R5cGVFcnJvciwgX1JhbmdlRXJyb3I7XG52YXIgV2FybmluZyA9IHN1YkVycm9yKFwiV2FybmluZ1wiLCBcIndhcm5pbmdcIik7XG52YXIgQ2FuY2VsbGF0aW9uRXJyb3IgPSBzdWJFcnJvcihcIkNhbmNlbGxhdGlvbkVycm9yXCIsIFwiY2FuY2VsbGF0aW9uIGVycm9yXCIpO1xudmFyIFRpbWVvdXRFcnJvciA9IHN1YkVycm9yKFwiVGltZW91dEVycm9yXCIsIFwidGltZW91dCBlcnJvclwiKTtcbnZhciBBZ2dyZWdhdGVFcnJvciA9IHN1YkVycm9yKFwiQWdncmVnYXRlRXJyb3JcIiwgXCJhZ2dyZWdhdGUgZXJyb3JcIik7XG50cnkge1xuICAgIF9UeXBlRXJyb3IgPSBUeXBlRXJyb3I7XG4gICAgX1JhbmdlRXJyb3IgPSBSYW5nZUVycm9yO1xufSBjYXRjaChlKSB7XG4gICAgX1R5cGVFcnJvciA9IHN1YkVycm9yKFwiVHlwZUVycm9yXCIsIFwidHlwZSBlcnJvclwiKTtcbiAgICBfUmFuZ2VFcnJvciA9IHN1YkVycm9yKFwiUmFuZ2VFcnJvclwiLCBcInJhbmdlIGVycm9yXCIpO1xufVxuXG52YXIgbWV0aG9kcyA9IChcImpvaW4gcG9wIHB1c2ggc2hpZnQgdW5zaGlmdCBzbGljZSBmaWx0ZXIgZm9yRWFjaCBzb21lIFwiICtcbiAgICBcImV2ZXJ5IG1hcCBpbmRleE9mIGxhc3RJbmRleE9mIHJlZHVjZSByZWR1Y2VSaWdodCBzb3J0IHJldmVyc2VcIikuc3BsaXQoXCIgXCIpO1xuXG5mb3IgKHZhciBpID0gMDsgaSA8IG1ldGhvZHMubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAodHlwZW9mIEFycmF5LnByb3RvdHlwZVttZXRob2RzW2ldXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIEFnZ3JlZ2F0ZUVycm9yLnByb3RvdHlwZVttZXRob2RzW2ldXSA9IEFycmF5LnByb3RvdHlwZVttZXRob2RzW2ldXTtcbiAgICB9XG59XG5cbmVzNS5kZWZpbmVQcm9wZXJ0eShBZ2dyZWdhdGVFcnJvci5wcm90b3R5cGUsIFwibGVuZ3RoXCIsIHtcbiAgICB2YWx1ZTogMCxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbn0pO1xuQWdncmVnYXRlRXJyb3IucHJvdG90eXBlW1wiaXNPcGVyYXRpb25hbFwiXSA9IHRydWU7XG52YXIgbGV2ZWwgPSAwO1xuQWdncmVnYXRlRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGluZGVudCA9IEFycmF5KGxldmVsICogNCArIDEpLmpvaW4oXCIgXCIpO1xuICAgIHZhciByZXQgPSBcIlxcblwiICsgaW5kZW50ICsgXCJBZ2dyZWdhdGVFcnJvciBvZjpcIiArIFwiXFxuXCI7XG4gICAgbGV2ZWwrKztcbiAgICBpbmRlbnQgPSBBcnJheShsZXZlbCAqIDQgKyAxKS5qb2luKFwiIFwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHN0ciA9IHRoaXNbaV0gPT09IHRoaXMgPyBcIltDaXJjdWxhciBBZ2dyZWdhdGVFcnJvcl1cIiA6IHRoaXNbaV0gKyBcIlwiO1xuICAgICAgICB2YXIgbGluZXMgPSBzdHIuc3BsaXQoXCJcXG5cIik7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGluZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgIGxpbmVzW2pdID0gaW5kZW50ICsgbGluZXNbal07XG4gICAgICAgIH1cbiAgICAgICAgc3RyID0gbGluZXMuam9pbihcIlxcblwiKTtcbiAgICAgICAgcmV0ICs9IHN0ciArIFwiXFxuXCI7XG4gICAgfVxuICAgIGxldmVsLS07XG4gICAgcmV0dXJuIHJldDtcbn07XG5cbmZ1bmN0aW9uIE9wZXJhdGlvbmFsRXJyb3IobWVzc2FnZSkge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBPcGVyYXRpb25hbEVycm9yKSlcbiAgICAgICAgcmV0dXJuIG5ldyBPcGVyYXRpb25hbEVycm9yKG1lc3NhZ2UpO1xuICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibmFtZVwiLCBcIk9wZXJhdGlvbmFsRXJyb3JcIik7XG4gICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJtZXNzYWdlXCIsIG1lc3NhZ2UpO1xuICAgIHRoaXMuY2F1c2UgPSBtZXNzYWdlO1xuICAgIHRoaXNbXCJpc09wZXJhdGlvbmFsXCJdID0gdHJ1ZTtcblxuICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJtZXNzYWdlXCIsIG1lc3NhZ2UubWVzc2FnZSk7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwic3RhY2tcIiwgbWVzc2FnZS5zdGFjayk7XG4gICAgfSBlbHNlIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICB9XG5cbn1cbmluaGVyaXRzKE9wZXJhdGlvbmFsRXJyb3IsIEVycm9yKTtcblxudmFyIGVycm9yVHlwZXMgPSBFcnJvcltcIl9fQmx1ZWJpcmRFcnJvclR5cGVzX19cIl07XG5pZiAoIWVycm9yVHlwZXMpIHtcbiAgICBlcnJvclR5cGVzID0gT2JqZWN0ZnJlZXplKHtcbiAgICAgICAgQ2FuY2VsbGF0aW9uRXJyb3I6IENhbmNlbGxhdGlvbkVycm9yLFxuICAgICAgICBUaW1lb3V0RXJyb3I6IFRpbWVvdXRFcnJvcixcbiAgICAgICAgT3BlcmF0aW9uYWxFcnJvcjogT3BlcmF0aW9uYWxFcnJvcixcbiAgICAgICAgUmVqZWN0aW9uRXJyb3I6IE9wZXJhdGlvbmFsRXJyb3IsXG4gICAgICAgIEFnZ3JlZ2F0ZUVycm9yOiBBZ2dyZWdhdGVFcnJvclxuICAgIH0pO1xuICAgIGVzNS5kZWZpbmVQcm9wZXJ0eShFcnJvciwgXCJfX0JsdWViaXJkRXJyb3JUeXBlc19fXCIsIHtcbiAgICAgICAgdmFsdWU6IGVycm9yVHlwZXMsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2VcbiAgICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgRXJyb3I6IEVycm9yLFxuICAgIFR5cGVFcnJvcjogX1R5cGVFcnJvcixcbiAgICBSYW5nZUVycm9yOiBfUmFuZ2VFcnJvcixcbiAgICBDYW5jZWxsYXRpb25FcnJvcjogZXJyb3JUeXBlcy5DYW5jZWxsYXRpb25FcnJvcixcbiAgICBPcGVyYXRpb25hbEVycm9yOiBlcnJvclR5cGVzLk9wZXJhdGlvbmFsRXJyb3IsXG4gICAgVGltZW91dEVycm9yOiBlcnJvclR5cGVzLlRpbWVvdXRFcnJvcixcbiAgICBBZ2dyZWdhdGVFcnJvcjogZXJyb3JUeXBlcy5BZ2dyZWdhdGVFcnJvcixcbiAgICBXYXJuaW5nOiBXYXJuaW5nXG59O1xuXG59LHtcIi4vZXM1XCI6MTMsXCIuL3V0aWxcIjozNn1dLDEzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBpc0VTNSA9IChmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHJldHVybiB0aGlzID09PSB1bmRlZmluZWQ7XG59KSgpO1xuXG5pZiAoaXNFUzUpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgZnJlZXplOiBPYmplY3QuZnJlZXplLFxuICAgICAgICBkZWZpbmVQcm9wZXJ0eTogT2JqZWN0LmRlZmluZVByb3BlcnR5LFxuICAgICAgICBnZXREZXNjcmlwdG9yOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFxuICAgICAgICBrZXlzOiBPYmplY3Qua2V5cyxcbiAgICAgICAgbmFtZXM6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLFxuICAgICAgICBnZXRQcm90b3R5cGVPZjogT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5LFxuICAgICAgICBpc0VTNTogaXNFUzUsXG4gICAgICAgIHByb3BlcnR5SXNXcml0YWJsZTogZnVuY3Rpb24ob2JqLCBwcm9wKSB7XG4gICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBwcm9wKTtcbiAgICAgICAgICAgIHJldHVybiAhISghZGVzY3JpcHRvciB8fCBkZXNjcmlwdG9yLndyaXRhYmxlIHx8IGRlc2NyaXB0b3Iuc2V0KTtcbiAgICAgICAgfVxuICAgIH07XG59IGVsc2Uge1xuICAgIHZhciBoYXMgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbiAgICB2YXIgc3RyID0ge30udG9TdHJpbmc7XG4gICAgdmFyIHByb3RvID0ge30uY29uc3RydWN0b3IucHJvdG90eXBlO1xuXG4gICAgdmFyIE9iamVjdEtleXMgPSBmdW5jdGlvbiAobykge1xuICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvKSB7XG4gICAgICAgICAgICBpZiAoaGFzLmNhbGwobywga2V5KSkge1xuICAgICAgICAgICAgICAgIHJldC5wdXNoKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG4gICAgdmFyIE9iamVjdEdldERlc2NyaXB0b3IgPSBmdW5jdGlvbihvLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIHt2YWx1ZTogb1trZXldfTtcbiAgICB9O1xuXG4gICAgdmFyIE9iamVjdERlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gKG8sIGtleSwgZGVzYykge1xuICAgICAgICBvW2tleV0gPSBkZXNjLnZhbHVlO1xuICAgICAgICByZXR1cm4gbztcbiAgICB9O1xuXG4gICAgdmFyIE9iamVjdEZyZWV6ZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuXG4gICAgdmFyIE9iamVjdEdldFByb3RvdHlwZU9mID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdChvYmopLmNvbnN0cnVjdG9yLnByb3RvdHlwZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3RvO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBBcnJheUlzQXJyYXkgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyLmNhbGwob2JqKSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgaXNBcnJheTogQXJyYXlJc0FycmF5LFxuICAgICAgICBrZXlzOiBPYmplY3RLZXlzLFxuICAgICAgICBuYW1lczogT2JqZWN0S2V5cyxcbiAgICAgICAgZGVmaW5lUHJvcGVydHk6IE9iamVjdERlZmluZVByb3BlcnR5LFxuICAgICAgICBnZXREZXNjcmlwdG9yOiBPYmplY3RHZXREZXNjcmlwdG9yLFxuICAgICAgICBmcmVlemU6IE9iamVjdEZyZWV6ZSxcbiAgICAgICAgZ2V0UHJvdG90eXBlT2Y6IE9iamVjdEdldFByb3RvdHlwZU9mLFxuICAgICAgICBpc0VTNTogaXNFUzUsXG4gICAgICAgIHByb3BlcnR5SXNXcml0YWJsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbn0se31dLDE0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBJTlRFUk5BTCkge1xudmFyIFByb21pc2VNYXAgPSBQcm9taXNlLm1hcDtcblxuUHJvbWlzZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGZuLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIFByb21pc2VNYXAodGhpcywgZm4sIG9wdGlvbnMsIElOVEVSTkFMKTtcbn07XG5cblByb21pc2UuZmlsdGVyID0gZnVuY3Rpb24gKHByb21pc2VzLCBmbiwgb3B0aW9ucykge1xuICAgIHJldHVybiBQcm9taXNlTWFwKHByb21pc2VzLCBmbiwgb3B0aW9ucywgSU5URVJOQUwpO1xufTtcbn07XG5cbn0se31dLDE1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCB0cnlDb252ZXJ0VG9Qcm9taXNlKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgQ2FuY2VsbGF0aW9uRXJyb3IgPSBQcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcblxuZnVuY3Rpb24gUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dChwcm9taXNlLCB0eXBlLCBoYW5kbGVyKSB7XG4gICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG4gICAgdGhpcy5jYWxsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNhbmNlbFByb21pc2UgPSBudWxsO1xufVxuXG5QYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0LnByb3RvdHlwZS5pc0ZpbmFsbHlIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gMDtcbn07XG5cbmZ1bmN0aW9uIEZpbmFsbHlIYW5kbGVyQ2FuY2VsUmVhY3Rpb24oZmluYWxseUhhbmRsZXIpIHtcbiAgICB0aGlzLmZpbmFsbHlIYW5kbGVyID0gZmluYWxseUhhbmRsZXI7XG59XG5cbkZpbmFsbHlIYW5kbGVyQ2FuY2VsUmVhY3Rpb24ucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBjaGVja0NhbmNlbCh0aGlzLmZpbmFsbHlIYW5kbGVyKTtcbn07XG5cbmZ1bmN0aW9uIGNoZWNrQ2FuY2VsKGN0eCwgcmVhc29uKSB7XG4gICAgaWYgKGN0eC5jYW5jZWxQcm9taXNlICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjdHguY2FuY2VsUHJvbWlzZS5fcmVqZWN0KHJlYXNvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguY2FuY2VsUHJvbWlzZS5fY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmNhbmNlbFByb21pc2UgPSBudWxsO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBzdWNjZWVkKCkge1xuICAgIHJldHVybiBmaW5hbGx5SGFuZGxlci5jYWxsKHRoaXMsIHRoaXMucHJvbWlzZS5fdGFyZ2V0KCkuX3NldHRsZWRWYWx1ZSgpKTtcbn1cbmZ1bmN0aW9uIGZhaWwocmVhc29uKSB7XG4gICAgaWYgKGNoZWNrQ2FuY2VsKHRoaXMsIHJlYXNvbikpIHJldHVybjtcbiAgICBlcnJvck9iai5lID0gcmVhc29uO1xuICAgIHJldHVybiBlcnJvck9iajtcbn1cbmZ1bmN0aW9uIGZpbmFsbHlIYW5kbGVyKHJlYXNvbk9yVmFsdWUpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcbiAgICB2YXIgaGFuZGxlciA9IHRoaXMuaGFuZGxlcjtcblxuICAgIGlmICghdGhpcy5jYWxsZWQpIHtcbiAgICAgICAgdGhpcy5jYWxsZWQgPSB0cnVlO1xuICAgICAgICB2YXIgcmV0ID0gdGhpcy5pc0ZpbmFsbHlIYW5kbGVyKClcbiAgICAgICAgICAgID8gaGFuZGxlci5jYWxsKHByb21pc2UuX2JvdW5kVmFsdWUoKSlcbiAgICAgICAgICAgIDogaGFuZGxlci5jYWxsKHByb21pc2UuX2JvdW5kVmFsdWUoKSwgcmVhc29uT3JWYWx1ZSk7XG4gICAgICAgIGlmIChyZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcHJvbWlzZS5fc2V0UmV0dXJuZWROb25VbmRlZmluZWQoKTtcbiAgICAgICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHJldCwgcHJvbWlzZSk7XG4gICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbmNlbFByb21pc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlLmlzQ2FuY2VsbGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFzb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDYW5jZWxsYXRpb25FcnJvcihcImxhdGUgY2FuY2VsbGF0aW9uIG9ic2VydmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZShyZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JPYmouZSA9IHJlYXNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXliZVByb21pc2UuaXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fYXR0YWNoQ2FuY2VsbGF0aW9uQ2FsbGJhY2soXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEZpbmFsbHlIYW5kbGVyQ2FuY2VsUmVhY3Rpb24odGhpcykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXliZVByb21pc2UuX3RoZW4oXG4gICAgICAgICAgICAgICAgICAgIHN1Y2NlZWQsIGZhaWwsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9taXNlLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICBjaGVja0NhbmNlbCh0aGlzKTtcbiAgICAgICAgZXJyb3JPYmouZSA9IHJlYXNvbk9yVmFsdWU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjaGVja0NhbmNlbCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHJlYXNvbk9yVmFsdWU7XG4gICAgfVxufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5fcGFzc1Rocm91Z2ggPSBmdW5jdGlvbihoYW5kbGVyLCB0eXBlLCBzdWNjZXNzLCBmYWlsKSB7XG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0aGlzLnRoZW4oKTtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihzdWNjZXNzLFxuICAgICAgICAgICAgICAgICAgICAgIGZhaWwsXG4gICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgIG5ldyBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0KHRoaXMsIHR5cGUsIGhhbmRsZXIpLFxuICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5sYXN0bHkgPVxuUHJvbWlzZS5wcm90b3R5cGVbXCJmaW5hbGx5XCJdID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFzc1Rocm91Z2goaGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseUhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsbHlIYW5kbGVyKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnRhcCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bhc3NUaHJvdWdoKGhhbmRsZXIsIDEsIGZpbmFsbHlIYW5kbGVyKTtcbn07XG5cbnJldHVybiBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0O1xufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDE2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZWplY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIElOVEVSTkFMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlDb252ZXJ0VG9Qcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBQcm94eWFibGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKSB7XG52YXIgZXJyb3JzID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpO1xudmFyIFR5cGVFcnJvciA9IGVycm9ycy5UeXBlRXJyb3I7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciB5aWVsZEhhbmRsZXJzID0gW107XG5cbmZ1bmN0aW9uIHByb21pc2VGcm9tWWllbGRIYW5kbGVyKHZhbHVlLCB5aWVsZEhhbmRsZXJzLCB0cmFjZVBhcmVudCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeWllbGRIYW5kbGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0cmFjZVBhcmVudC5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHlpZWxkSGFuZGxlcnNbaV0pKHZhbHVlKTtcbiAgICAgICAgdHJhY2VQYXJlbnQuX3BvcENvbnRleHQoKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgIHRyYWNlUGFyZW50Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICAgICAgdmFyIHJldCA9IFByb21pc2UucmVqZWN0KGVycm9yT2JqLmUpO1xuICAgICAgICAgICAgdHJhY2VQYXJlbnQuX3BvcENvbnRleHQoKTtcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocmVzdWx0LCB0cmFjZVBhcmVudCk7XG4gICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gbWF5YmVQcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gUHJvbWlzZVNwYXduKGdlbmVyYXRvckZ1bmN0aW9uLCByZWNlaXZlciwgeWllbGRIYW5kbGVyLCBzdGFjaykge1xuICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSkge1xuICAgICAgICB2YXIgaW50ZXJuYWwgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHZhciBfZmluYWxseVByb21pc2UgPSB0aGlzLl9maW5hbGx5UHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZSA9IGludGVybmFsLmxhc3RseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfZmluYWxseVByb21pc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBpbnRlcm5hbC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgaW50ZXJuYWwuX3NldE9uQ2FuY2VsKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICB9XG4gICAgdGhpcy5fc3RhY2sgPSBzdGFjaztcbiAgICB0aGlzLl9nZW5lcmF0b3JGdW5jdGlvbiA9IGdlbmVyYXRvckZ1bmN0aW9uO1xuICAgIHRoaXMuX3JlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgdGhpcy5fZ2VuZXJhdG9yID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3lpZWxkSGFuZGxlcnMgPSB0eXBlb2YgeWllbGRIYW5kbGVyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyBbeWllbGRIYW5kbGVyXS5jb25jYXQoeWllbGRIYW5kbGVycylcbiAgICAgICAgOiB5aWVsZEhhbmRsZXJzO1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9jYW5jZWxsYXRpb25QaGFzZSA9IGZhbHNlO1xufVxudXRpbC5pbmhlcml0cyhQcm9taXNlU3Bhd24sIFByb3h5YWJsZSk7XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX2lzUmVzb2x2ZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZSA9PT0gbnVsbDtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9wcm9taXNlID0gdGhpcy5fZ2VuZXJhdG9yID0gbnVsbDtcbiAgICBpZiAoZGVidWcuY2FuY2VsbGF0aW9uKCkgJiYgdGhpcy5fZmluYWxseVByb21pc2UgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fZmluYWxseVByb21pc2UuX2Z1bGZpbGwoKTtcbiAgICAgICAgdGhpcy5fZmluYWxseVByb21pc2UgPSBudWxsO1xuICAgIH1cbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Byb21pc2VDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNSZXNvbHZlZCgpKSByZXR1cm47XG4gICAgdmFyIGltcGxlbWVudHNSZXR1cm4gPSB0eXBlb2YgdGhpcy5fZ2VuZXJhdG9yW1wicmV0dXJuXCJdICE9PSBcInVuZGVmaW5lZFwiO1xuXG4gICAgdmFyIHJlc3VsdDtcbiAgICBpZiAoIWltcGxlbWVudHNSZXR1cm4pIHtcbiAgICAgICAgdmFyIHJlYXNvbiA9IG5ldyBQcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yKFxuICAgICAgICAgICAgXCJnZW5lcmF0b3IgLnJldHVybigpIHNlbnRpbmVsXCIpO1xuICAgICAgICBQcm9taXNlLmNvcm91dGluZS5yZXR1cm5TZW50aW5lbCA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZShyZWFzb24pO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgICAgICByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9nZW5lcmF0b3JbXCJ0aHJvd1wiXSkuY2FsbCh0aGlzLl9nZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb24pO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZ2VuZXJhdG9yW1wicmV0dXJuXCJdKS5jYWxsKHRoaXMuX2dlbmVyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgfVxuICAgIHRoaXMuX2NhbmNlbGxhdGlvblBoYXNlID0gdHJ1ZTtcbiAgICB0aGlzLl95aWVsZGVkUHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9nZW5lcmF0b3IubmV4dCkuY2FsbCh0aGlzLl9nZW5lcmF0b3IsIHZhbHVlKTtcbiAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHJlYXNvbik7XG4gICAgdGhpcy5fcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZ2VuZXJhdG9yW1widGhyb3dcIl0pXG4gICAgICAgIC5jYWxsKHRoaXMuX2dlbmVyYXRvciwgcmVhc29uKTtcbiAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl95aWVsZGVkUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLl95aWVsZGVkUHJvbWlzZTtcbiAgICAgICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBudWxsO1xuICAgICAgICBwcm9taXNlLmNhbmNlbCgpO1xuICAgIH1cbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUucHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX3J1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9nZW5lcmF0b3IgPSB0aGlzLl9nZW5lcmF0b3JGdW5jdGlvbi5jYWxsKHRoaXMuX3JlY2VpdmVyKTtcbiAgICB0aGlzLl9yZWNlaXZlciA9XG4gICAgICAgIHRoaXMuX2dlbmVyYXRvckZ1bmN0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Byb21pc2VGdWxmaWxsZWQodW5kZWZpbmVkKTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX2NvbnRpbnVlID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZTtcbiAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG4gICAgICAgIGlmICh0aGlzLl9jYW5jZWxsYXRpb25QaGFzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuY2FuY2VsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVzdWx0LmUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICBpZiAocmVzdWx0LmRvbmUgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5fY2xlYW51cCgpO1xuICAgICAgICBpZiAodGhpcy5fY2FuY2VsbGF0aW9uUGhhc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlLmNhbmNlbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh2YWx1ZSwgdGhpcy5fcHJvbWlzZSk7XG4gICAgICAgIGlmICghKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UgPVxuICAgICAgICAgICAgICAgIHByb21pc2VGcm9tWWllbGRIYW5kbGVyKG1heWJlUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl95aWVsZEhhbmRsZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2UpO1xuICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2VSZWplY3RlZChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQSB2YWx1ZSAlcyB3YXMgeWllbGRlZCB0aGF0IGNvdWxkIG5vdCBiZSB0cmVhdGVkIGFzIGEgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcXHUwMDBhXCIucmVwbGFjZShcIiVzXCIsIHZhbHVlKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkZyb20gY29yb3V0aW5lOlxcdTAwMGFcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGFjay5zcGxpdChcIlxcblwiKS5zbGljZSgxLCAtNykuam9pbihcIlxcblwiKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgdmFyIGJpdEZpZWxkID0gbWF5YmVQcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgO1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9wcm94eSh0aGlzLCBudWxsKTtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZChtYXliZVByb21pc2UuX3ZhbHVlKCkpO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICB0aGlzLl9wcm9taXNlUmVqZWN0ZWQobWF5YmVQcm9taXNlLl9yZWFzb24oKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9wcm9taXNlQ2FuY2VsbGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlLmNvcm91dGluZSA9IGZ1bmN0aW9uIChnZW5lcmF0b3JGdW5jdGlvbiwgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgZ2VuZXJhdG9yRnVuY3Rpb24gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiZ2VuZXJhdG9yRnVuY3Rpb24gbXVzdCBiZSBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgdmFyIHlpZWxkSGFuZGxlciA9IE9iamVjdChvcHRpb25zKS55aWVsZEhhbmRsZXI7XG4gICAgdmFyIFByb21pc2VTcGF3biQgPSBQcm9taXNlU3Bhd247XG4gICAgdmFyIHN0YWNrID0gbmV3IEVycm9yKCkuc3RhY2s7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdlbmVyYXRvciA9IGdlbmVyYXRvckZ1bmN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBzcGF3biA9IG5ldyBQcm9taXNlU3Bhd24kKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB5aWVsZEhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrKTtcbiAgICAgICAgdmFyIHJldCA9IHNwYXduLnByb21pc2UoKTtcbiAgICAgICAgc3Bhd24uX2dlbmVyYXRvciA9IGdlbmVyYXRvcjtcbiAgICAgICAgc3Bhd24uX3Byb21pc2VGdWxmaWxsZWQodW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufTtcblxuUHJvbWlzZS5jb3JvdXRpbmUuYWRkWWllbGRIYW5kbGVyID0gZnVuY3Rpb24oZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHlpZWxkSGFuZGxlcnMucHVzaChmbik7XG59O1xuXG5Qcm9taXNlLnNwYXduID0gZnVuY3Rpb24gKGdlbmVyYXRvckZ1bmN0aW9uKSB7XG4gICAgZGVidWcuZGVwcmVjYXRlZChcIlByb21pc2Uuc3Bhd24oKVwiLCBcIlByb21pc2UuY29yb3V0aW5lKClcIik7XG4gICAgaWYgKHR5cGVvZiBnZW5lcmF0b3JGdW5jdGlvbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJnZW5lcmF0b3JGdW5jdGlvbiBtdXN0IGJlIGEgZnVuY3Rpb25cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICB2YXIgc3Bhd24gPSBuZXcgUHJvbWlzZVNwYXduKGdlbmVyYXRvckZ1bmN0aW9uLCB0aGlzKTtcbiAgICB2YXIgcmV0ID0gc3Bhd24ucHJvbWlzZSgpO1xuICAgIHNwYXduLl9ydW4oUHJvbWlzZS5zcGF3bik7XG4gICAgcmV0dXJuIHJldDtcbn07XG59O1xuXG59LHtcIi4vZXJyb3JzXCI6MTIsXCIuL3V0aWxcIjozNn1dLDE3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBJTlRFUk5BTCkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGNhbkV2YWx1YXRlID0gdXRpbC5jYW5FdmFsdWF0ZTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIHJlamVjdDtcblxuaWYgKCF0cnVlKSB7XG5pZiAoY2FuRXZhbHVhdGUpIHtcbiAgICB2YXIgdGhlbkNhbGxiYWNrID0gZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwidmFsdWVcIiwgXCJob2xkZXJcIiwgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBob2xkZXIucEluZGV4ID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBob2xkZXIuY2hlY2tGdWxmaWxsbWVudCh0aGlzKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBcIi5yZXBsYWNlKC9JbmRleC9nLCBpKSk7XG4gICAgfTtcblxuICAgIHZhciBwcm9taXNlU2V0dGVyID0gZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwicHJvbWlzZVwiLCBcImhvbGRlclwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBob2xkZXIucEluZGV4ID0gcHJvbWlzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBcIi5yZXBsYWNlKC9JbmRleC9nLCBpKSk7XG4gICAgfTtcblxuICAgIHZhciBnZW5lcmF0ZUhvbGRlckNsYXNzID0gZnVuY3Rpb24odG90YWwpIHtcbiAgICAgICAgdmFyIHByb3BzID0gbmV3IEFycmF5KHRvdGFsKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgcHJvcHNbaV0gPSBcInRoaXMucFwiICsgKGkrMSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBwcm9wcy5qb2luKFwiID0gXCIpICsgXCIgPSBudWxsO1wiO1xuICAgICAgICB2YXIgY2FuY2VsbGF0aW9uQ29kZT0gXCJ2YXIgcHJvbWlzZTtcXG5cIiArIHByb3BzLm1hcChmdW5jdGlvbihwcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIHByb21pc2UgPSBcIiArIHByb3AgKyBcIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgaWYgKHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuY2FuY2VsKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBcIjtcbiAgICAgICAgfSkuam9pbihcIlxcblwiKTtcbiAgICAgICAgdmFyIHBhc3NlZEFyZ3VtZW50cyA9IHByb3BzLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgdmFyIG5hbWUgPSBcIkhvbGRlciRcIiArIHRvdGFsO1xuXG5cbiAgICAgICAgdmFyIGNvZGUgPSBcInJldHVybiBmdW5jdGlvbih0cnlDYXRjaCwgZXJyb3JPYmosIFByb21pc2UpIHsgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBmdW5jdGlvbiBbVGhlTmFtZV0oZm4pIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgW1RoZVByb3BlcnRpZXNdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdGhpcy5mbiA9IGZuOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdGhpcy5ub3cgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBbVGhlTmFtZV0ucHJvdG90eXBlLmNoZWNrRnVsZmlsbG1lbnQgPSBmdW5jdGlvbihwcm9taXNlKSB7ICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgdmFyIG5vdyA9ICsrdGhpcy5ub3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgaWYgKG5vdyA9PT0gW1RoZVRvdGFsXSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuX3B1c2hDb250ZXh0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHRoaXMuZm47ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXQgPSB0cnlDYXRjaChjYWxsYmFjaykoW1RoZVBhc3NlZEFyZ3VtZW50c10pOyAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuX3BvcENvbnRleHQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyZXQuZSwgZmFsc2UpOyAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLl9yZXNvbHZlQ2FsbGJhY2socmV0KTsgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBbVGhlTmFtZV0ucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHsgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgW0NhbmNlbGxhdGlvbkNvZGVdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICByZXR1cm4gW1RoZU5hbWVdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIH0odHJ5Q2F0Y2gsIGVycm9yT2JqLCBQcm9taXNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIFwiO1xuXG4gICAgICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UoL1xcW1RoZU5hbWVcXF0vZywgbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtUaGVUb3RhbFxcXS9nLCB0b3RhbClcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtUaGVQYXNzZWRBcmd1bWVudHNcXF0vZywgcGFzc2VkQXJndW1lbnRzKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1RoZVByb3BlcnRpZXNcXF0vZywgYXNzaWdubWVudClcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtDYW5jZWxsYXRpb25Db2RlXFxdL2csIGNhbmNlbGxhdGlvbkNvZGUpO1xuXG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJ0cnlDYXRjaFwiLCBcImVycm9yT2JqXCIsIFwiUHJvbWlzZVwiLCBjb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRyeUNhdGNoLCBlcnJvck9iaiwgUHJvbWlzZSk7XG4gICAgfTtcblxuICAgIHZhciBob2xkZXJDbGFzc2VzID0gW107XG4gICAgdmFyIHRoZW5DYWxsYmFja3MgPSBbXTtcbiAgICB2YXIgcHJvbWlzZVNldHRlcnMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgODsgKytpKSB7XG4gICAgICAgIGhvbGRlckNsYXNzZXMucHVzaChnZW5lcmF0ZUhvbGRlckNsYXNzKGkgKyAxKSk7XG4gICAgICAgIHRoZW5DYWxsYmFja3MucHVzaCh0aGVuQ2FsbGJhY2soaSArIDEpKTtcbiAgICAgICAgcHJvbWlzZVNldHRlcnMucHVzaChwcm9taXNlU2V0dGVyKGkgKyAxKSk7XG4gICAgfVxuXG4gICAgcmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICB0aGlzLl9yZWplY3QocmVhc29uKTtcbiAgICB9O1xufX1cblxuUHJvbWlzZS5qb2luID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsYXN0ID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7XG4gICAgdmFyIGZuO1xuICAgIGlmIChsYXN0ID4gMCAmJiB0eXBlb2YgYXJndW1lbnRzW2xhc3RdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZm4gPSBhcmd1bWVudHNbbGFzdF07XG4gICAgICAgIGlmICghdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGxhc3QgPD0gOCAmJiBjYW5FdmFsdWF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgICAgICAgICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgICAgIHZhciBIb2xkZXJDbGFzcyA9IGhvbGRlckNsYXNzZXNbbGFzdCAtIDFdO1xuICAgICAgICAgICAgICAgIHZhciBob2xkZXIgPSBuZXcgSG9sZGVyQ2xhc3MoZm4pO1xuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFja3MgPSB0aGVuQ2FsbGJhY2tzO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0OyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UoYXJndW1lbnRzW2ldLCByZXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXRGaWVsZCA9IG1heWJlUHJvbWlzZS5fYml0RmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3RoZW4oY2FsbGJhY2tzW2ldLCByZWplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgcmV0LCBob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VTZXR0ZXJzW2ldKG1heWJlUHJvbWlzZSwgaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3NbaV0uY2FsbChyZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl92YWx1ZSgpLCBob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5fcmVqZWN0KG1heWJlUHJvbWlzZS5fcmVhc29uKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQuX2NhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzW2ldLmNhbGwocmV0LCBtYXliZVByb21pc2UsIGhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFyZXQuX2lzRmF0ZVNlYWxlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldC5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldC5fc2V0T25DYW5jZWwoaG9sZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTs7XG4gICAgaWYgKGZuKSBhcmdzLnBvcCgpO1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZUFycmF5KGFyZ3MpLnByb21pc2UoKTtcbiAgICByZXR1cm4gZm4gIT09IHVuZGVmaW5lZCA/IHJldC5zcHJlYWQoZm4pIDogcmV0O1xufTtcblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDE4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlQXJyYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFwaVJlamVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKSB7XG52YXIgZ2V0RG9tYWluID0gUHJvbWlzZS5fZ2V0RG9tYWluO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgRU1QVFlfQVJSQVkgPSBbXTtcblxuZnVuY3Rpb24gTWFwcGluZ1Byb21pc2VBcnJheShwcm9taXNlcywgZm4sIGxpbWl0LCBfZmlsdGVyKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQocHJvbWlzZXMpO1xuICAgIHRoaXMuX3Byb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIHRoaXMuX2NhbGxiYWNrID0gZG9tYWluID09PSBudWxsID8gZm4gOiBkb21haW4uYmluZChmbik7XG4gICAgdGhpcy5fcHJlc2VydmVkVmFsdWVzID0gX2ZpbHRlciA9PT0gSU5URVJOQUxcbiAgICAgICAgPyBuZXcgQXJyYXkodGhpcy5sZW5ndGgoKSlcbiAgICAgICAgOiBudWxsO1xuICAgIHRoaXMuX2xpbWl0ID0gbGltaXQ7XG4gICAgdGhpcy5faW5GbGlnaHQgPSAwO1xuICAgIHRoaXMuX3F1ZXVlID0gbGltaXQgPj0gMSA/IFtdIDogRU1QVFlfQVJSQVk7XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtMik7XG59XG51dGlsLmluaGVyaXRzKE1hcHBpbmdQcm9taXNlQXJyYXksIFByb21pc2VBcnJheSk7XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkge307XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLl92YWx1ZXM7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoKCk7XG4gICAgdmFyIHByZXNlcnZlZFZhbHVlcyA9IHRoaXMuX3ByZXNlcnZlZFZhbHVlcztcbiAgICB2YXIgbGltaXQgPSB0aGlzLl9saW1pdDtcblxuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgaW5kZXggPSAoaW5kZXggKiAtMSkgLSAxO1xuICAgICAgICB2YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgIGlmIChsaW1pdCA+PSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9pbkZsaWdodC0tO1xuICAgICAgICAgICAgdGhpcy5fZHJhaW5RdWV1ZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobGltaXQgPj0gMSAmJiB0aGlzLl9pbkZsaWdodCA+PSBsaW1pdCkge1xuICAgICAgICAgICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fcXVldWUucHVzaChpbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXNlcnZlZFZhbHVlcyAhPT0gbnVsbCkgcHJlc2VydmVkVmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5fY2FsbGJhY2s7XG4gICAgICAgIHZhciByZWNlaXZlciA9IHByb21pc2UuX2JvdW5kVmFsdWUoKTtcbiAgICAgICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgdmFyIHJldCA9IHRyeUNhdGNoKGNhbGxiYWNrKS5jYWxsKHJlY2VpdmVyLCB2YWx1ZSwgaW5kZXgsIGxlbmd0aCk7XG4gICAgICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHByb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICAgICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICAgICAgcmV0LFxuICAgICAgICAgICAgcHJvbWlzZUNyZWF0ZWQsXG4gICAgICAgICAgICBwcmVzZXJ2ZWRWYWx1ZXMgIT09IG51bGwgPyBcIlByb21pc2UuZmlsdGVyXCIgOiBcIlByb21pc2UubWFwXCIsXG4gICAgICAgICAgICBwcm9taXNlXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3QocmV0LmUpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXQsIHRoaXMuX3Byb21pc2UpO1xuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIHZhciBiaXRGaWVsZCA9IG1heWJlUHJvbWlzZS5fYml0RmllbGQ7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICBpZiAobGltaXQgPj0gMSkgdGhpcy5faW5GbGlnaHQrKztcbiAgICAgICAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fcHJveHkodGhpcywgKGluZGV4ICsgMSkgKiAtMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIHJldCA9IG1heWJlUHJvbWlzZS5fdmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QobWF5YmVQcm9taXNlLl9yZWFzb24oKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpbmRleF0gPSByZXQ7XG4gICAgfVxuICAgIHZhciB0b3RhbFJlc29sdmVkID0gKyt0aGlzLl90b3RhbFJlc29sdmVkO1xuICAgIGlmICh0b3RhbFJlc29sdmVkID49IGxlbmd0aCkge1xuICAgICAgICBpZiAocHJlc2VydmVkVmFsdWVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9maWx0ZXIodmFsdWVzLCBwcmVzZXJ2ZWRWYWx1ZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZHJhaW5RdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcXVldWUgPSB0aGlzLl9xdWV1ZTtcbiAgICB2YXIgbGltaXQgPSB0aGlzLl9saW1pdDtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5fdmFsdWVzO1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwICYmIHRoaXMuX2luRmxpZ2h0IDwgbGltaXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuO1xuICAgICAgICB2YXIgaW5kZXggPSBxdWV1ZS5wb3AoKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZCh2YWx1ZXNbaW5kZXhdLCBpbmRleCk7XG4gICAgfVxufTtcblxuTWFwcGluZ1Byb21pc2VBcnJheS5wcm90b3R5cGUuX2ZpbHRlciA9IGZ1bmN0aW9uIChib29sZWFucywgdmFsdWVzKSB7XG4gICAgdmFyIGxlbiA9IHZhbHVlcy5sZW5ndGg7XG4gICAgdmFyIHJldCA9IG5ldyBBcnJheShsZW4pO1xuICAgIHZhciBqID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIGlmIChib29sZWFuc1tpXSkgcmV0W2orK10gPSB2YWx1ZXNbaV07XG4gICAgfVxuICAgIHJldC5sZW5ndGggPSBqO1xuICAgIHRoaXMuX3Jlc29sdmUocmV0KTtcbn07XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLnByZXNlcnZlZFZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJlc2VydmVkVmFsdWVzO1xufTtcblxuZnVuY3Rpb24gbWFwKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG5cbiAgICB2YXIgbGltaXQgPSAwO1xuICAgIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jb25jdXJyZW5jeSAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFR5cGVFcnJvcihcIidjb25jdXJyZW5jeScgbXVzdCBiZSBhIG51bWJlciBidXQgaXQgaXMgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyhvcHRpb25zLmNvbmN1cnJlbmN5KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGltaXQgPSBvcHRpb25zLmNvbmN1cnJlbmN5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25zIGFyZ3VtZW50IG11c3QgYmUgYW4gb2JqZWN0IGJ1dCBpdCBpcyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcob3B0aW9ucykpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsaW1pdCA9IHR5cGVvZiBsaW1pdCA9PT0gXCJudW1iZXJcIiAmJlxuICAgICAgICBpc0Zpbml0ZShsaW1pdCkgJiYgbGltaXQgPj0gMSA/IGxpbWl0IDogMDtcbiAgICByZXR1cm4gbmV3IE1hcHBpbmdQcm9taXNlQXJyYXkocHJvbWlzZXMsIGZuLCBsaW1pdCwgX2ZpbHRlcikucHJvbWlzZSgpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAoZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbWFwKHRoaXMsIGZuLCBvcHRpb25zLCBudWxsKTtcbn07XG5cblByb21pc2UubWFwID0gZnVuY3Rpb24gKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcikge1xuICAgIHJldHVybiBtYXAocHJvbWlzZXMsIGZuLCBvcHRpb25zLCBfZmlsdGVyKTtcbn07XG5cblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDE5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbiwgZGVidWcpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG5cblByb21pc2UubWV0aG9kID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBQcm9taXNlLlR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgcmV0Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICB2YXIgdmFsdWUgPSB0cnlDYXRjaChmbikuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIHByb21pc2VDcmVhdGVkID0gcmV0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgIGRlYnVnLmNoZWNrRm9yZ290dGVuUmV0dXJucyhcbiAgICAgICAgICAgIHZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgXCJQcm9taXNlLm1ldGhvZFwiLCByZXQpO1xuICAgICAgICByZXQuX3Jlc29sdmVGcm9tU3luY1ZhbHVlKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufTtcblxuUHJvbWlzZS5hdHRlbXB0ID0gUHJvbWlzZVtcInRyeVwiXSA9IGZ1bmN0aW9uIChmbikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgcmV0Ll9wdXNoQ29udGV4dCgpO1xuICAgIHZhciB2YWx1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZGVidWcuZGVwcmVjYXRlZChcImNhbGxpbmcgUHJvbWlzZS50cnkgd2l0aCBtb3JlIHRoYW4gMSBhcmd1bWVudFwiKTtcbiAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgdmFyIGN0eCA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgdmFsdWUgPSB1dGlsLmlzQXJyYXkoYXJnKSA/IHRyeUNhdGNoKGZuKS5hcHBseShjdHgsIGFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRyeUNhdGNoKGZuKS5jYWxsKGN0eCwgYXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IHRyeUNhdGNoKGZuKSgpO1xuICAgIH1cbiAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSByZXQuX3BvcENvbnRleHQoKTtcbiAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoXG4gICAgICAgIHZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgXCJQcm9taXNlLnRyeVwiLCByZXQpO1xuICAgIHJldC5fcmVzb2x2ZUZyb21TeW5jVmFsdWUodmFsdWUpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVzb2x2ZUZyb21TeW5jVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHV0aWwuZXJyb3JPYmopIHtcbiAgICAgICAgdGhpcy5fcmVqZWN0Q2FsbGJhY2sodmFsdWUuZSwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxufTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBtYXliZVdyYXBBc0Vycm9yID0gdXRpbC5tYXliZVdyYXBBc0Vycm9yO1xudmFyIGVycm9ycyA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKTtcbnZhciBPcGVyYXRpb25hbEVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xuXG5mdW5jdGlvbiBpc1VudHlwZWRFcnJvcihvYmopIHtcbiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgRXJyb3IgJiZcbiAgICAgICAgZXM1LmdldFByb3RvdHlwZU9mKG9iaikgPT09IEVycm9yLnByb3RvdHlwZTtcbn1cblxudmFyIHJFcnJvcktleSA9IC9eKD86bmFtZXxtZXNzYWdlfHN0YWNrfGNhdXNlKSQvO1xuZnVuY3Rpb24gd3JhcEFzT3BlcmF0aW9uYWxFcnJvcihvYmopIHtcbiAgICB2YXIgcmV0O1xuICAgIGlmIChpc1VudHlwZWRFcnJvcihvYmopKSB7XG4gICAgICAgIHJldCA9IG5ldyBPcGVyYXRpb25hbEVycm9yKG9iaik7XG4gICAgICAgIHJldC5uYW1lID0gb2JqLm5hbWU7XG4gICAgICAgIHJldC5tZXNzYWdlID0gb2JqLm1lc3NhZ2U7XG4gICAgICAgIHJldC5zdGFjayA9IG9iai5zdGFjaztcbiAgICAgICAgdmFyIGtleXMgPSBlczUua2V5cyhvYmopO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgaWYgKCFyRXJyb3JLZXkudGVzdChrZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICB1dGlsLm1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbihvYmopO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIG5vZGViYWNrRm9yUHJvbWlzZShwcm9taXNlLCBtdWx0aUFyZ3MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZXJyLCB2YWx1ZSkge1xuICAgICAgICBpZiAocHJvbWlzZSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlZCA9IHdyYXBBc09wZXJhdGlvbmFsRXJyb3IobWF5YmVXcmFwQXNFcnJvcihlcnIpKTtcbiAgICAgICAgICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2Uod3JhcHBlZCk7XG4gICAgICAgICAgICBwcm9taXNlLl9yZWplY3Qod3JhcHBlZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIW11bHRpQXJncykge1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTs7XG4gICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsKGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbm9kZWJhY2tGb3JQcm9taXNlO1xuXG59LHtcIi4vZXJyb3JzXCI6MTIsXCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSwyMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcblxuZnVuY3Rpb24gc3ByZWFkQWRhcHRlcih2YWwsIG5vZGViYWNrKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIGlmICghdXRpbC5pc0FycmF5KHZhbCkpIHJldHVybiBzdWNjZXNzQWRhcHRlci5jYWxsKHByb21pc2UsIHZhbCwgbm9kZWJhY2spO1xuICAgIHZhciByZXQgPVxuICAgICAgICB0cnlDYXRjaChub2RlYmFjaykuYXBwbHkocHJvbWlzZS5fYm91bmRWYWx1ZSgpLCBbbnVsbF0uY29uY2F0KHZhbCkpO1xuICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIocmV0LmUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3VjY2Vzc0FkYXB0ZXIodmFsLCBub2RlYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB2YXIgcmVjZWl2ZXIgPSBwcm9taXNlLl9ib3VuZFZhbHVlKCk7XG4gICAgdmFyIHJldCA9IHZhbCA9PT0gdW5kZWZpbmVkXG4gICAgICAgID8gdHJ5Q2F0Y2gobm9kZWJhY2spLmNhbGwocmVjZWl2ZXIsIG51bGwpXG4gICAgICAgIDogdHJ5Q2F0Y2gobm9kZWJhY2spLmNhbGwocmVjZWl2ZXIsIG51bGwsIHZhbCk7XG4gICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihyZXQuZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZXJyb3JBZGFwdGVyKHJlYXNvbiwgbm9kZWJhY2spIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgICAgdmFyIG5ld1JlYXNvbiA9IG5ldyBFcnJvcihyZWFzb24gKyBcIlwiKTtcbiAgICAgICAgbmV3UmVhc29uLmNhdXNlID0gcmVhc29uO1xuICAgICAgICByZWFzb24gPSBuZXdSZWFzb247XG4gICAgfVxuICAgIHZhciByZXQgPSB0cnlDYXRjaChub2RlYmFjaykuY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksIHJlYXNvbik7XG4gICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihyZXQuZSk7XG4gICAgfVxufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5hc0NhbGxiYWNrID0gUHJvbWlzZS5wcm90b3R5cGUubm9kZWlmeSA9IGZ1bmN0aW9uIChub2RlYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG5vZGViYWNrID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgYWRhcHRlciA9IHN1Y2Nlc3NBZGFwdGVyO1xuICAgICAgICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIE9iamVjdChvcHRpb25zKS5zcHJlYWQpIHtcbiAgICAgICAgICAgIGFkYXB0ZXIgPSBzcHJlYWRBZGFwdGVyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgZXJyb3JBZGFwdGVyLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIG5vZGViYWNrXG4gICAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG52YXIgbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJjaXJjdWxhciBwcm9taXNlIHJlc29sdXRpb24gY2hhaW5cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xufTtcbnZhciByZWZsZWN0SGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbih0aGlzLl90YXJnZXQoKSk7XG59O1xudmFyIGFwaVJlamVjdGlvbiA9IGZ1bmN0aW9uKG1zZykge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKG1zZykpO1xufTtcbmZ1bmN0aW9uIFByb3h5YWJsZSgpIHt9XG52YXIgVU5ERUZJTkVEX0JJTkRJTkcgPSB7fTtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcblxudmFyIGdldERvbWFpbjtcbmlmICh1dGlsLmlzTm9kZSkge1xuICAgIGdldERvbWFpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmV0ID0gcHJvY2Vzcy5kb21haW47XG4gICAgICAgIGlmIChyZXQgPT09IHVuZGVmaW5lZCkgcmV0ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBnZXREb21haW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cbnV0aWwubm90RW51bWVyYWJsZVByb3AoUHJvbWlzZSwgXCJfZ2V0RG9tYWluXCIsIGdldERvbWFpbik7XG5cbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgQXN5bmMgPSBfZGVyZXFfKFwiLi9hc3luY1wiKTtcbnZhciBhc3luYyA9IG5ldyBBc3luYygpO1xuZXM1LmRlZmluZVByb3BlcnR5KFByb21pc2UsIFwiX2FzeW5jXCIsIHt2YWx1ZTogYXN5bmN9KTtcbnZhciBlcnJvcnMgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIik7XG52YXIgVHlwZUVycm9yID0gUHJvbWlzZS5UeXBlRXJyb3IgPSBlcnJvcnMuVHlwZUVycm9yO1xuUHJvbWlzZS5SYW5nZUVycm9yID0gZXJyb3JzLlJhbmdlRXJyb3I7XG52YXIgQ2FuY2VsbGF0aW9uRXJyb3IgPSBQcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yID0gZXJyb3JzLkNhbmNlbGxhdGlvbkVycm9yO1xuUHJvbWlzZS5UaW1lb3V0RXJyb3IgPSBlcnJvcnMuVGltZW91dEVycm9yO1xuUHJvbWlzZS5PcGVyYXRpb25hbEVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG5Qcm9taXNlLlJlamVjdGlvbkVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG5Qcm9taXNlLkFnZ3JlZ2F0ZUVycm9yID0gZXJyb3JzLkFnZ3JlZ2F0ZUVycm9yO1xudmFyIElOVEVSTkFMID0gZnVuY3Rpb24oKXt9O1xudmFyIEFQUExZID0ge307XG52YXIgTkVYVF9GSUxURVIgPSB7fTtcbnZhciB0cnlDb252ZXJ0VG9Qcm9taXNlID0gX2RlcmVxXyhcIi4vdGhlbmFibGVzXCIpKFByb21pc2UsIElOVEVSTkFMKTtcbnZhciBQcm9taXNlQXJyYXkgPVxuICAgIF9kZXJlcV8oXCIuL3Byb21pc2VfYXJyYXlcIikoUHJvbWlzZSwgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uLCBQcm94eWFibGUpO1xudmFyIENvbnRleHQgPSBfZGVyZXFfKFwiLi9jb250ZXh0XCIpKFByb21pc2UpO1xuIC8qanNoaW50IHVudXNlZDpmYWxzZSovXG52YXIgY3JlYXRlQ29udGV4dCA9IENvbnRleHQuY3JlYXRlO1xudmFyIGRlYnVnID0gX2RlcmVxXyhcIi4vZGVidWdnYWJpbGl0eVwiKShQcm9taXNlLCBDb250ZXh0KTtcbnZhciBDYXB0dXJlZFRyYWNlID0gZGVidWcuQ2FwdHVyZWRUcmFjZTtcbnZhciBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0ID1cbiAgICBfZGVyZXFfKFwiLi9maW5hbGx5XCIpKFByb21pc2UsIHRyeUNvbnZlcnRUb1Byb21pc2UpO1xudmFyIGNhdGNoRmlsdGVyID0gX2RlcmVxXyhcIi4vY2F0Y2hfZmlsdGVyXCIpKE5FWFRfRklMVEVSKTtcbnZhciBub2RlYmFja0ZvclByb21pc2UgPSBfZGVyZXFfKFwiLi9ub2RlYmFja1wiKTtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuZnVuY3Rpb24gY2hlY2soc2VsZiwgZXhlY3V0b3IpIHtcbiAgICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGV4ZWN1dG9yKSk7XG4gICAgfVxuICAgIGlmIChzZWxmLmNvbnN0cnVjdG9yICE9PSBQcm9taXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgaW52b2tlZCBkaXJlY3RseVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSAwO1xuICAgIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcHJvbWlzZTAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVjZWl2ZXIwID0gdW5kZWZpbmVkO1xuICAgIGlmIChleGVjdXRvciAhPT0gSU5URVJOQUwpIHtcbiAgICAgICAgY2hlY2sodGhpcywgZXhlY3V0b3IpO1xuICAgICAgICB0aGlzLl9yZXNvbHZlRnJvbUV4ZWN1dG9yKGV4ZWN1dG9yKTtcbiAgICB9XG4gICAgdGhpcy5fcHJvbWlzZUNyZWF0ZWQoKTtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlQ3JlYXRlZFwiLCB0aGlzKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBQcm9taXNlXVwiO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuY2F1Z2h0ID0gUHJvbWlzZS5wcm90b3R5cGVbXCJjYXRjaFwiXSA9IGZ1bmN0aW9uIChmbikge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgIHZhciBjYXRjaEluc3RhbmNlcyA9IG5ldyBBcnJheShsZW4gLSAxKSxcbiAgICAgICAgICAgIGogPSAwLCBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuIC0gMTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgY2F0Y2hJbnN0YW5jZXNbaisrXSA9IGl0ZW07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYW4gb2JqZWN0IGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGl0ZW0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaEluc3RhbmNlcy5sZW5ndGggPSBqO1xuICAgICAgICBmbiA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIGNhdGNoRmlsdGVyKGNhdGNoSW5zdGFuY2VzLCBmbiwgdGhpcykpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgZm4pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmVmbGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihyZWZsZWN0SGFuZGxlcixcbiAgICAgICAgcmVmbGVjdEhhbmRsZXIsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAoZGlkRnVsZmlsbCwgZGlkUmVqZWN0KSB7XG4gICAgaWYgKGRlYnVnLndhcm5pbmdzKCkgJiYgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgdHlwZW9mIGRpZEZ1bGZpbGwgIT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICB0eXBlb2YgZGlkUmVqZWN0ICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdmFyIG1zZyA9IFwiLnRoZW4oKSBvbmx5IGFjY2VwdHMgZnVuY3Rpb25zIGJ1dCB3YXMgcGFzc2VkOiBcIiArXG4gICAgICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyhkaWRGdWxmaWxsKTtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBtc2cgKz0gXCIsIFwiICsgdXRpbC5jbGFzc1N0cmluZyhkaWRSZWplY3QpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3dhcm4obXNnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oZGlkRnVsZmlsbCwgZGlkUmVqZWN0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRvbmUgPSBmdW5jdGlvbiAoZGlkRnVsZmlsbCwgZGlkUmVqZWN0KSB7XG4gICAgdmFyIHByb21pc2UgPVxuICAgICAgICB0aGlzLl90aGVuKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgcHJvbWlzZS5fc2V0SXNGaW5hbCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc3ByZWFkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hbGwoKS5fdGhlbihmbiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIEFQUExZLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXQgPSB7XG4gICAgICAgIGlzRnVsZmlsbGVkOiBmYWxzZSxcbiAgICAgICAgaXNSZWplY3RlZDogZmFsc2UsXG4gICAgICAgIGZ1bGZpbGxtZW50VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgcmVqZWN0aW9uUmVhc29uOiB1bmRlZmluZWRcbiAgICB9O1xuICAgIGlmICh0aGlzLmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgcmV0LmZ1bGZpbGxtZW50VmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICAgIHJldC5pc0Z1bGZpbGxlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICByZXQucmVqZWN0aW9uUmVhc29uID0gdGhpcy5yZWFzb24oKTtcbiAgICAgICAgcmV0LmlzUmVqZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLl93YXJuKFwiLmFsbCgpIHdhcyBwYXNzZWQgYXJndW1lbnRzIGJ1dCBpdCBkb2VzIG5vdCB0YWtlIGFueVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlQXJyYXkodGhpcykucHJvbWlzZSgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gdGhpcy5jYXVnaHQodXRpbC5vcmlnaW5hdGVzRnJvbVJlamVjdGlvbiwgZm4pO1xufTtcblxuUHJvbWlzZS5pcyA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICByZXR1cm4gdmFsIGluc3RhbmNlb2YgUHJvbWlzZTtcbn07XG5cblByb21pc2UuZnJvbU5vZGUgPSBQcm9taXNlLmZyb21DYWxsYmFjayA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdmFyIG11bHRpQXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gISFPYmplY3QoYXJndW1lbnRzWzFdKS5tdWx0aUFyZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2goZm4pKG5vZGViYWNrRm9yUHJvbWlzZShyZXQsIG11bHRpQXJncykpO1xuICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHJldC5fcmVqZWN0Q2FsbGJhY2socmVzdWx0LmUsIHRydWUpO1xuICAgIH1cbiAgICBpZiAoIXJldC5faXNGYXRlU2VhbGVkKCkpIHJldC5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UuYWxsID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlQXJyYXkocHJvbWlzZXMpLnByb21pc2UoKTtcbn07XG5cblByb21pc2UuY2FzdCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICB2YXIgcmV0ID0gdHJ5Q29udmVydFRvUHJvbWlzZShvYmopO1xuICAgIGlmICghKHJldCBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICByZXQuX3NldEZ1bGZpbGxlZCgpO1xuICAgICAgICByZXQuX3JlamVjdGlvbkhhbmRsZXIwID0gb2JqO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5yZXNvbHZlID0gUHJvbWlzZS5mdWxmaWxsZWQgPSBQcm9taXNlLmNhc3Q7XG5cblByb21pc2UucmVqZWN0ID0gUHJvbWlzZS5yZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICByZXQuX3JlamVjdENhbGxiYWNrKHJlYXNvbiwgdHJ1ZSk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2Uuc2V0U2NoZWR1bGVyID0gZnVuY3Rpb24oZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHJldHVybiBhc3luYy5zZXRTY2hlZHVsZXIoZm4pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3RoZW4gPSBmdW5jdGlvbiAoXG4gICAgZGlkRnVsZmlsbCxcbiAgICBkaWRSZWplY3QsXG4gICAgXywgICAgcmVjZWl2ZXIsXG4gICAgaW50ZXJuYWxEYXRhXG4pIHtcbiAgICB2YXIgaGF2ZUludGVybmFsRGF0YSA9IGludGVybmFsRGF0YSAhPT0gdW5kZWZpbmVkO1xuICAgIHZhciBwcm9taXNlID0gaGF2ZUludGVybmFsRGF0YSA/IGludGVybmFsRGF0YSA6IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgdmFyIGJpdEZpZWxkID0gdGFyZ2V0Ll9iaXRGaWVsZDtcblxuICAgIGlmICghaGF2ZUludGVybmFsRGF0YSkge1xuICAgICAgICBwcm9taXNlLl9wcm9wYWdhdGVGcm9tKHRoaXMsIDMpO1xuICAgICAgICBwcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICBpZiAocmVjZWl2ZXIgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKCh0aGlzLl9iaXRGaWVsZCAmIDIwOTcxNTIpICE9PSAwKSkge1xuICAgICAgICAgICAgaWYgKCEoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyID0gdGhpcy5fYm91bmRWYWx1ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlciA9IHRhcmdldCA9PT0gdGhpcyA/IHVuZGVmaW5lZCA6IHRoaXMuX2JvdW5kVG87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KFwicHJvbWlzZUNoYWluZWRcIiwgdGhpcywgcHJvbWlzZSk7XG4gICAgfVxuXG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIGlmICghKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgdmFyIGhhbmRsZXIsIHZhbHVlLCBzZXR0bGVyID0gdGFyZ2V0Ll9zZXR0bGVQcm9taXNlQ3R4O1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGFyZ2V0Ll9yZWplY3Rpb25IYW5kbGVyMDtcbiAgICAgICAgICAgIGhhbmRsZXIgPSBkaWRGdWxmaWxsO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRhcmdldC5fZnVsZmlsbG1lbnRIYW5kbGVyMDtcbiAgICAgICAgICAgIGhhbmRsZXIgPSBkaWRSZWplY3Q7XG4gICAgICAgICAgICB0YXJnZXQuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldHRsZXIgPSB0YXJnZXQuX3NldHRsZVByb21pc2VMYXRlQ2FuY2VsbGF0aW9uT2JzZXJ2ZXI7XG4gICAgICAgICAgICB2YWx1ZSA9IG5ldyBDYW5jZWxsYXRpb25FcnJvcihcImxhdGUgY2FuY2VsbGF0aW9uIG9ic2VydmVyXCIpO1xuICAgICAgICAgICAgdGFyZ2V0Ll9hdHRhY2hFeHRyYVRyYWNlKHZhbHVlKTtcbiAgICAgICAgICAgIGhhbmRsZXIgPSBkaWRSZWplY3Q7XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYy5pbnZva2Uoc2V0dGxlciwgdGFyZ2V0LCB7XG4gICAgICAgICAgICBoYW5kbGVyOiBkb21haW4gPT09IG51bGwgPyBoYW5kbGVyXG4gICAgICAgICAgICAgICAgOiAodHlwZW9mIGhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIiAmJiBkb21haW4uYmluZChoYW5kbGVyKSksXG4gICAgICAgICAgICBwcm9taXNlOiBwcm9taXNlLFxuICAgICAgICAgICAgcmVjZWl2ZXI6IHJlY2VpdmVyLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldC5fYWRkQ2FsbGJhY2tzKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCwgcHJvbWlzZSwgcmVjZWl2ZXIsIGRvbWFpbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2U7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9iaXRGaWVsZCAmIDY1NTM1O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzRmF0ZVNlYWxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMTE3NTA2MDQ4KSAhPT0gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0ZvbGxvd2luZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNjcxMDg4NjQpID09PSA2NzEwODg2NDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRMZW5ndGggPSBmdW5jdGlvbiAobGVuKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSAodGhpcy5fYml0RmllbGQgJiAtNjU1MzYpIHxcbiAgICAgICAgKGxlbiAmIDY1NTM1KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRGdWxmaWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDMzNTU0NDMyO1xuICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VGdWxmaWxsZWRcIiwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0UmVqZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDE2Nzc3MjE2O1xuICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VSZWplY3RlZFwiLCB0aGlzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRGb2xsb3dpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDY3MTA4ODY0O1xuICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VSZXNvbHZlZFwiLCB0aGlzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRJc0ZpbmFsID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCA0MTk0MzA0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzRmluYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDQxOTQzMDQpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjY1NTM2KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgNjU1MzY7XG4gICAgdGhpcy5fZmlyZUV2ZW50KFwicHJvbWlzZUNhbmNlbGxlZFwiLCB0aGlzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRBc3luY0d1YXJhbnRlZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoYXN5bmMuaGFzQ3VzdG9tU2NoZWR1bGVyKCkpIHJldHVybjtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMTM0MjE3NzI4O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlY2VpdmVyQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICB2YXIgcmV0ID0gaW5kZXggPT09IDAgPyB0aGlzLl9yZWNlaXZlcjAgOiB0aGlzW1xuICAgICAgICAgICAgaW5kZXggKiA0IC0gNCArIDNdO1xuICAgIGlmIChyZXQgPT09IFVOREVGSU5FRF9CSU5ESU5HKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChyZXQgPT09IHVuZGVmaW5lZCAmJiB0aGlzLl9pc0JvdW5kKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JvdW5kVmFsdWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpc1tcbiAgICAgICAgICAgIGluZGV4ICogNCAtIDQgKyAyXTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mdWxmaWxsbWVudEhhbmRsZXJBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHJldHVybiB0aGlzW1xuICAgICAgICAgICAgaW5kZXggKiA0IC0gNCArIDBdO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlamVjdGlvbkhhbmRsZXJBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHJldHVybiB0aGlzW1xuICAgICAgICAgICAgaW5kZXggKiA0IC0gNCArIDFdO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2JvdW5kVmFsdWUgPSBmdW5jdGlvbigpIHt9O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbWlncmF0ZUNhbGxiYWNrMCA9IGZ1bmN0aW9uIChmb2xsb3dlcikge1xuICAgIHZhciBiaXRGaWVsZCA9IGZvbGxvd2VyLl9iaXRGaWVsZDtcbiAgICB2YXIgZnVsZmlsbCA9IGZvbGxvd2VyLl9mdWxmaWxsbWVudEhhbmRsZXIwO1xuICAgIHZhciByZWplY3QgPSBmb2xsb3dlci5fcmVqZWN0aW9uSGFuZGxlcjA7XG4gICAgdmFyIHByb21pc2UgPSBmb2xsb3dlci5fcHJvbWlzZTA7XG4gICAgdmFyIHJlY2VpdmVyID0gZm9sbG93ZXIuX3JlY2VpdmVyQXQoMCk7XG4gICAgaWYgKHJlY2VpdmVyID09PSB1bmRlZmluZWQpIHJlY2VpdmVyID0gVU5ERUZJTkVEX0JJTkRJTkc7XG4gICAgdGhpcy5fYWRkQ2FsbGJhY2tzKGZ1bGZpbGwsIHJlamVjdCwgcHJvbWlzZSwgcmVjZWl2ZXIsIG51bGwpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX21pZ3JhdGVDYWxsYmFja0F0ID0gZnVuY3Rpb24gKGZvbGxvd2VyLCBpbmRleCkge1xuICAgIHZhciBmdWxmaWxsID0gZm9sbG93ZXIuX2Z1bGZpbGxtZW50SGFuZGxlckF0KGluZGV4KTtcbiAgICB2YXIgcmVqZWN0ID0gZm9sbG93ZXIuX3JlamVjdGlvbkhhbmRsZXJBdChpbmRleCk7XG4gICAgdmFyIHByb21pc2UgPSBmb2xsb3dlci5fcHJvbWlzZUF0KGluZGV4KTtcbiAgICB2YXIgcmVjZWl2ZXIgPSBmb2xsb3dlci5fcmVjZWl2ZXJBdChpbmRleCk7XG4gICAgaWYgKHJlY2VpdmVyID09PSB1bmRlZmluZWQpIHJlY2VpdmVyID0gVU5ERUZJTkVEX0JJTkRJTkc7XG4gICAgdGhpcy5fYWRkQ2FsbGJhY2tzKGZ1bGZpbGwsIHJlamVjdCwgcHJvbWlzZSwgcmVjZWl2ZXIsIG51bGwpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2FkZENhbGxiYWNrcyA9IGZ1bmN0aW9uIChcbiAgICBmdWxmaWxsLFxuICAgIHJlamVjdCxcbiAgICBwcm9taXNlLFxuICAgIHJlY2VpdmVyLFxuICAgIGRvbWFpblxuKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5fbGVuZ3RoKCk7XG5cbiAgICBpZiAoaW5kZXggPj0gNjU1MzUgLSA0KSB7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fc2V0TGVuZ3RoKDApO1xuICAgIH1cblxuICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICB0aGlzLl9wcm9taXNlMCA9IHByb21pc2U7XG4gICAgICAgIHRoaXMuX3JlY2VpdmVyMCA9IHJlY2VpdmVyO1xuICAgICAgICBpZiAodHlwZW9mIGZ1bGZpbGwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMCA9XG4gICAgICAgICAgICAgICAgZG9tYWluID09PSBudWxsID8gZnVsZmlsbCA6IGRvbWFpbi5iaW5kKGZ1bGZpbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmVqZWN0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwID1cbiAgICAgICAgICAgICAgICBkb21haW4gPT09IG51bGwgPyByZWplY3QgOiBkb21haW4uYmluZChyZWplY3QpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJhc2UgPSBpbmRleCAqIDQgLSA0O1xuICAgICAgICB0aGlzW2Jhc2UgKyAyXSA9IHByb21pc2U7XG4gICAgICAgIHRoaXNbYmFzZSArIDNdID0gcmVjZWl2ZXI7XG4gICAgICAgIGlmICh0eXBlb2YgZnVsZmlsbCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzW2Jhc2UgKyAwXSA9XG4gICAgICAgICAgICAgICAgZG9tYWluID09PSBudWxsID8gZnVsZmlsbCA6IGRvbWFpbi5iaW5kKGZ1bGZpbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmVqZWN0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXNbYmFzZSArIDFdID1cbiAgICAgICAgICAgICAgICBkb21haW4gPT09IG51bGwgPyByZWplY3QgOiBkb21haW4uYmluZChyZWplY3QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3NldExlbmd0aChpbmRleCArIDEpO1xuICAgIHJldHVybiBpbmRleDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9wcm94eSA9IGZ1bmN0aW9uIChwcm94eWFibGUsIGFyZykge1xuICAgIHRoaXMuX2FkZENhbGxiYWNrcyh1bmRlZmluZWQsIHVuZGVmaW5lZCwgYXJnLCBwcm94eWFibGUsIG51bGwpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Jlc29sdmVDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlLCBzaG91bGRCaW5kKSB7XG4gICAgaWYgKCgodGhpcy5fYml0RmllbGQgJiAxMTc1MDYwNDgpICE9PSAwKSkgcmV0dXJuO1xuICAgIGlmICh2YWx1ZSA9PT0gdGhpcylcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdENhbGxiYWNrKG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yKCksIGZhbHNlKTtcbiAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh2YWx1ZSwgdGhpcyk7XG4gICAgaWYgKCEobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkpIHJldHVybiB0aGlzLl9mdWxmaWxsKHZhbHVlKTtcblxuICAgIGlmIChzaG91bGRCaW5kKSB0aGlzLl9wcm9wYWdhdGVGcm9tKG1heWJlUHJvbWlzZSwgMik7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG1heWJlUHJvbWlzZS5fdGFyZ2V0KCk7XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdGhpcykge1xuICAgICAgICB0aGlzLl9yZWplY3QobWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IoKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgYml0RmllbGQgPSBwcm9taXNlLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuX2xlbmd0aCgpO1xuICAgICAgICBpZiAobGVuID4gMCkgcHJvbWlzZS5fbWlncmF0ZUNhbGxiYWNrMCh0aGlzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgcHJvbWlzZS5fbWlncmF0ZUNhbGxiYWNrQXQodGhpcywgaSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2V0Rm9sbG93aW5nKCk7XG4gICAgICAgIHRoaXMuX3NldExlbmd0aCgwKTtcbiAgICAgICAgdGhpcy5fc2V0Rm9sbG93ZWUocHJvbWlzZSk7XG4gICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICB0aGlzLl9mdWxmaWxsKHByb21pc2UuX3ZhbHVlKCkpO1xuICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgdGhpcy5fcmVqZWN0KHByb21pc2UuX3JlYXNvbigpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVhc29uID0gbmV3IENhbmNlbGxhdGlvbkVycm9yKFwibGF0ZSBjYW5jZWxsYXRpb24gb2JzZXJ2ZXJcIik7XG4gICAgICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2UocmVhc29uKTtcbiAgICAgICAgdGhpcy5fcmVqZWN0KHJlYXNvbik7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlamVjdENhbGxiYWNrID1cbmZ1bmN0aW9uKHJlYXNvbiwgc3luY2hyb25vdXMsIGlnbm9yZU5vbkVycm9yV2FybmluZ3MpIHtcbiAgICB2YXIgdHJhY2UgPSB1dGlsLmVuc3VyZUVycm9yT2JqZWN0KHJlYXNvbik7XG4gICAgdmFyIGhhc1N0YWNrID0gdHJhY2UgPT09IHJlYXNvbjtcbiAgICBpZiAoIWhhc1N0YWNrICYmICFpZ25vcmVOb25FcnJvcldhcm5pbmdzICYmIGRlYnVnLndhcm5pbmdzKCkpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBcImEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQgd2l0aCBhIG5vbi1lcnJvcjogXCIgK1xuICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyhyZWFzb24pO1xuICAgICAgICB0aGlzLl93YXJuKG1lc3NhZ2UsIHRydWUpO1xuICAgIH1cbiAgICB0aGlzLl9hdHRhY2hFeHRyYVRyYWNlKHRyYWNlLCBzeW5jaHJvbm91cyA/IGhhc1N0YWNrIDogZmFsc2UpO1xuICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Jlc29sdmVGcm9tRXhlY3V0b3IgPSBmdW5jdGlvbiAoZXhlY3V0b3IpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdGhpcy5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICB0aGlzLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciBzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgdmFyIHIgPSB0aGlzLl9leGVjdXRlKGV4ZWN1dG9yLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBwcm9taXNlLl9yZXNvbHZlQ2FsbGJhY2sodmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVhc29uLCBzeW5jaHJvbm91cyk7XG4gICAgfSk7XG4gICAgc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICB0aGlzLl9wb3BDb250ZXh0KCk7XG5cbiAgICBpZiAociAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHIsIHRydWUpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlRnJvbUhhbmRsZXIgPSBmdW5jdGlvbiAoXG4gICAgaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlXG4pIHtcbiAgICB2YXIgYml0RmllbGQgPSBwcm9taXNlLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDY1NTM2KSAhPT0gMCkpIHJldHVybjtcbiAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciB4O1xuICAgIGlmIChyZWNlaXZlciA9PT0gQVBQTFkpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUubGVuZ3RoICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICB4ID0gZXJyb3JPYmo7XG4gICAgICAgICAgICB4LmUgPSBuZXcgVHlwZUVycm9yKFwiY2Fubm90IC5zcHJlYWQoKSBhIG5vbi1hcnJheTogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyh2YWx1ZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeCA9IHRyeUNhdGNoKGhhbmRsZXIpLmFwcGx5KHRoaXMuX2JvdW5kVmFsdWUoKSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgeCA9IHRyeUNhdGNoKGhhbmRsZXIpLmNhbGwocmVjZWl2ZXIsIHZhbHVlKTtcbiAgICB9XG4gICAgdmFyIHByb21pc2VDcmVhdGVkID0gcHJvbWlzZS5fcG9wQ29udGV4dCgpO1xuICAgIGJpdEZpZWxkID0gcHJvbWlzZS5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiA2NTUzNikgIT09IDApKSByZXR1cm47XG5cbiAgICBpZiAoeCA9PT0gTkVYVF9GSUxURVIpIHtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0KHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHggPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHguZSwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnLmNoZWNrRm9yZ290dGVuUmV0dXJucyh4LCBwcm9taXNlQ3JlYXRlZCwgXCJcIiwgIHByb21pc2UsIHRoaXMpO1xuICAgICAgICBwcm9taXNlLl9yZXNvbHZlQ2FsbGJhY2soeCk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3RhcmdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXQgPSB0aGlzO1xuICAgIHdoaWxlIChyZXQuX2lzRm9sbG93aW5nKCkpIHJldCA9IHJldC5fZm9sbG93ZWUoKTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2ZvbGxvd2VlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldEZvbGxvd2VlID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwID0gcHJvbWlzZTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlID0gZnVuY3Rpb24ocHJvbWlzZSwgaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlKSB7XG4gICAgdmFyIGlzUHJvbWlzZSA9IHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlO1xuICAgIHZhciBiaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkO1xuICAgIHZhciBhc3luY0d1YXJhbnRlZWQgPSAoKGJpdEZpZWxkICYgMTM0MjE3NzI4KSAhPT0gMCk7XG4gICAgaWYgKCgoYml0RmllbGQgJiA2NTUzNikgIT09IDApKSB7XG4gICAgICAgIGlmIChpc1Byb21pc2UpIHByb21pc2UuX2ludm9rZUludGVybmFsT25DYW5jZWwoKTtcblxuICAgICAgICBpZiAocmVjZWl2ZXIgaW5zdGFuY2VvZiBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0ICYmXG4gICAgICAgICAgICByZWNlaXZlci5pc0ZpbmFsbHlIYW5kbGVyKCkpIHtcbiAgICAgICAgICAgIHJlY2VpdmVyLmNhbmNlbFByb21pc2UgPSBwcm9taXNlO1xuICAgICAgICAgICAgaWYgKHRyeUNhdGNoKGhhbmRsZXIpLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9yZWplY3QoZXJyb3JPYmouZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlciA9PT0gcmVmbGVjdEhhbmRsZXIpIHtcbiAgICAgICAgICAgIHByb21pc2UuX2Z1bGZpbGwocmVmbGVjdEhhbmRsZXIuY2FsbChyZWNlaXZlcikpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlY2VpdmVyIGluc3RhbmNlb2YgUHJveHlhYmxlKSB7XG4gICAgICAgICAgICByZWNlaXZlci5fcHJvbWlzZUNhbmNlbGxlZChwcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UgfHwgcHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2VBcnJheSkge1xuICAgICAgICAgICAgcHJvbWlzZS5fY2FuY2VsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWNlaXZlci5jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBpZiAoIWlzUHJvbWlzZSkge1xuICAgICAgICAgICAgaGFuZGxlci5jYWxsKHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoYXN5bmNHdWFyYW50ZWVkKSBwcm9taXNlLl9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbiAgICAgICAgICAgIHRoaXMuX3NldHRsZVByb21pc2VGcm9tSGFuZGxlcihoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChyZWNlaXZlciBpbnN0YW5jZW9mIFByb3h5YWJsZSkge1xuICAgICAgICBpZiAoIXJlY2VpdmVyLl9pc1Jlc29sdmVkKCkpIHtcbiAgICAgICAgICAgIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyLl9wcm9taXNlRnVsZmlsbGVkKHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIuX3Byb21pc2VSZWplY3RlZCh2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZSkge1xuICAgICAgICBpZiAoYXN5bmNHdWFyYW50ZWVkKSBwcm9taXNlLl9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbiAgICAgICAgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb21pc2UuX3JlamVjdCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZUxhdGVDYW5jZWxsYXRpb25PYnNlcnZlciA9IGZ1bmN0aW9uKGN0eCkge1xuICAgIHZhciBoYW5kbGVyID0gY3R4LmhhbmRsZXI7XG4gICAgdmFyIHByb21pc2UgPSBjdHgucHJvbWlzZTtcbiAgICB2YXIgcmVjZWl2ZXIgPSBjdHgucmVjZWl2ZXI7XG4gICAgdmFyIHZhbHVlID0gY3R4LnZhbHVlO1xuICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGlmICghKHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuICAgICAgICAgICAgaGFuZGxlci5jYWxsKHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlRnJvbUhhbmRsZXIoaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAocHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0KHZhbHVlKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZUN0eCA9IGZ1bmN0aW9uKGN0eCkge1xuICAgIHRoaXMuX3NldHRsZVByb21pc2UoY3R4LnByb21pc2UsIGN0eC5oYW5kbGVyLCBjdHgucmVjZWl2ZXIsIGN0eC52YWx1ZSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZTAgPSBmdW5jdGlvbihoYW5kbGVyLCB2YWx1ZSwgYml0RmllbGQpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2UwO1xuICAgIHZhciByZWNlaXZlciA9IHRoaXMuX3JlY2VpdmVyQXQoMCk7XG4gICAgdGhpcy5fcHJvbWlzZTAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVjZWl2ZXIwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3NldHRsZVByb21pc2UocHJvbWlzZSwgaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9jbGVhckNhbGxiYWNrRGF0YUF0SW5kZXggPSBmdW5jdGlvbihpbmRleCkge1xuICAgIHZhciBiYXNlID0gaW5kZXggKiA0IC0gNDtcbiAgICB0aGlzW2Jhc2UgKyAyXSA9XG4gICAgdGhpc1tiYXNlICsgM10gPVxuICAgIHRoaXNbYmFzZSArIDBdID1cbiAgICB0aGlzW2Jhc2UgKyAxXSA9IHVuZGVmaW5lZDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mdWxmaWxsID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gdGhpcy5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiAxMTc1MDYwNDgpID4+PiAxNikpIHJldHVybjtcbiAgICBpZiAodmFsdWUgPT09IHRoaXMpIHtcbiAgICAgICAgdmFyIGVyciA9IG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yKCk7XG4gICAgICAgIHRoaXMuX2F0dGFjaEV4dHJhVHJhY2UoZXJyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdChlcnIpO1xuICAgIH1cbiAgICB0aGlzLl9zZXRGdWxmaWxsZWQoKTtcbiAgICB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMCA9IHZhbHVlO1xuXG4gICAgaWYgKChiaXRGaWVsZCAmIDY1NTM1KSA+IDApIHtcbiAgICAgICAgaWYgKCgoYml0RmllbGQgJiAxMzQyMTc3MjgpICE9PSAwKSkge1xuICAgICAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFzeW5jLnNldHRsZVByb21pc2VzKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlamVjdCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB2YXIgYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDExNzUwNjA0OCkgPj4+IDE2KSkgcmV0dXJuO1xuICAgIHRoaXMuX3NldFJlamVjdGVkKCk7XG4gICAgdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMCA9IHJlYXNvbjtcblxuICAgIGlmICh0aGlzLl9pc0ZpbmFsKCkpIHtcbiAgICAgICAgcmV0dXJuIGFzeW5jLmZhdGFsRXJyb3IocmVhc29uLCB1dGlsLmlzTm9kZSk7XG4gICAgfVxuXG4gICAgaWYgKChiaXRGaWVsZCAmIDY1NTM1KSA+IDApIHtcbiAgICAgICAgYXN5bmMuc2V0dGxlUHJvbWlzZXModGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZW5zdXJlUG9zc2libGVSZWplY3Rpb25IYW5kbGVkKCk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Z1bGZpbGxQcm9taXNlcyA9IGZ1bmN0aW9uIChsZW4sIHZhbHVlKSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgaGFuZGxlciA9IHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlckF0KGkpO1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2VBdChpKTtcbiAgICAgICAgdmFyIHJlY2VpdmVyID0gdGhpcy5fcmVjZWl2ZXJBdChpKTtcbiAgICAgICAgdGhpcy5fY2xlYXJDYWxsYmFja0RhdGFBdEluZGV4KGkpO1xuICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlKHByb21pc2UsIGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlamVjdFByb21pc2VzID0gZnVuY3Rpb24gKGxlbiwgcmVhc29uKSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgaGFuZGxlciA9IHRoaXMuX3JlamVjdGlvbkhhbmRsZXJBdChpKTtcbiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlQXQoaSk7XG4gICAgICAgIHZhciByZWNlaXZlciA9IHRoaXMuX3JlY2VpdmVyQXQoaSk7XG4gICAgICAgIHRoaXMuX2NsZWFyQ2FsbGJhY2tEYXRhQXRJbmRleChpKTtcbiAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZShwcm9taXNlLCBoYW5kbGVyLCByZWNlaXZlciwgcmVhc29uKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gdGhpcy5fYml0RmllbGQ7XG4gICAgdmFyIGxlbiA9IChiaXRGaWVsZCAmIDY1NTM1KTtcblxuICAgIGlmIChsZW4gPiAwKSB7XG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgMTY4NDI3NTIpICE9PSAwKSkge1xuICAgICAgICAgICAgdmFyIHJlYXNvbiA9IHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjA7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlMCh0aGlzLl9yZWplY3Rpb25IYW5kbGVyMCwgcmVhc29uLCBiaXRGaWVsZCk7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3RQcm9taXNlcyhsZW4sIHJlYXNvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMDtcbiAgICAgICAgICAgIHRoaXMuX3NldHRsZVByb21pc2UwKHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAsIHZhbHVlLCBiaXRGaWVsZCk7XG4gICAgICAgICAgICB0aGlzLl9mdWxmaWxsUHJvbWlzZXMobGVuLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2V0TGVuZ3RoKDApO1xuICAgIH1cbiAgICB0aGlzLl9jbGVhckNhbmNlbGxhdGlvbkRhdGEoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVkVmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZDtcbiAgICBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwO1xuICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjA7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gZGVmZXJSZXNvbHZlKHYpIHt0aGlzLnByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2KTt9XG5mdW5jdGlvbiBkZWZlclJlamVjdCh2KSB7dGhpcy5wcm9taXNlLl9yZWplY3RDYWxsYmFjayh2LCBmYWxzZSk7fVxuXG5Qcm9taXNlLmRlZmVyID0gUHJvbWlzZS5wZW5kaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcuZGVwcmVjYXRlZChcIlByb21pc2UuZGVmZXJcIiwgXCJuZXcgUHJvbWlzZVwiKTtcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9taXNlOiBwcm9taXNlLFxuICAgICAgICByZXNvbHZlOiBkZWZlclJlc29sdmUsXG4gICAgICAgIHJlamVjdDogZGVmZXJSZWplY3RcbiAgICB9O1xufTtcblxudXRpbC5ub3RFbnVtZXJhYmxlUHJvcChQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICBcIl9tYWtlU2VsZlJlc29sdXRpb25FcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICBtYWtlU2VsZlJlc29sdXRpb25FcnJvcik7XG5cbl9kZXJlcV8oXCIuL21ldGhvZFwiKShQcm9taXNlLCBJTlRFUk5BTCwgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uLFxuICAgIGRlYnVnKTtcbl9kZXJlcV8oXCIuL2JpbmRcIikoUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGRlYnVnKTtcbl9kZXJlcV8oXCIuL2NhbmNlbFwiKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbiwgZGVidWcpO1xuX2RlcmVxXyhcIi4vZGlyZWN0X3Jlc29sdmVcIikoUHJvbWlzZSk7XG5fZGVyZXFfKFwiLi9zeW5jaHJvbm91c19pbnNwZWN0aW9uXCIpKFByb21pc2UpO1xuX2RlcmVxXyhcIi4vam9pblwiKShcbiAgICBQcm9taXNlLCBQcm9taXNlQXJyYXksIHRyeUNvbnZlcnRUb1Byb21pc2UsIElOVEVSTkFMLCBkZWJ1Zyk7XG5Qcm9taXNlLlByb21pc2UgPSBQcm9taXNlO1xuUHJvbWlzZS52ZXJzaW9uID0gXCIzLjQuMFwiO1xuX2RlcmVxXygnLi9tYXAuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbiwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwsIGRlYnVnKTtcbl9kZXJlcV8oJy4vY2FsbF9nZXQuanMnKShQcm9taXNlKTtcbl9kZXJlcV8oJy4vdXNpbmcuanMnKShQcm9taXNlLCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsIGNyZWF0ZUNvbnRleHQsIElOVEVSTkFMLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL3RpbWVycy5qcycpKFByb21pc2UsIElOVEVSTkFMLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL2dlbmVyYXRvcnMuanMnKShQcm9taXNlLCBhcGlSZWplY3Rpb24sIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBQcm94eWFibGUsIGRlYnVnKTtcbl9kZXJlcV8oJy4vbm9kZWlmeS5qcycpKFByb21pc2UpO1xuX2RlcmVxXygnLi9wcm9taXNpZnkuanMnKShQcm9taXNlLCBJTlRFUk5BTCk7XG5fZGVyZXFfKCcuL3Byb3BzLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24pO1xuX2RlcmVxXygnLi9yYWNlLmpzJykoUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbik7XG5fZGVyZXFfKCcuL3JlZHVjZS5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBJTlRFUk5BTCwgZGVidWcpO1xuX2RlcmVxXygnLi9zZXR0bGUuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGRlYnVnKTtcbl9kZXJlcV8oJy4vc29tZS5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uKTtcbl9kZXJlcV8oJy4vZmlsdGVyLmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xuX2RlcmVxXygnLi9lYWNoLmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xuX2RlcmVxXygnLi9hbnkuanMnKShQcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIHV0aWwudG9GYXN0UHJvcGVydGllcyhQcm9taXNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICB1dGlsLnRvRmFzdFByb3BlcnRpZXMoUHJvbWlzZS5wcm90b3R5cGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZnVuY3Rpb24gZmlsbFR5cGVzKHZhbHVlKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICB2YXIgcCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgcC5fZnVsZmlsbG1lbnRIYW5kbGVyMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHAuX3JlamVjdGlvbkhhbmRsZXIwID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBwLl9wcm9taXNlMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgcC5fcmVjZWl2ZXIwID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIC8vIENvbXBsZXRlIHNsYWNrIHRyYWNraW5nLCBvcHQgb3V0IG9mIGZpZWxkLXR5cGUgdHJhY2tpbmcgYW5kICAgICAgICAgICBcbiAgICAvLyBzdGFiaWxpemUgbWFwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKHthOiAxfSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyh7YjogMn0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXMoe2M6IDN9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyhmdW5jdGlvbigpe30pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXModW5kZWZpbmVkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKGZhbHNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyhuZXcgUHJvbWlzZShJTlRFUk5BTCkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBkZWJ1Zy5zZXRCb3VuZHMoQXN5bmMuZmlyc3RMaW5lRXJyb3IsIHV0aWwubGFzdExpbmVFcnJvcik7ICAgICAgICAgICAgICAgXG4gICAgcmV0dXJuIFByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG59O1xuXG59LHtcIi4vYW55LmpzXCI6MSxcIi4vYXN5bmNcIjoyLFwiLi9iaW5kXCI6MyxcIi4vY2FsbF9nZXQuanNcIjo1LFwiLi9jYW5jZWxcIjo2LFwiLi9jYXRjaF9maWx0ZXJcIjo3LFwiLi9jb250ZXh0XCI6OCxcIi4vZGVidWdnYWJpbGl0eVwiOjksXCIuL2RpcmVjdF9yZXNvbHZlXCI6MTAsXCIuL2VhY2guanNcIjoxMSxcIi4vZXJyb3JzXCI6MTIsXCIuL2VzNVwiOjEzLFwiLi9maWx0ZXIuanNcIjoxNCxcIi4vZmluYWxseVwiOjE1LFwiLi9nZW5lcmF0b3JzLmpzXCI6MTYsXCIuL2pvaW5cIjoxNyxcIi4vbWFwLmpzXCI6MTgsXCIuL21ldGhvZFwiOjE5LFwiLi9ub2RlYmFja1wiOjIwLFwiLi9ub2RlaWZ5LmpzXCI6MjEsXCIuL3Byb21pc2VfYXJyYXlcIjoyMyxcIi4vcHJvbWlzaWZ5LmpzXCI6MjQsXCIuL3Byb3BzLmpzXCI6MjUsXCIuL3JhY2UuanNcIjoyNyxcIi4vcmVkdWNlLmpzXCI6MjgsXCIuL3NldHRsZS5qc1wiOjMwLFwiLi9zb21lLmpzXCI6MzEsXCIuL3N5bmNocm9ub3VzX2luc3BlY3Rpb25cIjozMixcIi4vdGhlbmFibGVzXCI6MzMsXCIuL3RpbWVycy5qc1wiOjM0LFwiLi91c2luZy5qc1wiOjM1LFwiLi91dGlsXCI6MzZ9XSwyMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgYXBpUmVqZWN0aW9uLCBQcm94eWFibGUpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBpc0FycmF5ID0gdXRpbC5pc0FycmF5O1xuXG5mdW5jdGlvbiB0b1Jlc29sdXRpb25WYWx1ZSh2YWwpIHtcbiAgICBzd2l0Y2godmFsKSB7XG4gICAgY2FzZSAtMjogcmV0dXJuIFtdO1xuICAgIGNhc2UgLTM6IHJldHVybiB7fTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFByb21pc2VBcnJheSh2YWx1ZXMpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgaWYgKHZhbHVlcyBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZS5fcHJvcGFnYXRlRnJvbSh2YWx1ZXMsIDMpO1xuICAgIH1cbiAgICBwcm9taXNlLl9zZXRPbkNhbmNlbCh0aGlzKTtcbiAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICB0aGlzLl90b3RhbFJlc29sdmVkID0gMDtcbiAgICB0aGlzLl9pbml0KHVuZGVmaW5lZCwgLTIpO1xufVxudXRpbC5pbmhlcml0cyhQcm9taXNlQXJyYXksIFByb3h5YWJsZSk7XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLnByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gaW5pdChfLCByZXNvbHZlVmFsdWVJZkVtcHR5KSB7XG4gICAgdmFyIHZhbHVlcyA9IHRyeUNvbnZlcnRUb1Byb21pc2UodGhpcy5fdmFsdWVzLCB0aGlzLl9wcm9taXNlKTtcbiAgICBpZiAodmFsdWVzIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuX3RhcmdldCgpO1xuICAgICAgICB2YXIgYml0RmllbGQgPSB2YWx1ZXMuX2JpdEZpZWxkO1xuICAgICAgICA7XG4gICAgICAgIHRoaXMuX3ZhbHVlcyA9IHZhbHVlcztcblxuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcy5fdGhlbihcbiAgICAgICAgICAgICAgICBpbml0LFxuICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdCxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICByZXNvbHZlVmFsdWVJZkVtcHR5XG4gICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlcy5fdmFsdWUoKTtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdCh2YWx1ZXMuX3JlYXNvbigpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YWx1ZXMgPSB1dGlsLmFzQXJyYXkodmFsdWVzKTtcbiAgICBpZiAodmFsdWVzID09PSBudWxsKSB7XG4gICAgICAgIHZhciBlcnIgPSBhcGlSZWplY3Rpb24oXG4gICAgICAgICAgICBcImV4cGVjdGluZyBhbiBhcnJheSBvciBhbiBpdGVyYWJsZSBvYmplY3QgYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcodmFsdWVzKSkucmVhc29uKCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3JlamVjdENhbGxiYWNrKGVyciwgZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKHJlc29sdmVWYWx1ZUlmRW1wdHkgPT09IC01KSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlRW1wdHlBcnJheSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0b1Jlc29sdXRpb25WYWx1ZShyZXNvbHZlVmFsdWVJZkVtcHR5KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pdGVyYXRlKHZhbHVlcyk7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pdGVyYXRlID0gZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgdmFyIGxlbiA9IHRoaXMuZ2V0QWN0dWFsTGVuZ3RoKHZhbHVlcy5sZW5ndGgpO1xuICAgIHRoaXMuX2xlbmd0aCA9IGxlbjtcbiAgICB0aGlzLl92YWx1ZXMgPSB0aGlzLnNob3VsZENvcHlWYWx1ZXMoKSA/IG5ldyBBcnJheShsZW4pIDogdGhpcy5fdmFsdWVzO1xuICAgIHZhciByZXN1bHQgPSB0aGlzLl9wcm9taXNlO1xuICAgIHZhciBpc1Jlc29sdmVkID0gZmFsc2U7XG4gICAgdmFyIGJpdEZpZWxkID0gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHZhbHVlc1tpXSwgcmVzdWx0KTtcblxuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIGJpdEZpZWxkID0gbWF5YmVQcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJpdEZpZWxkID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1Jlc29sdmVkKSB7XG4gICAgICAgICAgICBpZiAoYml0RmllbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtYXliZVByb21pc2Uuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYml0RmllbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fcHJveHkodGhpcywgaSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzW2ldID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0aGlzLl9wcm9taXNlRnVsZmlsbGVkKG1heWJlUHJvbWlzZS5fdmFsdWUoKSwgaSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRoaXMuX3Byb21pc2VSZWplY3RlZChtYXliZVByb21pc2UuX3JlYXNvbigpLCBpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRoaXMuX3Byb21pc2VDYW5jZWxsZWQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpc1Jlc29sdmVkID0gdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZChtYXliZVByb21pc2UsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghaXNSZXNvbHZlZCkgcmVzdWx0Ll9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX2lzUmVzb2x2ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcyA9PT0gbnVsbDtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSB8fCAhdGhpcy5fcHJvbWlzZS5pc0NhbmNlbGxhYmxlKCkpIHJldHVybjtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX2NhbmNlbCgpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRoaXMuX3ZhbHVlcyA9IG51bGw7XG4gICAgdGhpcy5fcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVhc29uLCBmYWxzZSk7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICB2YXIgdG90YWxSZXNvbHZlZCA9ICsrdGhpcy5fdG90YWxSZXNvbHZlZDtcbiAgICBpZiAodG90YWxSZXNvbHZlZCA+PSB0aGlzLl9sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUNhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZVJlamVjdGVkID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRoaXMuX3RvdGFsUmVzb2x2ZWQrKztcbiAgICB0aGlzLl9yZWplY3QocmVhc29uKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5fdmFsdWVzO1xuICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgIGlmICh2YWx1ZXMgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHZhbHVlcy5jYW5jZWwoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlc1tpXSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbaV0uY2FuY2VsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLnNob3VsZENvcHlWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLmdldEFjdHVhbExlbmd0aCA9IGZ1bmN0aW9uIChsZW4pIHtcbiAgICByZXR1cm4gbGVuO1xufTtcblxucmV0dXJuIFByb21pc2VBcnJheTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciBUSElTID0ge307XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgbm9kZWJhY2tGb3JQcm9taXNlID0gX2RlcmVxXyhcIi4vbm9kZWJhY2tcIik7XG52YXIgd2l0aEFwcGVuZGVkID0gdXRpbC53aXRoQXBwZW5kZWQ7XG52YXIgbWF5YmVXcmFwQXNFcnJvciA9IHV0aWwubWF5YmVXcmFwQXNFcnJvcjtcbnZhciBjYW5FdmFsdWF0ZSA9IHV0aWwuY2FuRXZhbHVhdGU7XG52YXIgVHlwZUVycm9yID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpLlR5cGVFcnJvcjtcbnZhciBkZWZhdWx0U3VmZml4ID0gXCJBc3luY1wiO1xudmFyIGRlZmF1bHRQcm9taXNpZmllZCA9IHtfX2lzUHJvbWlzaWZpZWRfXzogdHJ1ZX07XG52YXIgbm9Db3B5UHJvcHMgPSBbXG4gICAgXCJhcml0eVwiLCAgICBcImxlbmd0aFwiLFxuICAgIFwibmFtZVwiLFxuICAgIFwiYXJndW1lbnRzXCIsXG4gICAgXCJjYWxsZXJcIixcbiAgICBcImNhbGxlZVwiLFxuICAgIFwicHJvdG90eXBlXCIsXG4gICAgXCJfX2lzUHJvbWlzaWZpZWRfX1wiXG5dO1xudmFyIG5vQ29weVByb3BzUGF0dGVybiA9IG5ldyBSZWdFeHAoXCJeKD86XCIgKyBub0NvcHlQcm9wcy5qb2luKFwifFwiKSArIFwiKSRcIik7XG5cbnZhciBkZWZhdWx0RmlsdGVyID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB1dGlsLmlzSWRlbnRpZmllcihuYW1lKSAmJlxuICAgICAgICBuYW1lLmNoYXJBdCgwKSAhPT0gXCJfXCIgJiZcbiAgICAgICAgbmFtZSAhPT0gXCJjb25zdHJ1Y3RvclwiO1xufTtcblxuZnVuY3Rpb24gcHJvcHNGaWx0ZXIoa2V5KSB7XG4gICAgcmV0dXJuICFub0NvcHlQcm9wc1BhdHRlcm4udGVzdChrZXkpO1xufVxuXG5mdW5jdGlvbiBpc1Byb21pc2lmaWVkKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZuLl9faXNQcm9taXNpZmllZF9fID09PSB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYXNQcm9taXNpZmllZChvYmosIGtleSwgc3VmZml4KSB7XG4gICAgdmFyIHZhbCA9IHV0aWwuZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0KG9iaiwga2V5ICsgc3VmZml4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UHJvbWlzaWZpZWQpO1xuICAgIHJldHVybiB2YWwgPyBpc1Byb21pc2lmaWVkKHZhbCkgOiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGNoZWNrVmFsaWQocmV0LCBzdWZmaXgsIHN1ZmZpeFJlZ2V4cCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgIHZhciBrZXkgPSByZXRbaV07XG4gICAgICAgIGlmIChzdWZmaXhSZWdleHAudGVzdChrZXkpKSB7XG4gICAgICAgICAgICB2YXIga2V5V2l0aG91dEFzeW5jU3VmZml4ID0ga2V5LnJlcGxhY2Uoc3VmZml4UmVnZXhwLCBcIlwiKTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmV0Lmxlbmd0aDsgaiArPSAyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJldFtqXSA9PT0ga2V5V2l0aG91dEFzeW5jU3VmZml4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcHJvbWlzaWZ5IGFuIEFQSSB0aGF0IGhhcyBub3JtYWwgbWV0aG9kcyB3aXRoICclcyctc3VmZml4XFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcIiVzXCIsIHN1ZmZpeCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcHJvbWlzaWZpYWJsZU1ldGhvZHMob2JqLCBzdWZmaXgsIHN1ZmZpeFJlZ2V4cCwgZmlsdGVyKSB7XG4gICAgdmFyIGtleXMgPSB1dGlsLmluaGVyaXRlZERhdGFLZXlzKG9iaik7XG4gICAgdmFyIHJldCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgIHZhciBwYXNzZXNEZWZhdWx0RmlsdGVyID0gZmlsdGVyID09PSBkZWZhdWx0RmlsdGVyXG4gICAgICAgICAgICA/IHRydWUgOiBkZWZhdWx0RmlsdGVyKGtleSwgdmFsdWUsIG9iaik7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgIWlzUHJvbWlzaWZpZWQodmFsdWUpICYmXG4gICAgICAgICAgICAhaGFzUHJvbWlzaWZpZWQob2JqLCBrZXksIHN1ZmZpeCkgJiZcbiAgICAgICAgICAgIGZpbHRlcihrZXksIHZhbHVlLCBvYmosIHBhc3Nlc0RlZmF1bHRGaWx0ZXIpKSB7XG4gICAgICAgICAgICByZXQucHVzaChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjaGVja1ZhbGlkKHJldCwgc3VmZml4LCBzdWZmaXhSZWdleHApO1xuICAgIHJldHVybiByZXQ7XG59XG5cbnZhciBlc2NhcGVJZGVudFJlZ2V4ID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWyRdKS8sIFwiXFxcXCRcIik7XG59O1xuXG52YXIgbWFrZU5vZGVQcm9taXNpZmllZEV2YWw7XG5pZiAoIXRydWUpIHtcbnZhciBzd2l0Y2hDYXNlQXJndW1lbnRPcmRlciA9IGZ1bmN0aW9uKGxpa2VseUFyZ3VtZW50Q291bnQpIHtcbiAgICB2YXIgcmV0ID0gW2xpa2VseUFyZ3VtZW50Q291bnRdO1xuICAgIHZhciBtaW4gPSBNYXRoLm1heCgwLCBsaWtlbHlBcmd1bWVudENvdW50IC0gMSAtIDMpO1xuICAgIGZvcih2YXIgaSA9IGxpa2VseUFyZ3VtZW50Q291bnQgLSAxOyBpID49IG1pbjsgLS1pKSB7XG4gICAgICAgIHJldC5wdXNoKGkpO1xuICAgIH1cbiAgICBmb3IodmFyIGkgPSBsaWtlbHlBcmd1bWVudENvdW50ICsgMTsgaSA8PSAzOyArK2kpIHtcbiAgICAgICAgcmV0LnB1c2goaSk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG52YXIgYXJndW1lbnRTZXF1ZW5jZSA9IGZ1bmN0aW9uKGFyZ3VtZW50Q291bnQpIHtcbiAgICByZXR1cm4gdXRpbC5maWxsZWRSYW5nZShhcmd1bWVudENvdW50LCBcIl9hcmdcIiwgXCJcIik7XG59O1xuXG52YXIgcGFyYW1ldGVyRGVjbGFyYXRpb24gPSBmdW5jdGlvbihwYXJhbWV0ZXJDb3VudCkge1xuICAgIHJldHVybiB1dGlsLmZpbGxlZFJhbmdlKFxuICAgICAgICBNYXRoLm1heChwYXJhbWV0ZXJDb3VudCwgMyksIFwiX2FyZ1wiLCBcIlwiKTtcbn07XG5cbnZhciBwYXJhbWV0ZXJDb3VudCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbi5sZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KE1hdGgubWluKGZuLmxlbmd0aCwgMTAyMyArIDEpLCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG59O1xuXG5tYWtlTm9kZVByb21pc2lmaWVkRXZhbCA9XG5mdW5jdGlvbihjYWxsYmFjaywgcmVjZWl2ZXIsIG9yaWdpbmFsTmFtZSwgZm4sIF8sIG11bHRpQXJncykge1xuICAgIHZhciBuZXdQYXJhbWV0ZXJDb3VudCA9IE1hdGgubWF4KDAsIHBhcmFtZXRlckNvdW50KGZuKSAtIDEpO1xuICAgIHZhciBhcmd1bWVudE9yZGVyID0gc3dpdGNoQ2FzZUFyZ3VtZW50T3JkZXIobmV3UGFyYW1ldGVyQ291bnQpO1xuICAgIHZhciBzaG91bGRQcm94eVRoaXMgPSB0eXBlb2YgY2FsbGJhY2sgPT09IFwic3RyaW5nXCIgfHwgcmVjZWl2ZXIgPT09IFRISVM7XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUNhbGxGb3JBcmd1bWVudENvdW50KGNvdW50KSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRTZXF1ZW5jZShjb3VudCkuam9pbihcIiwgXCIpO1xuICAgICAgICB2YXIgY29tbWEgPSBjb3VudCA+IDAgPyBcIiwgXCIgOiBcIlwiO1xuICAgICAgICB2YXIgcmV0O1xuICAgICAgICBpZiAoc2hvdWxkUHJveHlUaGlzKSB7XG4gICAgICAgICAgICByZXQgPSBcInJldCA9IGNhbGxiYWNrLmNhbGwodGhpcywge3thcmdzfX0sIG5vZGViYWNrKTsgYnJlYWs7XFxuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXQgPSByZWNlaXZlciA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBcInJldCA9IGNhbGxiYWNrKHt7YXJnc319LCBub2RlYmFjayk7IGJyZWFrO1xcblwiXG4gICAgICAgICAgICAgICAgOiBcInJldCA9IGNhbGxiYWNrLmNhbGwocmVjZWl2ZXIsIHt7YXJnc319LCBub2RlYmFjayk7IGJyZWFrO1xcblwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQucmVwbGFjZShcInt7YXJnc319XCIsIGFyZ3MpLnJlcGxhY2UoXCIsIFwiLCBjb21tYSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVBcmd1bWVudFN3aXRjaENhc2UoKSB7XG4gICAgICAgIHZhciByZXQgPSBcIlwiO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50T3JkZXIubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHJldCArPSBcImNhc2UgXCIgKyBhcmd1bWVudE9yZGVyW2ldICtcIjpcIiArXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVDYWxsRm9yQXJndW1lbnRDb3VudChhcmd1bWVudE9yZGVyW2ldKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldCArPSBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICBkZWZhdWx0OiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkobGVuICsgMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgYXJnc1tpXSA9IG5vZGViYWNrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgW0NvZGVGb3JDYWxsXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICBcIi5yZXBsYWNlKFwiW0NvZGVGb3JDYWxsXVwiLCAoc2hvdWxkUHJveHlUaGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJyZXQgPSBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTtcXG5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwicmV0ID0gY2FsbGJhY2suYXBwbHkocmVjZWl2ZXIsIGFyZ3MpO1xcblwiKSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgdmFyIGdldEZ1bmN0aW9uQ29kZSA9IHR5cGVvZiBjYWxsYmFjayA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChcInRoaXMgIT0gbnVsbCA/IHRoaXNbJ1wiK2NhbGxiYWNrK1wiJ10gOiBmblwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiZm5cIjtcbiAgICB2YXIgYm9keSA9IFwiJ3VzZSBzdHJpY3QnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIHZhciByZXQgPSBmdW5jdGlvbiAoUGFyYW1ldGVycykgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBwcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgbm9kZWJhY2sgPSBub2RlYmFja0ZvclByb21pc2UocHJvbWlzZSwgXCIgKyBtdWx0aUFyZ3MgKyBcIik7ICAgXFxuXFxcbiAgICAgICAgICAgIHZhciByZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHRyeUNhdGNoKFtHZXRGdW5jdGlvbkNvZGVdKTsgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHN3aXRjaChsZW4pIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBbQ29kZUZvclN3aXRjaENhc2VdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhtYXliZVdyYXBBc0Vycm9yKHJldC5lKSwgdHJ1ZSwgdHJ1ZSk7XFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGlmICghcHJvbWlzZS5faXNGYXRlU2VhbGVkKCkpIHByb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpOyAgICAgXFxuXFxcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgfTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AocmV0LCAnX19pc1Byb21pc2lmaWVkX18nLCB0cnVlKTsgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgcmV0dXJuIHJldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICBcIi5yZXBsYWNlKFwiW0NvZGVGb3JTd2l0Y2hDYXNlXVwiLCBnZW5lcmF0ZUFyZ3VtZW50U3dpdGNoQ2FzZSgpKVxuICAgICAgICAucmVwbGFjZShcIltHZXRGdW5jdGlvbkNvZGVdXCIsIGdldEZ1bmN0aW9uQ29kZSk7XG4gICAgYm9keSA9IGJvZHkucmVwbGFjZShcIlBhcmFtZXRlcnNcIiwgcGFyYW1ldGVyRGVjbGFyYXRpb24obmV3UGFyYW1ldGVyQ291bnQpKTtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwiUHJvbWlzZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJmblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJyZWNlaXZlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aXRoQXBwZW5kZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWF5YmVXcmFwQXNFcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJub2RlYmFja0ZvclByb21pc2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHJ5Q2F0Y2hcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZXJyb3JPYmpcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibm90RW51bWVyYWJsZVByb3BcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSU5URVJOQUxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkpKFxuICAgICAgICAgICAgICAgICAgICBQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICBmbixcbiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXIsXG4gICAgICAgICAgICAgICAgICAgIHdpdGhBcHBlbmRlZCxcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVXcmFwQXNFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgbm9kZWJhY2tGb3JQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICB1dGlsLnRyeUNhdGNoLFxuICAgICAgICAgICAgICAgICAgICB1dGlsLmVycm9yT2JqLFxuICAgICAgICAgICAgICAgICAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wLFxuICAgICAgICAgICAgICAgICAgICBJTlRFUk5BTCk7XG59O1xufVxuXG5mdW5jdGlvbiBtYWtlTm9kZVByb21pc2lmaWVkQ2xvc3VyZShjYWxsYmFjaywgcmVjZWl2ZXIsIF8sIGZuLCBfXywgbXVsdGlBcmdzKSB7XG4gICAgdmFyIGRlZmF1bHRUaGlzID0gKGZ1bmN0aW9uKCkge3JldHVybiB0aGlzO30pKCk7XG4gICAgdmFyIG1ldGhvZCA9IGNhbGxiYWNrO1xuICAgIGlmICh0eXBlb2YgbWV0aG9kID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gZm47XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb21pc2lmaWVkKCkge1xuICAgICAgICB2YXIgX3JlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgICAgIGlmIChyZWNlaXZlciA9PT0gVEhJUykgX3JlY2VpdmVyID0gdGhpcztcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHByb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgICAgIHZhciBjYiA9IHR5cGVvZiBtZXRob2QgPT09IFwic3RyaW5nXCIgJiYgdGhpcyAhPT0gZGVmYXVsdFRoaXNcbiAgICAgICAgICAgID8gdGhpc1ttZXRob2RdIDogY2FsbGJhY2s7XG4gICAgICAgIHZhciBmbiA9IG5vZGViYWNrRm9yUHJvbWlzZShwcm9taXNlLCBtdWx0aUFyZ3MpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY2IuYXBwbHkoX3JlY2VpdmVyLCB3aXRoQXBwZW5kZWQoYXJndW1lbnRzLCBmbikpO1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKG1heWJlV3JhcEFzRXJyb3IoZSksIHRydWUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcHJvbWlzZS5faXNGYXRlU2VhbGVkKCkpIHByb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChwcm9taXNpZmllZCwgXCJfX2lzUHJvbWlzaWZpZWRfX1wiLCB0cnVlKTtcbiAgICByZXR1cm4gcHJvbWlzaWZpZWQ7XG59XG5cbnZhciBtYWtlTm9kZVByb21pc2lmaWVkID0gY2FuRXZhbHVhdGVcbiAgICA/IG1ha2VOb2RlUHJvbWlzaWZpZWRFdmFsXG4gICAgOiBtYWtlTm9kZVByb21pc2lmaWVkQ2xvc3VyZTtcblxuZnVuY3Rpb24gcHJvbWlzaWZ5QWxsKG9iaiwgc3VmZml4LCBmaWx0ZXIsIHByb21pc2lmaWVyLCBtdWx0aUFyZ3MpIHtcbiAgICB2YXIgc3VmZml4UmVnZXhwID0gbmV3IFJlZ0V4cChlc2NhcGVJZGVudFJlZ2V4KHN1ZmZpeCkgKyBcIiRcIik7XG4gICAgdmFyIG1ldGhvZHMgPVxuICAgICAgICBwcm9taXNpZmlhYmxlTWV0aG9kcyhvYmosIHN1ZmZpeCwgc3VmZml4UmVnZXhwLCBmaWx0ZXIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG1ldGhvZHMubGVuZ3RoOyBpIDwgbGVuOyBpKz0gMikge1xuICAgICAgICB2YXIga2V5ID0gbWV0aG9kc1tpXTtcbiAgICAgICAgdmFyIGZuID0gbWV0aG9kc1tpKzFdO1xuICAgICAgICB2YXIgcHJvbWlzaWZpZWRLZXkgPSBrZXkgKyBzdWZmaXg7XG4gICAgICAgIGlmIChwcm9taXNpZmllciA9PT0gbWFrZU5vZGVQcm9taXNpZmllZCkge1xuICAgICAgICAgICAgb2JqW3Byb21pc2lmaWVkS2V5XSA9XG4gICAgICAgICAgICAgICAgbWFrZU5vZGVQcm9taXNpZmllZChrZXksIFRISVMsIGtleSwgZm4sIHN1ZmZpeCwgbXVsdGlBcmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwcm9taXNpZmllZCA9IHByb21pc2lmaWVyKGZuLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFrZU5vZGVQcm9taXNpZmllZChrZXksIFRISVMsIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiwgc3VmZml4LCBtdWx0aUFyZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKHByb21pc2lmaWVkLCBcIl9faXNQcm9taXNpZmllZF9fXCIsIHRydWUpO1xuICAgICAgICAgICAgb2JqW3Byb21pc2lmaWVkS2V5XSA9IHByb21pc2lmaWVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHV0aWwudG9GYXN0UHJvcGVydGllcyhvYmopO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIHByb21pc2lmeShjYWxsYmFjaywgcmVjZWl2ZXIsIG11bHRpQXJncykge1xuICAgIHJldHVybiBtYWtlTm9kZVByb21pc2lmaWVkKGNhbGxiYWNrLCByZWNlaXZlciwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaywgbnVsbCwgbXVsdGlBcmdzKTtcbn1cblxuUHJvbWlzZS5wcm9taXNpZnkgPSBmdW5jdGlvbiAoZm4sIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIGlmIChpc1Byb21pc2lmaWVkKGZuKSkge1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfVxuICAgIG9wdGlvbnMgPSBPYmplY3Qob3B0aW9ucyk7XG4gICAgdmFyIHJlY2VpdmVyID0gb3B0aW9ucy5jb250ZXh0ID09PSB1bmRlZmluZWQgPyBUSElTIDogb3B0aW9ucy5jb250ZXh0O1xuICAgIHZhciBtdWx0aUFyZ3MgPSAhIW9wdGlvbnMubXVsdGlBcmdzO1xuICAgIHZhciByZXQgPSBwcm9taXNpZnkoZm4sIHJlY2VpdmVyLCBtdWx0aUFyZ3MpO1xuICAgIHV0aWwuY29weURlc2NyaXB0b3JzKGZuLCByZXQsIHByb3BzRmlsdGVyKTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm9taXNpZnlBbGwgPSBmdW5jdGlvbiAodGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiB0YXJnZXQgIT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgdGFyZ2V0ICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ0aGUgdGFyZ2V0IG9mIHByb21pc2lmeUFsbCBtdXN0IGJlIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgb3B0aW9ucyA9IE9iamVjdChvcHRpb25zKTtcbiAgICB2YXIgbXVsdGlBcmdzID0gISFvcHRpb25zLm11bHRpQXJncztcbiAgICB2YXIgc3VmZml4ID0gb3B0aW9ucy5zdWZmaXg7XG4gICAgaWYgKHR5cGVvZiBzdWZmaXggIT09IFwic3RyaW5nXCIpIHN1ZmZpeCA9IGRlZmF1bHRTdWZmaXg7XG4gICAgdmFyIGZpbHRlciA9IG9wdGlvbnMuZmlsdGVyO1xuICAgIGlmICh0eXBlb2YgZmlsdGVyICE9PSBcImZ1bmN0aW9uXCIpIGZpbHRlciA9IGRlZmF1bHRGaWx0ZXI7XG4gICAgdmFyIHByb21pc2lmaWVyID0gb3B0aW9ucy5wcm9taXNpZmllcjtcbiAgICBpZiAodHlwZW9mIHByb21pc2lmaWVyICE9PSBcImZ1bmN0aW9uXCIpIHByb21pc2lmaWVyID0gbWFrZU5vZGVQcm9taXNpZmllZDtcblxuICAgIGlmICghdXRpbC5pc0lkZW50aWZpZXIoc3VmZml4KSkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInN1ZmZpeCBtdXN0IGJlIGEgdmFsaWQgaWRlbnRpZmllclxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuXG4gICAgdmFyIGtleXMgPSB1dGlsLmluaGVyaXRlZERhdGFLZXlzKHRhcmdldCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHRhcmdldFtrZXlzW2ldXTtcbiAgICAgICAgaWYgKGtleXNbaV0gIT09IFwiY29uc3RydWN0b3JcIiAmJlxuICAgICAgICAgICAgdXRpbC5pc0NsYXNzKHZhbHVlKSkge1xuICAgICAgICAgICAgcHJvbWlzaWZ5QWxsKHZhbHVlLnByb3RvdHlwZSwgc3VmZml4LCBmaWx0ZXIsIHByb21pc2lmaWVyLFxuICAgICAgICAgICAgICAgIG11bHRpQXJncyk7XG4gICAgICAgICAgICBwcm9taXNpZnlBbGwodmFsdWUsIHN1ZmZpeCwgZmlsdGVyLCBwcm9taXNpZmllciwgbXVsdGlBcmdzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNpZnlBbGwodGFyZ2V0LCBzdWZmaXgsIGZpbHRlciwgcHJvbWlzaWZpZXIsIG11bHRpQXJncyk7XG59O1xufTtcblxuXG59LHtcIi4vZXJyb3JzXCI6MTIsXCIuL25vZGViYWNrXCI6MjAsXCIuL3V0aWxcIjozNn1dLDI1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihcbiAgICBQcm9taXNlLCBQcm9taXNlQXJyYXksIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGlzT2JqZWN0ID0gdXRpbC5pc09iamVjdDtcbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgRXM2TWFwO1xuaWYgKHR5cGVvZiBNYXAgPT09IFwiZnVuY3Rpb25cIikgRXM2TWFwID0gTWFwO1xuXG52YXIgbWFwVG9FbnRyaWVzID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIHNpemUgPSAwO1xuXG4gICAgZnVuY3Rpb24gZXh0cmFjdEVudHJ5KHZhbHVlLCBrZXkpIHtcbiAgICAgICAgdGhpc1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgdGhpc1tpbmRleCArIHNpemVdID0ga2V5O1xuICAgICAgICBpbmRleCsrO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiBtYXBUb0VudHJpZXMobWFwKSB7XG4gICAgICAgIHNpemUgPSBtYXAuc2l6ZTtcbiAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICB2YXIgcmV0ID0gbmV3IEFycmF5KG1hcC5zaXplICogMik7XG4gICAgICAgIG1hcC5mb3JFYWNoKGV4dHJhY3RFbnRyeSwgcmV0KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufSkoKTtcblxudmFyIGVudHJpZXNUb01hcCA9IGZ1bmN0aW9uKGVudHJpZXMpIHtcbiAgICB2YXIgcmV0ID0gbmV3IEVzNk1hcCgpO1xuICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aCAvIDIgfCAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGtleSA9IGVudHJpZXNbbGVuZ3RoICsgaV07XG4gICAgICAgIHZhciB2YWx1ZSA9IGVudHJpZXNbaV07XG4gICAgICAgIHJldC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5mdW5jdGlvbiBQcm9wZXJ0aWVzUHJvbWlzZUFycmF5KG9iaikge1xuICAgIHZhciBpc01hcCA9IGZhbHNlO1xuICAgIHZhciBlbnRyaWVzO1xuICAgIGlmIChFczZNYXAgIT09IHVuZGVmaW5lZCAmJiBvYmogaW5zdGFuY2VvZiBFczZNYXApIHtcbiAgICAgICAgZW50cmllcyA9IG1hcFRvRW50cmllcyhvYmopO1xuICAgICAgICBpc01hcCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGtleXMgPSBlczUua2V5cyhvYmopO1xuICAgICAgICB2YXIgbGVuID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIGVudHJpZXMgPSBuZXcgQXJyYXkobGVuICogMik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgZW50cmllc1tpXSA9IG9ialtrZXldO1xuICAgICAgICAgICAgZW50cmllc1tpICsgbGVuXSA9IGtleTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNvbnN0cnVjdG9yJChlbnRyaWVzKTtcbiAgICB0aGlzLl9pc01hcCA9IGlzTWFwO1xuICAgIHRoaXMuX2luaXQkKHVuZGVmaW5lZCwgLTMpO1xufVxudXRpbC5pbmhlcml0cyhQcm9wZXJ0aWVzUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5Qcm9wZXJ0aWVzUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG5Qcm9wZXJ0aWVzUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICB0aGlzLl92YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgdmFyIHRvdGFsUmVzb2x2ZWQgPSArK3RoaXMuX3RvdGFsUmVzb2x2ZWQ7XG4gICAgaWYgKHRvdGFsUmVzb2x2ZWQgPj0gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWw7XG4gICAgICAgIGlmICh0aGlzLl9pc01hcCkge1xuICAgICAgICAgICAgdmFsID0gZW50cmllc1RvTWFwKHRoaXMuX3ZhbHVlcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWwgPSB7fTtcbiAgICAgICAgICAgIHZhciBrZXlPZmZzZXQgPSB0aGlzLmxlbmd0aCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMubGVuZ3RoKCk7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgIHZhbFt0aGlzLl92YWx1ZXNbaSArIGtleU9mZnNldF1dID0gdGhpcy5fdmFsdWVzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Jlc29sdmUodmFsKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb3BlcnRpZXNQcm9taXNlQXJyYXkucHJvdG90eXBlLnNob3VsZENvcHlWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUHJvcGVydGllc1Byb21pc2VBcnJheS5wcm90b3R5cGUuZ2V0QWN0dWFsTGVuZ3RoID0gZnVuY3Rpb24gKGxlbikge1xuICAgIHJldHVybiBsZW4gPj4gMTtcbn07XG5cbmZ1bmN0aW9uIHByb3BzKHByb21pc2VzKSB7XG4gICAgdmFyIHJldDtcbiAgICB2YXIgY2FzdFZhbHVlID0gdHJ5Q29udmVydFRvUHJvbWlzZShwcm9taXNlcyk7XG5cbiAgICBpZiAoIWlzT2JqZWN0KGNhc3RWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImNhbm5vdCBhd2FpdCBwcm9wZXJ0aWVzIG9mIGEgbm9uLW9iamVjdFxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfSBlbHNlIGlmIChjYXN0VmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldCA9IGNhc3RWYWx1ZS5fdGhlbihcbiAgICAgICAgICAgIFByb21pc2UucHJvcHMsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gbmV3IFByb3BlcnRpZXNQcm9taXNlQXJyYXkoY2FzdFZhbHVlKS5wcm9taXNlKCk7XG4gICAgfVxuXG4gICAgaWYgKGNhc3RWYWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0Ll9wcm9wYWdhdGVGcm9tKGNhc3RWYWx1ZSwgMik7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cblByb21pc2UucHJvdG90eXBlLnByb3BzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBwcm9wcyh0aGlzKTtcbn07XG5cblByb21pc2UucHJvcHMgPSBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICByZXR1cm4gcHJvcHMocHJvbWlzZXMpO1xufTtcbn07XG5cbn0se1wiLi9lczVcIjoxMyxcIi4vdXRpbFwiOjM2fV0sMjY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBhcnJheU1vdmUoc3JjLCBzcmNJbmRleCwgZHN0LCBkc3RJbmRleCwgbGVuKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBsZW47ICsraikge1xuICAgICAgICBkc3RbaiArIGRzdEluZGV4XSA9IHNyY1tqICsgc3JjSW5kZXhdO1xuICAgICAgICBzcmNbaiArIHNyY0luZGV4XSA9IHZvaWQgMDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFF1ZXVlKGNhcGFjaXR5KSB7XG4gICAgdGhpcy5fY2FwYWNpdHkgPSBjYXBhY2l0eTtcbiAgICB0aGlzLl9sZW5ndGggPSAwO1xuICAgIHRoaXMuX2Zyb250ID0gMDtcbn1cblxuUXVldWUucHJvdG90eXBlLl93aWxsQmVPdmVyQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgIHJldHVybiB0aGlzLl9jYXBhY2l0eSA8IHNpemU7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUuX3B1c2hPbmUgPSBmdW5jdGlvbiAoYXJnKSB7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoKCk7XG4gICAgdGhpcy5fY2hlY2tDYXBhY2l0eShsZW5ndGggKyAxKTtcbiAgICB2YXIgaSA9ICh0aGlzLl9mcm9udCArIGxlbmd0aCkgJiAodGhpcy5fY2FwYWNpdHkgLSAxKTtcbiAgICB0aGlzW2ldID0gYXJnO1xuICAgIHRoaXMuX2xlbmd0aCA9IGxlbmd0aCArIDE7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUuX3Vuc2hpZnRPbmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciBjYXBhY2l0eSA9IHRoaXMuX2NhcGFjaXR5O1xuICAgIHRoaXMuX2NoZWNrQ2FwYWNpdHkodGhpcy5sZW5ndGgoKSArIDEpO1xuICAgIHZhciBmcm9udCA9IHRoaXMuX2Zyb250O1xuICAgIHZhciBpID0gKCgoKCBmcm9udCAtIDEgKSAmXG4gICAgICAgICAgICAgICAgICAgICggY2FwYWNpdHkgLSAxKSApIF4gY2FwYWNpdHkgKSAtIGNhcGFjaXR5ICk7XG4gICAgdGhpc1tpXSA9IHZhbHVlO1xuICAgIHRoaXMuX2Zyb250ID0gaTtcbiAgICB0aGlzLl9sZW5ndGggPSB0aGlzLmxlbmd0aCgpICsgMTtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICB0aGlzLl91bnNoaWZ0T25lKGFyZyk7XG4gICAgdGhpcy5fdW5zaGlmdE9uZShyZWNlaXZlcik7XG4gICAgdGhpcy5fdW5zaGlmdE9uZShmbik7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCgpICsgMztcbiAgICBpZiAodGhpcy5fd2lsbEJlT3ZlckNhcGFjaXR5KGxlbmd0aCkpIHtcbiAgICAgICAgdGhpcy5fcHVzaE9uZShmbik7XG4gICAgICAgIHRoaXMuX3B1c2hPbmUocmVjZWl2ZXIpO1xuICAgICAgICB0aGlzLl9wdXNoT25lKGFyZyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGogPSB0aGlzLl9mcm9udCArIGxlbmd0aCAtIDM7XG4gICAgdGhpcy5fY2hlY2tDYXBhY2l0eShsZW5ndGgpO1xuICAgIHZhciB3cmFwTWFzayA9IHRoaXMuX2NhcGFjaXR5IC0gMTtcbiAgICB0aGlzWyhqICsgMCkgJiB3cmFwTWFza10gPSBmbjtcbiAgICB0aGlzWyhqICsgMSkgJiB3cmFwTWFza10gPSByZWNlaXZlcjtcbiAgICB0aGlzWyhqICsgMikgJiB3cmFwTWFza10gPSBhcmc7XG4gICAgdGhpcy5fbGVuZ3RoID0gbGVuZ3RoO1xufTtcblxuUXVldWUucHJvdG90eXBlLnNoaWZ0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmcm9udCA9IHRoaXMuX2Zyb250LFxuICAgICAgICByZXQgPSB0aGlzW2Zyb250XTtcblxuICAgIHRoaXNbZnJvbnRdID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2Zyb250ID0gKGZyb250ICsgMSkgJiAodGhpcy5fY2FwYWNpdHkgLSAxKTtcbiAgICB0aGlzLl9sZW5ndGgtLTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUXVldWUucHJvdG90eXBlLmxlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fbGVuZ3RoO1xufTtcblxuUXVldWUucHJvdG90eXBlLl9jaGVja0NhcGFjaXR5ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICBpZiAodGhpcy5fY2FwYWNpdHkgPCBzaXplKSB7XG4gICAgICAgIHRoaXMuX3Jlc2l6ZVRvKHRoaXMuX2NhcGFjaXR5IDw8IDEpO1xuICAgIH1cbn07XG5cblF1ZXVlLnByb3RvdHlwZS5fcmVzaXplVG8gPSBmdW5jdGlvbiAoY2FwYWNpdHkpIHtcbiAgICB2YXIgb2xkQ2FwYWNpdHkgPSB0aGlzLl9jYXBhY2l0eTtcbiAgICB0aGlzLl9jYXBhY2l0eSA9IGNhcGFjaXR5O1xuICAgIHZhciBmcm9udCA9IHRoaXMuX2Zyb250O1xuICAgIHZhciBsZW5ndGggPSB0aGlzLl9sZW5ndGg7XG4gICAgdmFyIG1vdmVJdGVtc0NvdW50ID0gKGZyb250ICsgbGVuZ3RoKSAmIChvbGRDYXBhY2l0eSAtIDEpO1xuICAgIGFycmF5TW92ZSh0aGlzLCAwLCB0aGlzLCBvbGRDYXBhY2l0eSwgbW92ZUl0ZW1zQ291bnQpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBRdWV1ZTtcblxufSx7fV0sMjc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFxuICAgIFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24pIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcblxudmFyIHJhY2VMYXRlciA9IGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbihhcnJheSkge1xuICAgICAgICByZXR1cm4gcmFjZShhcnJheSwgcHJvbWlzZSk7XG4gICAgfSk7XG59O1xuXG5mdW5jdGlvbiByYWNlKHByb21pc2VzLCBwYXJlbnQpIHtcbiAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShwcm9taXNlcyk7XG5cbiAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXR1cm4gcmFjZUxhdGVyKG1heWJlUHJvbWlzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbWlzZXMgPSB1dGlsLmFzQXJyYXkocHJvbWlzZXMpO1xuICAgICAgICBpZiAocHJvbWlzZXMgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGFuIGFycmF5IG9yIGFuIGl0ZXJhYmxlIG9iamVjdCBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhwcm9taXNlcykpO1xuICAgIH1cblxuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgaWYgKHBhcmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldC5fcHJvcGFnYXRlRnJvbShwYXJlbnQsIDMpO1xuICAgIH1cbiAgICB2YXIgZnVsZmlsbCA9IHJldC5fZnVsZmlsbDtcbiAgICB2YXIgcmVqZWN0ID0gcmV0Ll9yZWplY3Q7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHByb21pc2VzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciB2YWwgPSBwcm9taXNlc1tpXTtcblxuICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQgJiYgIShpIGluIHByb21pc2VzKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBQcm9taXNlLmNhc3QodmFsKS5fdGhlbihmdWxmaWxsLCByZWplY3QsIHVuZGVmaW5lZCwgcmV0LCBudWxsKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuUHJvbWlzZS5yYWNlID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIHJhY2UocHJvbWlzZXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5yYWNlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiByYWNlKHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMjg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFByb21pc2VBcnJheSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpUmVqZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlDb252ZXJ0VG9Qcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBJTlRFUk5BTCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcpIHtcbnZhciBnZXREb21haW4gPSBQcm9taXNlLl9nZXREb21haW47XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuXG5mdW5jdGlvbiBSZWR1Y3Rpb25Qcm9taXNlQXJyYXkocHJvbWlzZXMsIGZuLCBpbml0aWFsVmFsdWUsIF9lYWNoKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQocHJvbWlzZXMpO1xuICAgIHZhciBkb21haW4gPSBnZXREb21haW4oKTtcbiAgICB0aGlzLl9mbiA9IGRvbWFpbiA9PT0gbnVsbCA/IGZuIDogZG9tYWluLmJpbmQoZm4pO1xuICAgIGlmIChpbml0aWFsVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpbml0aWFsVmFsdWUgPSBQcm9taXNlLnJlc29sdmUoaW5pdGlhbFZhbHVlKTtcbiAgICAgICAgaW5pdGlhbFZhbHVlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayh0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5faW5pdGlhbFZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgIHRoaXMuX2N1cnJlbnRDYW5jZWxsYWJsZSA9IG51bGw7XG4gICAgdGhpcy5fZWFjaFZhbHVlcyA9IF9lYWNoID09PSBJTlRFUk5BTCA/IFtdIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Byb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtNSk7XG59XG51dGlsLmluaGVyaXRzKFJlZHVjdGlvblByb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZ290QWNjdW0gPSBmdW5jdGlvbihhY2N1bSkge1xuICAgIGlmICh0aGlzLl9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQgJiYgYWNjdW0gIT09IElOVEVSTkFMKSB7XG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMucHVzaChhY2N1bSk7XG4gICAgfVxufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZWFjaENvbXBsZXRlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLl9lYWNoVmFsdWVzLnB1c2godmFsdWUpO1xuICAgIHJldHVybiB0aGlzLl9lYWNoVmFsdWVzO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uKCkge307XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmVFbXB0eUFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQgPyB0aGlzLl9lYWNoVmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9pbml0aWFsVmFsdWUpO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zaG91bGRDb3B5VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX3Byb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgdGhpcy5fdmFsdWVzID0gbnVsbDtcbn07XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKHNlbmRlcikge1xuICAgIGlmIChzZW5kZXIgPT09IHRoaXMuX2luaXRpYWxWYWx1ZSkgcmV0dXJuIHRoaXMuX2NhbmNlbCgpO1xuICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICB0aGlzLl9yZXN1bHRDYW5jZWxsZWQkKCk7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRDYW5jZWxsYWJsZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdGhpcy5fY3VycmVudENhbmNlbGxhYmxlLmNhbmNlbCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5faW5pdGlhbFZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB0aGlzLl9pbml0aWFsVmFsdWUuY2FuY2VsKCk7XG4gICAgfVxufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faXRlcmF0ZSA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgdmFyIHZhbHVlO1xuICAgIHZhciBpO1xuICAgIHZhciBsZW5ndGggPSB2YWx1ZXMubGVuZ3RoO1xuICAgIGlmICh0aGlzLl9pbml0aWFsVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZSA9IHRoaXMuX2luaXRpYWxWYWx1ZTtcbiAgICAgICAgaSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBQcm9taXNlLnJlc29sdmUodmFsdWVzWzBdKTtcbiAgICAgICAgaSA9IDE7XG4gICAgfVxuXG4gICAgdGhpcy5fY3VycmVudENhbmNlbGxhYmxlID0gdmFsdWU7XG5cbiAgICBpZiAoIXZhbHVlLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0ge1xuICAgICAgICAgICAgICAgIGFjY3VtOiBudWxsLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZXNbaV0sXG4gICAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiBsZW5ndGgsXG4gICAgICAgICAgICAgICAgYXJyYXk6IHRoaXNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLl90aGVuKGdvdEFjY3VtLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY3R4LCB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2VhY2hWYWx1ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlXG4gICAgICAgICAgICAuX3RoZW4odGhpcy5fZWFjaENvbXBsZXRlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgdmFsdWUuX3RoZW4oY29tcGxldGVkLCBjb21wbGV0ZWQsIHVuZGVmaW5lZCwgdmFsdWUsIHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmVkdWNlID0gZnVuY3Rpb24gKGZuLCBpbml0aWFsVmFsdWUpIHtcbiAgICByZXR1cm4gcmVkdWNlKHRoaXMsIGZuLCBpbml0aWFsVmFsdWUsIG51bGwpO1xufTtcblxuUHJvbWlzZS5yZWR1Y2UgPSBmdW5jdGlvbiAocHJvbWlzZXMsIGZuLCBpbml0aWFsVmFsdWUsIF9lYWNoKSB7XG4gICAgcmV0dXJuIHJlZHVjZShwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpO1xufTtcblxuZnVuY3Rpb24gY29tcGxldGVkKHZhbHVlT3JSZWFzb24sIGFycmF5KSB7XG4gICAgaWYgKHRoaXMuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICBhcnJheS5fcmVzb2x2ZSh2YWx1ZU9yUmVhc29uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhcnJheS5fcmVqZWN0KHZhbHVlT3JSZWFzb24pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVkdWNlKHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCkge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgdmFyIGFycmF5ID0gbmV3IFJlZHVjdGlvblByb21pc2VBcnJheShwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpO1xuICAgIHJldHVybiBhcnJheS5wcm9taXNlKCk7XG59XG5cbmZ1bmN0aW9uIGdvdEFjY3VtKGFjY3VtKSB7XG4gICAgdGhpcy5hY2N1bSA9IGFjY3VtO1xuICAgIHRoaXMuYXJyYXkuX2dvdEFjY3VtKGFjY3VtKTtcbiAgICB2YXIgdmFsdWUgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHRoaXMudmFsdWUsIHRoaXMuYXJyYXkuX3Byb21pc2UpO1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdGhpcy5hcnJheS5fY3VycmVudENhbmNlbGxhYmxlID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB2YWx1ZS5fdGhlbihnb3RWYWx1ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMsIHVuZGVmaW5lZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGdvdFZhbHVlLmNhbGwodGhpcywgdmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ290VmFsdWUodmFsdWUpIHtcbiAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5O1xuICAgIHZhciBwcm9taXNlID0gYXJyYXkuX3Byb21pc2U7XG4gICAgdmFyIGZuID0gdHJ5Q2F0Y2goYXJyYXkuX2ZuKTtcbiAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciByZXQ7XG4gICAgaWYgKGFycmF5Ll9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0ID0gZm4uY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksIHZhbHVlLCB0aGlzLmluZGV4LCB0aGlzLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gZm4uY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY3VtLCB2YWx1ZSwgdGhpcy5pbmRleCwgdGhpcy5sZW5ndGgpO1xuICAgIH1cbiAgICBpZiAocmV0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICBhcnJheS5fY3VycmVudENhbmNlbGxhYmxlID0gcmV0O1xuICAgIH1cbiAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICByZXQsXG4gICAgICAgIHByb21pc2VDcmVhdGVkLFxuICAgICAgICBhcnJheS5fZWFjaFZhbHVlcyAhPT0gdW5kZWZpbmVkID8gXCJQcm9taXNlLmVhY2hcIiA6IFwiUHJvbWlzZS5yZWR1Y2VcIixcbiAgICAgICAgcHJvbWlzZVxuICAgICk7XG4gICAgcmV0dXJuIHJldDtcbn1cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBzY2hlZHVsZTtcbnZhciBub0FzeW5jU2NoZWR1bGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYXN5bmMgc2NoZWR1bGVyIGF2YWlsYWJsZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG59O1xudmFyIE5hdGl2ZVByb21pc2UgPSB1dGlsLmdldE5hdGl2ZVByb21pc2UoKTtcbmlmICh1dGlsLmlzTm9kZSAmJiB0eXBlb2YgTXV0YXRpb25PYnNlcnZlciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHZhciBHbG9iYWxTZXRJbW1lZGlhdGUgPSBnbG9iYWwuc2V0SW1tZWRpYXRlO1xuICAgIHZhciBQcm9jZXNzTmV4dFRpY2sgPSBwcm9jZXNzLm5leHRUaWNrO1xuICAgIHNjaGVkdWxlID0gdXRpbC5pc1JlY2VudE5vZGVcbiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uKGZuKSB7IEdsb2JhbFNldEltbWVkaWF0ZS5jYWxsKGdsb2JhbCwgZm4pOyB9XG4gICAgICAgICAgICAgICAgOiBmdW5jdGlvbihmbikgeyBQcm9jZXNzTmV4dFRpY2suY2FsbChwcm9jZXNzLCBmbik7IH07XG59IGVsc2UgaWYgKHR5cGVvZiBOYXRpdmVQcm9taXNlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB2YXIgbmF0aXZlUHJvbWlzZSA9IE5hdGl2ZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIHNjaGVkdWxlID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgbmF0aXZlUHJvbWlzZS50aGVuKGZuKTtcbiAgICB9O1xufSBlbHNlIGlmICgodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09IFwidW5kZWZpbmVkXCIpICYmXG4gICAgICAgICAgISh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICB3aW5kb3cubmF2aWdhdG9yICYmXG4gICAgICAgICAgICB3aW5kb3cubmF2aWdhdG9yLnN0YW5kYWxvbmUpKSB7XG4gICAgc2NoZWR1bGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB2YXIgb3B0cyA9IHthdHRyaWJ1dGVzOiB0cnVlfTtcbiAgICAgICAgdmFyIHRvZ2dsZVNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZGl2MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHZhciBvMiA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC50b2dnbGUoXCJmb29cIik7XG4gICAgICAgICAgICB0b2dnbGVTY2hlZHVsZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIG8yLm9ic2VydmUoZGl2Miwgb3B0cyk7XG5cbiAgICAgICAgdmFyIHNjaGVkdWxlVG9nZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodG9nZ2xlU2NoZWR1bGVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdG9nZ2xlU2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkaXYyLmNsYXNzTGlzdC50b2dnbGUoXCJmb29cIik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gc2NoZWR1bGUoZm4pIHtcbiAgICAgICAgICAgIHZhciBvID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgby5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgby5vYnNlcnZlKGRpdiwgb3B0cyk7XG4gICAgICAgICAgICBzY2hlZHVsZVRvZ2dsZSgpO1xuICAgICAgICB9O1xuICAgIH0pKCk7XG59IGVsc2UgaWYgKHR5cGVvZiBzZXRJbW1lZGlhdGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBzY2hlZHVsZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBzZXRJbW1lZGlhdGUoZm4pO1xuICAgIH07XG59IGVsc2UgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgc2NoZWR1bGUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgc2V0VGltZW91dChmbiwgMCk7XG4gICAgfTtcbn0gZWxzZSB7XG4gICAgc2NoZWR1bGUgPSBub0FzeW5jU2NoZWR1bGVyO1xufVxubW9kdWxlLmV4cG9ydHMgPSBzY2hlZHVsZTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDMwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuICAgIGZ1bmN0aW9uKFByb21pc2UsIFByb21pc2VBcnJheSwgZGVidWcpIHtcbnZhciBQcm9taXNlSW5zcGVjdGlvbiA9IFByb21pc2UuUHJvbWlzZUluc3BlY3Rpb247XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG5cbmZ1bmN0aW9uIFNldHRsZWRQcm9taXNlQXJyYXkodmFsdWVzKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQodmFsdWVzKTtcbn1cbnV0aWwuaW5oZXJpdHMoU2V0dGxlZFByb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuU2V0dGxlZFByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VSZXNvbHZlZCA9IGZ1bmN0aW9uIChpbmRleCwgaW5zcGVjdGlvbikge1xuICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSBpbnNwZWN0aW9uO1xuICAgIHZhciB0b3RhbFJlc29sdmVkID0gKyt0aGlzLl90b3RhbFJlc29sdmVkO1xuICAgIGlmICh0b3RhbFJlc29sdmVkID49IHRoaXMuX2xlbmd0aCkge1xuICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX3ZhbHVlcyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5TZXR0bGVkUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2VJbnNwZWN0aW9uKCk7XG4gICAgcmV0Ll9iaXRGaWVsZCA9IDMzNTU0NDMyO1xuICAgIHJldC5fc2V0dGxlZFZhbHVlRmllbGQgPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZVJlc29sdmVkKGluZGV4LCByZXQpO1xufTtcblNldHRsZWRQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlUmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uLCBpbmRleCkge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZUluc3BlY3Rpb24oKTtcbiAgICByZXQuX2JpdEZpZWxkID0gMTY3NzcyMTY7XG4gICAgcmV0Ll9zZXR0bGVkVmFsdWVGaWVsZCA9IHJlYXNvbjtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZVJlc29sdmVkKGluZGV4LCByZXQpO1xufTtcblxuUHJvbWlzZS5zZXR0bGUgPSBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICBkZWJ1Zy5kZXByZWNhdGVkKFwiLnNldHRsZSgpXCIsIFwiLnJlZmxlY3QoKVwiKTtcbiAgICByZXR1cm4gbmV3IFNldHRsZWRQcm9taXNlQXJyYXkocHJvbWlzZXMpLnByb21pc2UoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnNldHRsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5zZXR0bGUodGhpcyk7XG59O1xufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDMxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24pIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBSYW5nZUVycm9yID0gX2RlcmVxXyhcIi4vZXJyb3JzXCIpLlJhbmdlRXJyb3I7XG52YXIgQWdncmVnYXRlRXJyb3IgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIikuQWdncmVnYXRlRXJyb3I7XG52YXIgaXNBcnJheSA9IHV0aWwuaXNBcnJheTtcbnZhciBDQU5DRUxMQVRJT04gPSB7fTtcblxuXG5mdW5jdGlvbiBTb21lUHJvbWlzZUFycmF5KHZhbHVlcykge1xuICAgIHRoaXMuY29uc3RydWN0b3IkKHZhbHVlcyk7XG4gICAgdGhpcy5faG93TWFueSA9IDA7XG4gICAgdGhpcy5fdW53cmFwID0gZmFsc2U7XG4gICAgdGhpcy5faW5pdGlhbGl6ZWQgPSBmYWxzZTtcbn1cbnV0aWwuaW5oZXJpdHMoU29tZVByb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9ob3dNYW55ID09PSAwKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmUoW10pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2luaXQkKHVuZGVmaW5lZCwgLTUpO1xuICAgIHZhciBpc0FycmF5UmVzb2x2ZWQgPSBpc0FycmF5KHRoaXMuX3ZhbHVlcyk7XG4gICAgaWYgKCF0aGlzLl9pc1Jlc29sdmVkKCkgJiZcbiAgICAgICAgaXNBcnJheVJlc29sdmVkICYmXG4gICAgICAgIHRoaXMuX2hvd01hbnkgPiB0aGlzLl9jYW5Qb3NzaWJseUZ1bGZpbGwoKSkge1xuICAgICAgICB0aGlzLl9yZWplY3QodGhpcy5fZ2V0UmFuZ2VFcnJvcih0aGlzLmxlbmd0aCgpKSk7XG4gICAgfVxufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XG4gICAgdGhpcy5faW5pdCgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuc2V0VW53cmFwID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX3Vud3JhcCA9IHRydWU7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5ob3dNYW55ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9ob3dNYW55O1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuc2V0SG93TWFueSA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIHRoaXMuX2hvd01hbnkgPSBjb3VudDtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5fYWRkRnVsZmlsbGVkKHZhbHVlKTtcbiAgICBpZiAodGhpcy5fZnVsZmlsbGVkKCkgPT09IHRoaXMuaG93TWFueSgpKSB7XG4gICAgICAgIHRoaXMuX3ZhbHVlcy5sZW5ndGggPSB0aGlzLmhvd01hbnkoKTtcbiAgICAgICAgaWYgKHRoaXMuaG93TWFueSgpID09PSAxICYmIHRoaXMuX3Vud3JhcCkge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXNbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG5cbn07XG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZVJlamVjdGVkID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRoaXMuX2FkZFJlamVjdGVkKHJlYXNvbik7XG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrT3V0Y29tZSgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VDYW5jZWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3ZhbHVlcyBpbnN0YW5jZW9mIFByb21pc2UgfHwgdGhpcy5fdmFsdWVzID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbCgpO1xuICAgIH1cbiAgICB0aGlzLl9hZGRSZWplY3RlZChDQU5DRUxMQVRJT04pO1xuICAgIHJldHVybiB0aGlzLl9jaGVja091dGNvbWUoKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9jaGVja091dGNvbWUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5ob3dNYW55KCkgPiB0aGlzLl9jYW5Qb3NzaWJseUZ1bGZpbGwoKSkge1xuICAgICAgICB2YXIgZSA9IG5ldyBBZ2dyZWdhdGVFcnJvcigpO1xuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5sZW5ndGgoKTsgaSA8IHRoaXMuX3ZhbHVlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3ZhbHVlc1tpXSAhPT0gQ0FOQ0VMTEFUSU9OKSB7XG4gICAgICAgICAgICAgICAgZS5wdXNoKHRoaXMuX3ZhbHVlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0KGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9mdWxmaWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RvdGFsUmVzb2x2ZWQ7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVqZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcy5sZW5ndGggLSB0aGlzLmxlbmd0aCgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2FkZFJlamVjdGVkID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHRoaXMuX3ZhbHVlcy5wdXNoKHJlYXNvbik7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fYWRkRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5fdmFsdWVzW3RoaXMuX3RvdGFsUmVzb2x2ZWQrK10gPSB2YWx1ZTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9jYW5Qb3NzaWJseUZ1bGZpbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubGVuZ3RoKCkgLSB0aGlzLl9yZWplY3RlZCgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2dldFJhbmdlRXJyb3IgPSBmdW5jdGlvbiAoY291bnQpIHtcbiAgICB2YXIgbWVzc2FnZSA9IFwiSW5wdXQgYXJyYXkgbXVzdCBjb250YWluIGF0IGxlYXN0IFwiICtcbiAgICAgICAgICAgIHRoaXMuX2hvd01hbnkgKyBcIiBpdGVtcyBidXQgY29udGFpbnMgb25seSBcIiArIGNvdW50ICsgXCIgaXRlbXNcIjtcbiAgICByZXR1cm4gbmV3IFJhbmdlRXJyb3IobWVzc2FnZSk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzb2x2ZUVtcHR5QXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcmVqZWN0KHRoaXMuX2dldFJhbmdlRXJyb3IoMCkpO1xufTtcblxuZnVuY3Rpb24gc29tZShwcm9taXNlcywgaG93TWFueSkge1xuICAgIGlmICgoaG93TWFueSB8IDApICE9PSBob3dNYW55IHx8IGhvd01hbnkgPCAwKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBwb3NpdGl2ZSBpbnRlZ2VyXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgdmFyIHJldCA9IG5ldyBTb21lUHJvbWlzZUFycmF5KHByb21pc2VzKTtcbiAgICB2YXIgcHJvbWlzZSA9IHJldC5wcm9taXNlKCk7XG4gICAgcmV0LnNldEhvd01hbnkoaG93TWFueSk7XG4gICAgcmV0LmluaXQoKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuUHJvbWlzZS5zb21lID0gZnVuY3Rpb24gKHByb21pc2VzLCBob3dNYW55KSB7XG4gICAgcmV0dXJuIHNvbWUocHJvbWlzZXMsIGhvd01hbnkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc29tZSA9IGZ1bmN0aW9uIChob3dNYW55KSB7XG4gICAgcmV0dXJuIHNvbWUodGhpcywgaG93TWFueSk7XG59O1xuXG5Qcm9taXNlLl9Tb21lUHJvbWlzZUFycmF5ID0gU29tZVByb21pc2VBcnJheTtcbn07XG5cbn0se1wiLi9lcnJvcnNcIjoxMixcIi4vdXRpbFwiOjM2fV0sMzI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbmZ1bmN0aW9uIFByb21pc2VJbnNwZWN0aW9uKHByb21pc2UpIHtcbiAgICBpZiAocHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByb21pc2UgPSBwcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSBwcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgdGhpcy5fc2V0dGxlZFZhbHVlRmllbGQgPSBwcm9taXNlLl9pc0ZhdGVTZWFsZWQoKVxuICAgICAgICAgICAgPyBwcm9taXNlLl9zZXR0bGVkVmFsdWUoKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gMDtcbiAgICAgICAgdGhpcy5fc2V0dGxlZFZhbHVlRmllbGQgPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuXG5Qcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuX3NldHRsZWRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWVGaWVsZDtcbn07XG5cbnZhciB2YWx1ZSA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2Fubm90IGdldCBmdWxmaWxsbWVudCB2YWx1ZSBvZiBhIG5vbi1mdWxmaWxsZWQgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbn07XG5cbnZhciByZWFzb24gPSBQcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuZXJyb3IgPVxuUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLnJlYXNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW5ub3QgZ2V0IHJlamVjdGlvbiByZWFzb24gb2YgYSBub24tcmVqZWN0ZWQgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbn07XG5cbnZhciBpc0Z1bGZpbGxlZCA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDA7XG59O1xuXG52YXIgaXNSZWplY3RlZCA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc1JlamVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDA7XG59O1xuXG52YXIgaXNQZW5kaW5nID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNTAzOTcxODQpID09PSAwO1xufTtcblxudmFyIGlzUmVzb2x2ZWQgPSBQcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuaXNSZXNvbHZlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNTAzMzE2NDgpICE9PSAwO1xufTtcblxuUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzQ2FuY2VsbGVkID1cblByb21pc2UucHJvdG90eXBlLl9pc0NhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA2NTUzNikgPT09IDY1NTM2O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0KCkuX2lzQ2FuY2VsbGVkKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5pc1BlbmRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaXNQZW5kaW5nLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNSZWplY3RlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBpc1JlamVjdGVkLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNGdWxmaWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaXNGdWxmaWxsZWQuY2FsbCh0aGlzLl90YXJnZXQoKSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5pc1Jlc29sdmVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGlzUmVzb2x2ZWQuY2FsbCh0aGlzLl90YXJnZXQoKSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB2YWx1ZS5jYWxsKHRoaXMuX3RhcmdldCgpKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnJlYXNvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLl90YXJnZXQoKTtcbiAgICB0YXJnZXQuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKTtcbiAgICByZXR1cm4gcmVhc29uLmNhbGwodGFyZ2V0KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl92YWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWFzb24gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZSgpO1xufTtcblxuUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbiA9IFByb21pc2VJbnNwZWN0aW9uO1xufTtcblxufSx7fV0sMzM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIGlzT2JqZWN0ID0gdXRpbC5pc09iamVjdDtcblxuZnVuY3Rpb24gdHJ5Q29udmVydFRvUHJvbWlzZShvYmosIGNvbnRleHQpIHtcbiAgICBpZiAoaXNPYmplY3Qob2JqKSkge1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgUHJvbWlzZSkgcmV0dXJuIG9iajtcbiAgICAgICAgdmFyIHRoZW4gPSBnZXRUaGVuKG9iaik7XG4gICAgICAgIGlmICh0aGVuID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgaWYgKGNvbnRleHQpIGNvbnRleHQuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgICAgICB2YXIgcmV0ID0gUHJvbWlzZS5yZWplY3QodGhlbi5lKTtcbiAgICAgICAgICAgIGlmIChjb250ZXh0KSBjb250ZXh0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGlmIChpc0FueUJsdWViaXJkUHJvbWlzZShvYmopKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgICAgICAgICBvYmouX3RoZW4oXG4gICAgICAgICAgICAgICAgICAgIHJldC5fZnVsZmlsbCxcbiAgICAgICAgICAgICAgICAgICAgcmV0Ll9yZWplY3QsXG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgcmV0LFxuICAgICAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRvVGhlbmFibGUob2JqLCB0aGVuLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBkb0dldFRoZW4ob2JqKSB7XG4gICAgcmV0dXJuIG9iai50aGVuO1xufVxuXG5mdW5jdGlvbiBnZXRUaGVuKG9iaikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkb0dldFRoZW4ob2JqKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGVycm9yT2JqLmUgPSBlO1xuICAgICAgICByZXR1cm4gZXJyb3JPYmo7XG4gICAgfVxufVxuXG52YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuZnVuY3Rpb24gaXNBbnlCbHVlYmlyZFByb21pc2Uob2JqKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGhhc1Byb3AuY2FsbChvYmosIFwiX3Byb21pc2UwXCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZG9UaGVuYWJsZSh4LCB0aGVuLCBjb250ZXh0KSB7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgdmFyIHJldCA9IHByb21pc2U7XG4gICAgaWYgKGNvbnRleHQpIGNvbnRleHQuX3B1c2hDb250ZXh0KCk7XG4gICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICBpZiAoY29udGV4dCkgY29udGV4dC5fcG9wQ29udGV4dCgpO1xuICAgIHZhciBzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgdmFyIHJlc3VsdCA9IHV0aWwudHJ5Q2F0Y2godGhlbikuY2FsbCh4LCByZXNvbHZlLCByZWplY3QpO1xuICAgIHN5bmNocm9ub3VzID0gZmFsc2U7XG5cbiAgICBpZiAocHJvbWlzZSAmJiByZXN1bHQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHJlc3VsdC5lLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgcHJvbWlzZSA9IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZSh2YWx1ZSkge1xuICAgICAgICBpZiAoIXByb21pc2UpIHJldHVybjtcbiAgICAgICAgcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHZhbHVlKTtcbiAgICAgICAgcHJvbWlzZSA9IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAgICAgICBpZiAoIXByb21pc2UpIHJldHVybjtcbiAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmVhc29uLCBzeW5jaHJvbm91cywgdHJ1ZSk7XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5yZXR1cm4gdHJ5Q29udmVydFRvUHJvbWlzZTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwzNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIGRlYnVnKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgVGltZW91dEVycm9yID0gUHJvbWlzZS5UaW1lb3V0RXJyb3I7XG5cbmZ1bmN0aW9uIEhhbmRsZVdyYXBwZXIoaGFuZGxlKSAge1xuICAgIHRoaXMuaGFuZGxlID0gaGFuZGxlO1xufVxuXG5IYW5kbGVXcmFwcGVyLnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaGFuZGxlKTtcbn07XG5cbnZhciBhZnRlclZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGRlbGF5KCt0aGlzKS50aGVuUmV0dXJuKHZhbHVlKTsgfTtcbnZhciBkZWxheSA9IFByb21pc2UuZGVsYXkgPSBmdW5jdGlvbiAobXMsIHZhbHVlKSB7XG4gICAgdmFyIHJldDtcbiAgICB2YXIgaGFuZGxlO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldCA9IFByb21pc2UucmVzb2x2ZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAuX3RoZW4oYWZ0ZXJWYWx1ZSwgbnVsbCwgbnVsbCwgbXMsIHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSAmJiB2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldC5fc2V0T25DYW5jZWwodmFsdWUpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICBoYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyByZXQuX2Z1bGZpbGwoKTsgfSwgK21zKTtcbiAgICAgICAgaWYgKGRlYnVnLmNhbmNlbGxhdGlvbigpKSB7XG4gICAgICAgICAgICByZXQuX3NldE9uQ2FuY2VsKG5ldyBIYW5kbGVXcmFwcGVyKGhhbmRsZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldC5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRlbGF5ID0gZnVuY3Rpb24gKG1zKSB7XG4gICAgcmV0dXJuIGRlbGF5KG1zLCB0aGlzKTtcbn07XG5cbnZhciBhZnRlclRpbWVvdXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgbWVzc2FnZSwgcGFyZW50KSB7XG4gICAgdmFyIGVycjtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgZXJyID0gbWVzc2FnZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVyciA9IG5ldyBUaW1lb3V0RXJyb3IoXCJvcGVyYXRpb24gdGltZWQgb3V0XCIpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZXJyID0gbmV3IFRpbWVvdXRFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgdXRpbC5tYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24oZXJyKTtcbiAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKGVycik7XG4gICAgcHJvbWlzZS5fcmVqZWN0KGVycik7XG5cbiAgICBpZiAocGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgcGFyZW50LmNhbmNlbCgpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIHN1Y2Nlc3NDbGVhcih2YWx1ZSkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmhhbmRsZSk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBmYWlsdXJlQ2xlYXIocmVhc29uKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaGFuZGxlKTtcbiAgICB0aHJvdyByZWFzb247XG59XG5cblByb21pc2UucHJvdG90eXBlLnRpbWVvdXQgPSBmdW5jdGlvbiAobXMsIG1lc3NhZ2UpIHtcbiAgICBtcyA9ICttcztcbiAgICB2YXIgcmV0LCBwYXJlbnQ7XG5cbiAgICB2YXIgaGFuZGxlV3JhcHBlciA9IG5ldyBIYW5kbGVXcmFwcGVyKHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZW91dFRpbWVvdXQoKSB7XG4gICAgICAgIGlmIChyZXQuaXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgIGFmdGVyVGltZW91dChyZXQsIG1lc3NhZ2UsIHBhcmVudCk7XG4gICAgICAgIH1cbiAgICB9LCBtcykpO1xuXG4gICAgaWYgKGRlYnVnLmNhbmNlbGxhdGlvbigpKSB7XG4gICAgICAgIHBhcmVudCA9IHRoaXMudGhlbigpO1xuICAgICAgICByZXQgPSBwYXJlbnQuX3RoZW4oc3VjY2Vzc0NsZWFyLCBmYWlsdXJlQ2xlYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBoYW5kbGVXcmFwcGVyLCB1bmRlZmluZWQpO1xuICAgICAgICByZXQuX3NldE9uQ2FuY2VsKGhhbmRsZVdyYXBwZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IHRoaXMuX3RoZW4oc3VjY2Vzc0NsZWFyLCBmYWlsdXJlQ2xlYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBoYW5kbGVXcmFwcGVyLCB1bmRlZmluZWQpO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG59O1xuXG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChQcm9taXNlLCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgY3JlYXRlQ29udGV4dCwgSU5URVJOQUwsIGRlYnVnKSB7XG4gICAgdmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xuICAgIHZhciBUeXBlRXJyb3IgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIikuVHlwZUVycm9yO1xuICAgIHZhciBpbmhlcml0cyA9IF9kZXJlcV8oXCIuL3V0aWxcIikuaW5oZXJpdHM7XG4gICAgdmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbiAgICB2YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuICAgIHZhciBOVUxMID0ge307XG5cbiAgICBmdW5jdGlvbiB0aHJvd2VyKGUpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGU7fSwgMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FzdFByZXNlcnZpbmdEaXNwb3NhYmxlKHRoZW5hYmxlKSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHRoZW5hYmxlKTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSAhPT0gdGhlbmFibGUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGVuYWJsZS5faXNEaXNwb3NhYmxlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGVuYWJsZS5fZ2V0RGlzcG9zZXIgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgdGhlbmFibGUuX2lzRGlzcG9zYWJsZSgpKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UuX3NldERpc3Bvc2FibGUodGhlbmFibGUuX2dldERpc3Bvc2VyKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXliZVByb21pc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpc3Bvc2UocmVzb3VyY2VzLCBpbnNwZWN0aW9uKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IHJlc291cmNlcy5sZW5ndGg7XG4gICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIGZ1bmN0aW9uIGl0ZXJhdG9yKCkge1xuICAgICAgICAgICAgaWYgKGkgPj0gbGVuKSByZXR1cm4gcmV0Ll9mdWxmaWxsKCk7XG4gICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gY2FzdFByZXNlcnZpbmdEaXNwb3NhYmxlKHJlc291cmNlc1tpKytdKTtcbiAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlICYmXG4gICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9pc0Rpc3Bvc2FibGUoKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX2dldERpc3Bvc2VyKCkudHJ5RGlzcG9zZShpbnNwZWN0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy5wcm9taXNlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aHJvd2VyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF5YmVQcm9taXNlLl90aGVuKGl0ZXJhdG9yLCB0aHJvd2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZXJhdG9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaXRlcmF0b3IoKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBEaXNwb3NlcihkYXRhLCBwcm9taXNlLCBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLl9wcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxuXG4gICAgRGlzcG9zZXIucHJvdG90eXBlLmRhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUucHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG4gICAgfTtcblxuICAgIERpc3Bvc2VyLnByb3RvdHlwZS5yZXNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvbWlzZSgpLmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb21pc2UoKS52YWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOVUxMO1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUudHJ5RGlzcG9zZSA9IGZ1bmN0aW9uKGluc3BlY3Rpb24pIHtcbiAgICAgICAgdmFyIHJlc291cmNlID0gdGhpcy5yZXNvdXJjZSgpO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuX2NvbnRleHQ7XG4gICAgICAgIGlmIChjb250ZXh0ICE9PSB1bmRlZmluZWQpIGNvbnRleHQuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgIHZhciByZXQgPSByZXNvdXJjZSAhPT0gTlVMTFxuICAgICAgICAgICAgPyB0aGlzLmRvRGlzcG9zZShyZXNvdXJjZSwgaW5zcGVjdGlvbikgOiBudWxsO1xuICAgICAgICBpZiAoY29udGV4dCAhPT0gdW5kZWZpbmVkKSBjb250ZXh0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3Vuc2V0RGlzcG9zYWJsZSgpO1xuICAgICAgICB0aGlzLl9kYXRhID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG4gICAgRGlzcG9zZXIuaXNEaXNwb3NlciA9IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIHJldHVybiAoZCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGQucmVzb3VyY2UgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBkLnRyeURpc3Bvc2UgPT09IFwiZnVuY3Rpb25cIik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEZ1bmN0aW9uRGlzcG9zZXIoZm4sIHByb21pc2UsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciQoZm4sIHByb21pc2UsIGNvbnRleHQpO1xuICAgIH1cbiAgICBpbmhlcml0cyhGdW5jdGlvbkRpc3Bvc2VyLCBEaXNwb3Nlcik7XG5cbiAgICBGdW5jdGlvbkRpc3Bvc2VyLnByb3RvdHlwZS5kb0Rpc3Bvc2UgPSBmdW5jdGlvbiAocmVzb3VyY2UsIGluc3BlY3Rpb24pIHtcbiAgICAgICAgdmFyIGZuID0gdGhpcy5kYXRhKCk7XG4gICAgICAgIHJldHVybiBmbi5jYWxsKHJlc291cmNlLCByZXNvdXJjZSwgaW5zcGVjdGlvbik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG1heWJlVW53cmFwRGlzcG9zZXIodmFsdWUpIHtcbiAgICAgICAgaWYgKERpc3Bvc2VyLmlzRGlzcG9zZXIodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc291cmNlc1t0aGlzLmluZGV4XS5fc2V0RGlzcG9zYWJsZSh2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUucHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBSZXNvdXJjZUxpc3QobGVuZ3RoKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLnByb21pc2UgPSBudWxsO1xuICAgICAgICB0aGlzW2xlbmd0aC0xXSA9IG51bGw7XG4gICAgfVxuXG4gICAgUmVzb3VyY2VMaXN0LnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzW2ldO1xuICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBQcm9taXNlLnVzaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA8IDIpIHJldHVybiBhcGlSZWplY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICBcInlvdSBtdXN0IHBhc3MgYXQgbGVhc3QgMiBhcmd1bWVudHMgdG8gUHJvbWlzZS51c2luZ1wiKTtcbiAgICAgICAgdmFyIGZuID0gYXJndW1lbnRzW2xlbiAtIDFdO1xuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbnB1dDtcbiAgICAgICAgdmFyIHNwcmVhZEFyZ3MgPSB0cnVlO1xuICAgICAgICBpZiAobGVuID09PSAyICYmIEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICAgICAgaW5wdXQgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICBsZW4gPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgICAgICBzcHJlYWRBcmdzID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnB1dCA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgIGxlbi0tO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXNvdXJjZXMgPSBuZXcgUmVzb3VyY2VMaXN0KGxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciByZXNvdXJjZSA9IGlucHV0W2ldO1xuICAgICAgICAgICAgaWYgKERpc3Bvc2VyLmlzRGlzcG9zZXIocmVzb3VyY2UpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3Bvc2VyID0gcmVzb3VyY2U7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UgPSByZXNvdXJjZS5wcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuX3NldERpc3Bvc2FibGUoZGlzcG9zZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXNvdXJjZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2UgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl90aGVuKG1heWJlVW53cmFwRGlzcG9zZXIsIG51bGwsIG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXM6IHJlc291cmNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaVxuICAgICAgICAgICAgICAgICAgICB9LCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc291cmNlc1tpXSA9IHJlc291cmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlZmxlY3RlZFJlc291cmNlcyA9IG5ldyBBcnJheShyZXNvdXJjZXMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWZsZWN0ZWRSZXNvdXJjZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHJlZmxlY3RlZFJlc291cmNlc1tpXSA9IFByb21pc2UucmVzb2x2ZShyZXNvdXJjZXNbaV0pLnJlZmxlY3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXN1bHRQcm9taXNlID0gUHJvbWlzZS5hbGwocmVmbGVjdGVkUmVzb3VyY2VzKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oaW5zcGVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluc3BlY3Rpb25zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnNwZWN0aW9uID0gaW5zcGVjdGlvbnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JPYmouZSA9IGluc3BlY3Rpb24uZXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaW5zcGVjdGlvbi5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRQcm9taXNlLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluc3BlY3Rpb25zW2ldID0gaW5zcGVjdGlvbi52YWx1ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuXG4gICAgICAgICAgICAgICAgZm4gPSB0cnlDYXRjaChmbik7XG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IHNwcmVhZEFyZ3NcbiAgICAgICAgICAgICAgICAgICAgPyBmbi5hcHBseSh1bmRlZmluZWQsIGluc3BlY3Rpb25zKSA6IGZuKGluc3BlY3Rpb25zKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgICAgICAgICAgICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICAgICAgICAgICAgICByZXQsIHByb21pc2VDcmVhdGVkLCBcIlByb21pc2UudXNpbmdcIiwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gcmVzdWx0UHJvbWlzZS5sYXN0bHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5zcGVjdGlvbiA9IG5ldyBQcm9taXNlLlByb21pc2VJbnNwZWN0aW9uKHJlc3VsdFByb21pc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGRpc3Bvc2UocmVzb3VyY2VzLCBpbnNwZWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlc291cmNlcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgcHJvbWlzZS5fc2V0T25DYW5jZWwocmVzb3VyY2VzKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl9zZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKGRpc3Bvc2VyKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAxMzEwNzI7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VyID0gZGlzcG9zZXI7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl9pc0Rpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAxMzEwNzIpID4gMDtcbiAgICB9O1xuXG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX2dldERpc3Bvc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzcG9zZXI7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl91bnNldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjEzMTA3Mik7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VyID0gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICBQcm9taXNlLnByb3RvdHlwZS5kaXNwb3NlciA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBpZiAodHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25EaXNwb3NlcihmbiwgdGhpcywgY3JlYXRlQ29udGV4dCgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgfTtcblxufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwzNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgY2FuRXZhbHVhdGUgPSB0eXBlb2YgbmF2aWdhdG9yID09IFwidW5kZWZpbmVkXCI7XG5cbnZhciBlcnJvck9iaiA9IHtlOiB7fX07XG52YXIgdHJ5Q2F0Y2hUYXJnZXQ7XG52YXIgZ2xvYmFsT2JqZWN0ID0gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDpcbiAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDpcbiAgICB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDpcbiAgICB0aGlzICE9PSB1bmRlZmluZWQgPyB0aGlzIDogbnVsbDtcblxuZnVuY3Rpb24gdHJ5Q2F0Y2hlcigpIHtcbiAgICB0cnkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdHJ5Q2F0Y2hUYXJnZXQ7XG4gICAgICAgIHRyeUNhdGNoVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmouZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9XG59XG5mdW5jdGlvbiB0cnlDYXRjaChmbikge1xuICAgIHRyeUNhdGNoVGFyZ2V0ID0gZm47XG4gICAgcmV0dXJuIHRyeUNhdGNoZXI7XG59XG5cbnZhciBpbmhlcml0cyA9IGZ1bmN0aW9uKENoaWxkLCBQYXJlbnQpIHtcbiAgICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gICAgZnVuY3Rpb24gVCgpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IENoaWxkO1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yJCA9IFBhcmVudDtcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHlOYW1lIGluIFBhcmVudC5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIGlmIChoYXNQcm9wLmNhbGwoUGFyZW50LnByb3RvdHlwZSwgcHJvcGVydHlOYW1lKSAmJlxuICAgICAgICAgICAgICAgIHByb3BlcnR5TmFtZS5jaGFyQXQocHJvcGVydHlOYW1lLmxlbmd0aC0xKSAhPT0gXCIkXCJcbiAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpc1twcm9wZXJ0eU5hbWUgKyBcIiRcIl0gPSBQYXJlbnQucHJvdG90eXBlW3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgVC5wcm90b3R5cGUgPSBQYXJlbnQucHJvdG90eXBlO1xuICAgIENoaWxkLnByb3RvdHlwZSA9IG5ldyBUKCk7XG4gICAgcmV0dXJuIENoaWxkLnByb3RvdHlwZTtcbn07XG5cblxuZnVuY3Rpb24gaXNQcmltaXRpdmUodmFsKSB7XG4gICAgcmV0dXJuIHZhbCA9PSBudWxsIHx8IHZhbCA9PT0gdHJ1ZSB8fCB2YWwgPT09IGZhbHNlIHx8XG4gICAgICAgIHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIjtcblxufVxuXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIG1heWJlV3JhcEFzRXJyb3IobWF5YmVFcnJvcikge1xuICAgIGlmICghaXNQcmltaXRpdmUobWF5YmVFcnJvcikpIHJldHVybiBtYXliZUVycm9yO1xuXG4gICAgcmV0dXJuIG5ldyBFcnJvcihzYWZlVG9TdHJpbmcobWF5YmVFcnJvcikpO1xufVxuXG5mdW5jdGlvbiB3aXRoQXBwZW5kZWQodGFyZ2V0LCBhcHBlbmRlZSkge1xuICAgIHZhciBsZW4gPSB0YXJnZXQubGVuZ3RoO1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkobGVuICsgMSk7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHJldFtpXSA9IHRhcmdldFtpXTtcbiAgICB9XG4gICAgcmV0W2ldID0gYXBwZW5kZWU7XG4gICAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0KG9iaiwga2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgICBpZiAoZXM1LmlzRVM1KSB7XG4gICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG5cbiAgICAgICAgaWYgKGRlc2MgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2MuZ2V0ID09IG51bGwgJiYgZGVzYy5zZXQgPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICA/IGRlc2MudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkgPyBvYmpba2V5XSA6IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5vdEVudW1lcmFibGVQcm9wKG9iaiwgbmFtZSwgdmFsdWUpIHtcbiAgICBpZiAoaXNQcmltaXRpdmUob2JqKSkgcmV0dXJuIG9iajtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH07XG4gICAgZXM1LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwgZGVzY3JpcHRvcik7XG4gICAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gdGhyb3dlcihyKSB7XG4gICAgdGhyb3cgcjtcbn1cblxudmFyIGluaGVyaXRlZERhdGFLZXlzID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBleGNsdWRlZFByb3RvdHlwZXMgPSBbXG4gICAgICAgIEFycmF5LnByb3RvdHlwZSxcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgICAgRnVuY3Rpb24ucHJvdG90eXBlXG4gICAgXTtcblxuICAgIHZhciBpc0V4Y2x1ZGVkUHJvdG8gPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleGNsdWRlZFByb3RvdHlwZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChleGNsdWRlZFByb3RvdHlwZXNbaV0gPT09IHZhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgaWYgKGVzNS5pc0VTNSkge1xuICAgICAgICB2YXIgZ2V0S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgICAgICB2YXIgdmlzaXRlZEtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgd2hpbGUgKG9iaiAhPSBudWxsICYmICFpc0V4Y2x1ZGVkUHJvdG8ob2JqKSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlzO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMgPSBnZXRLZXlzKG9iaik7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2aXNpdGVkS2V5c1trZXldKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaXRlZEtleXNba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXNjICE9IG51bGwgJiYgZGVzYy5nZXQgPT0gbnVsbCAmJiBkZXNjLnNldCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9iaiA9IGVzNS5nZXRQcm90b3R5cGVPZihvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICBpZiAoaXNFeGNsdWRlZFByb3RvKG9iaikpIHJldHVybiBbXTtcbiAgICAgICAgICAgIHZhciByZXQgPSBbXTtcblxuICAgICAgICAgICAgLypqc2hpbnQgZm9yaW46ZmFsc2UgKi9cbiAgICAgICAgICAgIGVudW1lcmF0aW9uOiBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1Byb3AuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4Y2x1ZGVkUHJvdG90eXBlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1Byb3AuY2FsbChleGNsdWRlZFByb3RvdHlwZXNbaV0sIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBlbnVtZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH07XG4gICAgfVxuXG59KSgpO1xuXG52YXIgdGhpc0Fzc2lnbm1lbnRQYXR0ZXJuID0gL3RoaXNcXHMqXFwuXFxzKlxcUytcXHMqPS87XG5mdW5jdGlvbiBpc0NsYXNzKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IGVzNS5uYW1lcyhmbi5wcm90b3R5cGUpO1xuXG4gICAgICAgICAgICB2YXIgaGFzTWV0aG9kcyA9IGVzNS5pc0VTNSAmJiBrZXlzLmxlbmd0aCA+IDE7XG4gICAgICAgICAgICB2YXIgaGFzTWV0aG9kc090aGVyVGhhbkNvbnN0cnVjdG9yID0ga2V5cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgIShrZXlzLmxlbmd0aCA9PT0gMSAmJiBrZXlzWzBdID09PSBcImNvbnN0cnVjdG9yXCIpO1xuICAgICAgICAgICAgdmFyIGhhc1RoaXNBc3NpZ25tZW50QW5kU3RhdGljTWV0aG9kcyA9XG4gICAgICAgICAgICAgICAgdGhpc0Fzc2lnbm1lbnRQYXR0ZXJuLnRlc3QoZm4gKyBcIlwiKSAmJiBlczUubmFtZXMoZm4pLmxlbmd0aCA+IDA7XG5cbiAgICAgICAgICAgIGlmIChoYXNNZXRob2RzIHx8IGhhc01ldGhvZHNPdGhlclRoYW5Db25zdHJ1Y3RvciB8fFxuICAgICAgICAgICAgICAgIGhhc1RoaXNBc3NpZ25tZW50QW5kU3RhdGljTWV0aG9kcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRvRmFzdFByb3BlcnRpZXMob2JqKSB7XG4gICAgLypqc2hpbnQgLVcwMjcsLVcwNTUsLVcwMzEqL1xuICAgIGZ1bmN0aW9uIEZha2VDb25zdHJ1Y3RvcigpIHt9XG4gICAgRmFrZUNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IG9iajtcbiAgICB2YXIgbCA9IDg7XG4gICAgd2hpbGUgKGwtLSkgbmV3IEZha2VDb25zdHJ1Y3RvcigpO1xuICAgIHJldHVybiBvYmo7XG4gICAgZXZhbChvYmopO1xufVxuXG52YXIgcmlkZW50ID0gL15bYS16JF9dW2EteiRfMC05XSokL2k7XG5mdW5jdGlvbiBpc0lkZW50aWZpZXIoc3RyKSB7XG4gICAgcmV0dXJuIHJpZGVudC50ZXN0KHN0cik7XG59XG5cbmZ1bmN0aW9uIGZpbGxlZFJhbmdlKGNvdW50LCBwcmVmaXgsIHN1ZmZpeCkge1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkoY291bnQpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgIHJldFtpXSA9IHByZWZpeCArIGkgKyBzdWZmaXg7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHNhZmVUb1N0cmluZyhvYmopIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gb2JqICsgXCJcIjtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBcIltubyBzdHJpbmcgcmVwcmVzZW50YXRpb25dXCI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0Vycm9yKG9iaikge1xuICAgIHJldHVybiBvYmogIT09IG51bGwgJiZcbiAgICAgICAgICAgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICB0eXBlb2Ygb2JqLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgdHlwZW9mIG9iai5uYW1lID09PSBcInN0cmluZ1wiO1xufVxuXG5mdW5jdGlvbiBtYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24oZSkge1xuICAgIHRyeSB7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKGUsIFwiaXNPcGVyYXRpb25hbFwiLCB0cnVlKTtcbiAgICB9XG4gICAgY2F0Y2goaWdub3JlKSB7fVxufVxuXG5mdW5jdGlvbiBvcmlnaW5hdGVzRnJvbVJlamVjdGlvbihlKSB7XG4gICAgaWYgKGUgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAoKGUgaW5zdGFuY2VvZiBFcnJvcltcIl9fQmx1ZWJpcmRFcnJvclR5cGVzX19cIl0uT3BlcmF0aW9uYWxFcnJvcikgfHxcbiAgICAgICAgZVtcImlzT3BlcmF0aW9uYWxcIl0gPT09IHRydWUpO1xufVxuXG5mdW5jdGlvbiBjYW5BdHRhY2hUcmFjZShvYmopIHtcbiAgICByZXR1cm4gaXNFcnJvcihvYmopICYmIGVzNS5wcm9wZXJ0eUlzV3JpdGFibGUob2JqLCBcInN0YWNrXCIpO1xufVxuXG52YXIgZW5zdXJlRXJyb3JPYmplY3QgPSAoZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEoXCJzdGFja1wiIGluIG5ldyBFcnJvcigpKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjYW5BdHRhY2hUcmFjZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIHRyeSB7dGhyb3cgbmV3IEVycm9yKHNhZmVUb1N0cmluZyh2YWx1ZSkpO31cbiAgICAgICAgICAgIGNhdGNoKGVycikge3JldHVybiBlcnI7fVxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGNhbkF0dGFjaFRyYWNlKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihzYWZlVG9TdHJpbmcodmFsdWUpKTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG5mdW5jdGlvbiBjbGFzc1N0cmluZyhvYmopIHtcbiAgICByZXR1cm4ge30udG9TdHJpbmcuY2FsbChvYmopO1xufVxuXG5mdW5jdGlvbiBjb3B5RGVzY3JpcHRvcnMoZnJvbSwgdG8sIGZpbHRlcikge1xuICAgIHZhciBrZXlzID0gZXM1Lm5hbWVzKGZyb20pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgaWYgKGZpbHRlcihrZXkpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGVzNS5kZWZpbmVQcm9wZXJ0eSh0bywga2V5LCBlczUuZ2V0RGVzY3JpcHRvcihmcm9tLCBrZXkpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIGFzQXJyYXkgPSBmdW5jdGlvbih2KSB7XG4gICAgaWYgKGVzNS5pc0FycmF5KHYpKSB7XG4gICAgICAgIHJldHVybiB2O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvcikge1xuICAgIHZhciBBcnJheUZyb20gPSB0eXBlb2YgQXJyYXkuZnJvbSA9PT0gXCJmdW5jdGlvblwiID8gZnVuY3Rpb24odikge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh2KTtcbiAgICB9IDogZnVuY3Rpb24odikge1xuICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgIHZhciBpdCA9IHZbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICB2YXIgaXRSZXN1bHQ7XG4gICAgICAgIHdoaWxlICghKChpdFJlc3VsdCA9IGl0Lm5leHQoKSkuZG9uZSkpIHtcbiAgICAgICAgICAgIHJldC5wdXNoKGl0UmVzdWx0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG5cbiAgICBhc0FycmF5ID0gZnVuY3Rpb24odikge1xuICAgICAgICBpZiAoZXM1LmlzQXJyYXkodikpIHtcbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9IGVsc2UgaWYgKHYgIT0gbnVsbCAmJiB0eXBlb2YgdltTeW1ib2wuaXRlcmF0b3JdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheUZyb20odik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cblxudmFyIGlzTm9kZSA9IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIGNsYXNzU3RyaW5nKHByb2Nlc3MpLnRvTG93ZXJDYXNlKCkgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiO1xuXG5mdW5jdGlvbiBlbnYoa2V5LCBkZWYpIHtcbiAgICByZXR1cm4gaXNOb2RlID8gcHJvY2Vzcy5lbnZba2V5XSA6IGRlZjtcbn1cblxuZnVuY3Rpb24gZ2V0TmF0aXZlUHJvbWlzZSgpIHtcbiAgICBpZiAodHlwZW9mIFByb21pc2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbigpe30pO1xuICAgICAgICAgICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwocHJvbWlzZSkgPT09IFwiW29iamVjdCBQcm9taXNlXVwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxufVxuXG52YXIgcmV0ID0ge1xuICAgIGlzQ2xhc3M6IGlzQ2xhc3MsXG4gICAgaXNJZGVudGlmaWVyOiBpc0lkZW50aWZpZXIsXG4gICAgaW5oZXJpdGVkRGF0YUtleXM6IGluaGVyaXRlZERhdGFLZXlzLFxuICAgIGdldERhdGFQcm9wZXJ0eU9yRGVmYXVsdDogZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0LFxuICAgIHRocm93ZXI6IHRocm93ZXIsXG4gICAgaXNBcnJheTogZXM1LmlzQXJyYXksXG4gICAgYXNBcnJheTogYXNBcnJheSxcbiAgICBub3RFbnVtZXJhYmxlUHJvcDogbm90RW51bWVyYWJsZVByb3AsXG4gICAgaXNQcmltaXRpdmU6IGlzUHJpbWl0aXZlLFxuICAgIGlzT2JqZWN0OiBpc09iamVjdCxcbiAgICBpc0Vycm9yOiBpc0Vycm9yLFxuICAgIGNhbkV2YWx1YXRlOiBjYW5FdmFsdWF0ZSxcbiAgICBlcnJvck9iajogZXJyb3JPYmosXG4gICAgdHJ5Q2F0Y2g6IHRyeUNhdGNoLFxuICAgIGluaGVyaXRzOiBpbmhlcml0cyxcbiAgICB3aXRoQXBwZW5kZWQ6IHdpdGhBcHBlbmRlZCxcbiAgICBtYXliZVdyYXBBc0Vycm9yOiBtYXliZVdyYXBBc0Vycm9yLFxuICAgIHRvRmFzdFByb3BlcnRpZXM6IHRvRmFzdFByb3BlcnRpZXMsXG4gICAgZmlsbGVkUmFuZ2U6IGZpbGxlZFJhbmdlLFxuICAgIHRvU3RyaW5nOiBzYWZlVG9TdHJpbmcsXG4gICAgY2FuQXR0YWNoVHJhY2U6IGNhbkF0dGFjaFRyYWNlLFxuICAgIGVuc3VyZUVycm9yT2JqZWN0OiBlbnN1cmVFcnJvck9iamVjdCxcbiAgICBvcmlnaW5hdGVzRnJvbVJlamVjdGlvbjogb3JpZ2luYXRlc0Zyb21SZWplY3Rpb24sXG4gICAgbWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uOiBtYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24sXG4gICAgY2xhc3NTdHJpbmc6IGNsYXNzU3RyaW5nLFxuICAgIGNvcHlEZXNjcmlwdG9yczogY29weURlc2NyaXB0b3JzLFxuICAgIGhhc0RldlRvb2xzOiB0eXBlb2YgY2hyb21lICE9PSBcInVuZGVmaW5lZFwiICYmIGNocm9tZSAmJlxuICAgICAgICAgICAgICAgICB0eXBlb2YgY2hyb21lLmxvYWRUaW1lcyA9PT0gXCJmdW5jdGlvblwiLFxuICAgIGlzTm9kZTogaXNOb2RlLFxuICAgIGVudjogZW52LFxuICAgIGdsb2JhbDogZ2xvYmFsT2JqZWN0LFxuICAgIGdldE5hdGl2ZVByb21pc2U6IGdldE5hdGl2ZVByb21pc2Vcbn07XG5yZXQuaXNSZWNlbnROb2RlID0gcmV0LmlzTm9kZSAmJiAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZlcnNpb24gPSBwcm9jZXNzLnZlcnNpb25zLm5vZGUuc3BsaXQoXCIuXCIpLm1hcChOdW1iZXIpO1xuICAgIHJldHVybiAodmVyc2lvblswXSA9PT0gMCAmJiB2ZXJzaW9uWzFdID4gMTApIHx8ICh2ZXJzaW9uWzBdID4gMCk7XG59KSgpO1xuXG5pZiAocmV0LmlzTm9kZSkgcmV0LnRvRmFzdFByb3BlcnRpZXMocHJvY2Vzcyk7XG5cbnRyeSB7dGhyb3cgbmV3IEVycm9yKCk7IH0gY2F0Y2ggKGUpIHtyZXQubGFzdExpbmVFcnJvciA9IGU7fVxubW9kdWxlLmV4cG9ydHMgPSByZXQ7XG5cbn0se1wiLi9lczVcIjoxM31dfSx7fSxbNF0pKDQpXG59KTsgICAgICAgICAgICAgICAgICAgIDtpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93ICE9PSBudWxsKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5QID0gd2luZG93LlByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmICE9PSBudWxsKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLlAgPSBzZWxmLlByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuZnVuY3Rpb24gRmxhc2hDbGllbnQob3B0aW9ucykge1xuICAgIGlmICghZ2V0Rmxhc2hWZXJzaW9uKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGbGFzaCBQbGF5ZXIgbm90IGluc3RhbGxlZCEnKTtcbiAgICB9XG5cbiAgICB0aGlzLmlkID0gTWF0aC5yb3VuZCgoIG5ldyBEYXRlKCkgKS5nZXRUaW1lKCkgLyAxMDAwMCArIE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMCk7XG4gICAgdGhpcy51bml0U3JjID0gJy8vcGxheWVyLnZpZGVlLnR2L3YyLjEvcmVzb3VyY2VzL2xpYnMvdmlkZWVqcy1wbGF5ZXIuc3dmJztcbiAgICB0aGlzLmZsYXNoVmVyc2lvbiA9IFwiMTAuMC4wXCI7XG4gICAgdGhpcy5wYXJhbXMgPSB7XG4gICAgICAgIGFsbG93U2NyaXB0QWNjZXNzOiBcImFsd2F5c1wiLFxuICAgICAgICBhbGxvd0Z1bGxTY3JlZW46IFwidHJ1ZVwiLFxuICAgICAgICB3bW9kZTogJ3RyYW5zcGFyZW50J1xuICAgIH07XG5cbiAgICB0aGlzLnByb3h5RXZlbnRzID0gWydsb2FkZWQnLCAnZXJyb3InLCAnY29tcGxldGUnLCAnc3RhcnRlZCcsICdyZXN1bWVkJywgJ3BhdXNlZCcsICdtdXRlJywgJ3VubXV0ZSddO1xuXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbn1cblxuRmxhc2hDbGllbnQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoVnBhaWRTb3VyY2UsIGNvbmZpZ1VybCwgdmFzdFVybCkge1xuICAgIGlmIChWcGFpZFNvdXJjZSAmJiAhdGhpcy5jaGVja1VuaXRTb3VyY2UoVnBhaWRTb3VyY2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndW5pdCBub3QgU1dGJyk7XG4gICAgfVxuXG4gICAgdGhpcy5hZGRXcmFwcGVyRWwoKTtcbiAgICB0aGlzLmluaXRXcmFwcGVyKHZhc3RVcmwpO1xuICAgIHRoaXMuZW1iZWRTV0YoKTtcbn07XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5jaGVja1VuaXRTb3VyY2UgPSBmdW5jdGlvbiAoVnBhaWRTb3VyY2UpIHtcbiAgICByZXR1cm4gVnBhaWRTb3VyY2UuaW5kZXhPZignLnN3ZicpICE9IC0xO1xufTtcblxuRmxhc2hDbGllbnQucHJvdG90eXBlLmVtYmVkU1dGID0gZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIHN3Zm9iamVjdC5lbWJlZFNXRihcbiAgICAgICAgICAgIHRoaXMudW5pdFNyYyxcbiAgICAgICAgICAgIHRoaXMuc2RrVW5pcXVlLFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLndpZHRoLFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmhlaWdodCxcbiAgICAgICAgICAgIHRoaXMuZmxhc2hWZXJzaW9uLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGhpcy5mbGFzaHZhcnMoKSxcbiAgICAgICAgICAgIHRoaXMucGFyYW1zLFxuICAgICAgICAgICAge31cbiAgICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgfVxufTtcblxuRmxhc2hDbGllbnQucHJvdG90eXBlLmluaXRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5ldmVudE1hbmFnZXIub24oJ3JlYWR5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLlZQQUlEID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zZGtVbmlxdWUpO1xuICAgICAgICB0aGlzLm1ldGhvZHNTdGF0ZSA9IHRydWU7XG4gICAgfS5iaW5kKHRoaXMpKTtcbn07XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5pbml0V3JhcHBlciA9IGZ1bmN0aW9uICh2YXN0VXJsKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSBuZXcgV3JhcHBlcihcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5haWQsXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMud2lkdGgsXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuaGVpZ2h0LFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnNpZCxcbiAgICAgICAgICAgIHZhc3RVcmxcbiAgICAgICAgKS53cmFwKHRoaXMuaWQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICB9XG5cbiAgICB0aGlzLmluaXRFdmVudHMoKTtcbn07XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5hZGRXcmFwcGVyRWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJsb2NrZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIHRoaXMuc2RrVW5pcXVlID0gJ1Nka0ludGVncmF0aW9uJyArIHRoaXMuaWQ7XG4gICAgYmxvY2tlci5jbGFzc05hbWUgPSAnZmxhc2gtYmxvY2tlcic7XG4gICAgYmxvY2tlci5pbm5lckhUTUwgPSAnPGRpdiBpZD1cIicgKyB0aGlzLnNka1VuaXF1ZSArICdcIj48L2Rpdj4nO1xuICAgIHRoaXMub3B0aW9ucy5jb250YWluZXJFbC5hcHBlbmRDaGlsZChibG9ja2VyKTtcbn07XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5mbGFzaHZhcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb25SZWFkeTogXCJ3aW5kb3cuVnBhaWRmbGFzaFdyYXBwZXJzW1wiICsgdGhpcy5pZCArIFwiXS5zdGFydEZsYXNoV3JhcHBlclwiXG4gICAgfVxufTtcbi8qIEZsYXNoIGRldGVjdGlvbiBmcm9tIFNXRk9iamVjdDogY29kZS5nb29nbGUuY29tL3Avc3dmb2JqZWN0XG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgXG4gKiBAcmV0dXJucyBhIHZlcnNpb24gbnVtYmVyIG9yIC0xIGlmIG5vIHBsYXllclxuICovXG52YXIgZ2V0Rmxhc2hWZXJzaW9uID0gZnVuY3Rpb24oKSB7XG5cdFxuXHRcdHZhciBTVyA9IFwiU2hvY2t3YXZlXCIsXG5cdFx0XHRGTEFTSCA9IFwiRmxhc2hcIixcblx0XHRcdFNIT0NLV0FWRV9GTEFTSCA9IFNXICsgXCIgXCIgKyBGTEFTSCxcblx0XHRcdFNIT0NLV0FWRV9GTEFTSF9BWCA9IFNXK0ZMQVNIK1wiLlwiK1NXK0ZMQVNILFxuXHRcdFx0RkxBU0hfTUlNRV9UWVBFID0gXCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiLFxuXHRcdFx0bmF2ID0gbmF2aWdhdG9yLFxuXHRcdFx0cGFyc2UgPSBwYXJzZUZsb2F0LFxuXHRcdFx0cGx1Z2lucyA9IG5hdi5wbHVnaW5zLFxuXHRcdFx0bWltZXMgPSBuYXYubWltZVR5cGVzLFxuXHRcdFx0ZCwgYTtcblx0XHRpZiAoISFwbHVnaW5zICYmIHR5cGVvZiBwbHVnaW5zW1NIT0NLV0FWRV9GTEFTSF0gPT0gXCJvYmplY3RcIikge1xuXHRcdFx0ZCA9IHBsdWdpbnNbU0hPQ0tXQVZFX0ZMQVNIXS5kZXNjcmlwdGlvbjtcblx0XHRcdGlmICghIWQgJiYgISghIW1pbWVzICYmICEhbWltZXNbRkxBU0hfTUlNRV9UWVBFXSAmJiAhbWltZXNbRkxBU0hfTUlNRV9UWVBFXS5lbmFibGVkUGx1Z2luKSkge1xuXHRcdFx0XHRyZXR1cm4gcGFyc2UoIGQucmVwbGFjZSgvXi4qXFxzKyhcXFMrKVxccytcXFMrJC8sIFwiJDFcIikgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSBpZiAoICEhd2luZG93LkFjdGl2ZVhPYmplY3QgKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhID0gbmV3IEFjdGl2ZVhPYmplY3QoU0hPQ0tXQVZFX0ZMQVNIX0FYKTtcblx0XHRcdFx0aWYgKGEpIHtcblx0XHRcdFx0XHRkID0gYS5HZXRWYXJpYWJsZShcIiR2ZXJzaW9uXCIpO1xuXHRcdFx0XHRcdGlmICghIWQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBwYXJzZShkLnJlcGxhY2UoL15cXFMrXFxzKyhcXGQrKSwoXFxkKykuKiQvaSwnJDEuJDInKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjYXRjaChlKSB7fVxuXHRcdH1cblx0XHRyZXR1cm4gLTE7XG5cdFx0XG59O1xuLyoqXG4gKiBAcGFyYW0gYWlkIHtudW1iZXJ9XG4gKiBAcGFyYW0gd2lkdGgge251bWJlcn1cbiAqIEBwYXJhbSBoZWlnaHQge251bWJlcn1cbiAqIEBwYXJhbSBzaWQge251bWJlcn1cbiAqIEBwYXJhbSBjb25maWdVcmwge3N0cmluZ31cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBXcmFwcGVyKGFpZCwgd2lkdGgsIGhlaWdodCwgc2lkLCBjb25maWdVcmwpIHtcbiAgICBpZiAoIWFpZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NldCBhaWQnKVxuICAgIH1cblxuICAgIHRoaXMuaG9zdCA9IGVuY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uaG9zdCk7XG4gICAgdGhpcy5jZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0IHx8IDMwMDtcbiAgICB0aGlzLndpZHRoID0gd2lkdGggfHwgNDAwO1xuICAgIHRoaXMuc2lkID0gc2lkIHx8IDA7XG4gICAgdGhpcy5haWQgPSBhaWQ7XG4gICAgdGhpcy5jb25maWdVcmwgPSBjb25maWdVcmw7XG59XG5cbldyYXBwZXIucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbiAoYWRJZCkge1xuICAgIHZhciBjb25maWcgPSB0aGlzLmdldENvbmZpZyhhZElkKSxcbiAgICAgICAgZXZlbnRNYW5hZ2VyID0gbmV3IEV2ZW50TWFuYWdlcigpLFxuICAgICAgICB3aWR0aCA9IHRoaXMud2lkdGgsXG4gICAgICAgIGhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuXG4gICAgaWYgKCF3aW5kb3cuVnBhaWRmbGFzaFdyYXBwZXJzKSB7XG4gICAgICAgIHdpbmRvdy5WcGFpZGZsYXNoV3JhcHBlcnMgPSB7fVxuICAgIH1cblxuICAgIHdpbmRvdy5WcGFpZGZsYXNoV3JhcHBlcnNbYWRJZF0gPSB7fTtcblxuICAgIHdpbmRvdy5WcGFpZGZsYXNoV3JhcHBlcnNbYWRJZF0gPSB7XG4gICAgICAgIGFkTG9hZGVkQ2xvc3VyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ2xvYWRlZCcpO1xuICAgICAgICAgICAgd2luZG93W1wiU2RrSW50ZWdyYXRpb25cIiArIGFkSWRdLnN0YXJ0QWQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRFcnJvckNsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdlcnJvcicpO1xuICAgICAgICB9LFxuICAgICAgICBhZENvbXBsZXRlQ2xvc3VyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ2NvbXBsZXRlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIHBhdXNlZENsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdwYXVzZWQnKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVzdW1lZENsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdyZXN1bWVkJyk7XG4gICAgICAgIH0sXG4gICAgICAgIG11dGVDbG9zdXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcignbXV0ZScpO1xuICAgICAgICB9LFxuICAgICAgICB1bm11dGVDbG9zdXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcigndW5tdXRlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkU3RhcnRlZENsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdzdGFydGVkJyk7XG4gICAgICAgIH0sXG4gICAgICAgIHN0YXJ0Rmxhc2hXcmFwcGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcigncmVhZHknKTtcbiAgICAgICAgICAgIHZhciBTZGtJbnRlZ3JhdGlvbiA9IHdpbmRvd1tcIlNka0ludGVncmF0aW9uXCIgKyBhZElkXTtcbiAgICAgICAgICAgIFNka0ludGVncmF0aW9uLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBTZGtJbnRlZ3JhdGlvbi5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICBTZGtJbnRlZ3JhdGlvbi5sb2FkQWQoY29uZmlnKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZXZlbnRNYW5hZ2VyO1xufTtcblxuV3JhcHBlci5wcm90b3R5cGUuZ2V0Q29uZmlnID0gZnVuY3Rpb24gKGFkSWQpIHtcbiAgICB2YXIgdHBsID0gXCJ3aW5kb3cuVnBhaWRmbGFzaFdyYXBwZXJzW1wiICsgYWRJZCArIFwiXVwiO1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGFkQ29tcGxldGVDbG9zdXJlOiB0cGwgKyBcIi5hZENvbXBsZXRlQ2xvc3VyZVwiLFxuICAgICAgICBhZFN0YXJ0ZWRDbG9zdXJlOiB0cGwgKyBcIi5hZFN0YXJ0ZWRDbG9zdXJlXCIsXG4gICAgICAgIGFkTG9hZGVkQ2xvc3VyZTogdHBsICsgXCIuYWRMb2FkZWRDbG9zdXJlXCIsXG4gICAgICAgIGFkRXJyb3JDbG9zdXJlOiB0cGwgKyBcIi5hZEVycm9yQ2xvc3VyZVwiLFxuICAgICAgICByZXN1bWVkQ2xvc3VyZTogdHBsICsgXCIucmVzdW1lZENsb3N1cmVcIixcbiAgICAgICAgcGF1c2VkQ2xvc3VyZTogdHBsICsgXCIucGF1c2VkQ2xvc3VyZVwiLFxuICAgICAgICB1bm11dGVDbG9zdXJlOiB0cGwgKyBcIi51bm11dGVDbG9zdXJlXCIsXG4gICAgICAgIG11dGVDbG9zdXJlOiB0cGwgKyBcIi5tdXRlQ2xvc3VyZVwiLFxuICAgICAgICB2b2x1bWU6IDEsXG4gICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxuICAgICAgICB2YXN0VXJsOiB0aGlzLmdldFZhc3RVcmwoKVxuICAgIH0pXG59O1xuXG5XcmFwcGVyLnByb3RvdHlwZS5nZXRWYXN0VXJsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ1VybCB8fCAnLy92YXN0LnZpZGVlLnR2L3Zhc3QtcHJveHkvP2FpZD0nICsgdGhpcy5haWQgK1xuICAgICAgICAnJmNvbnRlbnRfcGFnZV91cmw9JyArIHRoaXMuaG9zdCArXG4gICAgICAgICcmcGxheWVyX2hlaWdodD0nICsgdGhpcy5oZWlnaHQgK1xuICAgICAgICAnJnBsYXllcl93aWR0aD0nICsgdGhpcy53aWR0aCArXG4gICAgICAgICcmc2lkPScgKyB0aGlzLnNpZCArXG4gICAgICAgICcmY2I9JyArIHRoaXMuY2Rcbn07XG5cbi8qISAgICBTV0ZPYmplY3QgdjIuMy4yMDEzMDUyMSA8aHR0cDovL2dpdGh1Yi5jb20vc3dmb2JqZWN0L3N3Zm9iamVjdD5cbiAgICBpcyByZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgPGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwPlxuKi9cbnZhciBzd2ZvYmplY3Q9ZnVuY3Rpb24oKXt2YXIgRD1cInVuZGVmaW5lZFwiLHI9XCJvYmplY3RcIixUPVwiU2hvY2t3YXZlIEZsYXNoXCIsWj1cIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoXCIscT1cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCIsUz1cIlNXRk9iamVjdEV4cHJJbnN0XCIseD1cIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLFE9d2luZG93LGg9ZG9jdW1lbnQsdD1uYXZpZ2F0b3IsVj1mYWxzZSxYPVtdLG89W10sUD1bXSxLPVtdLEkscCxFLEIsTD1mYWxzZSxhPWZhbHNlLG0sRyxqPXRydWUsbD1mYWxzZSxPPWZ1bmN0aW9uKCl7dmFyIGFkPXR5cGVvZiBoLmdldEVsZW1lbnRCeUlkIT1EJiZ0eXBlb2YgaC5nZXRFbGVtZW50c0J5VGFnTmFtZSE9RCYmdHlwZW9mIGguY3JlYXRlRWxlbWVudCE9RCxhaz10LnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLGFiPXQucGxhdGZvcm0udG9Mb3dlckNhc2UoKSxhaD1hYj8vd2luLy50ZXN0KGFiKTovd2luLy50ZXN0KGFrKSxhZj1hYj8vbWFjLy50ZXN0KGFiKTovbWFjLy50ZXN0KGFrKSxhaT0vd2Via2l0Ly50ZXN0KGFrKT9wYXJzZUZsb2F0KGFrLnJlcGxhY2UoL14uKndlYmtpdFxcLyhcXGQrKFxcLlxcZCspPykuKiQvLFwiJDFcIikpOmZhbHNlLGFhPXQuYXBwTmFtZT09PVwiTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyXCIsYWo9WzAsMCwwXSxhZT1udWxsO2lmKHR5cGVvZiB0LnBsdWdpbnMhPUQmJnR5cGVvZiB0LnBsdWdpbnNbVF09PXIpe2FlPXQucGx1Z2luc1tUXS5kZXNjcmlwdGlvbjtpZihhZSYmKHR5cGVvZiB0Lm1pbWVUeXBlcyE9RCYmdC5taW1lVHlwZXNbcV0mJnQubWltZVR5cGVzW3FdLmVuYWJsZWRQbHVnaW4pKXtWPXRydWU7YWE9ZmFsc2U7YWU9YWUucmVwbGFjZSgvXi4qXFxzKyhcXFMrXFxzK1xcUyskKS8sXCIkMVwiKTthalswXT1uKGFlLnJlcGxhY2UoL14oLiopXFwuLiokLyxcIiQxXCIpKTthalsxXT1uKGFlLnJlcGxhY2UoL14uKlxcLiguKilcXHMuKiQvLFwiJDFcIikpO2FqWzJdPS9bYS16QS1aXS8udGVzdChhZSk/bihhZS5yZXBsYWNlKC9eLipbYS16QS1aXSsoLiopJC8sXCIkMVwiKSk6MH19ZWxzZXtpZih0eXBlb2YgUS5BY3RpdmVYT2JqZWN0IT1EKXt0cnl7dmFyIGFnPW5ldyBBY3RpdmVYT2JqZWN0KFopO2lmKGFnKXthZT1hZy5HZXRWYXJpYWJsZShcIiR2ZXJzaW9uXCIpO2lmKGFlKXthYT10cnVlO2FlPWFlLnNwbGl0KFwiIFwiKVsxXS5zcGxpdChcIixcIik7YWo9W24oYWVbMF0pLG4oYWVbMV0pLG4oYWVbMl0pXX19fWNhdGNoKGFjKXt9fX1yZXR1cm57dzM6YWQscHY6YWosd2s6YWksaWU6YWEsd2luOmFoLG1hYzphZn19KCksaT1mdW5jdGlvbigpe2lmKCFPLnczKXtyZXR1cm59aWYoKHR5cGVvZiBoLnJlYWR5U3RhdGUhPUQmJihoLnJlYWR5U3RhdGU9PT1cImNvbXBsZXRlXCJ8fGgucmVhZHlTdGF0ZT09PVwiaW50ZXJhY3RpdmVcIikpfHwodHlwZW9mIGgucmVhZHlTdGF0ZT09RCYmKGguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdfHxoLmJvZHkpKSl7ZigpfWlmKCFMKXtpZih0eXBlb2YgaC5hZGRFdmVudExpc3RlbmVyIT1EKXtoLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZixmYWxzZSl9aWYoTy5pZSl7aC5hdHRhY2hFdmVudCh4LGZ1bmN0aW9uIGFhKCl7aWYoaC5yZWFkeVN0YXRlPT1cImNvbXBsZXRlXCIpe2guZGV0YWNoRXZlbnQoeCxhYSk7ZigpfX0pO2lmKFE9PXRvcCl7KGZ1bmN0aW9uIGFjKCl7aWYoTCl7cmV0dXJufXRyeXtoLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbChcImxlZnRcIil9Y2F0Y2goYWQpe3NldFRpbWVvdXQoYWMsMCk7cmV0dXJufWYoKX0oKSl9fWlmKE8ud2speyhmdW5jdGlvbiBhYigpe2lmKEwpe3JldHVybn1pZighL2xvYWRlZHxjb21wbGV0ZS8udGVzdChoLnJlYWR5U3RhdGUpKXtzZXRUaW1lb3V0KGFiLDApO3JldHVybn1mKCl9KCkpfX19KCk7ZnVuY3Rpb24gZigpe2lmKEx8fCFkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0pe3JldHVybn10cnl7dmFyIGFjLGFkPUMoXCJzcGFuXCIpO2FkLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7YWM9aC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uYXBwZW5kQ2hpbGQoYWQpO2FjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYWMpO2FjPW51bGw7YWQ9bnVsbH1jYXRjaChhZSl7cmV0dXJufUw9dHJ1ZTt2YXIgYWE9WC5sZW5ndGg7Zm9yKHZhciBhYj0wO2FiPGFhO2FiKyspe1hbYWJdKCl9fWZ1bmN0aW9uIE0oYWEpe2lmKEwpe2FhKCl9ZWxzZXtYW1gubGVuZ3RoXT1hYX19ZnVuY3Rpb24gcyhhYil7aWYodHlwZW9mIFEuYWRkRXZlbnRMaXN0ZW5lciE9RCl7US5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGFiLGZhbHNlKX1lbHNle2lmKHR5cGVvZiBoLmFkZEV2ZW50TGlzdGVuZXIhPUQpe2guYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixhYixmYWxzZSl9ZWxzZXtpZih0eXBlb2YgUS5hdHRhY2hFdmVudCE9RCl7ZyhRLFwib25sb2FkXCIsYWIpfWVsc2V7aWYodHlwZW9mIFEub25sb2FkPT1cImZ1bmN0aW9uXCIpe3ZhciBhYT1RLm9ubG9hZDtRLm9ubG9hZD1mdW5jdGlvbigpe2FhKCk7YWIoKX19ZWxzZXtRLm9ubG9hZD1hYn19fX19ZnVuY3Rpb24gWSgpe3ZhciBhYT1oLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTt2YXIgYWU9QyhyKTthZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwidmlzaWJpbGl0eTogaGlkZGVuO1wiKTthZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIscSk7dmFyIGFkPWFhLmFwcGVuZENoaWxkKGFlKTtpZihhZCl7dmFyIGFjPTA7KGZ1bmN0aW9uIGFiKCl7aWYodHlwZW9mIGFkLkdldFZhcmlhYmxlIT1EKXt0cnl7dmFyIGFnPWFkLkdldFZhcmlhYmxlKFwiJHZlcnNpb25cIik7aWYoYWcpe2FnPWFnLnNwbGl0KFwiIFwiKVsxXS5zcGxpdChcIixcIik7Ty5wdj1bbihhZ1swXSksbihhZ1sxXSksbihhZ1syXSldfX1jYXRjaChhZil7Ty5wdj1bOCwwLDBdfX1lbHNle2lmKGFjPDEwKXthYysrO3NldFRpbWVvdXQoYWIsMTApO3JldHVybn19YWEucmVtb3ZlQ2hpbGQoYWUpO2FkPW51bGw7SCgpfSgpKX1lbHNle0goKX19ZnVuY3Rpb24gSCgpe3ZhciBhaj1vLmxlbmd0aDtpZihhaj4wKXtmb3IodmFyIGFpPTA7YWk8YWo7YWkrKyl7dmFyIGFiPW9bYWldLmlkO3ZhciBhZT1vW2FpXS5jYWxsYmFja0ZuO3ZhciBhZD17c3VjY2VzczpmYWxzZSxpZDphYn07aWYoTy5wdlswXT4wKXt2YXIgYWg9YyhhYik7aWYoYWgpe2lmKEYob1thaV0uc3dmVmVyc2lvbikmJiEoTy53ayYmTy53azwzMTIpKXt3KGFiLHRydWUpO2lmKGFlKXthZC5zdWNjZXNzPXRydWU7YWQucmVmPXooYWIpO2FkLmlkPWFiO2FlKGFkKX19ZWxzZXtpZihvW2FpXS5leHByZXNzSW5zdGFsbCYmQSgpKXt2YXIgYWw9e307YWwuZGF0YT1vW2FpXS5leHByZXNzSW5zdGFsbDthbC53aWR0aD1haC5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKXx8XCIwXCI7YWwuaGVpZ2h0PWFoLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKXx8XCIwXCI7aWYoYWguZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikpe2FsLnN0eWxlY2xhc3M9YWguZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil9aWYoYWguZ2V0QXR0cmlidXRlKFwiYWxpZ25cIikpe2FsLmFsaWduPWFoLmdldEF0dHJpYnV0ZShcImFsaWduXCIpfXZhciBhaz17fTt2YXIgYWE9YWguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJhbVwiKTt2YXIgYWY9YWEubGVuZ3RoO2Zvcih2YXIgYWc9MDthZzxhZjthZysrKXtpZihhYVthZ10uZ2V0QXR0cmlidXRlKFwibmFtZVwiKS50b0xvd2VyQ2FzZSgpIT1cIm1vdmllXCIpe2FrW2FhW2FnXS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpXT1hYVthZ10uZ2V0QXR0cmlidXRlKFwidmFsdWVcIil9fVIoYWwsYWssYWIsYWUpfWVsc2V7YihhaCk7aWYoYWUpe2FlKGFkKX19fX19ZWxzZXt3KGFiLHRydWUpO2lmKGFlKXt2YXIgYWM9eihhYik7aWYoYWMmJnR5cGVvZiBhYy5TZXRWYXJpYWJsZSE9RCl7YWQuc3VjY2Vzcz10cnVlO2FkLnJlZj1hYzthZC5pZD1hYy5pZH1hZShhZCl9fX19fVhbMF09ZnVuY3Rpb24oKXtpZihWKXtZKCl9ZWxzZXtIKCl9fTtmdW5jdGlvbiB6KGFjKXt2YXIgYWE9bnVsbCxhYj1jKGFjKTtpZihhYiYmYWIubm9kZU5hbWUudG9VcHBlckNhc2UoKT09PVwiT0JKRUNUXCIpe2lmKHR5cGVvZiBhYi5TZXRWYXJpYWJsZSE9PUQpe2FhPWFifWVsc2V7YWE9YWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUocilbMF18fGFifX1yZXR1cm4gYWF9ZnVuY3Rpb24gQSgpe3JldHVybiAhYSYmRihcIjYuMC42NVwiKSYmKE8ud2lufHxPLm1hYykmJiEoTy53ayYmTy53azwzMTIpfWZ1bmN0aW9uIFIoYWQsYWUsYWEsYWMpe3ZhciBhaD1jKGFhKTthYT1XKGFhKTthPXRydWU7RT1hY3x8bnVsbDtCPXtzdWNjZXNzOmZhbHNlLGlkOmFhfTtpZihhaCl7aWYoYWgubm9kZU5hbWUudG9VcHBlckNhc2UoKT09XCJPQkpFQ1RcIil7ST1KKGFoKTtwPW51bGx9ZWxzZXtJPWFoO3A9YWF9YWQuaWQ9UztpZih0eXBlb2YgYWQud2lkdGg9PUR8fCghLyUkLy50ZXN0KGFkLndpZHRoKSYmbihhZC53aWR0aCk8MzEwKSl7YWQud2lkdGg9XCIzMTBcIn1pZih0eXBlb2YgYWQuaGVpZ2h0PT1EfHwoIS8lJC8udGVzdChhZC5oZWlnaHQpJiZuKGFkLmhlaWdodCk8MTM3KSl7YWQuaGVpZ2h0PVwiMTM3XCJ9dmFyIGFnPU8uaWU/XCJBY3RpdmVYXCI6XCJQbHVnSW5cIixhZj1cIk1NcmVkaXJlY3RVUkw9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFEubG9jYXRpb24udG9TdHJpbmcoKS5yZXBsYWNlKC8mL2csXCIlMjZcIikpK1wiJk1NcGxheWVyVHlwZT1cIithZytcIiZNTWRvY3RpdGxlPVwiK2VuY29kZVVSSUNvbXBvbmVudChoLnRpdGxlLnNsaWNlKDAsNDcpK1wiIC0gRmxhc2ggUGxheWVyIEluc3RhbGxhdGlvblwiKTtpZih0eXBlb2YgYWUuZmxhc2h2YXJzIT1EKXthZS5mbGFzaHZhcnMrPVwiJlwiK2FmfWVsc2V7YWUuZmxhc2h2YXJzPWFmfWlmKE8uaWUmJmFoLnJlYWR5U3RhdGUhPTQpe3ZhciBhYj1DKFwiZGl2XCIpO1xuYWErPVwiU1dGT2JqZWN0TmV3XCI7YWIuc2V0QXR0cmlidXRlKFwiaWRcIixhYSk7YWgucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYWIsYWgpO2FoLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7eShhaCl9dShhZCxhZSxhYSl9fWZ1bmN0aW9uIGIoYWIpe2lmKE8uaWUmJmFiLnJlYWR5U3RhdGUhPTQpe2FiLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7dmFyIGFhPUMoXCJkaXZcIik7YWIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYWEsYWIpO2FhLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKEooYWIpLGFhKTt5KGFiKX1lbHNle2FiLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKEooYWIpLGFiKX19ZnVuY3Rpb24gSihhZil7dmFyIGFlPUMoXCJkaXZcIik7aWYoTy53aW4mJk8uaWUpe2FlLmlubmVySFRNTD1hZi5pbm5lckhUTUx9ZWxzZXt2YXIgYWI9YWYuZ2V0RWxlbWVudHNCeVRhZ05hbWUocilbMF07aWYoYWIpe3ZhciBhZz1hYi5jaGlsZE5vZGVzO2lmKGFnKXt2YXIgYWE9YWcubGVuZ3RoO2Zvcih2YXIgYWQ9MDthZDxhYTthZCsrKXtpZighKGFnW2FkXS5ub2RlVHlwZT09MSYmYWdbYWRdLm5vZGVOYW1lPT1cIlBBUkFNXCIpJiYhKGFnW2FkXS5ub2RlVHlwZT09OCkpe2FlLmFwcGVuZENoaWxkKGFnW2FkXS5jbG9uZU5vZGUodHJ1ZSkpfX19fX1yZXR1cm4gYWV9ZnVuY3Rpb24gayhhYSxhYil7dmFyIGFjPUMoXCJkaXZcIik7YWMuaW5uZXJIVE1MPVwiPG9iamVjdCBjbGFzc2lkPSdjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAnPjxwYXJhbSBuYW1lPSdtb3ZpZScgdmFsdWU9J1wiK2FhK1wiJz5cIithYitcIjwvb2JqZWN0PlwiO3JldHVybiBhYy5maXJzdENoaWxkfWZ1bmN0aW9uIHUoYWksYWcsYWIpe3ZhciBhYSxhZD1jKGFiKTthYj1XKGFiKTtpZihPLndrJiZPLndrPDMxMil7cmV0dXJuIGFhfWlmKGFkKXt2YXIgYWM9KE8uaWUpP0MoXCJkaXZcIik6QyhyKSxhZixhaCxhZTtpZih0eXBlb2YgYWkuaWQ9PUQpe2FpLmlkPWFifWZvcihhZSBpbiBhZyl7aWYoYWcuaGFzT3duUHJvcGVydHkoYWUpJiZhZS50b0xvd2VyQ2FzZSgpIT09XCJtb3ZpZVwiKXtlKGFjLGFlLGFnW2FlXSl9fWlmKE8uaWUpe2FjPWsoYWkuZGF0YSxhYy5pbm5lckhUTUwpfWZvcihhZiBpbiBhaSl7aWYoYWkuaGFzT3duUHJvcGVydHkoYWYpKXthaD1hZi50b0xvd2VyQ2FzZSgpO2lmKGFoPT09XCJzdHlsZWNsYXNzXCIpe2FjLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsYWlbYWZdKX1lbHNle2lmKGFoIT09XCJjbGFzc2lkXCImJmFoIT09XCJkYXRhXCIpe2FjLnNldEF0dHJpYnV0ZShhZixhaVthZl0pfX19fWlmKE8uaWUpe1BbUC5sZW5ndGhdPWFpLmlkfWVsc2V7YWMuc2V0QXR0cmlidXRlKFwidHlwZVwiLHEpO2FjLnNldEF0dHJpYnV0ZShcImRhdGFcIixhaS5kYXRhKX1hZC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChhYyxhZCk7YWE9YWN9cmV0dXJuIGFhfWZ1bmN0aW9uIGUoYWMsYWEsYWIpe3ZhciBhZD1DKFwicGFyYW1cIik7YWQuc2V0QXR0cmlidXRlKFwibmFtZVwiLGFhKTthZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLGFiKTthYy5hcHBlbmRDaGlsZChhZCl9ZnVuY3Rpb24geShhYyl7dmFyIGFiPWMoYWMpO2lmKGFiJiZhYi5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPT1cIk9CSkVDVFwiKXtpZihPLmllKXthYi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiOyhmdW5jdGlvbiBhYSgpe2lmKGFiLnJlYWR5U3RhdGU9PTQpe2Zvcih2YXIgYWQgaW4gYWIpe2lmKHR5cGVvZiBhYlthZF09PVwiZnVuY3Rpb25cIil7YWJbYWRdPW51bGx9fWFiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYWIpfWVsc2V7c2V0VGltZW91dChhYSwxMCl9fSgpKX1lbHNle2FiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYWIpfX19ZnVuY3Rpb24gVShhYSl7cmV0dXJuKGFhJiZhYS5ub2RlVHlwZSYmYWEubm9kZVR5cGU9PT0xKX1mdW5jdGlvbiBXKGFhKXtyZXR1cm4oVShhYSkpP2FhLmlkOmFhfWZ1bmN0aW9uIGMoYWMpe2lmKFUoYWMpKXtyZXR1cm4gYWN9dmFyIGFhPW51bGw7dHJ5e2FhPWguZ2V0RWxlbWVudEJ5SWQoYWMpfWNhdGNoKGFiKXt9cmV0dXJuIGFhfWZ1bmN0aW9uIEMoYWEpe3JldHVybiBoLmNyZWF0ZUVsZW1lbnQoYWEpfWZ1bmN0aW9uIG4oYWEpe3JldHVybiBwYXJzZUludChhYSwxMCl9ZnVuY3Rpb24gZyhhYyxhYSxhYil7YWMuYXR0YWNoRXZlbnQoYWEsYWIpO0tbSy5sZW5ndGhdPVthYyxhYSxhYl19ZnVuY3Rpb24gRihhYyl7YWMrPVwiXCI7dmFyIGFiPU8ucHYsYWE9YWMuc3BsaXQoXCIuXCIpO2FhWzBdPW4oYWFbMF0pO2FhWzFdPW4oYWFbMV0pfHwwO2FhWzJdPW4oYWFbMl0pfHwwO3JldHVybihhYlswXT5hYVswXXx8KGFiWzBdPT1hYVswXSYmYWJbMV0+YWFbMV0pfHwoYWJbMF09PWFhWzBdJiZhYlsxXT09YWFbMV0mJmFiWzJdPj1hYVsyXSkpP3RydWU6ZmFsc2V9ZnVuY3Rpb24gdihhZixhYixhZyxhZSl7dmFyIGFkPWguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO2lmKCFhZCl7cmV0dXJufXZhciBhYT0odHlwZW9mIGFnPT1cInN0cmluZ1wiKT9hZzpcInNjcmVlblwiO2lmKGFlKXttPW51bGw7Rz1udWxsfWlmKCFtfHxHIT1hYSl7dmFyIGFjPUMoXCJzdHlsZVwiKTthYy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJ0ZXh0L2Nzc1wiKTthYy5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLGFhKTttPWFkLmFwcGVuZENoaWxkKGFjKTtpZihPLmllJiZ0eXBlb2YgaC5zdHlsZVNoZWV0cyE9RCYmaC5zdHlsZVNoZWV0cy5sZW5ndGg+MCl7bT1oLnN0eWxlU2hlZXRzW2guc3R5bGVTaGVldHMubGVuZ3RoLTFdfUc9YWF9aWYobSl7aWYodHlwZW9mIG0uYWRkUnVsZSE9RCl7bS5hZGRSdWxlKGFmLGFiKX1lbHNle2lmKHR5cGVvZiBoLmNyZWF0ZVRleHROb2RlIT1EKXttLmFwcGVuZENoaWxkKGguY3JlYXRlVGV4dE5vZGUoYWYrXCIge1wiK2FiK1wifVwiKSl9fX19ZnVuY3Rpb24gdyhhZCxhYSl7aWYoIWope3JldHVybn12YXIgYWI9YWE/XCJ2aXNpYmxlXCI6XCJoaWRkZW5cIixhYz1jKGFkKTtpZihMJiZhYyl7YWMuc3R5bGUudmlzaWJpbGl0eT1hYn1lbHNle2lmKHR5cGVvZiBhZD09PVwic3RyaW5nXCIpe3YoXCIjXCIrYWQsXCJ2aXNpYmlsaXR5OlwiK2FiKX19fWZ1bmN0aW9uIE4oYWIpe3ZhciBhYz0vW1xcXFxcXFwiPD5cXC47XS87dmFyIGFhPWFjLmV4ZWMoYWIpIT1udWxsO3JldHVybiBhYSYmdHlwZW9mIGVuY29kZVVSSUNvbXBvbmVudCE9RD9lbmNvZGVVUklDb21wb25lbnQoYWIpOmFifXZhciBkPWZ1bmN0aW9uKCl7aWYoTy5pZSl7d2luZG93LmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixmdW5jdGlvbigpe3ZhciBhZj1LLmxlbmd0aDtmb3IodmFyIGFlPTA7YWU8YWY7YWUrKyl7S1thZV1bMF0uZGV0YWNoRXZlbnQoS1thZV1bMV0sS1thZV1bMl0pfXZhciBhYz1QLmxlbmd0aDtmb3IodmFyIGFkPTA7YWQ8YWM7YWQrKyl7eShQW2FkXSl9Zm9yKHZhciBhYiBpbiBPKXtPW2FiXT1udWxsfU89bnVsbDtmb3IodmFyIGFhIGluIHN3Zm9iamVjdCl7c3dmb2JqZWN0W2FhXT1udWxsfXN3Zm9iamVjdD1udWxsfSl9fSgpO3JldHVybntyZWdpc3Rlck9iamVjdDpmdW5jdGlvbihhZSxhYSxhZCxhYyl7aWYoTy53MyYmYWUmJmFhKXt2YXIgYWI9e307YWIuaWQ9YWU7YWIuc3dmVmVyc2lvbj1hYTthYi5leHByZXNzSW5zdGFsbD1hZDthYi5jYWxsYmFja0ZuPWFjO29bby5sZW5ndGhdPWFiO3coYWUsZmFsc2UpfWVsc2V7aWYoYWMpe2FjKHtzdWNjZXNzOmZhbHNlLGlkOmFlfSl9fX0sZ2V0T2JqZWN0QnlJZDpmdW5jdGlvbihhYSl7aWYoTy53Myl7cmV0dXJuIHooYWEpfX0sZW1iZWRTV0Y6ZnVuY3Rpb24oYWYsYWwsYWksYWssYWIsYWUsYWQsYWgsYWosYWcpe3ZhciBhYz1XKGFsKSxhYT17c3VjY2VzczpmYWxzZSxpZDphY307aWYoTy53MyYmIShPLndrJiZPLndrPDMxMikmJmFmJiZhbCYmYWkmJmFrJiZhYil7dyhhYyxmYWxzZSk7TShmdW5jdGlvbigpe2FpKz1cIlwiO2FrKz1cIlwiO3ZhciBhbj17fTtpZihhaiYmdHlwZW9mIGFqPT09cil7Zm9yKHZhciBhcSBpbiBhail7YW5bYXFdPWFqW2FxXX19YW4uZGF0YT1hZjthbi53aWR0aD1haTthbi5oZWlnaHQ9YWs7dmFyIGFyPXt9O2lmKGFoJiZ0eXBlb2YgYWg9PT1yKXtmb3IodmFyIGFvIGluIGFoKXthclthb109YWhbYW9dfX1pZihhZCYmdHlwZW9mIGFkPT09cil7Zm9yKHZhciBhbSBpbiBhZCl7aWYoYWQuaGFzT3duUHJvcGVydHkoYW0pKXt2YXIgYXA9KGwpP2VuY29kZVVSSUNvbXBvbmVudChhbSk6YW0sYXQ9KGwpP2VuY29kZVVSSUNvbXBvbmVudChhZFthbV0pOmFkW2FtXTtpZih0eXBlb2YgYXIuZmxhc2h2YXJzIT1EKXthci5mbGFzaHZhcnMrPVwiJlwiK2FwK1wiPVwiK2F0fWVsc2V7YXIuZmxhc2h2YXJzPWFwK1wiPVwiK2F0fX19fWlmKEYoYWIpKXt2YXIgYXU9dShhbixhcixhbCk7aWYoYW4uaWQ9PWFjKXt3KGFjLHRydWUpfWFhLnN1Y2Nlc3M9dHJ1ZTthYS5yZWY9YXU7YWEuaWQ9YXUuaWR9ZWxzZXtpZihhZSYmQSgpKXthbi5kYXRhPWFlO1IoYW4sYXIsYWwsYWcpO3JldHVybn1lbHNle3coYWMsdHJ1ZSl9fWlmKGFnKXthZyhhYSl9fSl9ZWxzZXtpZihhZyl7YWcoYWEpfX19LHN3aXRjaE9mZkF1dG9IaWRlU2hvdzpmdW5jdGlvbigpe2o9ZmFsc2V9LGVuYWJsZVVyaUVuY29kaW5nOmZ1bmN0aW9uKGFhKXtsPSh0eXBlb2YgYWE9PT1EKT90cnVlOmFhfSx1YTpPLGdldEZsYXNoUGxheWVyVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybnttYWpvcjpPLnB2WzBdLG1pbm9yOk8ucHZbMV0scmVsZWFzZTpPLnB2WzJdfX0saGFzRmxhc2hQbGF5ZXJWZXJzaW9uOkYsY3JlYXRlU1dGOmZ1bmN0aW9uKGFjLGFiLGFhKXtpZihPLnczKXtyZXR1cm4gdShhYyxhYixhYSl9ZWxzZXtyZXR1cm4gdW5kZWZpbmVkfX0sc2hvd0V4cHJlc3NJbnN0YWxsOmZ1bmN0aW9uKGFjLGFkLGFhLGFiKXtpZihPLnczJiZBKCkpe1IoYWMsYWQsYWEsYWIpfX0scmVtb3ZlU1dGOmZ1bmN0aW9uKGFhKXtpZihPLnczKXt5KGFhKX19LGNyZWF0ZUNTUzpmdW5jdGlvbihhZCxhYyxhYixhYSl7aWYoTy53Myl7dihhZCxhYyxhYixhYSl9fSxhZGREb21Mb2FkRXZlbnQ6TSxhZGRMb2FkRXZlbnQ6cyxnZXRRdWVyeVBhcmFtVmFsdWU6ZnVuY3Rpb24oYWQpe3ZhciBhYz1oLmxvY2F0aW9uLnNlYXJjaHx8aC5sb2NhdGlvbi5oYXNoO1xuaWYoYWMpe2lmKC9cXD8vLnRlc3QoYWMpKXthYz1hYy5zcGxpdChcIj9cIilbMV19aWYoYWQ9PW51bGwpe3JldHVybiBOKGFjKX12YXIgYWI9YWMuc3BsaXQoXCImXCIpO2Zvcih2YXIgYWE9MDthYTxhYi5sZW5ndGg7YWErKyl7aWYoYWJbYWFdLnN1YnN0cmluZygwLGFiW2FhXS5pbmRleE9mKFwiPVwiKSk9PWFkKXtyZXR1cm4gTihhYlthYV0uc3Vic3RyaW5nKChhYlthYV0uaW5kZXhPZihcIj1cIikrMSkpKX19fXJldHVyblwiXCJ9LGV4cHJlc3NJbnN0YWxsQ2FsbGJhY2s6ZnVuY3Rpb24oKXtpZihhKXt2YXIgYWE9YyhTKTtpZihhYSYmSSl7YWEucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoSSxhYSk7aWYocCl7dyhwLHRydWUpO2lmKE8uaWUpe0kuc3R5bGUuZGlzcGxheT1cImJsb2NrXCJ9fWlmKEUpe0UoQil9fWE9ZmFsc2V9fSx2ZXJzaW9uOlwiMi4zXCJ9fSgpO1xuXG5mdW5jdGlvbiBKc0NsaWVudChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmV2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIoKTtcbiAgICB0aGlzLm1ldGhvZHNTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMucHJveHlFdmVudHMgPSBbJ2xvYWRlZCcsICdlcnJvcicsICdjb21wbGV0ZScsICdzdGFydGVkJywgJ3BhdXNlZCcsICdyZXNpemUnXTtcbn1cblxuSnNDbGllbnQucHJvdG90eXBlLmVtYmVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBbXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuaWZyYW1lKCkuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlGd2luZG93ID0gdGhpcy5pZnJhbWUoKS5jb250ZW50V2luZG93O1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9BZExheWVyKCkuYXBwZW5kQ2hpbGQodGhpcy52aWRlb1RhZygpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlGd2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0FkTGF5ZXIoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pRndpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuc2NyaXB0KCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuaUZ3aW5kb3cuZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW4gPSAwO1xuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9LmJpbmQodGhpcykpLFxuXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuc2NyaXB0KCkuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LCBmYWxzZSlcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgIF1cbn07XG5cbkpzQ2xpZW50LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKFZwYWlkU291cmNlLCBjb25maWdVcmwpIHtcbiAgICBpZiAoIVZwYWlkU291cmNlIHx8ICFjb25maWdVcmwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZXQgY29ycmVjdCBvcHRpb25zJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnZpZGVvVGFnKCkuY2FuUGxheVR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIVE1MNSB2aWRlbyBub3Qgc3VwcG9ydCcpO1xuICAgIH1cblxuICAgIHRoaXMuVnBhaWRTb3VyY2UgPSBWcGFpZFNvdXJjZTtcbiAgICB0aGlzLmNvbmZpZ1VybCA9IGNvbmZpZ1VybDtcblxuICAgIFByb21pc2UuYWxsKHRoaXMuZW1iZWQoKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5WUEFJRCA9IHRoaXMuaUZ3aW5kb3cuZ2V0VlBBSURBZCgpO1xuICAgICAgICAgICAgdGhpcy5pbml0VlBBSUQoKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAuY2F1Z2h0KGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQodGhpcy5pZnJhbWUoKSk7XG59O1xuXG5Kc0NsaWVudC5wcm90b3R5cGUuaW5pdFZQQUlEID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBldmVudE1hbmFnZXIgPSB0aGlzLmV2ZW50TWFuYWdlcjtcblxuICAgIHRoaXMuVlBBSUQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5WUEFJRC5zdGFydEFkKCk7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdsb2FkZWQnKTtcbiAgICB9LmJpbmQodGhpcyksICdBZExvYWRlZCcpO1xuXG4gICAgdGhpcy5WUEFJRC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm1ldGhvZHNTdGF0ZSA9IHRydWU7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdzdGFydGVkJyk7XG4gICAgfS5iaW5kKHRoaXMpLCAnQWRTdGFydGVkJyk7XG5cbiAgICB0aGlzLlZQQUlELnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdwYXVzZWQnKTtcbiAgICB9LCAnQWRQYXVzZWQnKTtcblxuICAgIHRoaXMuVlBBSUQuc3Vic2NyaWJlKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ2Vycm9yJywgZXJyKTtcbiAgICB9LCAnQWRFcnJvcicpO1xuXG4gICAgdGhpcy5WUEFJRC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcigncGxheWluZycpO1xuICAgIH0sICdBZFBsYXlpbmcnKTtcblxuICAgIHRoaXMuVlBBSUQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ3N0b3BwZWQnKTtcbiAgICB9LCAnQWRTdG9wcGVkJyk7XG5cbiAgICB0aGlzLlZQQUlELnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdyZXNpemUnKTtcbiAgICB9LCAnQWRTaXplQ2hhbmdlJyk7XG5cbiAgICB0aGlzLlZQQUlELnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdjb21wbGV0ZScpO1xuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICB9LmJpbmQodGhpcyksICdBZFZpZGVvQ29tcGxldGUnKTtcblxuICAgIHRoaXMuVlBBSUQuaGFuZHNoYWtlVmVyc2lvbigyKTtcblxuICAgIHRoaXMuVlBBSUQuaW5pdEFkKFxuICAgICAgICB0aGlzLm9wdGlvbnMud2lkdGgsXG4gICAgICAgIHRoaXMub3B0aW9ucy5oZWlnaHQsXG4gICAgICAgICdub3JtYWwnLFxuICAgICAgICAwLFxuICAgICAgICB0aGlzLmNvbmZpZ1VybCxcbiAgICAgICAge1xuICAgICAgICAgICAgdmlkZW9TbG90Q2FuQXV0b1BsYXk6IHRydWUsXG4gICAgICAgICAgICB2aWRlb1Nsb3Q6IHRoaXMudmlkZW9UYWcoKSxcbiAgICAgICAgICAgIHNsb3Q6IHRoaXMudmlkZW9BZExheWVyKClcbiAgICAgICAgfVxuICAgICk7XG59O1xuXG5Kc0NsaWVudC5wcm90b3R5cGUudmlkZW9UYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3ZpZGVvVGFnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92aWRlb1RhZztcbiAgICB9XG5cbiAgICB0aGlzLl92aWRlb1RhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgdGhpcy5fdmlkZW9UYWcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgXCIxMDAlXCIpO1xuICAgIHRoaXMuX3ZpZGVvVGFnLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBcIjEwMCVcIik7XG4gICAgdGhpcy5fdmlkZW9UYWcuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXG4gICAgcmV0dXJuIHRoaXMuX3ZpZGVvVGFnO1xufTtcblxuSnNDbGllbnQucHJvdG90eXBlLnZpZGVvQWRMYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdmlkZW9BZExheWVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92aWRlb0FkTGF5ZXI7XG4gICAgfVxuXG4gICAgdGhpcy5fdmlkZW9BZExheWVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fdmlkZW9BZExheWVyLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHRoaXMub3B0aW9ucy53aWR0aCk7XG4gICAgdGhpcy5fdmlkZW9BZExheWVyLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCB0aGlzLm9wdGlvbnMuaGVpZ2h0KTtcblxuICAgIHJldHVybiB0aGlzLl92aWRlb0FkTGF5ZXI7XG59O1xuXG5Kc0NsaWVudC5wcm90b3R5cGUuc2NyaXB0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9zY3JpcHRUYWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmlwdFRhZztcbiAgICB9XG5cbiAgICB0aGlzLl9zY3JpcHRUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICB0aGlzLl9zY3JpcHRUYWcuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHQvamF2YXNjcmlwdFwiKTtcbiAgICB0aGlzLl9zY3JpcHRUYWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIHRoaXMuVnBhaWRTb3VyY2UpO1xuICAgIHRoaXMuX3NjcmlwdFRhZy5zZXRBdHRyaWJ1dGUoXCJhc3luY1wiLCBcIlwiKTtcblxuICAgIHJldHVybiB0aGlzLl9zY3JpcHRUYWc7XG59O1xuXG5Kc0NsaWVudC5wcm90b3R5cGUuaWZyYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pRnJhbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lGcmFtZTtcbiAgICB9XG5cbiAgICB0aGlzLl9pRnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpRnJhbWUnKTtcbiAgICB0aGlzLl9pRnJhbWUuc2V0QXR0cmlidXRlKFwiYWxsb3dmdWxsc2NyZWVuXCIsIFwidHJ1ZVwiKTtcbiAgICB0aGlzLl9pRnJhbWUuc3JjID0gXCJhYm91dDpibGFua1wiO1xuICAgIHRoaXMuX2lGcmFtZS53aWR0aCA9IHRoaXMub3B0aW9ucy53aWR0aDtcbiAgICB0aGlzLl9pRnJhbWUuaGVpZ2h0ID0gdGhpcy5vcHRpb25zLmhlaWdodDtcbiAgICB0aGlzLl9pRnJhbWUuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuXG4gICAgcmV0dXJuIHRoaXMuX2lGcmFtZTtcbn07XG5cbkpzQ2xpZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuVlBBSUQuc3RvcEFkKCk7XG4gICAgZGVsZXRlIHRoaXMuVlBBSUQ7XG5cbiAgICB0aGlzLl9pRnJhbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9pRnJhbWUpO1xuXG4gICAgZGVsZXRlIHRoaXMuX3ZpZGVvQWRMYXllcjtcbiAgICBkZWxldGUgdGhpcy5fc2NyaXB0VGFnO1xuICAgIGRlbGV0ZSB0aGlzLl92aWRlb1RhZztcbiAgICBkZWxldGUgdGhpcy5faUZyYW1lO1xufTtcblxufSh3aW5kb3cpKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

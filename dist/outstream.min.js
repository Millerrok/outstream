!function(root,undefined){function EventManager(){this.events={}}function Wrapper(t,e,n,r,i){if(!t)throw new Error("Set aid");this.host=encodeURIComponent(window.location.href!=window.parent.location.href?document.referrer:window.location.href),this.cd=(new Date).getTime(),this.height=n||300,this.width=e||400,this.sid=r||0,this.aid=t,this.configUrl=i}function FlashClient(t){if(!getFlashVersion())throw new Error("Flash Player not installed!");this.id=Math.round((new Date).getTime()/1e4+1e7*Math.random()),this.unitSrc="//player.videe.tv/v2.1/resources/libs/videejs-player.swf",this.flashVersion="10.0.0",this.params={allowScriptAccess:"always",allowFullScreen:"true",wmode:"transparent"},this.methodsState=!1,this.proxyEvents=["loaded","error","complete","started","resumed","paused","mute","unmute"],this.options=t}function JsClient(t){this.options=t,this.eventManager=new EventManager,this.methodsState=!1,this.proxyEvents=["loaded","error","complete","started","paused","resize"]}function Outstream(t){return t?(this.options(t||{}),this.events={},void this.init()):void console.error("Create without options")}var root=root||window;root.console||(root.console={log:function(t){},error:function(t){}}),root.JSON||(root.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var t=Object.prototype.toString,e=Array.isArray||function(e){return"[object Array]"===t.call(e)},n={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},r=function(t){return n[t]||"\\u"+(t.charCodeAt(0)+65536).toString(16).substr(1)},i=/[\\"\u0000-\u001F\u2028\u2029]/g;return function o(n){if(null==n)return"null";if("number"==typeof n)return isFinite(n)?n.toString():"null";if("boolean"==typeof n)return n.toString();if("object"==typeof n){if("function"==typeof n.toJSON)return o(n.toJSON());if(e(n)){for(var s="[",a=0;a<n.length;a++)s+=(a?", ":"")+o(n[a]);return s+"]"}if("[object Object]"===t.call(n)){var u=[];for(var l in n)n.hasOwnProperty(l)&&u.push(o(l)+": "+o(n[l]));return"{"+u.join(", ")+"}"}}return'"'+n.toString().replace(i,r)+'"'}}()}),Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,s,a=[];for(o in i)t.call(i,o)&&a.push(o);if(e)for(s=0;s<r;s++)t.call(i,n[s])&&a.push(n[s]);return a}}()),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(r.prototype=this.prototype),i.prototype=new r,i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var o=+e||0;if(Math.abs(o)===1/0&&(o=0),o>=i)return-1;for(n=Math.max(o>=0?o:i-Math.abs(o),0);n<i;){if(n in r&&r[n]===t)return n;n++}return-1}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){var t,e,n;return function r(t,e,n){function i(s,a){if(!e[s]){if(!t[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=e[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,r,t,e,n)}return e[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,n){"use strict";function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var a;try{throw new Error}catch(u){a=u}var l=t("./schedule"),c=t("./queue"),f=t("./util");r.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(r.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},r.prototype.invoke=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=s),r.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},e.exports=r,e.exports.firstLineError=a},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var l=n(o),c=new t(e);c._propagateFrom(this,1);var f=this._target();if(c._setBoundTo(l),l instanceof t){var h={promiseRejectionQueued:!1,promise:c,target:f,bindingPromise:l};f._then(e,s,undefined,c,h),l._then(a,u,undefined,c,h),c._setOnCancel(l)}else c._resolveCallback(f);return c},t.prototype._setBoundTo=function(t){t!==undefined?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=this._bitField&-2097153},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+a.classString(t)+" has no method '"+a.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util"),u=a.canEvaluate;a.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,undefined,undefined,e,undefined)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(u){var r=s(t);e=null!==r?r:i}else e=i;return this._then(e,undefined,undefined,t,undefined)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),s=o.tryCatch,a=o.errorObj,u=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===undefined||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,undefined))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=undefined},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(t!==undefined)if("function"==typeof t){if(!e){var r=s(t).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,a){return function(u){var l=a._boundValue();t:for(var c=0;c<t.length;++c){var f=t[c];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return o(n).call(l,u)}else if("function"==typeof f){var h=o(f).call(l,u);if(h===s)return h;if(h)return o(n).call(l,u)}else if(r.isObject(u)){for(var p=i(f),d=0;d<p.length;++d){var _=p[d];if(f[_]!=u[_])continue t}return o(n).call(l,u)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,s=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){if(i)return new e}function r(){var t=o.length-1;return t>=0?o[t]:undefined}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){this._trace!==undefined&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(this._trace!==undefined){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,u=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=u,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e){return{promise:e}}function i(){return!1}function o(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+M.toString(t));r._attachCancellationCallback(t)})}catch(i){return i}}function s(t){if(!this._isCancellable())return this;var e=this._onCancel();e!==undefined?M.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function a(){return this._onCancelField}function u(t){this._onCancelField=t}function l(){this._cancellationParent=undefined,this._onCancelField=undefined}function c(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;n===undefined&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function f(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(){var t=this._boundTo;return t!==undefined&&t instanceof e?t.isFulfilled()?t.value():undefined:t}function p(){this._trace=new O(this._peekContext())}function d(t,e){if(N(t)){var n=this._trace;if(n!==undefined&&e&&(n=n._parent),n!==undefined)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=E(t);M.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),M.notEnumerableProp(t,"__stackCleaned__",!0)}}}function _(t,e,n,r,i){if(t===undefined&&null!==e&&J){if(i!==undefined&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),u=w(a),l=u.length-1;l>=0;--l){var c=u[l];if(!B.test(c)){var f=c.match(H);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(u.length>0)for(var h=u[0],l=0;l<a.length;++l)if(a[l]===h){l>0&&(s="\n"+a[l-1]);break}}var p="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(p,!0,e)}}function y(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),v(n)}function v(t,n,r){if(ot.warnings){var i,o=new L(t);if(n)r._attachExtraTrace(o);else if(ot.longStackTraces&&(i=e._peekContext()))i.attachExtraTrace(o);else{var s=E(o);o.stack=s.message+"\n"+s.stack.join("\n")}tt("warning",o)||j(o,"",!0)}}function m(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function g(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function b(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var u=r[a];if(e[i]!==u)break;e.pop(),i--}e=r}}function w(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||$.test(r),o=i&&nt(r);i&&!o&&(q&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function C(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||$.test(r))break}return n>0&&(e=e.slice(n)),e}function E(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?C(t):["    (No stack trace)"],{message:n,stack:w(e)}}function j(t,e,n){if("undefined"!=typeof console){var r;if(M.isObject(t)){var i=t.stack;r=e+W(i,t)}else r=e+String(t);"function"==typeof V?V(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function A(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){D.throwLater(o)}"unhandledRejection"===t?tt(t,n,r)||i||j(n,"Unhandled rejection "):tt(t,r)}function F(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():M.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+k(e)+">, no stack trace)"}function k(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function P(){return"function"==typeof it}function T(t){var e=t.match(rt);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function S(t,e){if(P()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),s=-1,a=-1,u=0;u<i.length;++u){var l=T(i[u]);if(l){n=l.fileName,s=l.line;break}}for(var u=0;u<o.length;++u){var l=T(o[u]);if(l){r=l.fileName,a=l.line;break}}s<0||a<0||!n||!r||n!==r||s>=a||(nt=function(t){if(U.test(t))return!0;var e=T(t);return!!(e&&e.fileName===n&&s<=e.line&&e.line<=a)})}}function O(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(t===undefined?0:t._length);it(this,O),e>32&&this.uncycle()}var x,R,V,I=e._getDomain,D=e._async,L=t("./errors").Warning,M=t("./util"),N=M.canAttachTrace,U=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,B=/\((?:timers\.js):\d+:\d+\)/,H=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,$=null,W=null,q=!1,Q=!(0==M.env("BLUEBIRD_DEBUG")),X=!(0==M.env("BLUEBIRD_WARNINGS")||!Q&&!M.env("BLUEBIRD_WARNINGS")),z=!(0==M.env("BLUEBIRD_LONG_STACK_TRACES")||!Q&&!M.env("BLUEBIRD_LONG_STACK_TRACES")),J=0!=M.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(X||!!M.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=t._bitField&-1048577|524288},e.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),D.invokeLater(this._notifyUnhandledRejection,this,undefined))},e.prototype._notifyUnhandledRejectionIsHandled=function(){A("rejectionHandled",x,undefined,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),A("unhandledRejection",R,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,n){return v(t,e,n||this)},e.onPossiblyUnhandledRejection=function(t){var e=I();R="function"==typeof t?null===e?t:M.domainBind(e,t):undefined},e.onUnhandledRejectionHandled=function(t){var e=I();x="function"==typeof t?null===e?t:M.domainBind(e,t):undefined};var G=function(){};e.longStackTraces=function(){if(D.haveItemsQueued()&&!ot.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ot.longStackTraces&&P()){var t=e.prototype._captureStackTrace,r=e.prototype._attachExtraTrace;ot.longStackTraces=!0,G=function(){if(D.haveItemsQueued()&&!ot.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=r,n.deactivateLongStackTraces(),D.enableTrampoline(),ot.longStackTraces=!1},e.prototype._captureStackTrace=p,e.prototype._attachExtraTrace=d,n.activateLongStackTraces(),D.disableTrampolineIfNecessary()}},e.hasLongStackTraces=function(){return ot.longStackTraces&&P()};var K=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return M.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!M.global.dispatchEvent(n)}}if("function"==typeof Event){var t=new Event("CustomEvent");return M.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!M.global.dispatchEvent(n)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),M.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!M.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),Y=function(){return M.isNode?function(){return process.emit.apply(process,arguments)}:M.global?function(t){var e="on"+t.toLowerCase(),n=M.global[e];return!!n&&(n.apply(M.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),Z={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:r},tt=function(t){var e=!1;try{e=Y.apply(null,arguments)}catch(n){D.throwLater(n),e=!0}var r=!1;try{r=K(t,Z[t].apply(null,arguments))}catch(n){D.throwLater(n),r=!0}return r||e};e.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&G()),"warnings"in t){var n=t.warnings;ot.warnings=!!n,J=ot.warnings,M.isObject(n)&&"wForgottenReturn"in n&&(J=!!n.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!ot.cancellation){if(D.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=l,e.prototype._propagateFrom=c,e.prototype._onCancel=a,e.prototype._setOnCancel=u,e.prototype._attachCancellationCallback=s,e.prototype._execute=o,et=c,ot.cancellation=!0}"monitoring"in t&&(t.monitoring&&!ot.monitoring?(ot.monitoring=!0,e.prototype._fireEvent=tt):!t.monitoring&&ot.monitoring&&(ot.monitoring=!1,e.prototype._fireEvent=i))},e.prototype._fireEvent=i,e.prototype._execute=function(t,e,n){try{t(e,n)}catch(r){return r}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var et=f,nt=function(){return!1},rt=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;M.inherits(O,Error),n.CapturedTrace=O,O.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;i!==undefined;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;n[o]===undefined&&(n[o]=r)}for(var r=0;r<t;++r){var s=e[r].stack,a=n[s];if(a!==undefined&&a!==r){a>0&&(e[a-1]._parent=undefined,e[a-1]._length=1),e[r]._parent=undefined,e[r]._length=1;var u=r>0?e[r-1]:this;a<t-1?(u._parent=e[a+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=undefined,u._length=1);for(var l=u._length+1,c=r-2;c>=0;--c)e[c]._length=l,l++;return}}}},O.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=E(t),n=e.message,r=[e.stack],i=this;i!==undefined;)r.push(w(i.stack.split("\n"))),i=i._parent;b(r),g(r),M.notEnumerableProp(t,"stack",m(n,r)),M.notEnumerableProp(t,"__stackCleaned__",!0)}};var it=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:e.name!==undefined&&e.message!==undefined?e.toString():F(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,$=t,W=e;var n=Error.captureStackTrace;return nt=function(t){return U.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return $=/@/,W=e,q=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(W=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||e.name===undefined||e.message===undefined?F(e):e.toString()},null):($=t,W=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(V=function(t){console.warn(t)},M.isNode&&process.stderr.isTTY?V=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:M.isNode||"string"!=typeof(new Error).stack||(V=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var ot={warnings:X,longStackTraces:!1,cancellation:!1,monitoring:!1};return z&&e.longStackTraces(),{longStackTraces:function(){return ot.longStackTraces},warnings:function(){return ot.warnings},cancellation:function(){return ot.cancellation},monitoring:function(){return ot.monitoring},propagateFromFunction:function(){return et},boundValueFunction:function(){return h},checkForgottenReturns:_,setBounds:S,warn:v,deprecated:y,CapturedTrace:O,fireDomEvent:K,fireGlobalEvent:Y}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,undefined,undefined,{value:n},undefined)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,undefined,undefined,{reason:t},undefined)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(undefined,n,undefined,{reason:t},undefined);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(undefined,e,undefined,{value:n},undefined);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return i(this,t,e,0)._then(n,undefined,undefined,this,undefined)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,r){return i(t,r,e,0)._then(n,undefined,undefined,t,undefined)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(f(this,"message","string"==typeof r?r:e),f(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return c(n,Error),n}function i(t){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5"),u=a.freeze,l=t("./util"),c=l.inherits,f=l.notEnumerableProp,h=r("Warning","warning"),p=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),_=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(y){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<v.length;++m)"function"==typeof Array.prototype[v[m]]&&(_.prototype[v[m]]=Array.prototype[v[m]]);a.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var g=0;_.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return g--,e},c(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=u({CancellationError:p,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:_}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return this===undefined}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},u=function(t,e){return{value:t[e]}},l=function(t,e,n){return t[e]=n.value,t},c=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},h=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:h,keys:a,names:a,defineProperty:l,getDescriptor:u,freeze:c,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function s(){return u.call(this,this.promise._target()._settledValue())}function a(t){if(!o(this,t))return f.e=t,f}function u(t){var r=this.promise,u=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?u.call(r._boundValue()):u.call(r._boundValue(),t);if(l!==undefined){r._setReturnedNonUndefined();var h=n(l,r);if(h instanceof e){if(null!=this.cancelPromise){if(h._isCancelled()){var p=new c("late cancellation observer");return r._attachExtraTrace(p),f.e=p,f}h.isPending()&&h._attachCancellationCallback(new i(this))}return h._then(s,a,undefined,this,undefined)}}}return r.isRejected()?(o(this),f.e=t,f):(o(this),t)}var l=t("./util"),c=e.CancellationError,f=l.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,undefined,new r(this,e,t),undefined)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,u,u)},e.prototype.tap=function(t){return this._passThrough(t,1,u);
},r}},{"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=p(n[o])(t);if(r._popContext(),s===h){r._pushContext();var a=e.reject(h.e);return r._popContext(),a}var u=i(s,r);if(u instanceof e)return u}return null}function u(t,n,i,o){if(s.cancellation()){var a=new e(r),u=this._finallyPromise=new e(r);this._promise=a.lastly(function(){return u}),a._captureStackTrace(),a._setOnCancel(this)}else{var l=this._promise=new e(r);l._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=undefined,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}var l=t("./errors"),c=l.TypeError,f=t("./util"),h=f.errorObj,p=f.tryCatch,d=[];f.inherits(u,o),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),t=p(this._generator["return"]).call(this._generator,undefined),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=p(this._generator["throw"]).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},u.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=p(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=p(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=undefined,this._promiseFulfilled(undefined)},u.prototype._continue=function(t){var n=this._promise;if(t===h)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&(o=a(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var s=o._bitField;0===(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&s)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!==(16777216&s)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=u,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(undefined,undefined,n,i),s=o.promise();return o._generator=e,o._promiseFulfilled(undefined),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new c("expecting a function but got "+f.classString(t));d.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new u(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){var a=t("./util");a.canEvaluate,a.tryCatch,a.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return t!==undefined?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=l();this._callback=null===i?e:c.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],p.invoke(this._asyncInit,this,undefined)}function u(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+c.classString(n));var s=0;if(i!==undefined){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+c.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(i.concurrency)));s=i.concurrency}return s="number"==typeof s&&isFinite(s)&&s>=1?s:0,new a(t,n,s,o).promise()}var l=e._getDomain,c=t("./util"),f=c.tryCatch,h=c.errorObj,p=e._async;c.inherits(a,n),a.prototype._asyncInit=function(){this._init$(undefined,-2)},a.prototype._init=function(){},a.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),a=this._preservedValues,u=this._limit;if(n<0){if(n=n*-1-1,r[n]=t,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var l=this._promise,c=this._callback,p=l._boundValue();l._pushContext();var d=f(c).call(p,t,n,o),_=l._popContext();if(s.checkForgottenReturns(d,_,null!==a?"Promise.filter":"Promise.map",l),d===h)return this._reject(d.e),!0;var y=i(d,this._promise);if(y instanceof e){y=y._target();var v=y._bitField;if(0===(50397184&v))return u>=1&&this._inFlight++,r[n]=y,y._proxy(this,(n+1)*-1),!1;if(0===(33554432&v))return 0!==(16777216&v)?(this._reject(y._reason()),!0):(this._cancel(),!0);d=y._value()}r[n]=d}var m=++this._totalResolved;return m>=o&&(null!==a?this._filter(r,a):this._resolve(r),!0)},a.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return u(this,t,e,null)},e.map=function(t,e,n,r){return u(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=a(t).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t){if("function"!=typeof t)return i("expecting a function but got "+s.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var u;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],c=arguments[2];u=s.isArray(l)?a(t).apply(c,l):a(t).call(c,l)}else u=a(t)();var f=r._popContext();return o.checkForgottenReturns(u,f,"Promise.try",r),r._resolveFromSyncValue(u),r},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&c.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new l(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=c.keys(t),i=0;i<n.length;++i){var o=n[i];f.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(a(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(r);t=null}}}var s=t("./util"),a=s.maybeWrapAsError,u=t("./errors"),l=u.OperationalError,c=t("./es5"),f=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=a(e).apply(n._boundValue(),[null].concat(t));i===u&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=t===undefined?a(e).call(r,null):a(e).call(r,null,t);i===u&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=a(e).call(n._boundValue(),t);i===u&&s.throwLater(i.e)}var o=t("./util"),s=e._async,a=o.tryCatch,u=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;e!==undefined&&Object(e).spread&&(o=n),this._then(o,i,undefined,this,t)}return this}}},{"./util":36}],22:[function(t,e,n){"use strict";e.exports=function(){function n(){}function r(t,e){if("function"!=typeof e)throw new m("expecting a function but got "+p.classString(e));if(t.constructor!==i)throw new m("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function i(t){this._bitField=0,this._fulfillmentHandler0=undefined,this._rejectionHandler0=undefined,this._promise0=undefined,this._receiver0=undefined,t!==b&&(r(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function a(t){var e=new i(b);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var u,l=function(){return new m("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},c=function(){return new i.PromiseInspection(this._target())},f=function(t){return i.reject(new m(t))},h={},p=t("./util");u=p.isNode?function(){var t=process.domain;return t===undefined&&(t=null),t}:function(){return null},p.notEnumerableProp(i,"_getDomain",u);var d=t("./es5"),_=t("./async"),y=new _;d.defineProperty(i,"_async",{value:y});var v=t("./errors"),m=i.TypeError=v.TypeError;i.RangeError=v.RangeError;var g=i.CancellationError=v.CancellationError;i.TimeoutError=v.TimeoutError,i.OperationalError=v.OperationalError,i.RejectionError=v.OperationalError,i.AggregateError=v.AggregateError;var b=function(){},w={},C={},E=t("./thenables")(i,b),j=t("./promise_array")(i,b,E,f,n),A=t("./context")(i),F=A.create,k=t("./debuggability")(i,A),P=(k.CapturedTrace,t("./finally")(i,E)),T=t("./catch_filter")(C),S=t("./nodeback"),O=p.errorObj,x=p.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var o=arguments[n];if(!p.isObject(o))return f("expecting an object but got A catch statement predicate "+p.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(undefined,T(r,t,this))}return this.then(undefined,t)},i.prototype.reflect=function(){return this._then(c,c,undefined,this,undefined)},i.prototype.then=function(t,e){if(k.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+p.classString(t);arguments.length>1&&(n+=", "+p.classString(e)),this._warn(n)}return this._then(t,e,undefined,undefined,undefined)},i.prototype.done=function(t,e){var n=this._then(t,e,undefined,undefined,undefined);n._setIsFinal()},i.prototype.spread=function(t){return"function"!=typeof t?f("expecting a function but got "+p.classString(t)):this.all()._then(t,undefined,undefined,w,undefined)},i.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:undefined,rejectionReason:undefined};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new j(this).promise()},i.prototype.error=function(t){return this.caught(p.originatesFromRejection,t)},i.getNewLibraryCopy=e.exports,i.is=function(t){return t instanceof i},i.fromNode=i.fromCallback=function(t){var e=new i(b);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=x(t)(S(e,n));return r===O&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},i.all=function(t){return new j(t).promise()},i.cast=function(t){var e=E(t);return e instanceof i||(e=new i(b),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(t){var e=new i(b);return e._captureStackTrace(),e._rejectCallback(t,!0),e},i.setScheduler=function(t){if("function"!=typeof t)throw new m("expecting a function but got "+p.classString(t));return y.setScheduler(t)},i.prototype._then=function(t,e,n,r,o){var s=o!==undefined,a=s?o:new i(b),l=this._target(),c=l._bitField;s||(a._propagateFrom(this,3),a._captureStackTrace(),r===undefined&&0!==(2097152&this._bitField)&&(r=0!==(50397184&c)?this._boundValue():l===this?undefined:this._boundTo),this._fireEvent("promiseChained",this,a));var f=u();if(0!==(50397184&c)){var h,d,_=l._settlePromiseCtx;0!==(33554432&c)?(d=l._rejectionHandler0,h=t):0!==(16777216&c)?(d=l._fulfillmentHandler0,h=e,l._unsetRejectionIsUnhandled()):(_=l._settlePromiseLateCancellationObserver,d=new g("late cancellation observer"),l._attachExtraTrace(d),h=e),y.invoke(_,l,{handler:null===f?h:"function"==typeof h&&p.domainBind(f,h),promise:a,receiver:r,value:d})}else l._addCallbacks(t,e,a,r,f);return a},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(t){this._bitField=this._bitField&-65536|65535&t},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){y.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];return e===h?undefined:e===undefined&&this._isBound()?this._boundValue():e},i.prototype._promiseAt=function(t){return this[4*t-4+2]},i.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},i.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);i===undefined&&(i=h),this._addCallbacks(e,n,r,i,null)},i.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);o===undefined&&(o=h),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:p.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:p.domainBind(i,e));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof t&&(this[s+0]=null===i?t:p.domainBind(i,t)),"function"==typeof e&&(this[s+1]=null===i?e:p.domainBind(i,e))}return this._setLength(o+1),o},i.prototype._proxy=function(t,e){this._addCallbacks(undefined,undefined,e,t,null)},i.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var n=E(t,this);if(!(n instanceof i))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var o=r._bitField;if(0===(50397184&o)){var s=this._length();s>0&&r._migrateCallback0(this);for(var a=1;a<s;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&o))this._fulfill(r._value());else if(0!==(16777216&o))this._reject(r._reason());else{var u=new g("late cancellation observer");r._attachExtraTrace(u),this._reject(u)}}},i.prototype._rejectCallback=function(t,e,n){var r=p.ensureErrorObject(t),i=r===t;if(!i&&!n&&k.warnings()){var o="a promise was rejected with a non-error: "+p.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},i.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),r!==undefined&&e._rejectCallback(r,!0)},i.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===w?n&&"number"==typeof n.length?o=x(t).apply(this._boundValue(),n):(o=O,o.e=new m("cannot .spread() a non-array: "+p.classString(n))):o=x(t).call(e,n);var s=r._popContext();i=r._bitField,0===(65536&i)&&(o===C?r._reject(n):o===O?r._rejectCallback(o.e,!1):(k.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(t){this._rejectionHandler0=t},i.prototype._settlePromise=function(t,e,r,o){var s=t instanceof i,a=this._bitField,u=0!==(134217728&a);0!==(65536&a)?(s&&t._invokeInternalOnCancel(),r instanceof P&&r.isFinallyHandler()?(r.cancelPromise=t,x(e).call(r,o)===O&&t._reject(O.e)):e===c?t._fulfill(c.call(r)):r instanceof n?r._promiseCancelled(t):s||t instanceof j?t._cancel():r.cancel()):"function"==typeof e?s?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,o,t)):e.call(r,o,t):r instanceof n?r._isResolved()||(0!==(33554432&a)?r._promiseFulfilled(o,t):r._promiseRejected(o,t)):s&&(u&&t._setAsyncGuaranteed(),0!==(33554432&a)?t._fulfill(o):t._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,o=t.value;"function"==typeof e?n instanceof i?this._settlePromiseFromHandler(e,r,o,n):e.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},i.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=undefined,this._receiver0=undefined,this._settlePromise(r,t,i,e)},i.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=undefined},i.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():y.settlePromises(this))}},i.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?y.fatalError(t,p.isNode):void((65535&e)>0?y.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){k.deprecated("Promise.defer","new Promise");var t=new i(b);return{promise:t,resolve:o,reject:s}},p.notEnumerableProp(i,"_makeSelfResolutionError",l),t("./method")(i,b,E,f,k),t("./bind")(i,b,E,k),t("./cancel")(i,j,f,k),t("./direct_resolve")(i),t("./synchronous_inspection")(i),t("./join")(i,j,E,b,y,u),i.Promise=i,i.version="3.4.6",t("./map.js")(i,j,f,E,b,k),t("./call_get.js")(i),t("./using.js")(i,f,E,F,b,k),t("./timers.js")(i,b,k),t("./generators.js")(i,f,b,E,n,k),t("./nodeify.js")(i),t("./promisify.js")(i,b),t("./props.js")(i,j,E,f),t("./race.js")(i,b,E,f),t("./reduce.js")(i,j,f,E,b,k),t("./settle.js")(i,j,k),t("./some.js")(i,j,f),t("./filter.js")(i,b),t("./each.js")(i,b),t("./any.js")(i),p.toFastProperties(i),p.toFastProperties(i.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(undefined),a(!1),a(new i(b)),k.setBounds(_.firstLineError,p.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function s(t){switch(t){case-2:return[];case-3:return{}}}function a(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(undefined,-2)}var u=t("./util");u.isArray;return u.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function l(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var a=o._bitField;if(this._values=o,0===(50397184&a))return this._promise._setAsyncGuaranteed(),o._then(l,this._reject,undefined,this,n);if(0===(33554432&a))return 0!==(16777216&a)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=u.asArray(o),null===o){var c=i("expecting an array or an iterable object but got "+u.classString(o)).reason();return void this._promise._rejectCallback(c,!1)}return 0===o.length?void(n===-5?this._resolveEmptyArray():this._resolve(s(n))):void this._iterate(o)},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;a<n;++a){var u=r(t[a],i);u instanceof e?(u=u._target(),s=u._bitField):s=null,o?null!==s&&u.suppressUnhandledRejections():null!==s?0===(50397184&s)?(u._proxy(this,a),this._values[a]=u):o=0!==(33554432&s)?this._promiseFulfilled(u._value(),a):0!==(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(u,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!C.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=p.getDataPropertyOrDefault(t,e+n,b);return!!r&&i(r)}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function a(t,e,n,r){for(var a=p.inheritedDataKeys(t),u=[],l=0;l<a.length;++l){var c=a[l],f=t[c],h=r===E||E(c,f,t);"function"!=typeof f||i(f)||o(t,c,e)||!r(c,f,t,h)||u.push(c,f)}return s(u,e,n),u}function u(t,r,i,o,s,a){function u(){var i=r;r===h&&(i=this);var o=new e(n);o._captureStackTrace();var s="string"==typeof c&&this!==l?this[c]:t,u=d(o,a);try{s.apply(i,_(arguments,u))}catch(f){o._rejectCallback(y(f),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var l=function(){return this}(),c=t;return"string"==typeof c&&(t=o),p.notEnumerableProp(u,"__isPromisified__",!0),u}function l(t,e,n,r,i){for(var o=new RegExp(j(e)+"$"),s=a(t,e,o,n),u=0,l=s.length;u<l;u+=2){var c=s[u],f=s[u+1],d=c+e;if(r===A)t[d]=A(c,h,c,f,e,i);else{var _=r(f,function(){return A(c,h,c,f,e,i)});p.notEnumerableProp(_,"__isPromisified__",!0),t[d]=_}}return p.toFastProperties(t),t}function c(t,e,n){return A(t,e,undefined,t,null,n)}var f,h={},p=t("./util"),d=t("./nodeback"),_=p.withAppended,y=p.maybeWrapAsError,v=p.canEvaluate,m=t("./errors").TypeError,g="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],C=new RegExp("^(?:"+w.join("|")+")$"),E=function(t){return p.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},j=function(t){return t.replace(/([$])/,"\\$")},A=v?f:u;e.promisify=function(t,e){if("function"!=typeof t)throw new m("expecting a function but got "+p.classString(t));if(i(t))return t;e=Object(e);var n=e.context===undefined?h:e.context,o=!!e.multiArgs,s=c(t,n,o);return p.copyDescriptors(t,s,r),s},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=g);var i=e.filter;"function"!=typeof i&&(i=E);var o=e.promisifier;if("function"!=typeof o&&(o=A),!p.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=p.inheritedDataKeys(t),a=0;a<s.length;++a){var u=t[s[a]];"constructor"!==s[a]&&p.isClass(u)&&(l(u.prototype,r,i,o,n),l(u,r,i,o,n))}return l(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(a!==undefined&&t instanceof a)e=f(t),n=!0;else{var r=c.keys(t),i=r.length;e=new Array(2*i);for(var o=0;o<i;++o){var s=r[o];e[o]=t[s],e[o+i]=s}}this.constructor$(e),this._isMap=n,this._init$(undefined,-3)}function s(t){var n,s=r(t);return l(s)?(n=s instanceof e?s._then(e.props,undefined,undefined,undefined,undefined):new o(s).promise(),s instanceof e&&n._propagateFrom(s,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,u=t("./util"),l=u.isObject,c=t("./es5");"function"==typeof Map&&(a=Map);var f=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),h=function(t){for(var e=new a,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};u.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=h(this._values);else{r={};for(var i=this.length(),o=0,s=this.length();o<s;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=undefined,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var u=r(t);if(u instanceof e)return a(u);if(t=s.asArray(t),null===t)return i("expecting an array or an iterable object but got "+s.classString(t));var l=new e(n);o!==undefined&&l._propagateFrom(o,3);for(var c=l._fulfill,f=l._reject,h=0,p=t.length;h<p;++h){var d=t[h];(d!==undefined||h in t)&&e.cast(d)._then(c,f,undefined,l,null)}return l}var s=t("./util"),a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,undefined)},e.prototype.race=function(){return o(this,undefined)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r,i){this.constructor$(t);var s=h();this._fn=null===s?n:p.domainBind(s,n),r!==undefined&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,i===o?this._eachValues=Array(this._length):0===i?this._eachValues=null:this._eachValues=undefined,this._promise._captureStackTrace(),this._init$(undefined,-5)}function u(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function l(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+p.classString(e));var o=new a(t,e,n,i);return o.promise()}function c(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(f,undefined,undefined,this,undefined)):f.call(this,n);
}function f(t){var n=this.array,r=n._promise,i=d(n._fn);r._pushContext();var o;o=n._eachValues!==undefined?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var a=r._popContext();return s.checkForgottenReturns(o,a,n._eachValues!==undefined?"Promise.each":"Promise.reduce",r),o}var h=e._getDomain,p=t("./util"),d=p.tryCatch;p.inherits(a,n),a.prototype._gotAccum=function(t){this._eachValues!==undefined&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},a.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==undefined?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},a.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},a.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(this._initialValue!==undefined?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(c,undefined,undefined,o,undefined)}this._eachValues!==undefined&&(n=n._then(this._eachComplete,undefined,undefined,this,undefined)),n._then(u,u,undefined,n,this)},e.prototype.reduce=function(t,e){return l(this,t,e,null)},e.reduce=function(t,e,n,r){return l(t,e,n,r)}}},{"./util":36}],29:[function(t,e,n){"use strict";var r,i=t("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},s=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,u=process.nextTick;r=i.isRecentNode?function(t){a.call(global,t)}:function(t){u.call(process,t)}}else if("function"==typeof s&&"function"==typeof s.resolve){var l=s.resolve();r=function(t){l.then(t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:o:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();e.exports=r},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,s=t("./util");s.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util"),a=t("./errors").RangeError,u=t("./errors").AggregateError,l=s.isArray,c={};s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(undefined,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new u,e=this.length();e<this._values.length;++e)this._values[e]!==c&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){t!==undefined?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():undefined):(this._bitField=0,this._settledValueField=undefined)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(c(t)){if(t instanceof e)return t;var i=o(t);if(i===l){r&&r._pushContext();var u=e.reject(i.e);return r&&r._popContext(),u}if("function"==typeof i){if(s(t)){var u=new e(n);return t._then(u._fulfill,u._reject,undefined,u,null),u}return a(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return l.e=e,l}}function s(t){try{return f.call(t,"_promise0")}catch(e){return!1}}function a(t,r,i){function o(t){a&&(a._resolveCallback(t),a=null)}function s(t){a&&(a._rejectCallback(t,f,!0),a=null)}var a=new e(n),c=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var f=!0,h=u.tryCatch(r).call(t,o,s);return f=!1,a&&h===l&&(a._rejectCallback(h.e,!0,!0),a=null),c}var u=t("./util"),l=u.errorObj,c=u.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function s(t){throw clearTimeout(this.handle),t}var a=t("./util"),u=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,o){var s,a;return o!==undefined?(s=e.resolve(o)._then(l,null,null,t,undefined),r.cancellation()&&o instanceof e&&s._setOnCancel(o)):(s=new e(n),a=setTimeout(function(){s._fulfill()},+t),r.cancellation()&&s._setOnCancel(new i(a)),s._captureStackTrace()),s._setAsyncGuaranteed(),s};e.prototype.delay=function(t){return c(t,this)};var f=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new u("operation timed out"):new u(e),a.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,a,u=new i(setTimeout(function(){n.isPending()&&f(n,e,a)},t));return r.cancellation()?(a=this.then(),n=a._then(o,s,undefined,u,undefined),n._setOnCancel(u)):n=this._then(o,s,undefined,u,undefined),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t){setTimeout(function(){throw t},0)}function u(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function l(t,n){function i(){if(s>=l)return c._fulfill();var o=u(t[s++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(f){return a(f)}if(o instanceof e)return o._then(i,a,null,null,null)}i()}var s=0,l=t.length,c=new e(o);return i(),c}function c(t,e,n){this._data=t,this._promise=e,this._context=n}function f(t,e,n){this.constructor$(t,e,n)}function h(t){return c.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function p(t){this.length=t,this.promise=null,this[t-1]=null}var d=t("./util"),_=t("./errors").TypeError,y=t("./util").inherits,v=d.errorObj,m=d.tryCatch,g={};c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():g},c.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;n!==undefined&&n._pushContext();var r=e!==g?this.doDispose(e,t):null;return n!==undefined&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},c.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},y(f,c),f.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},p.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+d.classString(i));var o,a=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,a=!1):(o=arguments,t--);for(var u=new p(t),f=0;f<t;++f){var _=o[f];if(c.isDisposer(_)){var y=_;_=_.promise(),_._setDisposable(y)}else{var g=r(_);g instanceof e&&(_=g._then(h,null,null,{resources:u,index:f},undefined))}u[f]=_}for(var b=new Array(u.length),f=0;f<b.length;++f)b[f]=e.resolve(u[f]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return v.e=n.error(),v;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}C._pushContext(),i=m(i);var r=a?i.apply(undefined,t):i(t),o=C._popContext();return s.checkForgottenReturns(r,o,"Promise.using",C),r}),C=w.lastly(function(){var t=new e.PromiseInspection(w);return l(u,t)});return u.promise=C,C._setOnCancel(u),C},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=undefined},e.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this,i());throw new _}}},{"./errors":12,"./util":36}],36:[function(t,e,n){"use strict";function r(){try{var t=T;return T=null,t.apply(this,arguments)}catch(e){return P.e=e,P}}function i(t){return T=t,r}function o(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function s(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return o(t)?new Error(y(t)):t}function u(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function l(t,e,n){if(!F.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:undefined;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function c(t,e,n){if(o(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return F.defineProperty(t,e,r),t}function f(t){throw t}function h(t){try{if("function"==typeof t){var e=F.names(t.prototype),n=F.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=R.test(t+"")&&F.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function p(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function d(t){return V.test(t)}function _(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function y(t){try{return t+""}catch(e){return"[no string representation]"}}function v(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function m(t){try{c(t,"isOperational",!0)}catch(e){}}function g(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0)}function b(t){return v(t)&&F.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function C(t,e,n){for(var r=F.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{F.defineProperty(e,o,F.getDescriptor(t,o))}catch(s){}}}function E(t,e){return M?process.env[t]:e}function j(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(e){}}function A(t,e){return t.bind(e)}var F=t("./es5"),k="undefined"==typeof navigator,P={e:{}},T,S="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this!==undefined?this:null,O=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},x=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(F.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(s){return r}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var l=Object.getOwnPropertyDescriptor(t,u);null!=l&&null==l.get&&null==l.set&&r.push(u)}}t=F.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;i.push(o)}return i}}(),R=/this\s*\.\s*\S+\s*=/,V=/^[a-z$_][a-z$_0-9]*$/i,I=function(){return"stack"in new Error?function(t){return b(t)?t:new Error(y(t))}:function(t){if(b(t))return t;try{throw new Error(y(t))}catch(e){return e}}}(),D=function(t){return F.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var L="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};D=function(t){return F.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?L(t):null}}var M="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),N={isClass:h,isIdentifier:d,inheritedDataKeys:x,getDataPropertyOrDefault:l,thrower:f,isArray:F.isArray,asArray:D,notEnumerableProp:c,isPrimitive:o,isObject:s,isError:v,canEvaluate:k,errorObj:P,tryCatch:i,inherits:O,withAppended:u,maybeWrapAsError:a,toFastProperties:p,filledRange:_,toString:y,canAttachTrace:b,ensureErrorObject:I,originatesFromRejection:g,markAsOriginatingFromRejection:m,classString:w,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:M,env:E,global:S,getNativePromise:j,domainBind:A};N.isRecentNode=N.isNode&&function(){var t=process.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),N.isNode&&N.toFastProperties(process);try{throw new Error}catch(U){N.lastLineError=U}e.exports=N},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);var getFlashVersion=function(){var t,e,n="Shockwave",r="Flash",i=n+" "+r,o=n+r+"."+n+r,s="application/x-shockwave-flash",a=navigator,u=parseFloat,l=a.plugins,c=a.mimeTypes;if(l&&"object"==typeof l[i]){if(t=l[i].description,t&&(!c||!c[s]||c[s].enabledPlugin))return u(t.replace(/^.*\s+(\S+)\s+\S+$/,"$1"))}else if(window.ActiveXObject)try{if(e=new ActiveXObject(o),e&&(t=e.GetVariable("$version")))return u(t.replace(/^\S+\s+(\d+),(\d+).*$/i,"$1.$2"))}catch(f){}return-1},swfobject=function(){function t(){if(!q&&document.getElementsByTagName("body")[0]){try{var t,e=v("span");e.style.display="none",t=M.getElementsByTagName("body")[0].appendChild(e),t.parentNode.removeChild(t),t=null,e=null}catch(n){return}q=!0;for(var r=B.length,i=0;i<r;i++)B[i]()}}function e(t){q?t():B[B.length]=t}function n(t){if(typeof L.addEventListener!=S)L.addEventListener("load",t,!1);else if(typeof M.addEventListener!=S)M.addEventListener("load",t,!1);else if(typeof L.attachEvent!=S)g(L,"onload",t);else if("function"==typeof L.onload){var e=L.onload;L.onload=function(){e(),t()}}else L.onload=t}function r(){var t=M.getElementsByTagName("body")[0],e=v(O);e.setAttribute("style","visibility: hidden;"),e.setAttribute("type",V);var n=t.appendChild(e);if(n){var r=0;!function o(){if(typeof n.GetVariable!=S)try{var s=n.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),J.pv=[m(s[0]),m(s[1]),m(s[2])])}catch(a){J.pv=[8,0,0]}else if(r<10)return r++,void setTimeout(o,10);t.removeChild(e),n=null,i()}()}else i()}function i(){var t=H.length;if(t>0)for(var e=0;e<t;e++){var n=H[e].id,r=H[e].callbackFn,i={success:!1,id:n};if(J.pv[0]>0){var l=y(n);if(l)if(!b(H[e].swfVersion)||J.wk&&J.wk<312)if(H[e].expressInstall&&s()){var c={};c.data=H[e].expressInstall,c.width=l.getAttribute("width")||"0",c.height=l.getAttribute("height")||"0",l.getAttribute("class")&&(c.styleclass=l.getAttribute("class")),l.getAttribute("align")&&(c.align=l.getAttribute("align"));for(var f={},h=l.getElementsByTagName("param"),p=h.length,d=0;d<p;d++)"movie"!=h[d].getAttribute("name").toLowerCase()&&(f[h[d].getAttribute("name")]=h[d].getAttribute("value"));a(c,f,n,r)}else u(l),r&&r(i);else C(n,!0),r&&(i.success=!0,i.ref=o(n),i.id=n,r(i))}else if(C(n,!0),r){var _=o(n);_&&typeof _.SetVariable!=S&&(i.success=!0,i.ref=_,i.id=_.id),r(i)}}}function o(t){var e=null,n=y(t);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(e=typeof n.SetVariable!==S?n:n.getElementsByTagName(O)[0]||n),e}function s(){return!Q&&b("6.0.65")&&(J.win||J.mac)&&!(J.wk&&J.wk<312)}function a(t,e,n,r){var i=y(n);if(n=_(n),Q=!0,F=r||null,k={success:!1,id:n},i){"OBJECT"==i.nodeName.toUpperCase()?(j=l(i),A=null):(j=i,A=n),t.id=I,(typeof t.width==S||!/%$/.test(t.width)&&m(t.width)<310)&&(t.width="310"),(typeof t.height==S||!/%$/.test(t.height)&&m(t.height)<137)&&(t.height="137");var o=J.ie?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURIComponent(L.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(M.title.slice(0,47)+" - Flash Player Installation");if(typeof e.flashvars!=S?e.flashvars+="&"+s:e.flashvars=s,J.ie&&4!=i.readyState){var a=v("div");n+="SWFObjectNew",a.setAttribute("id",n),i.parentNode.insertBefore(a,i),i.style.display="none",p(i)}f(t,e,n)}}function u(t){if(J.ie&&4!=t.readyState){t.style.display="none";var e=v("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(l(t),e),p(t)}else t.parentNode.replaceChild(l(t),t)}function l(t){var e=v("div");if(J.win&&J.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(O)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,o=0;o<i;o++)1==r[o].nodeType&&"PARAM"==r[o].nodeName||8==r[o].nodeType||e.appendChild(r[o].cloneNode(!0))}}return e}function c(t,e){var n=v("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+t+"'>"+e+"</object>",n.firstChild}function f(t,e,n){var r,i=y(n);if(n=_(n),J.wk&&J.wk<312)return r;if(i){var o,s,a,u=v(J.ie?"div":O);typeof t.id==S&&(t.id=n);for(a in e)e.hasOwnProperty(a)&&"movie"!==a.toLowerCase()&&h(u,a,e[a]);J.ie&&(u=c(t.data,u.innerHTML));for(o in t)t.hasOwnProperty(o)&&(s=o.toLowerCase(),"styleclass"===s?u.setAttribute("class",t[o]):"classid"!==s&&"data"!==s&&u.setAttribute(o,t[o]));J.ie?$[$.length]=t.id:(u.setAttribute("type",V),u.setAttribute("data",t.data)),i.parentNode.replaceChild(u,i),r=u}return r}function h(t,e,n){var r=v("param");r.setAttribute("name",e),r.setAttribute("value",n),t.appendChild(r)}function p(t){var e=y(t);e&&"OBJECT"==e.nodeName.toUpperCase()&&(J.ie?(e.style.display="none",function n(){if(4==e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode.removeChild(e)}else setTimeout(n,10)}()):e.parentNode.removeChild(e))}function d(t){return t&&t.nodeType&&1===t.nodeType}function _(t){return d(t)?t.id:t}function y(t){if(d(t))return t;var e=null;try{e=M.getElementById(t)}catch(n){}return e}function v(t){return M.createElement(t)}function m(t){return parseInt(t,10)}function g(t,e,n){t.attachEvent(e,n),W[W.length]=[t,e,n]}function b(t){t+="";var e=J.pv,n=t.split(".");return n[0]=m(n[0]),n[1]=m(n[1])||0,n[2]=m(n[2])||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]}function w(t,e,n,r){var i=M.getElementsByTagName("head")[0];if(i){var o="string"==typeof n?n:"screen";if(r&&(P=null,T=null),!P||T!=o){var s=v("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),P=i.appendChild(s),J.ie&&typeof M.styleSheets!=S&&M.styleSheets.length>0&&(P=M.styleSheets[M.styleSheets.length-1]),T=o}P&&(typeof P.addRule!=S?P.addRule(t,e):typeof M.createTextNode!=S&&P.appendChild(M.createTextNode(t+" {"+e+"}")))}}function C(t,e){if(X){var n=e?"visible":"hidden",r=y(t);q&&r?r.style.visibility=n:"string"==typeof t&&w("#"+t,"visibility:"+n)}}function E(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&typeof encodeURIComponent!=S?encodeURIComponent(t):t}var j,A,F,k,P,T,S="undefined",O="object",x="Shockwave Flash",R="ShockwaveFlash.ShockwaveFlash",V="application/x-shockwave-flash",I="SWFObjectExprInst",D="onreadystatechange",L=window,M=document,N=navigator,U=!1,B=[],H=[],$=[],W=[],q=!1,Q=!1,X=!0,z=!1,J=function(){var t=typeof M.getElementById!=S&&typeof M.getElementsByTagName!=S&&typeof M.createElement!=S,e=N.userAgent.toLowerCase(),n=N.platform.toLowerCase(),r=n?/win/.test(n):/win/.test(e),i=n?/mac/.test(n):/mac/.test(e),o=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),s="Microsoft Internet Explorer"===N.appName,a=[0,0,0],u=null;if(typeof N.plugins!=S&&typeof N.plugins[x]==O)u=N.plugins[x].description,u&&typeof N.mimeTypes!=S&&N.mimeTypes[V]&&N.mimeTypes[V].enabledPlugin&&(U=!0,s=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=m(u.replace(/^(.*)\..*$/,"$1")),a[1]=m(u.replace(/^.*\.(.*)\s.*$/,"$1")),a[2]=/[a-zA-Z]/.test(u)?m(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof L.ActiveXObject!=S)try{var l=new ActiveXObject(R);l&&(u=l.GetVariable("$version"),u&&(s=!0,u=u.split(" ")[1].split(","),a=[m(u[0]),m(u[1]),m(u[2])]))}catch(c){}return{w3:t,pv:a,wk:o,ie:s,win:r,mac:i}}();(function(){J.w3&&((typeof M.readyState!=S&&("complete"===M.readyState||"interactive"===M.readyState)||typeof M.readyState==S&&(M.getElementsByTagName("body")[0]||M.body))&&t(),q||(typeof M.addEventListener!=S&&M.addEventListener("DOMContentLoaded",t,!1),J.ie&&(M.attachEvent(D,function e(){"complete"==M.readyState&&(M.detachEvent(D,e),t())}),L==top&&!function n(){if(!q){try{M.documentElement.doScroll("left")}catch(e){return void setTimeout(n,0)}t()}}()),J.wk&&!function r(){if(!q)return/loaded|complete/.test(M.readyState)?void t():void setTimeout(r,0)}()))})();B[0]=function(){U?r():i()};(function(){J.ie&&window.attachEvent("onunload",function(){for(var t=W.length,e=0;e<t;e++)W[e][0].detachEvent(W[e][1],W[e][2]);for(var n=$.length,r=0;r<n;r++)p($[r]);for(var i in J)J[i]=null;J=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})})();return{registerObject:function(t,e,n,r){if(J.w3&&t&&e){var i={};i.id=t,i.swfVersion=e,i.expressInstall=n,i.callbackFn=r,H[H.length]=i,C(t,!1)}else r&&r({success:!1,id:t})},getObjectById:function(t){if(J.w3)return o(t)},embedSWF:function(t,n,r,i,o,u,l,c,h,p){var d=_(n),y={success:!1,id:d};J.w3&&!(J.wk&&J.wk<312)&&t&&n&&r&&i&&o?(C(d,!1),e(function(){r+="",i+="";var e={};if(h&&typeof h===O)for(var _ in h)e[_]=h[_];e.data=t,e.width=r,e.height=i;var v={};if(c&&typeof c===O)for(var m in c)v[m]=c[m];if(l&&typeof l===O)for(var g in l)if(l.hasOwnProperty(g)){var w=z?encodeURIComponent(g):g,E=z?encodeURIComponent(l[g]):l[g];typeof v.flashvars!=S?v.flashvars+="&"+w+"="+E:v.flashvars=w+"="+E}if(b(o)){var j=f(e,v,n);e.id==d&&C(d,!0),y.success=!0,y.ref=j,y.id=j.id}else{if(u&&s())return e.data=u,void a(e,v,n,p);C(d,!0)}p&&p(y)})):p&&p(y)},switchOffAutoHideShow:function(){X=!1},enableUriEncoding:function(t){z=typeof t===S||t},ua:J,getFlashPlayerVersion:function(){return{major:J.pv[0],minor:J.pv[1],release:J.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(t,e,n){return J.w3?f(t,e,n):undefined},showExpressInstall:function(t,e,n,r){J.w3&&s()&&a(t,e,n,r)},removeSWF:function(t){J.w3&&p(t)},createCSS:function(t,e,n,r){J.w3&&w(t,e,n,r)},addDomLoadEvent:e,addLoadEvent:n,getQueryParamValue:function(t){var e=M.location.search||M.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return E(e);for(var n=e.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==t)return E(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Q){var t=y(I);t&&j&&(t.parentNode.replaceChild(j,t),A&&(C(A,!0),J.ie&&(j.style.display="block")),F&&F(k)),Q=!1}},version:"2.3"}}();EventManager.prototype.on=function(t,e){this.events[t+""]=e},EventManager.prototype.trigger=function(t,e){var n=this.events[t];n&&n.call(null,e)},Wrapper.prototype.wrap=function(t){var e=this.getConfig(t),n=new EventManager,r=this.width,i=this.height;return window.VpaidflashWrappers||(window.VpaidflashWrappers={}),window.VpaidflashWrappers[t]={},window.VpaidflashWrappers[t]={adLoadedClosure:function(){n.trigger("loaded"),window["SdkIntegration"+t].startAd()},adErrorClosure:function(){n.trigger("error")},adCompleteClosure:function(){n.trigger("complete")},pausedClosure:function(){n.trigger("paused")},resumedClosure:function(){n.trigger("resumed")},muteClosure:function(){n.trigger("mute")},unmuteClosure:function(){n.trigger("unmute")},adStartedClosure:function(){n.trigger("started")},startFlashWrapper:function(){n.trigger("ready");var o=window["SdkIntegration"+t];o.width=r,o.height=i,o.loadAd(e)}},n},Wrapper.prototype.getConfig=function(t){var e="window.VpaidflashWrappers["+t+"]";return JSON.stringify({adCompleteClosure:e+".adCompleteClosure",adStartedClosure:e+".adStartedClosure",adLoadedClosure:e+".adLoadedClosure",adErrorClosure:e+".adErrorClosure",resumedClosure:e+".resumedClosure",pausedClosure:e+".pausedClosure",unmuteClosure:e+".unmuteClosure",muteClosure:e+".muteClosure",volume:1,width:this.width,height:this.height,vastUrl:this.getVastUrl()})},Wrapper.prototype.getVastUrl=function(){return this.configUrl||"//vast.videe.tv/vast-proxy/?aid="+this.aid+"&content_page_url="+this.host+"&player_height="+this.height+"&player_width="+this.width+"&sid="+this.sid+"&cb="+this.cd},FlashClient.prototype.init=function(t,e,n){if(t&&!this.checkUnitSource(t))throw new Error("unit not SWF");this.addWrapperEl(),this.initWrapper(n),this.embedSWF()},FlashClient.prototype.checkUnitSource=function(t){return t.indexOf(".swf")!=-1},FlashClient.prototype.embedSWF=function(){try{swfobject.embedSWF(this.unitSrc,this.sdkUnique,this.options.width,this.options.height,this.flashVersion,undefined,this.flashvars(),this.params,{})}catch(t){console.error(t)}},FlashClient.prototype.initEvents=function(){this.eventManager.on("ready",function(){this.VPAID=document.getElementById(this.sdkUnique),this.methodsState=!0}.bind(this))},FlashClient.prototype.initWrapper=function(t){try{this.eventManager=new Wrapper(this.options.aid,this.options.width,this.options.height,this.options.sid,t).wrap(this.id)}catch(e){console.error(e)}this.initEvents()},FlashClient.prototype.addWrapperEl=function(){var t=document.createElement("div");this.sdkUnique="SdkIntegration"+this.id,t.className="flash-blocker",t.innerHTML='<div id="'+this.sdkUnique+'"></div>',this.options.containerEl.appendChild(t)},FlashClient.prototype.flashvars=function(){return{onReady:"window.VpaidflashWrappers["+this.id+"].startFlashWrapper"}},JsClient.prototype.embed=function(){return[new Promise(function(t,e){this.iframe().addEventListener("load",function(){this.iFwindow=this.iframe().contentWindow,this.videoAdLayer().appendChild(this.videoTag()),this.iFwindow.document.body.appendChild(this.videoAdLayer()),this.iFwindow.document.body.appendChild(this.script()),this.iFwindow.document.body.style.margin=0,t()}.bind(this))}.bind(this)),new Promise(function(t,e){this.script().addEventListener("load",function(){t()},!1)}.bind(this))]},JsClient.prototype.init=function(t,e){if(!t||!e)throw new Error("Set correct options");if(!this.videoTag().canPlayType)throw new Error("HTML5 video not support");this.VpaidSource=t,this.configUrl=e,Promise.all(this.embed()).then(function(){this.VPAID=this.iFwindow.getVPAIDAd(),this.initVPAID()}.bind(this)).caught(function(t){console.error(t)}),this.options.containerEl.appendChild(this.iframe())},JsClient.prototype.initVPAID=function(){var t=this.eventManager;this.VPAID.subscribe(function(){this.VPAID.startAd(),t.trigger("loaded")}.bind(this),"AdLoaded"),this.VPAID.subscribe(function(){this.methodsState=!0,t.trigger("started")}.bind(this),"AdStarted"),this.VPAID.subscribe(function(){t.trigger("paused")},"AdPaused"),this.VPAID.subscribe(function(e){t.trigger("error",e)},"AdError"),this.VPAID.subscribe(function(){t.trigger("playing")},"AdPlaying"),this.VPAID.subscribe(function(){t.trigger("stopped"),this.destroy()}.bind(this),"AdStopped"),this.VPAID.subscribe(function(){t.trigger("resize")},"AdSizeChange"),this.VPAID.subscribe(function(){t.trigger("complete"),this.VPAID.stopAd()}.bind(this),"AdVideoComplete"),this.VPAID.handshakeVersion(2),this.VPAID.initAd(this.options.width,this.options.height,"normal",0,this.configUrl,{videoSlotCanAutoPlay:!0,videoSlot:this.videoTag(),slot:this.videoAdLayer()})},JsClient.prototype.videoTag=function(){return this._videoTag?this._videoTag:(this._videoTag=document.createElement("video"),
this._videoTag.setAttribute("width","100%"),this._videoTag.setAttribute("height","100%"),this._videoTag.style.position="absolute",this._videoTag)},JsClient.prototype.videoAdLayer=function(){return this._videoAdLayer?this._videoAdLayer:(this._videoAdLayer=document.createElement("div"),this._videoAdLayer.setAttribute("width",this.options.width),this._videoAdLayer.setAttribute("height",this.options.height),this._videoAdLayer)},JsClient.prototype.script=function(){return this._scriptTag?this._scriptTag:(this._scriptTag=document.createElement("script"),this._scriptTag.setAttribute("type","text/javascript"),this._scriptTag.setAttribute("src",this.VpaidSource),this._scriptTag.setAttribute("async",""),this._scriptTag)},JsClient.prototype.iframe=function(){return this._iFrame?this._iFrame:(this._iFrame=document.createElement("iFrame"),this._iFrame.setAttribute("allowfullscreen","true"),this._iFrame.src="about:blank",this._iFrame.width=this.options.width,this._iFrame.height=this.options.height,this._iFrame.style.border="none",this._iFrame)},JsClient.prototype.destroy=function(){delete this.VPAID,this._iFrame.parentNode.removeChild(this._iFrame),delete this._videoAdLayer,delete this._scriptTag,delete this._videoTag,delete this._iFrame},Outstream.prototype.parseAndSaveConfig=function(t){function e(){try{var e=new DOMParser}catch(n){}if(e)return e.parseFromString(t,"text/xml");var r=new ActiveXObject("Microsoft.XMLDOM");if(r.loadXML(t),0!=r.parseError.errorCode){var i=r.parseError;return void console.error("You have error "+i.reason)}return r}t=e(),this.VpaidSource=t.getElementsByTagName("MediaFile")[0].childNodes[0].nodeValue,this.configUrl=t.getElementsByTagName("AdParameters")[0].childNodes[0].nodeValue},Outstream.prototype.loadConfig=function(){var t=this.getConfigUrl();return new Promise(function(e){try{var n=new XDomainRequest}catch(r){}if(XMLHttpRequest&&!n){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&200==i.status&&e(i.responseText)},i.open("GET",t,!0),i.send()}else n.onload=function(){e(n.responseText)},n.open("get",t,!0),setTimeout(function(){n.send()},0)})},Outstream.prototype.options=function(t){function e(){return Array.isArray(t.VPAIDMode)&&t.VPAIDMode.length?t.VPAIDMode:["flash","js"]}return this._options||!t?this._options:"object"!=typeof t?void console.error("Please set correct options"):(t.VPAIDMode=e(),this._options=t)},Outstream.prototype.init=function(){this.createVPAID(),this.loadConfig().then(function(t){this.parseAndSaveConfig(t),this.initVPAID()}.bind(this)).caught(function(t){console.error(t),this.initVPAID()}.bind(this))},Outstream.prototype.initVPAID=function(){try{this.VPAIDClient.init(this.VpaidSource,this.configUrl,this.getConfigUrl())}catch(t){var e=this.options().VPAIDMode,n=e.indexOf(this.mode);return void(n!=-1&&(e.splice(n,1),console.log("Switch VPAIdType , ERROR: "+t.message),this.init()))}this.initEventListener(this.VPAIDClient.eventManager)},Outstream.prototype.getConfigUrl=function(){var t=this.options().isSSP?"vast.vertamedia.com/":"vast.videe.tv/",e="//"+t+"?aid="+this.options().aid+"&content_page_url="+encodeURIComponent(window.location.href!=window.parent.location.href?document.referrer:window.location.href)+"&player_width="+this.options().width+"&player_height="+this.options().height+"&cd="+(new Date).getTime();return"js"==this.mode&&(e+="&vpaid_type=2"),e},Outstream.prototype.createVPAID=function(){var t=this.options().VPAIDMode;for(var e in t)if(this.useMode(t[e]))return void(this.mode=t[e])},Outstream.prototype.useMode=function(t){var e={flash:function(t){return new FlashClient(t)},js:function(t){return new JsClient(t)}};t=t in e?t:"flash";try{this.VPAIDClient=new e[t](this.options())}catch(n){return console.error(t+" init ERROR: "+n),!1}return!!this.VPAIDClient},Outstream.prototype.initEventListener=function(t){function e(e){t.on(e,function(t){n.trigger(e,t)})}var n=this,r=this.VPAIDClient.proxyEvents;for(var i in r)e(r[i])},Outstream.prototype.on=function(t,e){return this.events[t+""]=e,this},Outstream.prototype.off=function(t){return delete this.events[t+""],this},Outstream.prototype.trigger=function(t,e){var n=this.events[t];n&&n.call(this,e)},Outstream.prototype.destroy=function(){this.options.containerEl.innerHTML=""},Outstream.prototype.callMethod=function(t,e){return t="flash"==this.mode?"videe_"+t:t,this.isVPAIDReady()?this.VPAIDClient.VPAID[t](e):void this.on("started",function(){this.VPAIDClient.VPAID[t](e)}.bind(this))},Outstream.prototype.startAd=function(){return this.callMethod("startAd"),this},Outstream.prototype.stopAd=function(){return this.callMethod("stopAd"),this},Outstream.prototype.skipAd=function(){return this.callMethod("skipAd"),this},Outstream.prototype.mute=function(){function t(){var t="flash"==this.mode?"videe_getAdVolume":"getAdVolume";this.savedVolume=this.VPAIDClient.VPAID[t](),t="flash"==this.mode?"videe_setAdVolume":"setAdVolume",this.VPAIDClient.VPAID[t](0)}return this.isVPAIDReady()?void t.call(this):(this.on("started",function(){t.call(this)}.bind(this)),this)},Outstream.prototype.unmute=function(){return this.callMethod("setAdVolume",this.savedVolume||1),this},Outstream.prototype.setAdVolume=function(t){if("number"==typeof t&&t==t)return this.callMethod("setAdVolume",t),this},Outstream.prototype.getAdVolume=function(){return this.callMethod("getAdVolume")},Outstream.prototype.pauseAd=function(){return this.callMethod("pauseAd"),this},Outstream.prototype.resumeAd=function(){return this.callMethod("resumeAd"),this},Outstream.prototype.isVPAIDReady=function(){return this.VPAIDClient&&this.VPAIDClient.methodsState&&this.VPAIDClient.VPAID},Outstream.prototype.resizeAd=function(){var t=Array.prototype.slice.call(arguments),e="flash"==this.mode?"videe_resizeAd":"resizeAd";return this.isVPAIDReady()?(this.VPAIDClient.VPAID[e].apply(null,t),this):(this.on("started",function(){this.VPAIDClient.VPAID[e].apply(null,t)}.bind(this)),this)};var root=root||window;root.Outstream=Outstream;var onload=function(){function t(t){new Outstream({aid:t.aid,isSSP:t.isSSP,VPAIDMode:t.VPAIDMode,width:e(t.width)?400:t.width,height:e(t.height)?300:t.height,containerEl:t.containerEl})}function e(t){return t!=t}function n(t){var e=document.createElement("div"),n=t.parentNode;return"HEAD"==n.tagName.toUpperCase()?(document.body.appendChild(e),e):(n.insertBefore(e,t),e)}var r={number:function(t,e){var n=this.parse(t,e);return parseInt(n)},array:function(t,e){var n=this.parse(t,e);return n?n.split(" "):n},bool:function(t,e){var n=this.parse(t,e);try{n=JSON.parse(n)}catch(r){n=!1}return!!n},parse:function(t,e){var n;try{n=t.getAttribute("data-outstream-"+e)}catch(r){return undefined}return n}};!function(){var i=document.getElementsByTagName("script");for(var o in i){var s=r.number(i[o],"aid");s&&!e(s)&&t({width:r.number(i[o],"width"),height:r.number(i[o],"height"),isSSP:r.bool(i[o],"SSP"),VPAIDMode:r.array(i[o],"mode"),aid:s,containerEl:n(i[o])})}}()};window!==top?onload():window.onload=onload}(window);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvbGlmaWxsLmpzIiwiZXZlbnQubWFuYWdlci5qcyIsIndyYXBwZXIuanMiLCJmbGFzaC5jbGllbnQuanMiLCJqcy5jbGllbnQuanMiLCJtYWluLmpzIiwiYmx1ZWJpcmQvYmx1ZWJpcmQuanMiLCJmbGFzaGRldGVjdC9mbGFzaGRldGVjdC5qcyIsInN3Zm9iamVjdC9zd2ZvYmplY3QuanMiLCJhdXRvaW5pdC5qcyIsIm91dHN0cmVhbS5taW4uanMiXSwibmFtZXMiOlsicm9vdCIsInVuZGVmaW5lZCIsIkV2ZW50TWFuYWdlciIsInRoaXMiLCJldmVudHMiLCJXcmFwcGVyIiwiYWlkIiwid2lkdGgiLCJoZWlnaHQiLCJzaWQiLCJjb25maWdVcmwiLCJFcnJvciIsImhvc3QiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJwYXJlbnQiLCJkb2N1bWVudCIsInJlZmVycmVyIiwiY2QiLCJEYXRlIiwiZ2V0VGltZSIsIkZsYXNoQ2xpZW50Iiwib3B0aW9ucyIsImdldEZsYXNoVmVyc2lvbiIsImlkIiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwidW5pdFNyYyIsImZsYXNoVmVyc2lvbiIsInBhcmFtcyIsImFsbG93U2NyaXB0QWNjZXNzIiwiYWxsb3dGdWxsU2NyZWVuIiwid21vZGUiLCJtZXRob2RzU3RhdGUiLCJwcm94eUV2ZW50cyIsIkpzQ2xpZW50IiwiZXZlbnRNYW5hZ2VyIiwiT3V0c3RyZWFtIiwiaW5pdCIsImNvbnNvbGUiLCJlcnJvciIsImxvZyIsImEiLCJKU09OIiwicGFyc2UiLCJzSlNPTiIsImV2YWwiLCJzdHJpbmdpZnkiLCJ0b1N0cmluZyIsIk9iamVjdCIsInByb3RvdHlwZSIsImlzQXJyYXkiLCJBcnJheSIsImNhbGwiLCJlc2NNYXAiLCJcIiIsIlxcIiwiXGIiLCJcZiIsIlxuIiwiXHIiLCJcdCIsImVzY0Z1bmMiLCJtIiwiY2hhckNvZGVBdCIsInN1YnN0ciIsImVzY1JFIiwidmFsdWUiLCJpc0Zpbml0ZSIsInRvSlNPTiIsInJlcyIsImkiLCJsZW5ndGgiLCJ0bXAiLCJrIiwiaGFzT3duUHJvcGVydHkiLCJwdXNoIiwiam9pbiIsInJlcGxhY2UiLCJrZXlzIiwiaGFzRG9udEVudW1CdWciLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImRvbnRFbnVtcyIsImRvbnRFbnVtc0xlbmd0aCIsIm9iaiIsIlR5cGVFcnJvciIsInByb3AiLCJyZXN1bHQiLCJhcmciLCJGdW5jdGlvbiIsImJpbmQiLCJvVGhpcyIsImFBcmdzIiwic2xpY2UiLCJhcmd1bWVudHMiLCJmVG9CaW5kIiwiZk5PUCIsImZCb3VuZCIsImFwcGx5IiwiY29uY2F0IiwiaW5kZXhPZiIsInNlYXJjaEVsZW1lbnQiLCJmcm9tSW5kZXgiLCJvIiwibGVuIiwibiIsImFicyIsIkluZmluaXR5IiwibWF4IiwiZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJmIiwiZ2xvYmFsIiwic2VsZiIsIlByb21pc2UiLCJ0IiwiciIsInMiLCJ1IiwiX2RlcmVxXyIsImNvZGUiLCJsIiwiMSIsImFueSIsInByb21pc2VzIiwicmV0IiwiU29tZVByb21pc2VBcnJheSIsInByb21pc2UiLCJzZXRIb3dNYW55Iiwic2V0VW53cmFwIiwiX1NvbWVQcm9taXNlQXJyYXkiLCIyIiwiQXN5bmMiLCJfY3VzdG9tU2NoZWR1bGVyIiwiX2lzVGlja1VzZWQiLCJfbGF0ZVF1ZXVlIiwiUXVldWUiLCJfbm9ybWFsUXVldWUiLCJfaGF2ZURyYWluZWRRdWV1ZXMiLCJfdHJhbXBvbGluZUVuYWJsZWQiLCJkcmFpblF1ZXVlcyIsIl9kcmFpblF1ZXVlcyIsIl9zY2hlZHVsZSIsInNjaGVkdWxlIiwiQXN5bmNJbnZva2VMYXRlciIsImZuIiwicmVjZWl2ZXIiLCJfcXVldWVUaWNrIiwiQXN5bmNJbnZva2UiLCJBc3luY1NldHRsZVByb21pc2VzIiwiX3B1c2hPbmUiLCJmaXJzdExpbmVFcnJvciIsInV0aWwiLCJzZXRTY2hlZHVsZXIiLCJwcmV2IiwiaGFzQ3VzdG9tU2NoZWR1bGVyIiwiZW5hYmxlVHJhbXBvbGluZSIsImRpc2FibGVUcmFtcG9saW5lSWZOZWNlc3NhcnkiLCJoYXNEZXZUb29scyIsImhhdmVJdGVtc1F1ZXVlZCIsImZhdGFsRXJyb3IiLCJpc05vZGUiLCJwcm9jZXNzIiwic3RkZXJyIiwid3JpdGUiLCJzdGFjayIsImV4aXQiLCJ0aHJvd0xhdGVyIiwic2V0VGltZW91dCIsImludm9rZUxhdGVyIiwiaW52b2tlIiwic2V0dGxlUHJvbWlzZXMiLCJfc2V0dGxlUHJvbWlzZXMiLCJpbnZva2VGaXJzdCIsInVuc2hpZnQiLCJfZHJhaW5RdWV1ZSIsInF1ZXVlIiwic2hpZnQiLCJfcmVzZXQiLCIuL3F1ZXVlIiwiLi9zY2hlZHVsZSIsIi4vdXRpbCIsIjMiLCJJTlRFUk5BTCIsInRyeUNvbnZlcnRUb1Byb21pc2UiLCJkZWJ1ZyIsImNhbGxlZEJpbmQiLCJyZWplY3RUaGlzIiwiXyIsIl9yZWplY3QiLCJ0YXJnZXRSZWplY3RlZCIsImNvbnRleHQiLCJwcm9taXNlUmVqZWN0aW9uUXVldWVkIiwiYmluZGluZ1Byb21pc2UiLCJfdGhlbiIsImJpbmRpbmdSZXNvbHZlZCIsInRoaXNBcmciLCJfYml0RmllbGQiLCJfcmVzb2x2ZUNhbGxiYWNrIiwidGFyZ2V0IiwiYmluZGluZ1JlamVjdGVkIiwiX3Byb3BhZ2F0ZUZyb20iLCJwcm9wYWdhdGVGcm9tRnVuY3Rpb24iLCJfYm91bmRWYWx1ZSIsImJvdW5kVmFsdWVGdW5jdGlvbiIsIm1heWJlUHJvbWlzZSIsIl90YXJnZXQiLCJfc2V0Qm91bmRUbyIsIl9zZXRPbkNhbmNlbCIsIl9ib3VuZFRvIiwiX2lzQm91bmQiLCJyZXNvbHZlIiwiNCIsIm5vQ29uZmxpY3QiLCJibHVlYmlyZCIsIm9sZCIsIi4vcHJvbWlzZSIsIjUiLCJjciIsImNyZWF0ZSIsImNhbGxlckNhY2hlIiwiZ2V0dGVyQ2FjaGUiLCJlbnN1cmVNZXRob2QiLCJtZXRob2ROYW1lIiwibWVzc2FnZSIsImNsYXNzU3RyaW5nIiwiY2FsbGVyIiwicG9wIiwibmFtZWRHZXR0ZXIiLCJpbmRleGVkR2V0dGVyIiwiaW5kZXgiLCJnZXRHZXR0ZXIiLCJjYW5FdmFsdWF0ZSIsImlzSWRlbnRpZmllciIsImFyZ3MiLCJnZXQiLCJwcm9wZXJ0eU5hbWUiLCJnZXR0ZXIiLCJpc0luZGV4IiwibWF5YmVHZXR0ZXIiLCI2IiwiUHJvbWlzZUFycmF5IiwiYXBpUmVqZWN0aW9uIiwidHJ5Q2F0Y2giLCJlcnJvck9iaiIsImFzeW5jIiwiX2FzeW5jIiwiY2FuY2VsIiwiY2FuY2VsbGF0aW9uIiwiX3dhcm4iLCJjaGlsZCIsIl9pc0NhbmNlbGxhYmxlIiwiX2NhbmNlbEJ5IiwiX2lzRm9sbG93aW5nIiwiX2ZvbGxvd2VlIiwiX2NhbmNlbEJyYW5jaGVkIiwiX2NhbmNlbGxhdGlvblBhcmVudCIsIl9zZXRXaWxsQmVDYW5jZWxsZWQiLCJfYnJhbmNoSGFzQ2FuY2VsbGVkIiwiX2JyYW5jaGVzUmVtYWluaW5nVG9DYW5jZWwiLCJfZW5vdWdoQnJhbmNoZXNIYXZlQ2FuY2VsbGVkIiwiY2FuY2VsbGVyIiwiX2ludm9rZU9uQ2FuY2VsIiwiX2NhbmNlbCIsIl9zZXRDYW5jZWxsZWQiLCJfY2FuY2VsUHJvbWlzZXMiLCJfbGVuZ3RoIiwiX3Vuc2V0T25DYW5jZWwiLCJfb25DYW5jZWxGaWVsZCIsImlzUGVuZGluZyIsIl9pc0NhbmNlbGxlZCIsImlzQ2FuY2VsbGFibGUiLCJpc0NhbmNlbGxlZCIsIl9kb0ludm9rZU9uQ2FuY2VsIiwib25DYW5jZWxDYWxsYmFjayIsImludGVybmFsT25seSIsIl9hdHRhY2hFeHRyYVRyYWNlIiwiX3Jlc3VsdENhbmNlbGxlZCIsIl9vbkNhbmNlbCIsIl9pbnZva2VJbnRlcm5hbE9uQ2FuY2VsIiwiNyIsIk5FWFRfRklMVEVSIiwiY2F0Y2hGaWx0ZXIiLCJpbnN0YW5jZXMiLCJjYiIsImJvdW5kVG8iLCJwcmVkaWNhdGVMb29wIiwiaXRlbSIsIm1hdGNoZXNQcmVkaWNhdGUiLCJpc09iamVjdCIsImdldEtleXMiLCJqIiwia2V5IiwiLi9lczUiLCI4IiwiQ29udGV4dCIsIl90cmFjZSIsIkNhcHR1cmVkVHJhY2UiLCJwZWVrQ29udGV4dCIsImNyZWF0ZUNvbnRleHQiLCJsb25nU3RhY2tUcmFjZXMiLCJsYXN0SW5kZXgiLCJjb250ZXh0U3RhY2siLCJfcHJvbWlzZUNyZWF0ZWQiLCJfcHVzaENvbnRleHQiLCJfcG9wQ29udGV4dCIsIl9wZWVrQ29udGV4dCIsInRyYWNlIiwiZGVhY3RpdmF0ZUxvbmdTdGFja1RyYWNlcyIsImFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzIiwiUHJvbWlzZV9wdXNoQ29udGV4dCIsIlByb21pc2VfcG9wQ29udGV4dCIsIlByb21pc2VfUGVla0NvbnRleHQiLCJQcm9taXNlX3BlZWtDb250ZXh0IiwiUHJvbWlzZV9wcm9taXNlQ3JlYXRlZCIsImN0eCIsIjkiLCJnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCIsIm5hbWUiLCJkZWZhdWx0RmlyZUV2ZW50IiwiY2FuY2VsbGF0aW9uRXhlY3V0ZSIsImV4ZWN1dG9yIiwicmVqZWN0Iiwib25DYW5jZWwiLCJfYXR0YWNoQ2FuY2VsbGF0aW9uQ2FsbGJhY2siLCJjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayIsInByZXZpb3VzT25DYW5jZWwiLCJjYW5jZWxsYXRpb25PbkNhbmNlbCIsImNhbmNlbGxhdGlvblNldE9uQ2FuY2VsIiwiY2FuY2VsbGF0aW9uQ2xlYXJDYW5jZWxsYXRpb25EYXRhIiwiY2FuY2VsbGF0aW9uUHJvcGFnYXRlRnJvbSIsImZsYWdzIiwiYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCIsImJpbmRpbmdQcm9wYWdhdGVGcm9tIiwiaXNGdWxmaWxsZWQiLCJsb25nU3RhY2tUcmFjZXNDYXB0dXJlU3RhY2tUcmFjZSIsImxvbmdTdGFja1RyYWNlc0F0dGFjaEV4dHJhVHJhY2UiLCJpZ25vcmVTZWxmIiwiY2FuQXR0YWNoVHJhY2UiLCJfcGFyZW50IiwiYXR0YWNoRXh0cmFUcmFjZSIsIl9fc3RhY2tDbGVhbmVkX18iLCJwYXJzZWQiLCJwYXJzZVN0YWNrQW5kTWVzc2FnZSIsIm5vdEVudW1lcmFibGVQcm9wIiwiY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zIiwicmV0dXJuVmFsdWUiLCJwcm9taXNlQ3JlYXRlZCIsIndGb3Jnb3R0ZW5SZXR1cm4iLCJfcmV0dXJuZWROb25VbmRlZmluZWQiLCJoYW5kbGVyTGluZSIsImNyZWF0b3JMaW5lIiwidHJhY2VMaW5lcyIsInNwbGl0IiwiY2xlYW5TdGFjayIsImxpbmUiLCJub2RlRnJhbWVQYXR0ZXJuIiwidGVzdCIsImxpbmVNYXRjaGVzIiwibWF0Y2giLCJwYXJzZUxpbmVQYXR0ZXJuIiwiZmlyc3RVc2VyTGluZSIsIm1zZyIsImRlcHJlY2F0ZWQiLCJyZXBsYWNlbWVudCIsIndhcm4iLCJzaG91bGRVc2VPd25UcmFjZSIsImNvbmZpZyIsIndhcm5pbmdzIiwid2FybmluZyIsIldhcm5pbmciLCJhY3RpdmVGaXJlRXZlbnQiLCJmb3JtYXRBbmRMb2dFcnJvciIsInJlY29uc3RydWN0U3RhY2siLCJzdGFja3MiLCJyZW1vdmVEdXBsaWNhdGVPckVtcHR5SnVtcHMiLCJzcGxpY2UiLCJyZW1vdmVDb21tb25Sb290cyIsImN1cnJlbnQiLCJjdXJyZW50TGFzdEluZGV4IiwiY3VycmVudExhc3RMaW5lIiwiY29tbW9uUm9vdE1lZXRQb2ludCIsImlzVHJhY2VMaW5lIiwic3RhY2tGcmFtZVBhdHRlcm4iLCJpc0ludGVybmFsRnJhbWUiLCJzaG91bGRJZ25vcmUiLCJpbmRlbnRTdGFja0ZyYW1lcyIsImNoYXJBdCIsInN0YWNrRnJhbWVzQXNBcnJheSIsInRpdGxlIiwiaXNTb2Z0IiwiZm9ybWF0U3RhY2siLCJTdHJpbmciLCJwcmludFdhcm5pbmciLCJmaXJlUmVqZWN0aW9uRXZlbnQiLCJsb2NhbEhhbmRsZXIiLCJyZWFzb24iLCJsb2NhbEV2ZW50RmlyZWQiLCJmb3JtYXROb25FcnJvciIsInN0ciIsInJ1c2VsZXNzVG9TdHJpbmciLCJuZXdTdHIiLCJzbmlwIiwibWF4Q2hhcnMiLCJsb25nU3RhY2tUcmFjZXNJc1N1cHBvcnRlZCIsImNhcHR1cmVTdGFja1RyYWNlIiwicGFyc2VMaW5lSW5mbyIsIm1hdGNoZXMiLCJwYXJzZUxpbmVJbmZvUmVnZXgiLCJmaWxlTmFtZSIsInBhcnNlSW50Iiwic2V0Qm91bmRzIiwibGFzdExpbmVFcnJvciIsImZpcnN0RmlsZU5hbWUiLCJsYXN0RmlsZU5hbWUiLCJmaXJzdFN0YWNrTGluZXMiLCJsYXN0U3RhY2tMaW5lcyIsImZpcnN0SW5kZXgiLCJibHVlYmlyZEZyYW1lUGF0dGVybiIsImluZm8iLCJfcHJvbWlzZXNDcmVhdGVkIiwidW5jeWNsZSIsInVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQiLCJwb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiIsImdldERvbWFpbiIsIl9nZXREb21haW4iLCJkZWJ1Z2dpbmciLCJlbnYiLCJzdXBwcmVzc1VuaGFuZGxlZFJlamVjdGlvbnMiLCJfZW5zdXJlUG9zc2libGVSZWplY3Rpb25IYW5kbGVkIiwiX3NldFJlamVjdGlvbklzVW5oYW5kbGVkIiwiX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbiIsIl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb25Jc0hhbmRsZWQiLCJfc2V0UmV0dXJuZWROb25VbmRlZmluZWQiLCJfaXNSZWplY3Rpb25VbmhhbmRsZWQiLCJfc2V0dGxlZFZhbHVlIiwiX3NldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQiLCJfdW5zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkIiwiX2lzVW5oYW5kbGVkUmVqZWN0aW9uTm90aWZpZWQiLCJfdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCIsIm9uUG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24iLCJkb21haW4iLCJkb21haW5CaW5kIiwib25VbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkIiwiZGlzYWJsZUxvbmdTdGFja1RyYWNlcyIsIlByb21pc2VfY2FwdHVyZVN0YWNrVHJhY2UiLCJfY2FwdHVyZVN0YWNrVHJhY2UiLCJQcm9taXNlX2F0dGFjaEV4dHJhVHJhY2UiLCJoYXNMb25nU3RhY2tUcmFjZXMiLCJmaXJlRG9tRXZlbnQiLCJDdXN0b21FdmVudCIsImV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImRvbUV2ZW50IiwidG9Mb3dlckNhc2UiLCJkZXRhaWwiLCJjYW5jZWxhYmxlIiwiRXZlbnQiLCJjcmVhdGVFdmVudCIsImluaXRDdXN0b21FdmVudCIsImZpcmVHbG9iYWxFdmVudCIsImVtaXQiLCJtZXRob2QiLCJldmVudFRvT2JqZWN0R2VuZXJhdG9yIiwicHJvbWlzZUZ1bGZpbGxlZCIsInByb21pc2VSZWplY3RlZCIsInByb21pc2VSZXNvbHZlZCIsInByb21pc2VDYW5jZWxsZWQiLCJwcm9taXNlQ2hhaW5lZCIsInVuaGFuZGxlZFJlamVjdGlvbiIsInJlamVjdGlvbkhhbmRsZWQiLCJnbG9iYWxFdmVudEZpcmVkIiwiZG9tRXZlbnRGaXJlZCIsIm9wdHMiLCJ3YXJuaW5nc09wdGlvbiIsIl9jbGVhckNhbmNlbGxhdGlvbkRhdGEiLCJfZXhlY3V0ZSIsIm1vbml0b3JpbmciLCJfZmlyZUV2ZW50IiwiaGFuZGxlciIsImluaGVyaXRzIiwibm9kZXMiLCJzdGFja1RvSW5kZXgiLCJub2RlIiwiY3VycmVudFN0YWNrIiwiY3ljbGVFZGdlTm9kZSIsImN1cnJlbnRDaGlsZExlbmd0aCIsInY4c3RhY2tGcmFtZVBhdHRlcm4iLCJ2OHN0YWNrRm9ybWF0dGVyIiwic3RhY2tUcmFjZUxpbWl0IiwiaWdub3JlVW50aWwiLCJlcnIiLCJoYXNTdGFja0FmdGVyVGhyb3ciLCJpc1RUWSIsImNvbG9yIiwiLi9lcnJvcnMiLCIxMCIsInJldHVybmVyIiwidGhyb3dlciIsInRoZW5SZXR1cm4iLCJ0aGVuVGhyb3ciLCJjYXRjaFRocm93IiwiX3JlYXNvbiIsImNhdWdodCIsImNhdGNoUmV0dXJuIiwiX3ZhbHVlIiwiMTEiLCJwcm9taXNlQWxsVGhpcyIsIlByb21pc2VBbGwiLCJQcm9taXNlTWFwU2VyaWVzIiwiUHJvbWlzZVJlZHVjZSIsInJlZHVjZSIsImFsbCIsImVhY2giLCJtYXBTZXJpZXMiLCIxMiIsInN1YkVycm9yIiwibmFtZVByb3BlcnR5IiwiZGVmYXVsdE1lc3NhZ2UiLCJTdWJFcnJvciIsImNvbnN0cnVjdG9yIiwiT3BlcmF0aW9uYWxFcnJvciIsImNhdXNlIiwiX1R5cGVFcnJvciIsIl9SYW5nZUVycm9yIiwiZXM1IiwiT2JqZWN0ZnJlZXplIiwiZnJlZXplIiwiQ2FuY2VsbGF0aW9uRXJyb3IiLCJUaW1lb3V0RXJyb3IiLCJBZ2dyZWdhdGVFcnJvciIsIlJhbmdlRXJyb3IiLCJtZXRob2RzIiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImVudW1lcmFibGUiLCJsZXZlbCIsImluZGVudCIsImxpbmVzIiwiZXJyb3JUeXBlcyIsIlJlamVjdGlvbkVycm9yIiwiMTMiLCJpc0VTNSIsImdldERlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJuYW1lcyIsImdldE93blByb3BlcnR5TmFtZXMiLCJnZXRQcm90b3R5cGVPZiIsInByb3BlcnR5SXNXcml0YWJsZSIsImRlc2NyaXB0b3IiLCJzZXQiLCJoYXMiLCJwcm90byIsIk9iamVjdEtleXMiLCJPYmplY3RHZXREZXNjcmlwdG9yIiwiT2JqZWN0RGVmaW5lUHJvcGVydHkiLCJkZXNjIiwiT2JqZWN0RnJlZXplIiwiT2JqZWN0R2V0UHJvdG90eXBlT2YiLCJBcnJheUlzQXJyYXkiLCIxNCIsIlByb21pc2VNYXAiLCJtYXAiLCJmaWx0ZXIiLCIxNSIsIlBhc3NUaHJvdWdoSGFuZGxlckNvbnRleHQiLCJ0eXBlIiwiY2FsbGVkIiwiY2FuY2VsUHJvbWlzZSIsIkZpbmFsbHlIYW5kbGVyQ2FuY2VsUmVhY3Rpb24iLCJmaW5hbGx5SGFuZGxlciIsImNoZWNrQ2FuY2VsIiwic3VjY2VlZCIsImZhaWwiLCJyZWFzb25PclZhbHVlIiwiaXNGaW5hbGx5SGFuZGxlciIsImlzUmVqZWN0ZWQiLCJfcGFzc1Rocm91Z2giLCJzdWNjZXNzIiwidGhlbiIsImxhc3RseSIsInRhcCIsIjE2IiwiUHJveHlhYmxlIiwicHJvbWlzZUZyb21ZaWVsZEhhbmRsZXIiLCJ5aWVsZEhhbmRsZXJzIiwidHJhY2VQYXJlbnQiLCJQcm9taXNlU3Bhd24iLCJnZW5lcmF0b3JGdW5jdGlvbiIsInlpZWxkSGFuZGxlciIsImludGVybmFsIiwiX2ZpbmFsbHlQcm9taXNlIiwiX3Byb21pc2UiLCJfc3RhY2siLCJfZ2VuZXJhdG9yRnVuY3Rpb24iLCJfcmVjZWl2ZXIiLCJfZ2VuZXJhdG9yIiwiX3lpZWxkSGFuZGxlcnMiLCJfeWllbGRlZFByb21pc2UiLCJfY2FuY2VsbGF0aW9uUGhhc2UiLCJlcnJvcnMiLCJfaXNSZXNvbHZlZCIsIl9jbGVhbnVwIiwiX2Z1bGZpbGwiLCJfcHJvbWlzZUNhbmNlbGxlZCIsImltcGxlbWVudHNSZXR1cm4iLCJjb3JvdXRpbmUiLCJyZXR1cm5TZW50aW5lbCIsIl9jb250aW51ZSIsIl9wcm9taXNlRnVsZmlsbGVkIiwibmV4dCIsIl9wcm9taXNlUmVqZWN0ZWQiLCJfcnVuIiwiX3JlamVjdENhbGxiYWNrIiwiZG9uZSIsImJpdEZpZWxkIiwiX3Byb3h5IiwiUHJvbWlzZVNwYXduJCIsImdlbmVyYXRvciIsInNwYXduIiwiYWRkWWllbGRIYW5kbGVyIiwiMTciLCJsYXN0Iiwic3ByZWFkIiwiMTgiLCJNYXBwaW5nUHJvbWlzZUFycmF5IiwibGltaXQiLCJfZmlsdGVyIiwiY29uc3RydWN0b3IkIiwiX2NhbGxiYWNrIiwiX3ByZXNlcnZlZFZhbHVlcyIsIl9saW1pdCIsIl9pbkZsaWdodCIsIl9xdWV1ZSIsIl9hc3luY0luaXQiLCJjb25jdXJyZW5jeSIsIl9pbml0JCIsIl9pbml0IiwidmFsdWVzIiwiX3ZhbHVlcyIsInByZXNlcnZlZFZhbHVlcyIsImNhbGxiYWNrIiwidG90YWxSZXNvbHZlZCIsIl90b3RhbFJlc29sdmVkIiwiX3Jlc29sdmUiLCJib29sZWFucyIsIjE5IiwiX3Jlc29sdmVGcm9tU3luY1ZhbHVlIiwiYXR0ZW1wdCIsIjIwIiwiaXNVbnR5cGVkRXJyb3IiLCJ3cmFwQXNPcGVyYXRpb25hbEVycm9yIiwickVycm9yS2V5IiwibWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uIiwibm9kZWJhY2tGb3JQcm9taXNlIiwibXVsdGlBcmdzIiwid3JhcHBlZCIsIm1heWJlV3JhcEFzRXJyb3IiLCIyMSIsInNwcmVhZEFkYXB0ZXIiLCJ2YWwiLCJub2RlYmFjayIsInN1Y2Nlc3NBZGFwdGVyIiwiZXJyb3JBZGFwdGVyIiwibmV3UmVhc29uIiwiYXNDYWxsYmFjayIsIm5vZGVpZnkiLCJhZGFwdGVyIiwiMjIiLCJjaGVjayIsIl9mdWxmaWxsbWVudEhhbmRsZXIwIiwiX3JlamVjdGlvbkhhbmRsZXIwIiwiX3Byb21pc2UwIiwiX3JlY2VpdmVyMCIsIl9yZXNvbHZlRnJvbUV4ZWN1dG9yIiwiZGVmZXJSZXNvbHZlIiwidiIsImRlZmVyUmVqZWN0IiwiZmlsbFR5cGVzIiwicCIsIm1ha2VTZWxmUmVzb2x1dGlvbkVycm9yIiwicmVmbGVjdEhhbmRsZXIiLCJQcm9taXNlSW5zcGVjdGlvbiIsIlVOREVGSU5FRF9CSU5ESU5HIiwiQVBQTFkiLCJjYXRjaEluc3RhbmNlcyIsInJlZmxlY3QiLCJkaWRGdWxmaWxsIiwiZGlkUmVqZWN0IiwiX3NldElzRmluYWwiLCJmdWxmaWxsbWVudFZhbHVlIiwicmVqZWN0aW9uUmVhc29uIiwib3JpZ2luYXRlc0Zyb21SZWplY3Rpb24iLCJnZXROZXdMaWJyYXJ5Q29weSIsImlzIiwiZnJvbU5vZGUiLCJmcm9tQ2FsbGJhY2siLCJfaXNGYXRlU2VhbGVkIiwiX3NldEFzeW5jR3VhcmFudGVlZCIsImNhc3QiLCJfc2V0RnVsZmlsbGVkIiwiZnVsZmlsbGVkIiwicmVqZWN0ZWQiLCJpbnRlcm5hbERhdGEiLCJoYXZlSW50ZXJuYWxEYXRhIiwic2V0dGxlciIsIl9zZXR0bGVQcm9taXNlQ3R4IiwiX3NldHRsZVByb21pc2VMYXRlQ2FuY2VsbGF0aW9uT2JzZXJ2ZXIiLCJfYWRkQ2FsbGJhY2tzIiwiX3NldExlbmd0aCIsIl9zZXRSZWplY3RlZCIsIl9zZXRGb2xsb3dpbmciLCJfaXNGaW5hbCIsIl91bnNldENhbmNlbGxlZCIsIl9yZWNlaXZlckF0IiwiX3Byb21pc2VBdCIsIl9mdWxmaWxsbWVudEhhbmRsZXJBdCIsIl9yZWplY3Rpb25IYW5kbGVyQXQiLCJfbWlncmF0ZUNhbGxiYWNrMCIsImZvbGxvd2VyIiwiZnVsZmlsbCIsIl9taWdyYXRlQ2FsbGJhY2tBdCIsImJhc2UiLCJwcm94eWFibGUiLCJzaG91bGRCaW5kIiwiX3NldEZvbGxvd2VlIiwic3luY2hyb25vdXMiLCJpZ25vcmVOb25FcnJvcldhcm5pbmdzIiwiZW5zdXJlRXJyb3JPYmplY3QiLCJoYXNTdGFjayIsIl9zZXR0bGVQcm9taXNlRnJvbUhhbmRsZXIiLCJ4IiwiX3NldHRsZVByb21pc2UiLCJpc1Byb21pc2UiLCJhc3luY0d1YXJhbnRlZWQiLCJfc2V0dGxlUHJvbWlzZTAiLCJfY2xlYXJDYWxsYmFja0RhdGFBdEluZGV4IiwiX2Z1bGZpbGxQcm9taXNlcyIsIl9yZWplY3RQcm9taXNlcyIsImRlZmVyIiwicGVuZGluZyIsInZlcnNpb24iLCJ0b0Zhc3RQcm9wZXJ0aWVzIiwiYiIsImMiLCIuL2FueS5qcyIsIi4vYXN5bmMiLCIuL2JpbmQiLCIuL2NhbGxfZ2V0LmpzIiwiLi9jYW5jZWwiLCIuL2NhdGNoX2ZpbHRlciIsIi4vY29udGV4dCIsIi4vZGVidWdnYWJpbGl0eSIsIi4vZGlyZWN0X3Jlc29sdmUiLCIuL2VhY2guanMiLCIuL2ZpbHRlci5qcyIsIi4vZmluYWxseSIsIi4vZ2VuZXJhdG9ycy5qcyIsIi4vam9pbiIsIi4vbWFwLmpzIiwiLi9tZXRob2QiLCIuL25vZGViYWNrIiwiLi9ub2RlaWZ5LmpzIiwiLi9wcm9taXNlX2FycmF5IiwiLi9wcm9taXNpZnkuanMiLCIuL3Byb3BzLmpzIiwiLi9yYWNlLmpzIiwiLi9yZWR1Y2UuanMiLCIuL3NldHRsZS5qcyIsIi4vc29tZS5qcyIsIi4vc3luY2hyb25vdXNfaW5zcGVjdGlvbiIsIi4vdGhlbmFibGVzIiwiLi90aW1lcnMuanMiLCIuL3VzaW5nLmpzIiwiMjMiLCJ0b1Jlc29sdXRpb25WYWx1ZSIsInJlc29sdmVWYWx1ZUlmRW1wdHkiLCJhc0FycmF5IiwiX3Jlc29sdmVFbXB0eUFycmF5IiwiX2l0ZXJhdGUiLCJnZXRBY3R1YWxMZW5ndGgiLCJzaG91bGRDb3B5VmFsdWVzIiwiaXNSZXNvbHZlZCIsIjI0IiwicHJvcHNGaWx0ZXIiLCJub0NvcHlQcm9wc1BhdHRlcm4iLCJpc1Byb21pc2lmaWVkIiwiX19pc1Byb21pc2lmaWVkX18iLCJoYXNQcm9taXNpZmllZCIsInN1ZmZpeCIsImdldERhdGFQcm9wZXJ0eU9yRGVmYXVsdCIsImRlZmF1bHRQcm9taXNpZmllZCIsImNoZWNrVmFsaWQiLCJzdWZmaXhSZWdleHAiLCJrZXlXaXRob3V0QXN5bmNTdWZmaXgiLCJwcm9taXNpZmlhYmxlTWV0aG9kcyIsImluaGVyaXRlZERhdGFLZXlzIiwicGFzc2VzRGVmYXVsdEZpbHRlciIsImRlZmF1bHRGaWx0ZXIiLCJtYWtlTm9kZVByb21pc2lmaWVkQ2xvc3VyZSIsIl9fIiwicHJvbWlzaWZpZWQiLCJUSElTIiwiZGVmYXVsdFRoaXMiLCJ3aXRoQXBwZW5kZWQiLCJwcm9taXNpZnlBbGwiLCJwcm9taXNpZmllciIsIlJlZ0V4cCIsImVzY2FwZUlkZW50UmVnZXgiLCJwcm9taXNpZmllZEtleSIsIm1ha2VOb2RlUHJvbWlzaWZpZWQiLCJwcm9taXNpZnkiLCJtYWtlTm9kZVByb21pc2lmaWVkRXZhbCIsImRlZmF1bHRTdWZmaXgiLCJub0NvcHlQcm9wcyIsImNvcHlEZXNjcmlwdG9ycyIsImlzQ2xhc3MiLCIyNSIsIlByb3BlcnRpZXNQcm9taXNlQXJyYXkiLCJlbnRyaWVzIiwiaXNNYXAiLCJFczZNYXAiLCJtYXBUb0VudHJpZXMiLCJfaXNNYXAiLCJwcm9wcyIsImNhc3RWYWx1ZSIsIk1hcCIsImV4dHJhY3RFbnRyeSIsInNpemUiLCJmb3JFYWNoIiwiZW50cmllc1RvTWFwIiwia2V5T2Zmc2V0IiwiMjYiLCJhcnJheU1vdmUiLCJzcmMiLCJzcmNJbmRleCIsImRzdCIsImRzdEluZGV4IiwiY2FwYWNpdHkiLCJfY2FwYWNpdHkiLCJfZnJvbnQiLCJfd2lsbEJlT3ZlckNhcGFjaXR5IiwiX2NoZWNrQ2FwYWNpdHkiLCJfdW5zaGlmdE9uZSIsImZyb250Iiwid3JhcE1hc2siLCJfcmVzaXplVG8iLCJvbGRDYXBhY2l0eSIsIm1vdmVJdGVtc0NvdW50IiwiMjciLCJyYWNlIiwicmFjZUxhdGVyIiwiYXJyYXkiLCIyOCIsIlJlZHVjdGlvblByb21pc2VBcnJheSIsImluaXRpYWxWYWx1ZSIsIl9lYWNoIiwiX2ZuIiwiX2luaXRpYWxWYWx1ZSIsIl9jdXJyZW50Q2FuY2VsbGFibGUiLCJfZWFjaFZhbHVlcyIsImNvbXBsZXRlZCIsInZhbHVlT3JSZWFzb24iLCJnb3RBY2N1bSIsImFjY3VtIiwiX2dvdEFjY3VtIiwiZ290VmFsdWUiLCJfZWFjaENvbXBsZXRlIiwic2VuZGVyIiwiX3Jlc3VsdENhbmNlbGxlZCQiLCIyOSIsIm5vQXN5bmNTY2hlZHVsZXIiLCJOYXRpdmVQcm9taXNlIiwiZ2V0TmF0aXZlUHJvbWlzZSIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJHbG9iYWxTZXRJbW1lZGlhdGUiLCJzZXRJbW1lZGlhdGUiLCJQcm9jZXNzTmV4dFRpY2siLCJuZXh0VGljayIsImlzUmVjZW50Tm9kZSIsIm5hdGl2ZVByb21pc2UiLCJuYXZpZ2F0b3IiLCJzdGFuZGFsb25lIiwiY29yZG92YSIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwidG9nZ2xlU2NoZWR1bGVkIiwiZGl2MiIsIm8yIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwib2JzZXJ2ZSIsInNjaGVkdWxlVG9nZ2xlIiwiZGlzY29ubmVjdCIsIjMwIiwiU2V0dGxlZFByb21pc2VBcnJheSIsIl9wcm9taXNlUmVzb2x2ZWQiLCJpbnNwZWN0aW9uIiwiX3NldHRsZWRWYWx1ZUZpZWxkIiwic2V0dGxlIiwiMzEiLCJfaG93TWFueSIsIl91bndyYXAiLCJfaW5pdGlhbGl6ZWQiLCJzb21lIiwiaG93TWFueSIsIkNBTkNFTExBVElPTiIsImlzQXJyYXlSZXNvbHZlZCIsIl9jYW5Qb3NzaWJseUZ1bGZpbGwiLCJfZ2V0UmFuZ2VFcnJvciIsImNvdW50IiwiX2FkZEZ1bGZpbGxlZCIsIl9mdWxmaWxsZWQiLCJfYWRkUmVqZWN0ZWQiLCJfY2hlY2tPdXRjb21lIiwiX3JlamVjdGVkIiwiMzIiLCJfX2lzQ2FuY2VsbGVkIiwiMzMiLCJnZXRUaGVuIiwiaXNBbnlCbHVlYmlyZFByb21pc2UiLCJkb1RoZW5hYmxlIiwiZG9HZXRUaGVuIiwiaGFzUHJvcCIsIjM0IiwiSGFuZGxlV3JhcHBlciIsImhhbmRsZSIsInN1Y2Nlc3NDbGVhciIsImNsZWFyVGltZW91dCIsImZhaWx1cmVDbGVhciIsImFmdGVyVmFsdWUiLCJkZWxheSIsIm1zIiwiYWZ0ZXJUaW1lb3V0IiwidGltZW91dCIsImhhbmRsZVdyYXBwZXIiLCIzNSIsImNhc3RQcmVzZXJ2aW5nRGlzcG9zYWJsZSIsInRoZW5hYmxlIiwiX2lzRGlzcG9zYWJsZSIsIl9nZXREaXNwb3NlciIsIl9zZXREaXNwb3NhYmxlIiwiZGlzcG9zZSIsInJlc291cmNlcyIsIml0ZXJhdG9yIiwidHJ5RGlzcG9zZSIsIkRpc3Bvc2VyIiwiZGF0YSIsIl9kYXRhIiwiX2NvbnRleHQiLCJGdW5jdGlvbkRpc3Bvc2VyIiwibWF5YmVVbndyYXBEaXNwb3NlciIsImlzRGlzcG9zZXIiLCJSZXNvdXJjZUxpc3QiLCJOVUxMIiwicmVzb3VyY2UiLCJkb0Rpc3Bvc2UiLCJfdW5zZXREaXNwb3NhYmxlIiwiZCIsInVzaW5nIiwiaW5wdXQiLCJzcHJlYWRBcmdzIiwiZGlzcG9zZXIiLCJyZWZsZWN0ZWRSZXNvdXJjZXMiLCJyZXN1bHRQcm9taXNlIiwiaW5zcGVjdGlvbnMiLCJfZGlzcG9zZXIiLCIzNiIsInRyeUNhdGNoZXIiLCJ0cnlDYXRjaFRhcmdldCIsImlzUHJpbWl0aXZlIiwibWF5YmVFcnJvciIsInNhZmVUb1N0cmluZyIsImFwcGVuZGVlIiwiZGVmYXVsdFZhbHVlIiwiaGFzTWV0aG9kcyIsImhhc01ldGhvZHNPdGhlclRoYW5Db25zdHJ1Y3RvciIsImhhc1RoaXNBc3NpZ25tZW50QW5kU3RhdGljTWV0aG9kcyIsInRoaXNBc3NpZ25tZW50UGF0dGVybiIsIkZha2VDb25zdHJ1Y3RvciIsInJpZGVudCIsImZpbGxlZFJhbmdlIiwicHJlZml4IiwiaXNFcnJvciIsImlnbm9yZSIsImZyb20iLCJ0byIsImRlZiIsImdsb2JhbE9iamVjdCIsIkNoaWxkIiwiUGFyZW50IiwiVCIsImV4Y2x1ZGVkUHJvdG90eXBlcyIsImlzRXhjbHVkZWRQcm90byIsInZpc2l0ZWRLZXlzIiwiZW51bWVyYXRpb24iLCJTeW1ib2wiLCJBcnJheUZyb20iLCJpdFJlc3VsdCIsIml0IiwiY2hyb21lIiwibG9hZFRpbWVzIiwidmVyc2lvbnMiLCJOdW1iZXIiLCJQIiwiU1ciLCJGTEFTSCIsIlNIT0NLV0FWRV9GTEFTSCIsIlNIT0NLV0FWRV9GTEFTSF9BWCIsIkZMQVNIX01JTUVfVFlQRSIsIm5hdiIsInBhcnNlRmxvYXQiLCJwbHVnaW5zIiwibWltZXMiLCJtaW1lVHlwZXMiLCJkZXNjcmlwdGlvbiIsImVuYWJsZWRQbHVnaW4iLCJBY3RpdmVYT2JqZWN0IiwiR2V0VmFyaWFibGUiLCJzd2ZvYmplY3QiLCJMIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhYyIsImFkIiwiQyIsInN0eWxlIiwiZGlzcGxheSIsImgiLCJhcHBlbmRDaGlsZCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImFlIiwiYWEiLCJYIiwiYWIiLCJNIiwiUSIsImFkZEV2ZW50TGlzdGVuZXIiLCJEIiwiYXR0YWNoRXZlbnQiLCJnIiwib25sb2FkIiwiWSIsInNldEF0dHJpYnV0ZSIsInEiLCJhZyIsIk8iLCJwdiIsImFmIiwiSCIsImFqIiwiYWkiLCJjYWxsYmFja0ZuIiwiYWgiLCJGIiwic3dmVmVyc2lvbiIsIndrIiwiZXhwcmVzc0luc3RhbGwiLCJBIiwiYWwiLCJnZXRBdHRyaWJ1dGUiLCJzdHlsZWNsYXNzIiwiYWxpZ24iLCJhayIsIlIiLCJ3IiwicmVmIiwieiIsIlNldFZhcmlhYmxlIiwibm9kZU5hbWUiLCJ0b1VwcGVyQ2FzZSIsIndpbiIsIm1hYyIsIlciLCJFIiwiQiIsIkkiLCJKIiwiUyIsImllIiwiZmxhc2h2YXJzIiwicmVhZHlTdGF0ZSIsImluc2VydEJlZm9yZSIsInkiLCJyZXBsYWNlQ2hpbGQiLCJpbm5lckhUTUwiLCJjaGlsZE5vZGVzIiwibm9kZVR5cGUiLCJjbG9uZU5vZGUiLCJmaXJzdENoaWxkIiwiVSIsImdldEVsZW1lbnRCeUlkIiwiSyIsIkciLCJzdHlsZVNoZWV0cyIsImFkZFJ1bGUiLCJjcmVhdGVUZXh0Tm9kZSIsInZpc2liaWxpdHkiLCJOIiwiZXhlYyIsIloiLCJWIiwidXNlckFnZW50IiwicGxhdGZvcm0iLCJhcHBOYW1lIiwidzMiLCJib2R5IiwiZGV0YWNoRXZlbnQiLCJ0b3AiLCJkb2N1bWVudEVsZW1lbnQiLCJkb1Njcm9sbCIsInJlZ2lzdGVyT2JqZWN0IiwiZ2V0T2JqZWN0QnlJZCIsImVtYmVkU1dGIiwiYW4iLCJhcSIsImFyIiwiYW8iLCJhbSIsImFwIiwiYXQiLCJhdSIsInN3aXRjaE9mZkF1dG9IaWRlU2hvdyIsImVuYWJsZVVyaUVuY29kaW5nIiwidWEiLCJnZXRGbGFzaFBsYXllclZlcnNpb24iLCJtYWpvciIsIm1pbm9yIiwicmVsZWFzZSIsImhhc0ZsYXNoUGxheWVyVmVyc2lvbiIsImNyZWF0ZVNXRiIsInNob3dFeHByZXNzSW5zdGFsbCIsInJlbW92ZVNXRiIsImNyZWF0ZUNTUyIsImFkZERvbUxvYWRFdmVudCIsImFkZExvYWRFdmVudCIsImdldFF1ZXJ5UGFyYW1WYWx1ZSIsInNlYXJjaCIsImhhc2giLCJzdWJzdHJpbmciLCJleHByZXNzSW5zdGFsbENhbGxiYWNrIiwib24iLCJldmVudE5hbWUiLCJ0cmlnZ2VyIiwid3JhcCIsImFkSWQiLCJnZXRDb25maWciLCJWcGFpZGZsYXNoV3JhcHBlcnMiLCJhZExvYWRlZENsb3N1cmUiLCJzdGFydEFkIiwiYWRFcnJvckNsb3N1cmUiLCJhZENvbXBsZXRlQ2xvc3VyZSIsInBhdXNlZENsb3N1cmUiLCJyZXN1bWVkQ2xvc3VyZSIsIm11dGVDbG9zdXJlIiwidW5tdXRlQ2xvc3VyZSIsImFkU3RhcnRlZENsb3N1cmUiLCJzdGFydEZsYXNoV3JhcHBlciIsIlNka0ludGVncmF0aW9uIiwibG9hZEFkIiwidHBsIiwidm9sdW1lIiwidmFzdFVybCIsImdldFZhc3RVcmwiLCJWcGFpZFNvdXJjZSIsImNoZWNrVW5pdFNvdXJjZSIsImFkZFdyYXBwZXJFbCIsImluaXRXcmFwcGVyIiwic2RrVW5pcXVlIiwiaW5pdEV2ZW50cyIsIlZQQUlEIiwiYmxvY2tlciIsImNsYXNzTmFtZSIsImNvbnRhaW5lckVsIiwib25SZWFkeSIsImVtYmVkIiwiaWZyYW1lIiwiaUZ3aW5kb3ciLCJjb250ZW50V2luZG93IiwidmlkZW9BZExheWVyIiwidmlkZW9UYWciLCJzY3JpcHQiLCJtYXJnaW4iLCJjYW5QbGF5VHlwZSIsImdldFZQQUlEQWQiLCJpbml0VlBBSUQiLCJzdWJzY3JpYmUiLCJkZXN0cm95Iiwic3RvcEFkIiwiaGFuZHNoYWtlVmVyc2lvbiIsImluaXRBZCIsInZpZGVvU2xvdENhbkF1dG9QbGF5IiwidmlkZW9TbG90Iiwic2xvdCIsIl92aWRlb1RhZyIsInBvc2l0aW9uIiwiX3ZpZGVvQWRMYXllciIsIl9zY3JpcHRUYWciLCJfaUZyYW1lIiwiYm9yZGVyIiwicGFyc2VBbmRTYXZlQ29uZmlnIiwieG1sIiwicHJlcGFyZVhNTCIsIl9ET01QYXJzZXIiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJ4bWxEb2MiLCJsb2FkWE1MIiwicGFyc2VFcnJvciIsImVycm9yQ29kZSIsIm15RXJyIiwibm9kZVZhbHVlIiwibG9hZENvbmZpZyIsImdldENvbmZpZ1VybCIsInhkciIsIlhEb21haW5SZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJ4aHR0cCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInN0YXR1cyIsInJlc3BvbnNlVGV4dCIsIm9wZW4iLCJzZW5kIiwiZ2V0VlBBSURNb2RlIiwiVlBBSURNb2RlIiwiX29wdGlvbnMiLCJjcmVhdGVWUEFJRCIsIlZQQUlEQ2xpZW50IiwibW9kZUluZGV4IiwibW9kZSIsImluaXRFdmVudExpc3RlbmVyIiwiaXNTU1AiLCJ1c2VNb2RlIiwibW9kZVR5cGUiLCJWUEFJREZhY3RvcnkiLCJmbGFzaCIsImpzIiwiaW5pdEV2ZW50IiwicHJveHlFdmVudCIsIm9mZiIsImNhbGxNZXRob2QiLCJpc1ZQQUlEUmVhZHkiLCJza2lwQWQiLCJtdXRlIiwiY2xiIiwic2F2ZWRWb2x1bWUiLCJ1bm11dGUiLCJzZXRBZFZvbHVtZSIsImdldEFkVm9sdW1lIiwicGF1c2VBZCIsInJlc3VtZUFkIiwicmVzaXplQWQiLCJpbml0T3V0c3RyZWFtIiwiaXNOYU4iLCJjcmVhdGVFbCIsImVsIiwiYWRDb250YWluZXIiLCJwYXJlbnRFbCIsInRhZ05hbWUiLCJwYXJzZXIiLCJudW1iZXIiLCJib29sIiwic2NyaXB0VGFncyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsS0FBQUMsV0NFQSxRQUFBQyxnQkFDQUMsS0FBQUMsVUNNQSxRQUFBQyxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLElBQUFKLEVBQ0EsS0FBQSxJQUFBSyxPQUFBLFVBR0FSLE1BQUFTLEtBQUFDLG1CQUFBQyxPQUFBQyxTQUFBQyxNQUFBRixPQUFBRyxPQUFBRixTQUFBQyxLQUFBRSxTQUFBQyxTQUFBTCxPQUFBQyxTQUFBQyxNQUNBYixLQUFBaUIsSUFBQSxHQUFBQyxPQUFBQyxVQUNBbkIsS0FBQUssT0FBQUEsR0FBQSxJQUNBTCxLQUFBSSxNQUFBQSxHQUFBLElBQ0FKLEtBQUFNLElBQUFBLEdBQUEsRUFDQU4sS0FBQUcsSUFBQUEsRUFDQUgsS0FBQU8sVUFBQUEsRUNuQkEsUUFBQWEsYUFBQUMsR0FDQSxJQUFB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RUFBQXI4QixFQUVBLEtBQ0FwTyxFQUFBeEIsS0FBQUMsTUFBQXVCLEdBQ0EsTUFBQTJhLEdBQ0EzYSxHQUFBLEVBR0EsUUFBQUEsR0FFQXZCLE1BQUEsU0FBQWdzQyxFQUFBcjhCLEdBQ0EsR0FBQXBPLEVBRUEsS0FDQUEsRUFBQXlxQyxFQUFBbk0sYUFBQSxrQkFBQWx3QixHQUNBLE1BQUExTCxHQUNBLE1BQUEvRyxXQUdBLE1BQUFxRSxNQUlBLFdBQ0EsR0FBQWdyQyxHQUFBcHVDLFNBQUFtL0IscUJBQUEsU0FFQSxLQUFBLEdBQUFodUIsS0FBQWk5QixHQUFBLENBQ0EsR0FBQWh2QyxHQUFBNnVDLEVBQUFDLE9BQUFFLEVBQUFqOUIsR0FBQSxNQUVBL1IsS0FBQXV1QyxFQUFBdnVDLElBQ0FzdUMsR0FDQXJ1QyxNQUFBNHVDLEVBQUFDLE9BQUFFLEVBQUFqOUIsR0FBQSxTQUNBN1IsT0FBQTJ1QyxFQUFBQyxPQUFBRSxFQUFBajlCLEdBQUEsVUFDQWs3QixNQUFBNEIsRUFBQUUsS0FBQUMsRUFBQWo5QixHQUFBLE9BQ0EyNkIsVUFBQW1DLEVBQUF4WixNQUFBMlosRUFBQWo5QixHQUFBLFFBQ0EvUixJQUFBQSxFQUNBdXBDLFlBQUFpRixFQUFBUSxFQUFBajlCLFVBc0NBdlIsVUFBQThrQyxJQUNBbkUsU0FFQTNnQyxPQUFBMmdDLE9BQUFBLFFDNjVNRTNnQyIsImZpbGUiOiJvdXRzdHJlYW0ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHJvb3QgPSByb290IHx8d2luZG93O1xuaWYoIXJvb3QuY29uc29sZSl7XG4gICAgcm9vdC5jb25zb2xlID0ge1xuICAgICAgICBsb2c6IGZ1bmN0aW9uKGEpe1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oYSl7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5pZiAoIXJvb3QuSlNPTikge1xuICAgIHJvb3QuSlNPTiA9IHtcbiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uKHNKU09OKSB7IHJldHVybiBldmFsKCcoJyArIHNKU09OICsgJyknKTsgfSxcbiAgICAgICAgc3RyaW5naWZ5OiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbiAgICAgICAgICAgIHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gdG9TdHJpbmcuY2FsbChhKSA9PT0gJ1tvYmplY3QgQXJyYXldJzsgfTtcbiAgICAgICAgICAgIHZhciBlc2NNYXAgPSB7J1wiJzogJ1xcXFxcIicsICdcXFxcJzogJ1xcXFxcXFxcJywgJ1xcYic6ICdcXFxcYicsICdcXGYnOiAnXFxcXGYnLCAnXFxuJzogJ1xcXFxuJywgJ1xccic6ICdcXFxccicsICdcXHQnOiAnXFxcXHQnfTtcbiAgICAgICAgICAgIHZhciBlc2NGdW5jID0gZnVuY3Rpb24gKG0pIHsgcmV0dXJuIGVzY01hcFttXSB8fCAnXFxcXHUnICsgKG0uY2hhckNvZGVBdCgwKSArIDB4MTAwMDApLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSk7IH07XG4gICAgICAgICAgICB2YXIgZXNjUkUgPSAvW1xcXFxcIlxcdTAwMDAtXFx1MDAxRlxcdTIwMjhcXHUyMDI5XS9nO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0cmluZ2lmeSh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnbnVsbCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc0Zpbml0ZSh2YWx1ZSkgPyB2YWx1ZS50b1N0cmluZygpIDogJ251bGwnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUudG9KU09OID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5naWZ5KHZhbHVlLnRvSlNPTigpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9ICdbJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzICs9IChpID8gJywgJyA6ICcnKSArIHN0cmluZ2lmeSh2YWx1ZVtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzICsgJ10nO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShrKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnB1c2goc3RyaW5naWZ5KGspICsgJzogJyArIHN0cmluZ2lmeSh2YWx1ZVtrXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd7JyArIHRtcC5qb2luKCcsICcpICsgJ30nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAnXCInICsgdmFsdWUudG9TdHJpbmcoKS5yZXBsYWNlKGVzY1JFLCBlc2NGdW5jKSArICdcIic7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSgpXG4gICAgfTtcbn1cblxuLy8gRnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3Qva2V5c1xuaWYgKCFPYmplY3Qua2V5cykge1xuICAgIE9iamVjdC5rZXlzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXG4gICAgICAgICAgICBoYXNEb250RW51bUJ1ZyA9ICEoeyB0b1N0cmluZzogbnVsbCB9KS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgndG9TdHJpbmcnKSxcbiAgICAgICAgICAgIGRvbnRFbnVtcyA9IFtcbiAgICAgICAgICAgICAgICAndG9TdHJpbmcnLFxuICAgICAgICAgICAgICAgICd0b0xvY2FsZVN0cmluZycsXG4gICAgICAgICAgICAgICAgJ3ZhbHVlT2YnLFxuICAgICAgICAgICAgICAgICdoYXNPd25Qcm9wZXJ0eScsXG4gICAgICAgICAgICAgICAgJ2lzUHJvdG90eXBlT2YnLFxuICAgICAgICAgICAgICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsXG4gICAgICAgICAgICAgICAgJ2NvbnN0cnVjdG9yJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGRvbnRFbnVtc0xlbmd0aCA9IGRvbnRFbnVtcy5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnICYmICh0eXBlb2Ygb2JqICE9PSAnZnVuY3Rpb24nIHx8IG9iaiA9PT0gbnVsbCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3Qua2V5cyBjYWxsZWQgb24gbm9uLW9iamVjdCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW10sIHByb3AsIGk7XG5cbiAgICAgICAgICAgIGZvciAocHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGhhc0RvbnRFbnVtQnVnKSB7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRvbnRFbnVtc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgZG9udEVudW1zW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZG9udEVudW1zW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgfSgpKTtcbn1cblxuaWYgKCFBcnJheS5pc0FycmF5KSB7XG4gICAgQXJyYXkuaXNBcnJheSA9IGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfTtcbn1cblxuaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuYmluZCkge1xuICAgIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24ob1RoaXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBjbG9zZXN0IHRoaW5nIHBvc3NpYmxlIHRvIHRoZSBFQ01BU2NyaXB0IDVcbiAgICAgICAgICAgIC8vIGludGVybmFsIElzQ2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kIC0gd2hhdCBpcyB0cnlpbmcgdG8gYmUgYm91bmQgaXMgbm90IGNhbGxhYmxlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYUFyZ3MgICA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksXG4gICAgICAgICAgICBmVG9CaW5kID0gdGhpcyxcbiAgICAgICAgICAgIGZOT1AgICAgPSBmdW5jdGlvbigpIHt9LFxuICAgICAgICAgICAgZkJvdW5kICA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmVG9CaW5kLmFwcGx5KHRoaXMgaW5zdGFuY2VvZiBmTk9QXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIDogb1RoaXMsXG4gICAgICAgICAgICAgICAgICAgIGFBcmdzLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0aGlzLnByb3RvdHlwZSkge1xuICAgICAgICAgICAgLy8gRnVuY3Rpb24ucHJvdG90eXBlIGRvZXNuJ3QgaGF2ZSBhIHByb3RvdHlwZSBwcm9wZXJ0eVxuICAgICAgICAgICAgZk5PUC5wcm90b3R5cGUgPSB0aGlzLnByb3RvdHlwZTtcbiAgICAgICAgfVxuICAgICAgICBmQm91bmQucHJvdG90eXBlID0gbmV3IGZOT1AoKTtcblxuICAgICAgICByZXR1cm4gZkJvdW5kO1xuICAgIH07XG59XG5cbi8vIFByb2R1Y3Rpb24gc3RlcHMgb2YgRUNNQS0yNjIsIEVkaXRpb24gNSwgMTUuNC40LjE0XG4vLyBSZWZlcmVuY2U6IGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuNC40LjE0XG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmRleE9mKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcblxuICAgICAgICB2YXIgaztcblxuICAgICAgICAvLyAxLiBMZXQgbyBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgVG9PYmplY3QgcGFzc2luZ1xuICAgICAgICAvLyAgICB0aGUgdGhpcyB2YWx1ZSBhcyB0aGUgYXJndW1lbnQuXG4gICAgICAgIGlmICh0aGlzID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widGhpc1wiIGlzIG51bGwgb3Igbm90IGRlZmluZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvID0gT2JqZWN0KHRoaXMpO1xuXG4gICAgICAgIC8vIDIuIExldCBsZW5WYWx1ZSBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIEdldFxuICAgICAgICAvLyAgICBpbnRlcm5hbCBtZXRob2Qgb2YgbyB3aXRoIHRoZSBhcmd1bWVudCBcImxlbmd0aFwiLlxuICAgICAgICAvLyAzLiBMZXQgbGVuIGJlIFRvVWludDMyKGxlblZhbHVlKS5cbiAgICAgICAgdmFyIGxlbiA9IG8ubGVuZ3RoID4+PiAwO1xuXG4gICAgICAgIC8vIDQuIElmIGxlbiBpcyAwLCByZXR1cm4gLTEuXG4gICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDUuIElmIGFyZ3VtZW50IGZyb21JbmRleCB3YXMgcGFzc2VkIGxldCBuIGJlXG4gICAgICAgIC8vICAgIFRvSW50ZWdlcihmcm9tSW5kZXgpOyBlbHNlIGxldCBuIGJlIDAuXG4gICAgICAgIHZhciBuID0gK2Zyb21JbmRleCB8fCAwO1xuXG4gICAgICAgIGlmIChNYXRoLmFicyhuKSA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIG4gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gNi4gSWYgbiA+PSBsZW4sIHJldHVybiAtMS5cbiAgICAgICAgaWYgKG4gPj0gbGVuKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cblxuICAgICAgICAvLyA3LiBJZiBuID49IDAsIHRoZW4gTGV0IGsgYmUgbi5cbiAgICAgICAgLy8gOC4gRWxzZSwgbjwwLCBMZXQgayBiZSBsZW4gLSBhYnMobikuXG4gICAgICAgIC8vICAgIElmIGsgaXMgbGVzcyB0aGFuIDAsIHRoZW4gbGV0IGsgYmUgMC5cbiAgICAgICAgayA9IE1hdGgubWF4KG4gPj0gMCA/IG4gOiBsZW4gLSBNYXRoLmFicyhuKSwgMCk7XG5cbiAgICAgICAgLy8gOS4gUmVwZWF0LCB3aGlsZSBrIDwgbGVuXG4gICAgICAgIHdoaWxlIChrIDwgbGVuKSB7XG4gICAgICAgICAgICAvLyBhLiBMZXQgUGsgYmUgVG9TdHJpbmcoaykuXG4gICAgICAgICAgICAvLyAgIFRoaXMgaXMgaW1wbGljaXQgZm9yIExIUyBvcGVyYW5kcyBvZiB0aGUgaW4gb3BlcmF0b3JcbiAgICAgICAgICAgIC8vIGIuIExldCBrUHJlc2VudCBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlXG4gICAgICAgICAgICAvLyAgICBIYXNQcm9wZXJ0eSBpbnRlcm5hbCBtZXRob2Qgb2YgbyB3aXRoIGFyZ3VtZW50IFBrLlxuICAgICAgICAgICAgLy8gICBUaGlzIHN0ZXAgY2FuIGJlIGNvbWJpbmVkIHdpdGggY1xuICAgICAgICAgICAgLy8gYy4gSWYga1ByZXNlbnQgaXMgdHJ1ZSwgdGhlblxuICAgICAgICAgICAgLy8gICAgaS4gIExldCBlbGVtZW50SyBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIEdldFxuICAgICAgICAgICAgLy8gICAgICAgIGludGVybmFsIG1ldGhvZCBvZiBvIHdpdGggdGhlIGFyZ3VtZW50IFRvU3RyaW5nKGspLlxuICAgICAgICAgICAgLy8gICBpaS4gIExldCBzYW1lIGJlIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlXG4gICAgICAgICAgICAvLyAgICAgICAgU3RyaWN0IEVxdWFsaXR5IENvbXBhcmlzb24gQWxnb3JpdGhtIHRvXG4gICAgICAgICAgICAvLyAgICAgICAgc2VhcmNoRWxlbWVudCBhbmQgZWxlbWVudEsuXG4gICAgICAgICAgICAvLyAgaWlpLiAgSWYgc2FtZSBpcyB0cnVlLCByZXR1cm4gay5cbiAgICAgICAgICAgIGlmIChrIGluIG8gJiYgb1trXSA9PT0gc2VhcmNoRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaysrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9O1xufSIsIlxuZnVuY3Rpb24gRXZlbnRNYW5hZ2VyKCkge1xuICAgIHRoaXMuZXZlbnRzID0ge307XG59XG5cbkV2ZW50TWFuYWdlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMuZXZlbnRzW2V2ZW50TmFtZSArICcnXSA9IGNhbGxiYWNrO1xufTtcblxuRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgIHZhciBjYWxsYmFjayA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XG5cbiAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjYWxsYmFjay5jYWxsKG51bGwsIGRhdGEpO1xufTsiLCIvKipcbiAqIEBwYXJhbSBhaWQge251bWJlcn1cbiAqIEBwYXJhbSB3aWR0aCB7bnVtYmVyfVxuICogQHBhcmFtIGhlaWdodCB7bnVtYmVyfVxuICogQHBhcmFtIHNpZCB7bnVtYmVyfVxuICogQHBhcmFtIGNvbmZpZ1VybCB7c3RyaW5nfVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFdyYXBwZXIoYWlkLCB3aWR0aCwgaGVpZ2h0LCBzaWQsIGNvbmZpZ1VybCkge1xuICAgIGlmICghYWlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU2V0IGFpZCcpXG4gICAgfVxuXG4gICAgdGhpcy5ob3N0ID0gZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmICE9IHdpbmRvdy5wYXJlbnQubG9jYXRpb24uaHJlZiA/IGRvY3VtZW50LnJlZmVycmVyIDogd2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgIHRoaXMuY2QgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodCB8fCAzMDA7XG4gICAgdGhpcy53aWR0aCA9IHdpZHRoIHx8IDQwMDtcbiAgICB0aGlzLnNpZCA9IHNpZCB8fCAwO1xuICAgIHRoaXMuYWlkID0gYWlkO1xuICAgIHRoaXMuY29uZmlnVXJsID0gY29uZmlnVXJsO1xufVxuXG5XcmFwcGVyLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKGFkSWQpIHtcbiAgICB2YXIgY29uZmlnID0gdGhpcy5nZXRDb25maWcoYWRJZCksXG4gICAgICAgIGV2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIoKSxcbiAgICAgICAgd2lkdGggPSB0aGlzLndpZHRoLFxuICAgICAgICBoZWlnaHQgPSB0aGlzLmhlaWdodDtcblxuICAgIGlmICghd2luZG93LlZwYWlkZmxhc2hXcmFwcGVycykge1xuICAgICAgICB3aW5kb3cuVnBhaWRmbGFzaFdyYXBwZXJzID0ge31cbiAgICB9XG5cbiAgICB3aW5kb3cuVnBhaWRmbGFzaFdyYXBwZXJzW2FkSWRdID0ge307XG5cbiAgICB3aW5kb3cuVnBhaWRmbGFzaFdyYXBwZXJzW2FkSWRdID0ge1xuICAgICAgICBhZExvYWRlZENsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdsb2FkZWQnKTtcbiAgICAgICAgICAgIHdpbmRvd1tcIlNka0ludGVncmF0aW9uXCIgKyBhZElkXS5zdGFydEFkKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkRXJyb3JDbG9zdXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcignZXJyb3InKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRDb21wbGV0ZUNsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdjb21wbGV0ZScpO1xuICAgICAgICB9LFxuICAgICAgICBwYXVzZWRDbG9zdXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcigncGF1c2VkJyk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3VtZWRDbG9zdXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcigncmVzdW1lZCcpO1xuICAgICAgICB9LFxuICAgICAgICBtdXRlQ2xvc3VyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ211dGUnKTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5tdXRlQ2xvc3VyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ3VubXV0ZScpO1xuICAgICAgICB9LFxuICAgICAgICBhZFN0YXJ0ZWRDbG9zdXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcignc3RhcnRlZCcpO1xuICAgICAgICB9LFxuICAgICAgICBzdGFydEZsYXNoV3JhcHBlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ3JlYWR5Jyk7XG4gICAgICAgICAgICB2YXIgU2RrSW50ZWdyYXRpb24gPSB3aW5kb3dbXCJTZGtJbnRlZ3JhdGlvblwiICsgYWRJZF07XG4gICAgICAgICAgICBTZGtJbnRlZ3JhdGlvbi53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgU2RrSW50ZWdyYXRpb24uaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgU2RrSW50ZWdyYXRpb24ubG9hZEFkKGNvbmZpZyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGV2ZW50TWFuYWdlcjtcbn07XG5cbldyYXBwZXIucHJvdG90eXBlLmdldENvbmZpZyA9IGZ1bmN0aW9uIChhZElkKSB7XG4gICAgdmFyIHRwbCA9IFwid2luZG93LlZwYWlkZmxhc2hXcmFwcGVyc1tcIiArIGFkSWQgKyBcIl1cIjtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhZENvbXBsZXRlQ2xvc3VyZTogdHBsICsgXCIuYWRDb21wbGV0ZUNsb3N1cmVcIixcbiAgICAgICAgYWRTdGFydGVkQ2xvc3VyZTogdHBsICsgXCIuYWRTdGFydGVkQ2xvc3VyZVwiLFxuICAgICAgICBhZExvYWRlZENsb3N1cmU6IHRwbCArIFwiLmFkTG9hZGVkQ2xvc3VyZVwiLFxuICAgICAgICBhZEVycm9yQ2xvc3VyZTogdHBsICsgXCIuYWRFcnJvckNsb3N1cmVcIixcbiAgICAgICAgcmVzdW1lZENsb3N1cmU6IHRwbCArIFwiLnJlc3VtZWRDbG9zdXJlXCIsXG4gICAgICAgIHBhdXNlZENsb3N1cmU6IHRwbCArIFwiLnBhdXNlZENsb3N1cmVcIixcbiAgICAgICAgdW5tdXRlQ2xvc3VyZTogdHBsICsgXCIudW5tdXRlQ2xvc3VyZVwiLFxuICAgICAgICBtdXRlQ2xvc3VyZTogdHBsICsgXCIubXV0ZUNsb3N1cmVcIixcbiAgICAgICAgdm9sdW1lOiAxLFxuICAgICAgICB3aWR0aDogdGhpcy53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcbiAgICAgICAgdmFzdFVybDogdGhpcy5nZXRWYXN0VXJsKClcbiAgICB9KVxufTtcblxuV3JhcHBlci5wcm90b3R5cGUuZ2V0VmFzdFVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWdVcmwgfHwgJy8vdmFzdC52aWRlZS50di92YXN0LXByb3h5Lz9haWQ9JyArIHRoaXMuYWlkICtcbiAgICAgICAgJyZjb250ZW50X3BhZ2VfdXJsPScgKyB0aGlzLmhvc3QgK1xuICAgICAgICAnJnBsYXllcl9oZWlnaHQ9JyArIHRoaXMuaGVpZ2h0ICtcbiAgICAgICAgJyZwbGF5ZXJfd2lkdGg9JyArIHRoaXMud2lkdGggK1xuICAgICAgICAnJnNpZD0nICsgdGhpcy5zaWQgK1xuICAgICAgICAnJmNiPScgKyB0aGlzLmNkXG59O1xuIiwiZnVuY3Rpb24gRmxhc2hDbGllbnQob3B0aW9ucykge1xuICAgIGlmICghZ2V0Rmxhc2hWZXJzaW9uKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGbGFzaCBQbGF5ZXIgbm90IGluc3RhbGxlZCEnKTtcbiAgICB9XG5cbiAgICB0aGlzLmlkID0gTWF0aC5yb3VuZCgoIG5ldyBEYXRlKCkgKS5nZXRUaW1lKCkgLyAxMDAwMCArIE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMCk7XG4gICAgdGhpcy51bml0U3JjID0gJy8vcGxheWVyLnZpZGVlLnR2L3YyLjEvcmVzb3VyY2VzL2xpYnMvdmlkZWVqcy1wbGF5ZXIuc3dmJztcbiAgICB0aGlzLmZsYXNoVmVyc2lvbiA9IFwiMTAuMC4wXCI7XG4gICAgdGhpcy5wYXJhbXMgPSB7XG4gICAgICAgIGFsbG93U2NyaXB0QWNjZXNzOiBcImFsd2F5c1wiLFxuICAgICAgICBhbGxvd0Z1bGxTY3JlZW46IFwidHJ1ZVwiLFxuICAgICAgICB3bW9kZTogJ3RyYW5zcGFyZW50J1xuICAgIH07XG4gICAgdGhpcy5tZXRob2RzU3RhdGUgPSBmYWxzZTtcbiAgICB0aGlzLnByb3h5RXZlbnRzID0gWydsb2FkZWQnLCAnZXJyb3InLCAnY29tcGxldGUnLCAnc3RhcnRlZCcsICdyZXN1bWVkJywgJ3BhdXNlZCcsICdtdXRlJywgJ3VubXV0ZSddO1xuXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbn1cblxuRmxhc2hDbGllbnQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoVnBhaWRTb3VyY2UsIGNvbmZpZ1VybCwgdmFzdFVybCkge1xuICAgIGlmIChWcGFpZFNvdXJjZSAmJiAhdGhpcy5jaGVja1VuaXRTb3VyY2UoVnBhaWRTb3VyY2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndW5pdCBub3QgU1dGJyk7XG4gICAgfVxuXG4gICAgdGhpcy5hZGRXcmFwcGVyRWwoKTtcbiAgICB0aGlzLmluaXRXcmFwcGVyKHZhc3RVcmwpO1xuICAgIHRoaXMuZW1iZWRTV0YoKTtcbn07XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5jaGVja1VuaXRTb3VyY2UgPSBmdW5jdGlvbiAoVnBhaWRTb3VyY2UpIHtcbiAgICByZXR1cm4gVnBhaWRTb3VyY2UuaW5kZXhPZignLnN3ZicpICE9IC0xO1xufTtcblxuRmxhc2hDbGllbnQucHJvdG90eXBlLmVtYmVkU1dGID0gZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIHN3Zm9iamVjdC5lbWJlZFNXRihcbiAgICAgICAgICAgIHRoaXMudW5pdFNyYyxcbiAgICAgICAgICAgIHRoaXMuc2RrVW5pcXVlLFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLndpZHRoLFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmhlaWdodCxcbiAgICAgICAgICAgIHRoaXMuZmxhc2hWZXJzaW9uLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGhpcy5mbGFzaHZhcnMoKSxcbiAgICAgICAgICAgIHRoaXMucGFyYW1zLFxuICAgICAgICAgICAge31cbiAgICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgfVxufTtcblxuRmxhc2hDbGllbnQucHJvdG90eXBlLmluaXRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5ldmVudE1hbmFnZXIub24oJ3JlYWR5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLlZQQUlEID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zZGtVbmlxdWUpO1xuICAgICAgICB0aGlzLm1ldGhvZHNTdGF0ZSA9IHRydWU7XG4gICAgfS5iaW5kKHRoaXMpKTtcbn07XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5pbml0V3JhcHBlciA9IGZ1bmN0aW9uICh2YXN0VXJsKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSBuZXcgV3JhcHBlcihcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5haWQsXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMud2lkdGgsXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuaGVpZ2h0LFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnNpZCxcbiAgICAgICAgICAgIHZhc3RVcmxcbiAgICAgICAgKS53cmFwKHRoaXMuaWQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICB9XG5cbiAgICB0aGlzLmluaXRFdmVudHMoKTtcbn07XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5hZGRXcmFwcGVyRWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJsb2NrZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIHRoaXMuc2RrVW5pcXVlID0gJ1Nka0ludGVncmF0aW9uJyArIHRoaXMuaWQ7XG4gICAgYmxvY2tlci5jbGFzc05hbWUgPSAnZmxhc2gtYmxvY2tlcic7XG4gICAgYmxvY2tlci5pbm5lckhUTUwgPSAnPGRpdiBpZD1cIicgKyB0aGlzLnNka1VuaXF1ZSArICdcIj48L2Rpdj4nO1xuICAgIHRoaXMub3B0aW9ucy5jb250YWluZXJFbC5hcHBlbmRDaGlsZChibG9ja2VyKTtcbn07XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5mbGFzaHZhcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb25SZWFkeTogXCJ3aW5kb3cuVnBhaWRmbGFzaFdyYXBwZXJzW1wiICsgdGhpcy5pZCArIFwiXS5zdGFydEZsYXNoV3JhcHBlclwiXG4gICAgfVxufTsiLCJmdW5jdGlvbiBKc0NsaWVudChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmV2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIoKTtcbiAgICB0aGlzLm1ldGhvZHNTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMucHJveHlFdmVudHMgPSBbJ2xvYWRlZCcsICdlcnJvcicsICdjb21wbGV0ZScsICdzdGFydGVkJywgJ3BhdXNlZCcsICdyZXNpemUnXTtcbn1cblxuSnNDbGllbnQucHJvdG90eXBlLmVtYmVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBbXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuaWZyYW1lKCkuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlGd2luZG93ID0gdGhpcy5pZnJhbWUoKS5jb250ZW50V2luZG93O1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9BZExheWVyKCkuYXBwZW5kQ2hpbGQodGhpcy52aWRlb1RhZygpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlGd2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0FkTGF5ZXIoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pRndpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuc2NyaXB0KCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuaUZ3aW5kb3cuZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW4gPSAwO1xuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9LmJpbmQodGhpcykpLFxuXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuc2NyaXB0KCkuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LCBmYWxzZSlcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgIF1cbn07XG5cbkpzQ2xpZW50LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKFZwYWlkU291cmNlLCBjb25maWdVcmwpIHtcbiAgICBpZiAoIVZwYWlkU291cmNlIHx8ICFjb25maWdVcmwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZXQgY29ycmVjdCBvcHRpb25zJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnZpZGVvVGFnKCkuY2FuUGxheVR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIVE1MNSB2aWRlbyBub3Qgc3VwcG9ydCcpO1xuICAgIH1cblxuICAgIHRoaXMuVnBhaWRTb3VyY2UgPSBWcGFpZFNvdXJjZTtcbiAgICB0aGlzLmNvbmZpZ1VybCA9IGNvbmZpZ1VybDtcblxuICAgIFByb21pc2UuYWxsKHRoaXMuZW1iZWQoKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5WUEFJRCA9IHRoaXMuaUZ3aW5kb3cuZ2V0VlBBSURBZCgpO1xuICAgICAgICAgICAgdGhpcy5pbml0VlBBSUQoKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAuY2F1Z2h0KGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQodGhpcy5pZnJhbWUoKSk7XG59O1xuXG5Kc0NsaWVudC5wcm90b3R5cGUuaW5pdFZQQUlEID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBldmVudE1hbmFnZXIgPSB0aGlzLmV2ZW50TWFuYWdlcjtcblxuICAgIHRoaXMuVlBBSUQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5WUEFJRC5zdGFydEFkKCk7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdsb2FkZWQnKTtcbiAgICB9LmJpbmQodGhpcyksICdBZExvYWRlZCcpO1xuXG4gICAgdGhpcy5WUEFJRC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm1ldGhvZHNTdGF0ZSA9IHRydWU7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdzdGFydGVkJyk7XG4gICAgfS5iaW5kKHRoaXMpLCAnQWRTdGFydGVkJyk7XG5cbiAgICB0aGlzLlZQQUlELnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdwYXVzZWQnKTtcbiAgICB9LCAnQWRQYXVzZWQnKTtcblxuICAgIHRoaXMuVlBBSUQuc3Vic2NyaWJlKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ2Vycm9yJywgZXJyKTtcbiAgICB9LCAnQWRFcnJvcicpO1xuXG4gICAgdGhpcy5WUEFJRC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcigncGxheWluZycpO1xuICAgIH0sICdBZFBsYXlpbmcnKTtcblxuICAgIHRoaXMuVlBBSUQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ3N0b3BwZWQnKTtcbiAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgfS5iaW5kKHRoaXMpLCAnQWRTdG9wcGVkJyk7XG5cbiAgICB0aGlzLlZQQUlELnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdyZXNpemUnKTtcbiAgICB9LCAnQWRTaXplQ2hhbmdlJyk7XG5cbiAgICB0aGlzLlZQQUlELnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdjb21wbGV0ZScpO1xuICAgICAgICB0aGlzLlZQQUlELnN0b3BBZCgpO1xuICAgIH0uYmluZCh0aGlzKSwgJ0FkVmlkZW9Db21wbGV0ZScpO1xuXG4gICAgdGhpcy5WUEFJRC5oYW5kc2hha2VWZXJzaW9uKDIpO1xuXG4gICAgdGhpcy5WUEFJRC5pbml0QWQoXG4gICAgICAgIHRoaXMub3B0aW9ucy53aWR0aCxcbiAgICAgICAgdGhpcy5vcHRpb25zLmhlaWdodCxcbiAgICAgICAgJ25vcm1hbCcsXG4gICAgICAgIDAsXG4gICAgICAgIHRoaXMuY29uZmlnVXJsLFxuICAgICAgICB7XG4gICAgICAgICAgICB2aWRlb1Nsb3RDYW5BdXRvUGxheTogdHJ1ZSxcbiAgICAgICAgICAgIHZpZGVvU2xvdDogdGhpcy52aWRlb1RhZygpLFxuICAgICAgICAgICAgc2xvdDogdGhpcy52aWRlb0FkTGF5ZXIoKVxuICAgICAgICB9XG4gICAgKTtcbn07XG5cbkpzQ2xpZW50LnByb3RvdHlwZS52aWRlb1RhZyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdmlkZW9UYWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZGVvVGFnO1xuICAgIH1cblxuICAgIHRoaXMuX3ZpZGVvVGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICB0aGlzLl92aWRlb1RhZy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBcIjEwMCVcIik7XG4gICAgdGhpcy5fdmlkZW9UYWcuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIFwiMTAwJVwiKTtcbiAgICB0aGlzLl92aWRlb1RhZy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cbiAgICByZXR1cm4gdGhpcy5fdmlkZW9UYWc7XG59O1xuXG5Kc0NsaWVudC5wcm90b3R5cGUudmlkZW9BZExheWVyID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl92aWRlb0FkTGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZGVvQWRMYXllcjtcbiAgICB9XG5cbiAgICB0aGlzLl92aWRlb0FkTGF5ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl92aWRlb0FkTGF5ZXIuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgdGhpcy5vcHRpb25zLndpZHRoKTtcbiAgICB0aGlzLl92aWRlb0FkTGF5ZXIuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIHRoaXMub3B0aW9ucy5oZWlnaHQpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3ZpZGVvQWRMYXllcjtcbn07XG5cbkpzQ2xpZW50LnByb3RvdHlwZS5zY3JpcHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3NjcmlwdFRhZykge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NyaXB0VGFnO1xuICAgIH1cblxuICAgIHRoaXMuX3NjcmlwdFRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIHRoaXMuX3NjcmlwdFRhZy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dC9qYXZhc2NyaXB0XCIpO1xuICAgIHRoaXMuX3NjcmlwdFRhZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdGhpcy5WcGFpZFNvdXJjZSk7XG4gICAgdGhpcy5fc2NyaXB0VGFnLnNldEF0dHJpYnV0ZShcImFzeW5jXCIsIFwiXCIpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3NjcmlwdFRhZztcbn07XG5cbkpzQ2xpZW50LnByb3RvdHlwZS5pZnJhbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2lGcmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5faUZyYW1lO1xuICAgIH1cblxuICAgIHRoaXMuX2lGcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lGcmFtZScpO1xuICAgIHRoaXMuX2lGcmFtZS5zZXRBdHRyaWJ1dGUoXCJhbGxvd2Z1bGxzY3JlZW5cIiwgXCJ0cnVlXCIpO1xuICAgIHRoaXMuX2lGcmFtZS5zcmMgPSBcImFib3V0OmJsYW5rXCI7XG4gICAgdGhpcy5faUZyYW1lLndpZHRoID0gdGhpcy5vcHRpb25zLndpZHRoO1xuICAgIHRoaXMuX2lGcmFtZS5oZWlnaHQgPSB0aGlzLm9wdGlvbnMuaGVpZ2h0O1xuICAgIHRoaXMuX2lGcmFtZS5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG5cbiAgICByZXR1cm4gdGhpcy5faUZyYW1lO1xufTtcblxuSnNDbGllbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgZGVsZXRlIHRoaXMuVlBBSUQ7XG5cbiAgICB0aGlzLl9pRnJhbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9pRnJhbWUpO1xuXG4gICAgZGVsZXRlIHRoaXMuX3ZpZGVvQWRMYXllcjtcbiAgICBkZWxldGUgdGhpcy5fc2NyaXB0VGFnO1xuICAgIGRlbGV0ZSB0aGlzLl92aWRlb1RhZztcbiAgICBkZWxldGUgdGhpcy5faUZyYW1lO1xufTtcbiIsIi8qKlxuICogQHBhcmFtIG9wdGlvbnMuYWlkIHtudW1iZXJ9XG4gKiBAcGFyYW0gb3B0aW9ucy53aWR0aCB7bnVtYmVyfVxuICogQHBhcmFtIG9wdGlvbnMuaGVpZ2h0IHtudW1iZXJ9XG4gKiBAcGFyYW0gb3B0aW9ucy5jb250YWluZXJFbCB7b2JqZWN0fVxuICpcbiAqIEBwYXJhbSBvcHRpb25zIHtvYmplY3R9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gT3V0c3RyZWFtKG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQ3JlYXRlIHdpdGhvdXQgb3B0aW9ucycpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm9wdGlvbnMob3B0aW9ucyB8fCB7fSk7XG4gICAgdGhpcy5ldmVudHMgPSB7fTtcbiAgICB0aGlzLmluaXQoKTtcbn1cblxuLyoqXG4gKiBQciBzYXZlIE1lZGlhRmlsZSBhbmQgQWRQYXJhbWV0ZXJzXG4gKiBAcGFyYW0geG1sIHtzdHJpbmd9XG4gKi9cbk91dHN0cmVhbS5wcm90b3R5cGUucGFyc2VBbmRTYXZlQ29uZmlnID0gZnVuY3Rpb24gKHhtbCkge1xuICAgIHhtbCA9IHByZXBhcmVYTUwoKTtcblxuICAgIHRoaXMuVnBhaWRTb3VyY2UgPSB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ01lZGlhRmlsZScpWzBdLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlO1xuICAgIHRoaXMuY29uZmlnVXJsID0geG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdBZFBhcmFtZXRlcnMnKVswXS5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZTtcblxuICAgIGZ1bmN0aW9uIHByZXBhcmVYTUwoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgX0RPTVBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX0RPTVBhcnNlcikge1xuICAgICAgICAgICAgcmV0dXJuIF9ET01QYXJzZXIucGFyc2VGcm9tU3RyaW5nKHhtbCwgJ3RleHQveG1sJylcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB4bWxEb2MgPSBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxET01cIik7XG4gICAgICAgIHhtbERvYy5sb2FkWE1MKHhtbCk7XG5cbiAgICAgICAgaWYgKHhtbERvYy5wYXJzZUVycm9yLmVycm9yQ29kZSAhPSAwKSB7XG4gICAgICAgICAgICB2YXIgbXlFcnIgPSB4bWxEb2MucGFyc2VFcnJvcjtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJZb3UgaGF2ZSBlcnJvciBcIiArIG15RXJyLnJlYXNvbik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geG1sRG9jO1xuICAgIH1cbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUubG9hZENvbmZpZyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29uZmlnVXJsID0gdGhpcy5nZXRDb25maWdVcmwoKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciB4ZHIgPSBuZXcgWERvbWFpblJlcXVlc3QoKVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChYTUxIdHRwUmVxdWVzdCAmJiAheGRyKSB7XG4gICAgICAgICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICAgICAgeGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh4aHR0cC5yZWFkeVN0YXRlID09IDQgJiYgeGh0dHAuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHhodHRwLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgeGh0dHAub3BlbihcIkdFVFwiLCBjb25maWdVcmwsIHRydWUpO1xuICAgICAgICAgICAgeGh0dHAuc2VuZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVXNlIE1pY3Jvc29mdCBYRFJcbiAgICAgICAgICAgIHhkci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh4ZHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHhkci5vcGVuKFwiZ2V0XCIsIGNvbmZpZ1VybCwgdHJ1ZSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB4ZHIuc2VuZCgpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUub3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgaWYgKHRoaXMuX29wdGlvbnMgfHwgIW9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zICE9IFwib2JqZWN0XCIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignUGxlYXNlIHNldCBjb3JyZWN0IG9wdGlvbnMnKTtcblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VlBBSURNb2RlKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvcHRpb25zLlZQQUlETW9kZSkgJiYgISFvcHRpb25zLlZQQUlETW9kZS5sZW5ndGggPyBvcHRpb25zLlZQQUlETW9kZSA6IFsnZmxhc2gnLCAnanMnXTtcbiAgICB9XG5cbiAgICBvcHRpb25zLlZQQUlETW9kZSA9IGdldFZQQUlETW9kZSgpO1xuXG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY3JlYXRlVlBBSUQoKTtcblxuICAgIHRoaXMubG9hZENvbmZpZygpLnRoZW4oZnVuY3Rpb24gKHhtbCkge1xuICAgICAgICAgICAgdGhpcy5wYXJzZUFuZFNhdmVDb25maWcoeG1sKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFZQQUlEKCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgLmNhdWdodChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICB0aGlzLmluaXRWUEFJRCgpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5pbml0VlBBSUQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdGhpcy5WUEFJRENsaWVudC5pbml0KFxuICAgICAgICAgICAgdGhpcy5WcGFpZFNvdXJjZSxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnVXJsLFxuICAgICAgICAgICAgdGhpcy5nZXRDb25maWdVcmwoKVxuICAgICAgICApO1xuXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIHRyeSB0byB1c2UgYW5vdGhlciBtb2RlXG4gICAgICAgIHZhciBWUEFJRE1vZGUgPSB0aGlzLm9wdGlvbnMoKS5WUEFJRE1vZGUsXG4gICAgICAgICAgICBtb2RlSW5kZXggPSBWUEFJRE1vZGUuaW5kZXhPZih0aGlzLm1vZGUpO1xuXG4gICAgICAgIGlmIChtb2RlSW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgIFZQQUlETW9kZS5zcGxpY2UobW9kZUluZGV4LCAxKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3dpdGNoIFZQQUlkVHlwZSAsIEVSUk9SOiBcIiArIGVyci5tZXNzYWdlKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lcih0aGlzLlZQQUlEQ2xpZW50LmV2ZW50TWFuYWdlcik7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLmdldENvbmZpZ1VybCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZG9tYWluID0gdGhpcy5vcHRpb25zKCkuaXNTU1AgPyBcInZhc3QudmVydGFtZWRpYS5jb20vXCIgOiBcInZhc3QudmlkZWUudHYvXCIsXG4gICAgICAgIGNvbmZpZ1VybCA9IFwiLy9cIiArIGRvbWFpbiArXG4gICAgICAgICAgICBcIj9haWQ9XCIgKyB0aGlzLm9wdGlvbnMoKS5haWQgK1xuICAgICAgICAgICAgXCImY29udGVudF9wYWdlX3VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uaHJlZiAhPSB3aW5kb3cucGFyZW50LmxvY2F0aW9uLmhyZWYgPyBkb2N1bWVudC5yZWZlcnJlciA6IHdpbmRvdy5sb2NhdGlvbi5ocmVmKSArXG4gICAgICAgICAgICBcIiZwbGF5ZXJfd2lkdGg9XCIgKyB0aGlzLm9wdGlvbnMoKS53aWR0aCArXG4gICAgICAgICAgICBcIiZwbGF5ZXJfaGVpZ2h0PVwiICsgdGhpcy5vcHRpb25zKCkuaGVpZ2h0ICtcbiAgICAgICAgICAgIFwiJmNkPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICBpZiAodGhpcy5tb2RlID09IFwianNcIikge1xuICAgICAgICBjb25maWdVcmwgKz0gXCImdnBhaWRfdHlwZT0yXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbmZpZ1VybDtcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuY3JlYXRlVlBBSUQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIFZQQUlETW9kZSA9IHRoaXMub3B0aW9ucygpLlZQQUlETW9kZTtcbiAgICBmb3IgKHZhciBpbmRleCBpbiBWUEFJRE1vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMudXNlTW9kZShWUEFJRE1vZGVbaW5kZXhdKSkge1xuICAgICAgICAgICAgdGhpcy5tb2RlID0gVlBBSURNb2RlW2luZGV4XTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUudXNlTW9kZSA9IGZ1bmN0aW9uIChtb2RlVHlwZSkge1xuICAgIHZhciBWUEFJREZhY3RvcnkgPSB7XG4gICAgICAgIGZsYXNoOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGbGFzaENsaWVudChvcHRpb25zKTtcbiAgICAgICAgfSxcbiAgICAgICAganM6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpzQ2xpZW50KG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIG1vZGVUeXBlID0gbW9kZVR5cGUgaW4gVlBBSURGYWN0b3J5ID8gbW9kZVR5cGUgOiAnZmxhc2gnO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgdGhpcy5WUEFJRENsaWVudCA9IG5ldyBWUEFJREZhY3RvcnlbbW9kZVR5cGVdKHRoaXMub3B0aW9ucygpKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtb2RlVHlwZSArIFwiIGluaXQgRVJST1I6IFwiICsgZXJyKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAhIXRoaXMuVlBBSURDbGllbnQ7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLmluaXRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGV2ZW50TWFuYWdlcikge1xuICAgIHZhciBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgcHJveHlFdmVudHMgPSB0aGlzLlZQQUlEQ2xpZW50LnByb3h5RXZlbnRzO1xuXG4gICAgZm9yICh2YXIgaSBpbiBwcm94eUV2ZW50cykge1xuICAgICAgICBpbml0RXZlbnQocHJveHlFdmVudHNbaV0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRFdmVudChwcm94eUV2ZW50KSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci5vbihwcm94eUV2ZW50LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgY29udGV4dC50cmlnZ2VyKHByb3h5RXZlbnQsIGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICB0aGlzLmV2ZW50c1tldmVudE5hbWUgKyAnJ10gPSBjYWxsYmFjaztcbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgIGRlbGV0ZSB0aGlzLmV2ZW50c1tldmVudE5hbWUgKyAnJ107XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSB0aGlzLmV2ZW50c1tldmVudE5hbWVdO1xuXG4gICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY2FsbGJhY2suY2FsbCh0aGlzLCBkYXRhKTtcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyRWwuaW5uZXJIVE1MID0gJydcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuY2FsbE1ldGhvZCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBkYXRhKSB7XG4gICAgbWV0aG9kTmFtZSA9IHRoaXMubW9kZSA9PSAnZmxhc2gnID8gJ3ZpZGVlXycgKyBtZXRob2ROYW1lIDogbWV0aG9kTmFtZTtcblxuICAgIGlmICh0aGlzLmlzVlBBSURSZWFkeSgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlZQQUlEQ2xpZW50LlZQQUlEW21ldGhvZE5hbWVdKGRhdGEpO1xuICAgIH1cblxuICAgIHRoaXMub24oJ3N0YXJ0ZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuVlBBSURDbGllbnQuVlBBSURbbWV0aG9kTmFtZV0oZGF0YSk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbn07XG5cbi8vIFB1YmxpYyBWUEFJRCBtZXRob2RzXG5PdXRzdHJlYW0ucHJvdG90eXBlLnN0YXJ0QWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsTWV0aG9kKCdzdGFydEFkJyk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuc3RvcEFkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2FsbE1ldGhvZCgnc3RvcEFkJyk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuc2tpcEFkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2FsbE1ldGhvZCgnc2tpcEFkJyk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUubXV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5pc1ZQQUlEUmVhZHkoKSkge1xuICAgICAgICBjbGIuY2FsbCh0aGlzKTtcblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5vbignc3RhcnRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2xiLmNhbGwodGhpcylcbiAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgZnVuY3Rpb24gY2xiKCkge1xuICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IHRoaXMubW9kZSA9PSAnZmxhc2gnID8gJ3ZpZGVlX2dldEFkVm9sdW1lJyA6ICdnZXRBZFZvbHVtZSc7XG5cbiAgICAgICAgdGhpcy5zYXZlZFZvbHVtZSA9IHRoaXMuVlBBSURDbGllbnQuVlBBSURbbWV0aG9kTmFtZV0oKTtcblxuICAgICAgICBtZXRob2ROYW1lID0gdGhpcy5tb2RlID09ICdmbGFzaCcgPyAndmlkZWVfc2V0QWRWb2x1bWUnIDogJ3NldEFkVm9sdW1lJztcbiAgICAgICAgdGhpcy5WUEFJRENsaWVudC5WUEFJRFttZXRob2ROYW1lXSgwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUudW5tdXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2FsbE1ldGhvZCgnc2V0QWRWb2x1bWUnLCB0aGlzLnNhdmVkVm9sdW1lIHx8IDEpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLnNldEFkVm9sdW1lID0gZnVuY3Rpb24gKHZhbCkge1xuICAgIGlmICh0eXBlb2YgdmFsICE9ICdudW1iZXInIHx8IHZhbCAhPSB2YWwpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5jYWxsTWV0aG9kKCdzZXRBZFZvbHVtZScsIHZhbCk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuZ2V0QWRWb2x1bWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgnZ2V0QWRWb2x1bWUnKTtcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUucGF1c2VBZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNhbGxNZXRob2QoJ3BhdXNlQWQnKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5yZXN1bWVBZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNhbGxNZXRob2QoJ3Jlc3VtZUFkJyk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuaXNWUEFJRFJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLlZQQUlEQ2xpZW50ICYmIHRoaXMuVlBBSURDbGllbnQubWV0aG9kc1N0YXRlICYmIHRoaXMuVlBBSURDbGllbnQuVlBBSUQ7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLnJlc2l6ZUFkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxcbiAgICAgICAgbWV0aG9kTmFtZSA9IHRoaXMubW9kZSA9PSAnZmxhc2gnID8gJ3ZpZGVlX3Jlc2l6ZUFkJyA6ICdyZXNpemVBZCc7XG4gICAgaWYgKHRoaXMuaXNWUEFJRFJlYWR5KCkpIHtcbiAgICAgICAgdGhpcy5WUEFJRENsaWVudC5WUEFJRFttZXRob2ROYW1lXS5hcHBseShudWxsLCBhcmdzKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB0aGlzLm9uKCdzdGFydGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLlZQQUlEQ2xpZW50LlZQQUlEW21ldGhvZE5hbWVdLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGluaXRcbnZhciByb290ID0gcm9vdCB8fCB3aW5kb3c7XG5yb290Lk91dHN0cmVhbSA9IE91dHN0cmVhbTtcbiIsIi8qIEBwcmVzZXJ2ZVxuICogVGhlIE1JVCBMaWNlbnNlIChNSVQpXG4gKiBcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IFBldGthIEFudG9ub3ZcbiAqIFxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICogXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKiBcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiAqIFRIRSBTT0ZUV0FSRS5cbiAqIFxuICovXG4vKipcbiAqIGJsdWViaXJkIGJ1aWxkIHZlcnNpb24gMy40LjZcbiAqIEZlYXR1cmVzIGVuYWJsZWQ6IGNvcmUsIHJhY2UsIGNhbGxfZ2V0LCBnZW5lcmF0b3JzLCBtYXAsIG5vZGVpZnksIHByb21pc2lmeSwgcHJvcHMsIHJlZHVjZSwgc2V0dGxlLCBzb21lLCB1c2luZywgdGltZXJzLCBmaWx0ZXIsIGFueSwgZWFjaFxuKi9cbiFmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIGY7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz9mPXdpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2Y9Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiYoZj1zZWxmKSxmLlByb21pc2U9ZSgpfX0oZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIF9kZXJlcV89PVwiZnVuY3Rpb25cIiYmX2RlcmVxXztpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgX2RlcmVxXz09XCJmdW5jdGlvblwiJiZfZGVyZXFfO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xudmFyIFNvbWVQcm9taXNlQXJyYXkgPSBQcm9taXNlLl9Tb21lUHJvbWlzZUFycmF5O1xuZnVuY3Rpb24gYW55KHByb21pc2VzKSB7XG4gICAgdmFyIHJldCA9IG5ldyBTb21lUHJvbWlzZUFycmF5KHByb21pc2VzKTtcbiAgICB2YXIgcHJvbWlzZSA9IHJldC5wcm9taXNlKCk7XG4gICAgcmV0LnNldEhvd01hbnkoMSk7XG4gICAgcmV0LnNldFVud3JhcCgpO1xuICAgIHJldC5pbml0KCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cblByb21pc2UuYW55ID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIGFueShwcm9taXNlcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5hbnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFueSh0aGlzKTtcbn07XG5cbn07XG5cbn0se31dLDI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgZmlyc3RMaW5lRXJyb3I7XG50cnkge3Rocm93IG5ldyBFcnJvcigpOyB9IGNhdGNoIChlKSB7Zmlyc3RMaW5lRXJyb3IgPSBlO31cbnZhciBzY2hlZHVsZSA9IF9kZXJlcV8oXCIuL3NjaGVkdWxlXCIpO1xudmFyIFF1ZXVlID0gX2RlcmVxXyhcIi4vcXVldWVcIik7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG5cbmZ1bmN0aW9uIEFzeW5jKCkge1xuICAgIHRoaXMuX2N1c3RvbVNjaGVkdWxlciA9IGZhbHNlO1xuICAgIHRoaXMuX2lzVGlja1VzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9sYXRlUXVldWUgPSBuZXcgUXVldWUoMTYpO1xuICAgIHRoaXMuX25vcm1hbFF1ZXVlID0gbmV3IFF1ZXVlKDE2KTtcbiAgICB0aGlzLl9oYXZlRHJhaW5lZFF1ZXVlcyA9IGZhbHNlO1xuICAgIHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkID0gdHJ1ZTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5kcmFpblF1ZXVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5fZHJhaW5RdWV1ZXMoKTtcbiAgICB9O1xuICAgIHRoaXMuX3NjaGVkdWxlID0gc2NoZWR1bGU7XG59XG5cbkFzeW5jLnByb3RvdHlwZS5zZXRTY2hlZHVsZXIgPSBmdW5jdGlvbihmbikge1xuICAgIHZhciBwcmV2ID0gdGhpcy5fc2NoZWR1bGU7XG4gICAgdGhpcy5fc2NoZWR1bGUgPSBmbjtcbiAgICB0aGlzLl9jdXN0b21TY2hlZHVsZXIgPSB0cnVlO1xuICAgIHJldHVybiBwcmV2O1xufTtcblxuQXN5bmMucHJvdG90eXBlLmhhc0N1c3RvbVNjaGVkdWxlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXN0b21TY2hlZHVsZXI7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuZW5hYmxlVHJhbXBvbGluZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkID0gdHJ1ZTtcbn07XG5cbkFzeW5jLnByb3RvdHlwZS5kaXNhYmxlVHJhbXBvbGluZUlmTmVjZXNzYXJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHV0aWwuaGFzRGV2VG9vbHMpIHtcbiAgICAgICAgdGhpcy5fdHJhbXBvbGluZUVuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuaGF2ZUl0ZW1zUXVldWVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1RpY2tVc2VkIHx8IHRoaXMuX2hhdmVEcmFpbmVkUXVldWVzO1xufTtcblxuXG5Bc3luYy5wcm90b3R5cGUuZmF0YWxFcnJvciA9IGZ1bmN0aW9uKGUsIGlzTm9kZSkge1xuICAgIGlmIChpc05vZGUpIHtcbiAgICAgICAgcHJvY2Vzcy5zdGRlcnIud3JpdGUoXCJGYXRhbCBcIiArIChlIGluc3RhbmNlb2YgRXJyb3IgPyBlLnN0YWNrIDogZSkgK1xuICAgICAgICAgICAgXCJcXG5cIik7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRocm93TGF0ZXIoZSk7XG4gICAgfVxufTtcblxuQXN5bmMucHJvdG90eXBlLnRocm93TGF0ZXIgPSBmdW5jdGlvbihmbiwgYXJnKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgYXJnID0gZm47XG4gICAgICAgIGZuID0gZnVuY3Rpb24gKCkgeyB0aHJvdyBhcmc7IH07XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm4oYXJnKTtcbiAgICAgICAgfSwgMCk7XG4gICAgfSBlbHNlIHRyeSB7XG4gICAgICAgIHRoaXMuX3NjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm4oYXJnKTtcbiAgICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhc3luYyBzY2hlZHVsZXIgYXZhaWxhYmxlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBBc3luY0ludm9rZUxhdGVyKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgdGhpcy5fbGF0ZVF1ZXVlLnB1c2goZm4sIHJlY2VpdmVyLCBhcmcpO1xuICAgIHRoaXMuX3F1ZXVlVGljaygpO1xufVxuXG5mdW5jdGlvbiBBc3luY0ludm9rZShmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgIHRoaXMuX25vcm1hbFF1ZXVlLnB1c2goZm4sIHJlY2VpdmVyLCBhcmcpO1xuICAgIHRoaXMuX3F1ZXVlVGljaygpO1xufVxuXG5mdW5jdGlvbiBBc3luY1NldHRsZVByb21pc2VzKHByb21pc2UpIHtcbiAgICB0aGlzLl9ub3JtYWxRdWV1ZS5fcHVzaE9uZShwcm9taXNlKTtcbiAgICB0aGlzLl9xdWV1ZVRpY2soKTtcbn1cblxuaWYgKCF1dGlsLmhhc0RldlRvb2xzKSB7XG4gICAgQXN5bmMucHJvdG90eXBlLmludm9rZUxhdGVyID0gQXN5bmNJbnZva2VMYXRlcjtcbiAgICBBc3luYy5wcm90b3R5cGUuaW52b2tlID0gQXN5bmNJbnZva2U7XG4gICAgQXN5bmMucHJvdG90eXBlLnNldHRsZVByb21pc2VzID0gQXN5bmNTZXR0bGVQcm9taXNlcztcbn0gZWxzZSB7XG4gICAgQXN5bmMucHJvdG90eXBlLmludm9rZUxhdGVyID0gZnVuY3Rpb24gKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgICAgIGlmICh0aGlzLl90cmFtcG9saW5lRW5hYmxlZCkge1xuICAgICAgICAgICAgQXN5bmNJbnZva2VMYXRlci5jYWxsKHRoaXMsIGZuLCByZWNlaXZlciwgYXJnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuLmNhbGwocmVjZWl2ZXIsIGFyZyk7XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIEFzeW5jLnByb3RvdHlwZS5pbnZva2UgPSBmdW5jdGlvbiAoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkKSB7XG4gICAgICAgICAgICBBc3luY0ludm9rZS5jYWxsKHRoaXMsIGZuLCByZWNlaXZlciwgYXJnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGZuLmNhbGwocmVjZWl2ZXIsIGFyZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBBc3luYy5wcm90b3R5cGUuc2V0dGxlUHJvbWlzZXMgPSBmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICAgIGlmICh0aGlzLl90cmFtcG9saW5lRW5hYmxlZCkge1xuICAgICAgICAgICAgQXN5bmNTZXR0bGVQcm9taXNlcy5jYWxsKHRoaXMsIHByb21pc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fc2V0dGxlUHJvbWlzZXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuQXN5bmMucHJvdG90eXBlLmludm9rZUZpcnN0ID0gZnVuY3Rpb24gKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgdGhpcy5fbm9ybWFsUXVldWUudW5zaGlmdChmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgdGhpcy5fcXVldWVUaWNrKCk7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuX2RyYWluUXVldWUgPSBmdW5jdGlvbihxdWV1ZSkge1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgoKSA+IDApIHtcbiAgICAgICAgdmFyIGZuID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBmbi5fc2V0dGxlUHJvbWlzZXMoKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZWNlaXZlciA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIHZhciBhcmcgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICBmbi5jYWxsKHJlY2VpdmVyLCBhcmcpO1xuICAgIH1cbn07XG5cbkFzeW5jLnByb3RvdHlwZS5fZHJhaW5RdWV1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fZHJhaW5RdWV1ZSh0aGlzLl9ub3JtYWxRdWV1ZSk7XG4gICAgdGhpcy5fcmVzZXQoKTtcbiAgICB0aGlzLl9oYXZlRHJhaW5lZFF1ZXVlcyA9IHRydWU7XG4gICAgdGhpcy5fZHJhaW5RdWV1ZSh0aGlzLl9sYXRlUXVldWUpO1xufTtcblxuQXN5bmMucHJvdG90eXBlLl9xdWV1ZVRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLl9pc1RpY2tVc2VkKSB7XG4gICAgICAgIHRoaXMuX2lzVGlja1VzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zY2hlZHVsZSh0aGlzLmRyYWluUXVldWVzKTtcbiAgICB9XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuX3Jlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2lzVGlja1VzZWQgPSBmYWxzZTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQXN5bmM7XG5tb2R1bGUuZXhwb3J0cy5maXJzdExpbmVFcnJvciA9IGZpcnN0TGluZUVycm9yO1xuXG59LHtcIi4vcXVldWVcIjoyNixcIi4vc2NoZWR1bGVcIjoyOSxcIi4vdXRpbFwiOjM2fV0sMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGRlYnVnKSB7XG52YXIgY2FsbGVkQmluZCA9IGZhbHNlO1xudmFyIHJlamVjdFRoaXMgPSBmdW5jdGlvbihfLCBlKSB7XG4gICAgdGhpcy5fcmVqZWN0KGUpO1xufTtcblxudmFyIHRhcmdldFJlamVjdGVkID0gZnVuY3Rpb24oZSwgY29udGV4dCkge1xuICAgIGNvbnRleHQucHJvbWlzZVJlamVjdGlvblF1ZXVlZCA9IHRydWU7XG4gICAgY29udGV4dC5iaW5kaW5nUHJvbWlzZS5fdGhlbihyZWplY3RUaGlzLCByZWplY3RUaGlzLCBudWxsLCB0aGlzLCBlKTtcbn07XG5cbnZhciBiaW5kaW5nUmVzb2x2ZWQgPSBmdW5jdGlvbih0aGlzQXJnLCBjb250ZXh0KSB7XG4gICAgaWYgKCgodGhpcy5fYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVDYWxsYmFjayhjb250ZXh0LnRhcmdldCk7XG4gICAgfVxufTtcblxudmFyIGJpbmRpbmdSZWplY3RlZCA9IGZ1bmN0aW9uKGUsIGNvbnRleHQpIHtcbiAgICBpZiAoIWNvbnRleHQucHJvbWlzZVJlamVjdGlvblF1ZXVlZCkgdGhpcy5fcmVqZWN0KGUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uICh0aGlzQXJnKSB7XG4gICAgaWYgKCFjYWxsZWRCaW5kKSB7XG4gICAgICAgIGNhbGxlZEJpbmQgPSB0cnVlO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fcHJvcGFnYXRlRnJvbSA9IGRlYnVnLnByb3BhZ2F0ZUZyb21GdW5jdGlvbigpO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fYm91bmRWYWx1ZSA9IGRlYnVnLmJvdW5kVmFsdWVGdW5jdGlvbigpO1xuICAgIH1cbiAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh0aGlzQXJnKTtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHJldC5fcHJvcGFnYXRlRnJvbSh0aGlzLCAxKTtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgcmV0Ll9zZXRCb3VuZFRvKG1heWJlUHJvbWlzZSk7XG4gICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7XG4gICAgICAgICAgICBwcm9taXNlUmVqZWN0aW9uUXVldWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHByb21pc2U6IHJldCxcbiAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICAgICAgYmluZGluZ1Byb21pc2U6IG1heWJlUHJvbWlzZVxuICAgICAgICB9O1xuICAgICAgICB0YXJnZXQuX3RoZW4oSU5URVJOQUwsIHRhcmdldFJlamVjdGVkLCB1bmRlZmluZWQsIHJldCwgY29udGV4dCk7XG4gICAgICAgIG1heWJlUHJvbWlzZS5fdGhlbihcbiAgICAgICAgICAgIGJpbmRpbmdSZXNvbHZlZCwgYmluZGluZ1JlamVjdGVkLCB1bmRlZmluZWQsIHJldCwgY29udGV4dCk7XG4gICAgICAgIHJldC5fc2V0T25DYW5jZWwobWF5YmVQcm9taXNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXQuX3Jlc29sdmVDYWxsYmFjayh0YXJnZXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldEJvdW5kVG8gPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAyMDk3MTUyO1xuICAgICAgICB0aGlzLl9ib3VuZFRvID0gb2JqO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjIwOTcxNTIpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0JvdW5kID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAyMDk3MTUyKSA9PT0gMjA5NzE1Mjtcbn07XG5cblByb21pc2UuYmluZCA9IGZ1bmN0aW9uICh0aGlzQXJnLCB2YWx1ZSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLmJpbmQodGhpc0FyZyk7XG59O1xufTtcblxufSx7fV0sNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBvbGQ7XG5pZiAodHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIpIG9sZCA9IFByb21pc2U7XG5mdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgIHRyeSB7IGlmIChQcm9taXNlID09PSBibHVlYmlyZCkgUHJvbWlzZSA9IG9sZDsgfVxuICAgIGNhdGNoIChlKSB7fVxuICAgIHJldHVybiBibHVlYmlyZDtcbn1cbnZhciBibHVlYmlyZCA9IF9kZXJlcV8oXCIuL3Byb21pc2VcIikoKTtcbmJsdWViaXJkLm5vQ29uZmxpY3QgPSBub0NvbmZsaWN0O1xubW9kdWxlLmV4cG9ydHMgPSBibHVlYmlyZDtcblxufSx7XCIuL3Byb21pc2VcIjoyMn1dLDU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgY3IgPSBPYmplY3QuY3JlYXRlO1xuaWYgKGNyKSB7XG4gICAgdmFyIGNhbGxlckNhY2hlID0gY3IobnVsbCk7XG4gICAgdmFyIGdldHRlckNhY2hlID0gY3IobnVsbCk7XG4gICAgY2FsbGVyQ2FjaGVbXCIgc2l6ZVwiXSA9IGdldHRlckNhY2hlW1wiIHNpemVcIl0gPSAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBjYW5FdmFsdWF0ZSA9IHV0aWwuY2FuRXZhbHVhdGU7XG52YXIgaXNJZGVudGlmaWVyID0gdXRpbC5pc0lkZW50aWZpZXI7XG5cbnZhciBnZXRNZXRob2RDYWxsZXI7XG52YXIgZ2V0R2V0dGVyO1xuaWYgKCF0cnVlKSB7XG52YXIgbWFrZU1ldGhvZENhbGxlciA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcImVuc3VyZU1ldGhvZFwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmopIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBlbnN1cmVNZXRob2Qob2JqLCAnbWV0aG9kTmFtZScpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBzd2l0Y2gobGVuKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUodGhpc1swXSk7ICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUodGhpc1swXSwgdGhpc1sxXSk7ICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUodGhpc1swXSwgdGhpc1sxXSwgdGhpc1syXSk7ICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoubWV0aG9kTmFtZS5hcHBseShvYmosIHRoaXMpOyAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIFwiLnJlcGxhY2UoL21ldGhvZE5hbWUvZywgbWV0aG9kTmFtZSkpKGVuc3VyZU1ldGhvZCk7XG59O1xuXG52YXIgbWFrZUdldHRlciA9IGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUpIHtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwib2JqXCIsIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgJ3VzZSBzdHJpY3QnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgcmV0dXJuIG9iai5wcm9wZXJ0eU5hbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCIucmVwbGFjZShcInByb3BlcnR5TmFtZVwiLCBwcm9wZXJ0eU5hbWUpKTtcbn07XG5cbnZhciBnZXRDb21waWxlZCA9IGZ1bmN0aW9uKG5hbWUsIGNvbXBpbGVyLCBjYWNoZSkge1xuICAgIHZhciByZXQgPSBjYWNoZVtuYW1lXTtcbiAgICBpZiAodHlwZW9mIHJldCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGlmICghaXNJZGVudGlmaWVyKG5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXQgPSBjb21waWxlcihuYW1lKTtcbiAgICAgICAgY2FjaGVbbmFtZV0gPSByZXQ7XG4gICAgICAgIGNhY2hlW1wiIHNpemVcIl0rKztcbiAgICAgICAgaWYgKGNhY2hlW1wiIHNpemVcIl0gPiA1MTIpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoY2FjaGUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkgZGVsZXRlIGNhY2hlW2tleXNbaV1dO1xuICAgICAgICAgICAgY2FjaGVbXCIgc2l6ZVwiXSA9IGtleXMubGVuZ3RoIC0gMjU2O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5nZXRNZXRob2RDYWxsZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGdldENvbXBpbGVkKG5hbWUsIG1ha2VNZXRob2RDYWxsZXIsIGNhbGxlckNhY2hlKTtcbn07XG5cbmdldEdldHRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gZ2V0Q29tcGlsZWQobmFtZSwgbWFrZUdldHRlciwgZ2V0dGVyQ2FjaGUpO1xufTtcbn1cblxuZnVuY3Rpb24gZW5zdXJlTWV0aG9kKG9iaiwgbWV0aG9kTmFtZSkge1xuICAgIHZhciBmbjtcbiAgICBpZiAob2JqICE9IG51bGwpIGZuID0gb2JqW21ldGhvZE5hbWVdO1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgbWVzc2FnZSA9IFwiT2JqZWN0IFwiICsgdXRpbC5jbGFzc1N0cmluZyhvYmopICsgXCIgaGFzIG5vIG1ldGhvZCAnXCIgK1xuICAgICAgICAgICAgdXRpbC50b1N0cmluZyhtZXRob2ROYW1lKSArIFwiJ1wiO1xuICAgICAgICB0aHJvdyBuZXcgUHJvbWlzZS5UeXBlRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICAgIHJldHVybiBmbjtcbn1cblxuZnVuY3Rpb24gY2FsbGVyKG9iaikge1xuICAgIHZhciBtZXRob2ROYW1lID0gdGhpcy5wb3AoKTtcbiAgICB2YXIgZm4gPSBlbnN1cmVNZXRob2Qob2JqLCBtZXRob2ROYW1lKTtcbiAgICByZXR1cm4gZm4uYXBwbHkob2JqLCB0aGlzKTtcbn1cblByb21pc2UucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOztcbiAgICBpZiAoIXRydWUpIHtcbiAgICAgICAgaWYgKGNhbkV2YWx1YXRlKSB7XG4gICAgICAgICAgICB2YXIgbWF5YmVDYWxsZXIgPSBnZXRNZXRob2RDYWxsZXIobWV0aG9kTmFtZSk7XG4gICAgICAgICAgICBpZiAobWF5YmVDYWxsZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdGhlbihcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVDYWxsZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcmdzLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFyZ3MucHVzaChtZXRob2ROYW1lKTtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihjYWxsZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcmdzLCB1bmRlZmluZWQpO1xufTtcblxuZnVuY3Rpb24gbmFtZWRHZXR0ZXIob2JqKSB7XG4gICAgcmV0dXJuIG9ialt0aGlzXTtcbn1cbmZ1bmN0aW9uIGluZGV4ZWRHZXR0ZXIob2JqKSB7XG4gICAgdmFyIGluZGV4ID0gK3RoaXM7XG4gICAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSBNYXRoLm1heCgwLCBpbmRleCArIG9iai5sZW5ndGgpO1xuICAgIHJldHVybiBvYmpbaW5kZXhdO1xufVxuUHJvbWlzZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkge1xuICAgIHZhciBpc0luZGV4ID0gKHR5cGVvZiBwcm9wZXJ0eU5hbWUgPT09IFwibnVtYmVyXCIpO1xuICAgIHZhciBnZXR0ZXI7XG4gICAgaWYgKCFpc0luZGV4KSB7XG4gICAgICAgIGlmIChjYW5FdmFsdWF0ZSkge1xuICAgICAgICAgICAgdmFyIG1heWJlR2V0dGVyID0gZ2V0R2V0dGVyKHByb3BlcnR5TmFtZSk7XG4gICAgICAgICAgICBnZXR0ZXIgPSBtYXliZUdldHRlciAhPT0gbnVsbCA/IG1heWJlR2V0dGVyIDogbmFtZWRHZXR0ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZXR0ZXIgPSBuYW1lZEdldHRlcjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGdldHRlciA9IGluZGV4ZWRHZXR0ZXI7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90aGVuKGdldHRlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHByb3BlcnR5TmFtZSwgdW5kZWZpbmVkKTtcbn07XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24sIGRlYnVnKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciBhc3luYyA9IFByb21pc2UuX2FzeW5jO1xuXG5Qcm9taXNlLnByb3RvdHlwZVtcImJyZWFrXCJdID0gUHJvbWlzZS5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFkZWJ1Zy5jYW5jZWxsYXRpb24oKSkgcmV0dXJuIHRoaXMuX3dhcm4oXCJjYW5jZWxsYXRpb24gaXMgZGlzYWJsZWRcIik7XG5cbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdmFyIGNoaWxkID0gcHJvbWlzZTtcbiAgICB3aGlsZSAocHJvbWlzZS5faXNDYW5jZWxsYWJsZSgpKSB7XG4gICAgICAgIGlmICghcHJvbWlzZS5fY2FuY2VsQnkoY2hpbGQpKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQuX2lzRm9sbG93aW5nKCkpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hpbGQuX2NhbmNlbEJyYW5jaGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJlbnQgPSBwcm9taXNlLl9jYW5jZWxsYXRpb25QYXJlbnQ7XG4gICAgICAgIGlmIChwYXJlbnQgPT0gbnVsbCB8fCAhcGFyZW50Ll9pc0NhbmNlbGxhYmxlKCkpIHtcbiAgICAgICAgICAgIGlmIChwcm9taXNlLl9pc0ZvbGxvd2luZygpKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fY2FuY2VsQnJhbmNoZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHByb21pc2UuX2lzRm9sbG93aW5nKCkpIHByb21pc2UuX2ZvbGxvd2VlKCkuY2FuY2VsKCk7XG4gICAgICAgICAgICBwcm9taXNlLl9zZXRXaWxsQmVDYW5jZWxsZWQoKTtcbiAgICAgICAgICAgIGNoaWxkID0gcHJvbWlzZTtcbiAgICAgICAgICAgIHByb21pc2UgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fYnJhbmNoSGFzQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbC0tO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Vub3VnaEJyYW5jaGVzSGF2ZUNhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgdGhpcy5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA8PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NhbmNlbEJ5ID0gZnVuY3Rpb24oY2FuY2VsbGVyKSB7XG4gICAgaWYgKGNhbmNlbGxlciA9PT0gdGhpcykge1xuICAgICAgICB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gMDtcbiAgICAgICAgdGhpcy5faW52b2tlT25DYW5jZWwoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYnJhbmNoSGFzQ2FuY2VsbGVkKCk7XG4gICAgICAgIGlmICh0aGlzLl9lbm91Z2hCcmFuY2hlc0hhdmVDYW5jZWxsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5faW52b2tlT25DYW5jZWwoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9jYW5jZWxCcmFuY2hlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9lbm91Z2hCcmFuY2hlc0hhdmVDYW5jZWxsZWQoKSkge1xuICAgICAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9pc0NhbmNlbGxhYmxlKCkpIHJldHVybjtcbiAgICB0aGlzLl9zZXRDYW5jZWxsZWQoKTtcbiAgICBhc3luYy5pbnZva2UodGhpcy5fY2FuY2VsUHJvbWlzZXMsIHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2FuY2VsUHJvbWlzZXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fbGVuZ3RoKCkgPiAwKSB0aGlzLl9zZXR0bGVQcm9taXNlcygpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Vuc2V0T25DYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9vbkNhbmNlbEZpZWxkID0gdW5kZWZpbmVkO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzQ2FuY2VsbGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1BlbmRpbmcoKSAmJiAhdGhpcy5faXNDYW5jZWxsZWQoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzQ2FuY2VsbGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1BlbmRpbmcoKSAmJiAhdGhpcy5pc0NhbmNlbGxlZCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2RvSW52b2tlT25DYW5jZWwgPSBmdW5jdGlvbihvbkNhbmNlbENhbGxiYWNrLCBpbnRlcm5hbE9ubHkpIHtcbiAgICBpZiAodXRpbC5pc0FycmF5KG9uQ2FuY2VsQ2FsbGJhY2spKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb25DYW5jZWxDYWxsYmFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fZG9JbnZva2VPbkNhbmNlbChvbkNhbmNlbENhbGxiYWNrW2ldLCBpbnRlcm5hbE9ubHkpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChvbkNhbmNlbENhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvbkNhbmNlbENhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGlmICghaW50ZXJuYWxPbmx5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0cnlDYXRjaChvbkNhbmNlbENhbGxiYWNrKS5jYWxsKHRoaXMuX2JvdW5kVmFsdWUoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGUgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F0dGFjaEV4dHJhVHJhY2UoZS5lKTtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlLmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uQ2FuY2VsQ2FsbGJhY2suX3Jlc3VsdENhbmNlbGxlZCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pbnZva2VPbkNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbkNhbmNlbENhbGxiYWNrID0gdGhpcy5fb25DYW5jZWwoKTtcbiAgICB0aGlzLl91bnNldE9uQ2FuY2VsKCk7XG4gICAgYXN5bmMuaW52b2tlKHRoaXMuX2RvSW52b2tlT25DYW5jZWwsIHRoaXMsIG9uQ2FuY2VsQ2FsbGJhY2spO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2ludm9rZUludGVybmFsT25DYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNDYW5jZWxsYWJsZSgpKSB7XG4gICAgICAgIHRoaXMuX2RvSW52b2tlT25DYW5jZWwodGhpcy5fb25DYW5jZWwoKSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuX3Vuc2V0T25DYW5jZWwoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jYW5jZWwoKTtcbn07XG5cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSw3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihORVhUX0ZJTFRFUikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGdldEtleXMgPSBfZGVyZXFfKFwiLi9lczVcIikua2V5cztcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xuXG5mdW5jdGlvbiBjYXRjaEZpbHRlcihpbnN0YW5jZXMsIGNiLCBwcm9taXNlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGJvdW5kVG8gPSBwcm9taXNlLl9ib3VuZFZhbHVlKCk7XG4gICAgICAgIHByZWRpY2F0ZUxvb3A6IGZvciAodmFyIGkgPSAwOyBpIDwgaW5zdGFuY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGluc3RhbmNlc1tpXTtcblxuICAgICAgICAgICAgaWYgKGl0ZW0gPT09IEVycm9yIHx8XG4gICAgICAgICAgICAgICAgKGl0ZW0gIT0gbnVsbCAmJiBpdGVtLnByb3RvdHlwZSBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ5Q2F0Y2goY2IpLmNhbGwoYm91bmRUbywgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoZXNQcmVkaWNhdGUgPSB0cnlDYXRjaChpdGVtKS5jYWxsKGJvdW5kVG8sIGUpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzUHJlZGljYXRlID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlc1ByZWRpY2F0ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoZXNQcmVkaWNhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyeUNhdGNoKGNiKS5jYWxsKGJvdW5kVG8sIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXRpbC5pc09iamVjdChlKSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gZ2V0S2V5cyhpdGVtKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbal07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtW2tleV0gIT0gZVtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBwcmVkaWNhdGVMb29wO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnlDYXRjaChjYikuY2FsbChib3VuZFRvLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTkVYVF9GSUxURVI7XG4gICAgfTtcbn1cblxucmV0dXJuIGNhdGNoRmlsdGVyO1xufTtcblxufSx7XCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSw4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlKSB7XG52YXIgbG9uZ1N0YWNrVHJhY2VzID0gZmFsc2U7XG52YXIgY29udGV4dFN0YWNrID0gW107XG5cblByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZCA9IGZ1bmN0aW9uKCkge307XG5Qcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBmdW5jdGlvbigpIHtyZXR1cm4gbnVsbDt9O1xuUHJvbWlzZS5fcGVla0NvbnRleHQgPSBQcm9taXNlLnByb3RvdHlwZS5fcGVla0NvbnRleHQgPSBmdW5jdGlvbigpIHt9O1xuXG5mdW5jdGlvbiBDb250ZXh0KCkge1xuICAgIHRoaXMuX3RyYWNlID0gbmV3IENvbnRleHQuQ2FwdHVyZWRUcmFjZShwZWVrQ29udGV4dCgpKTtcbn1cbkNvbnRleHQucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl90cmFjZS5fcHJvbWlzZUNyZWF0ZWQgPSBudWxsO1xuICAgICAgICBjb250ZXh0U3RhY2sucHVzaCh0aGlzLl90cmFjZSk7XG4gICAgfVxufTtcblxuQ29udGV4dC5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3RyYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHRyYWNlID0gY29udGV4dFN0YWNrLnBvcCgpO1xuICAgICAgICB2YXIgcmV0ID0gdHJhY2UuX3Byb21pc2VDcmVhdGVkO1xuICAgICAgICB0cmFjZS5fcHJvbWlzZUNyZWF0ZWQgPSBudWxsO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbnRleHQoKSB7XG4gICAgaWYgKGxvbmdTdGFja1RyYWNlcykgcmV0dXJuIG5ldyBDb250ZXh0KCk7XG59XG5cbmZ1bmN0aW9uIHBlZWtDb250ZXh0KCkge1xuICAgIHZhciBsYXN0SW5kZXggPSBjb250ZXh0U3RhY2subGVuZ3RoIC0gMTtcbiAgICBpZiAobGFzdEluZGV4ID49IDApIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHRTdGFja1tsYXN0SW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuQ29udGV4dC5DYXB0dXJlZFRyYWNlID0gbnVsbDtcbkNvbnRleHQuY3JlYXRlID0gY3JlYXRlQ29udGV4dDtcbkNvbnRleHQuZGVhY3RpdmF0ZUxvbmdTdGFja1RyYWNlcyA9IGZ1bmN0aW9uKCkge307XG5Db250ZXh0LmFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIFByb21pc2VfcHVzaENvbnRleHQgPSBQcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfcG9wQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wb3BDb250ZXh0O1xuICAgIHZhciBQcm9taXNlX1BlZWtDb250ZXh0ID0gUHJvbWlzZS5fcGVla0NvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfcGVla0NvbnRleHQgPSBQcm9taXNlLnByb3RvdHlwZS5fcGVla0NvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfcHJvbWlzZUNyZWF0ZWQgPSBQcm9taXNlLnByb3RvdHlwZS5fcHJvbWlzZUNyZWF0ZWQ7XG4gICAgQ29udGV4dC5kZWFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IFByb21pc2VfcHVzaENvbnRleHQ7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wb3BDb250ZXh0ID0gUHJvbWlzZV9wb3BDb250ZXh0O1xuICAgICAgICBQcm9taXNlLl9wZWVrQ29udGV4dCA9IFByb21pc2VfUGVla0NvbnRleHQ7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dCA9IFByb21pc2VfcGVla0NvbnRleHQ7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZCA9IFByb21pc2VfcHJvbWlzZUNyZWF0ZWQ7XG4gICAgICAgIGxvbmdTdGFja1RyYWNlcyA9IGZhbHNlO1xuICAgIH07XG4gICAgbG9uZ1N0YWNrVHJhY2VzID0gdHJ1ZTtcbiAgICBQcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQgPSBDb250ZXh0LnByb3RvdHlwZS5fcHVzaENvbnRleHQ7XG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBDb250ZXh0LnByb3RvdHlwZS5fcG9wQ29udGV4dDtcbiAgICBQcm9taXNlLl9wZWVrQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dCA9IHBlZWtDb250ZXh0O1xuICAgIFByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3R4ID0gdGhpcy5fcGVla0NvbnRleHQoKTtcbiAgICAgICAgaWYgKGN0eCAmJiBjdHguX3Byb21pc2VDcmVhdGVkID09IG51bGwpIGN0eC5fcHJvbWlzZUNyZWF0ZWQgPSB0aGlzO1xuICAgIH07XG59O1xucmV0dXJuIENvbnRleHQ7XG59O1xuXG59LHt9XSw5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBDb250ZXh0KSB7XG52YXIgZ2V0RG9tYWluID0gUHJvbWlzZS5fZ2V0RG9tYWluO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG52YXIgV2FybmluZyA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKS5XYXJuaW5nO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGNhbkF0dGFjaFRyYWNlID0gdXRpbC5jYW5BdHRhY2hUcmFjZTtcbnZhciB1bmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkO1xudmFyIHBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uO1xudmFyIGJsdWViaXJkRnJhbWVQYXR0ZXJuID1cbiAgICAvW1xcXFxcXC9dYmx1ZWJpcmRbXFxcXFxcL11qc1tcXFxcXFwvXShyZWxlYXNlfGRlYnVnfGluc3RydW1lbnRlZCkvO1xudmFyIG5vZGVGcmFtZVBhdHRlcm4gPSAvXFwoKD86dGltZXJzXFwuanMpOlxcZCs6XFxkK1xcKS87XG52YXIgcGFyc2VMaW5lUGF0dGVybiA9IC9bXFwvPFxcKF0oLis/KTooXFxkKyk6KFxcZCspXFwpP1xccyokLztcbnZhciBzdGFja0ZyYW1lUGF0dGVybiA9IG51bGw7XG52YXIgZm9ybWF0U3RhY2sgPSBudWxsO1xudmFyIGluZGVudFN0YWNrRnJhbWVzID0gZmFsc2U7XG52YXIgcHJpbnRXYXJuaW5nO1xudmFyIGRlYnVnZ2luZyA9ICEhKHV0aWwuZW52KFwiQkxVRUJJUkRfREVCVUdcIikgIT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHRydWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLmVudihcIkJMVUVCSVJEX0RFQlVHXCIpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5lbnYoXCJOT0RFX0VOVlwiKSA9PT0gXCJkZXZlbG9wbWVudFwiKSk7XG5cbnZhciB3YXJuaW5ncyA9ICEhKHV0aWwuZW52KFwiQkxVRUJJUkRfV0FSTklOR1NcIikgIT0gMCAmJlxuICAgIChkZWJ1Z2dpbmcgfHwgdXRpbC5lbnYoXCJCTFVFQklSRF9XQVJOSU5HU1wiKSkpO1xuXG52YXIgbG9uZ1N0YWNrVHJhY2VzID0gISEodXRpbC5lbnYoXCJCTFVFQklSRF9MT05HX1NUQUNLX1RSQUNFU1wiKSAhPSAwICYmXG4gICAgKGRlYnVnZ2luZyB8fCB1dGlsLmVudihcIkJMVUVCSVJEX0xPTkdfU1RBQ0tfVFJBQ0VTXCIpKSk7XG5cbnZhciB3Rm9yZ290dGVuUmV0dXJuID0gdXRpbC5lbnYoXCJCTFVFQklSRF9XX0ZPUkdPVFRFTl9SRVRVUk5cIikgIT0gMCAmJlxuICAgICh3YXJuaW5ncyB8fCAhIXV0aWwuZW52KFwiQkxVRUJJUkRfV19GT1JHT1RURU5fUkVUVVJOXCIpKTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIHRhcmdldC5fYml0RmllbGQgPSAoKHRhcmdldC5fYml0RmllbGQgJiAofjEwNDg1NzYpKSB8XG4gICAgICAgICAgICAgICAgICAgICAgNTI0Mjg4KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9lbnN1cmVQb3NzaWJsZVJlamVjdGlvbkhhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCh0aGlzLl9iaXRGaWVsZCAmIDUyNDI4OCkgIT09IDApIHJldHVybjtcbiAgICB0aGlzLl9zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgIGFzeW5jLmludm9rZUxhdGVyKHRoaXMuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbiwgdGhpcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb25Jc0hhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZmlyZVJlamVjdGlvbkV2ZW50KFwicmVqZWN0aW9uSGFuZGxlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQsIHVuZGVmaW5lZCwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0UmV0dXJuZWROb25VbmRlZmluZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMjY4NDM1NDU2O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JldHVybmVkTm9uVW5kZWZpbmVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDI2ODQzNTQ1NikgIT09IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbm90aWZ5VW5oYW5kbGVkUmVqZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc1JlamVjdGlvblVuaGFuZGxlZCgpKSB7XG4gICAgICAgIHZhciByZWFzb24gPSB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbiAgICAgICAgdGhpcy5fc2V0VW5oYW5kbGVkUmVqZWN0aW9uSXNOb3RpZmllZCgpO1xuICAgICAgICBmaXJlUmVqZWN0aW9uRXZlbnQoXCJ1bmhhbmRsZWRSZWplY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24sIHJlYXNvbiwgdGhpcyk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDI2MjE0NDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCAmICh+MjYyMTQ0KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc1VuaGFuZGxlZFJlamVjdGlvbk5vdGlmaWVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAyNjIxNDQpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMTA0ODU3Njtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjEwNDg1NzYpO1xuICAgIGlmICh0aGlzLl9pc1VuaGFuZGxlZFJlamVjdGlvbk5vdGlmaWVkKCkpIHtcbiAgICAgICAgdGhpcy5fdW5zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkKCk7XG4gICAgICAgIHRoaXMuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbklzSGFuZGxlZCgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc1JlamVjdGlvblVuaGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMTA0ODU3NikgPiAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3dhcm4gPSBmdW5jdGlvbihtZXNzYWdlLCBzaG91bGRVc2VPd25UcmFjZSwgcHJvbWlzZSkge1xuICAgIHJldHVybiB3YXJuKG1lc3NhZ2UsIHNob3VsZFVzZU93blRyYWNlLCBwcm9taXNlIHx8IHRoaXMpO1xufTtcblxuUHJvbWlzZS5vblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIHBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uID1cbiAgICAgICAgdHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIgPyAoZG9tYWluID09PSBudWxsID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4gOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBmbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbn07XG5cblByb21pc2Uub25VbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIHVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQgPVxuICAgICAgICB0eXBlb2YgZm4gPT09IFwiZnVuY3Rpb25cIiA/IChkb21haW4gPT09IG51bGwgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIGZuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xufTtcblxudmFyIGRpc2FibGVMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5sb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFzeW5jLmhhdmVJdGVtc1F1ZXVlZCgpICYmICFjb25maWcubG9uZ1N0YWNrVHJhY2VzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbm5vdCBlbmFibGUgbG9uZyBzdGFjayB0cmFjZXMgYWZ0ZXIgcHJvbWlzZXMgaGF2ZSBiZWVuIGNyZWF0ZWRcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICBpZiAoIWNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICB2YXIgUHJvbWlzZV9jYXB0dXJlU3RhY2tUcmFjZSA9IFByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZTtcbiAgICAgICAgdmFyIFByb21pc2VfYXR0YWNoRXh0cmFUcmFjZSA9IFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hFeHRyYVRyYWNlO1xuICAgICAgICBjb25maWcubG9uZ1N0YWNrVHJhY2VzID0gdHJ1ZTtcbiAgICAgICAgZGlzYWJsZUxvbmdTdGFja1RyYWNlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGFzeW5jLmhhdmVJdGVtc1F1ZXVlZCgpICYmICFjb25maWcubG9uZ1N0YWNrVHJhY2VzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2Fubm90IGVuYWJsZSBsb25nIHN0YWNrIHRyYWNlcyBhZnRlciBwcm9taXNlcyBoYXZlIGJlZW4gY3JlYXRlZFxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fY2FwdHVyZVN0YWNrVHJhY2UgPSBQcm9taXNlX2NhcHR1cmVTdGFja1RyYWNlO1xuICAgICAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2UgPSBQcm9taXNlX2F0dGFjaEV4dHJhVHJhY2U7XG4gICAgICAgICAgICBDb250ZXh0LmRlYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMoKTtcbiAgICAgICAgICAgIGFzeW5jLmVuYWJsZVRyYW1wb2xpbmUoKTtcbiAgICAgICAgICAgIGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2NhcHR1cmVTdGFja1RyYWNlID0gbG9uZ1N0YWNrVHJhY2VzQ2FwdHVyZVN0YWNrVHJhY2U7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hFeHRyYVRyYWNlID0gbG9uZ1N0YWNrVHJhY2VzQXR0YWNoRXh0cmFUcmFjZTtcbiAgICAgICAgQ29udGV4dC5hY3RpdmF0ZUxvbmdTdGFja1RyYWNlcygpO1xuICAgICAgICBhc3luYy5kaXNhYmxlVHJhbXBvbGluZUlmTmVjZXNzYXJ5KCk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5oYXNMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKTtcbn07XG5cbnZhciBmaXJlRG9tRXZlbnQgPSAoZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBDdXN0b21FdmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJDdXN0b21FdmVudFwiKTtcbiAgICAgICAgICAgIHV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KG5hbWUudG9Mb3dlckNhc2UoKSwge1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF1dGlsLmdsb2JhbC5kaXNwYXRjaEV2ZW50KGRvbUV2ZW50KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIEV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudChcIkN1c3RvbUV2ZW50XCIpO1xuICAgICAgICAgICAgdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obmFtZSwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9tRXZlbnQgPSBuZXcgRXZlbnQobmFtZS50b0xvd2VyQ2FzZSgpLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkb21FdmVudC5kZXRhaWwgPSBldmVudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZG9tRXZlbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7XG4gICAgICAgICAgICBldmVudC5pbml0Q3VzdG9tRXZlbnQoXCJ0ZXN0aW5ndGhlZXZlbnRcIiwgZmFsc2UsIHRydWUsIHt9KTtcbiAgICAgICAgICAgIHV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvbUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTtcbiAgICAgICAgICAgICAgICBkb21FdmVudC5pbml0Q3VzdG9tRXZlbnQobmFtZS50b0xvd2VyQ2FzZSgpLCBmYWxzZSwgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiAhdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChkb21FdmVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufSkoKTtcblxudmFyIGZpcmVHbG9iYWxFdmVudCA9IChmdW5jdGlvbigpIHtcbiAgICBpZiAodXRpbC5pc05vZGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3MuZW1pdC5hcHBseShwcm9jZXNzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdXRpbC5nbG9iYWwpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IFwib25cIiArIG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSB1dGlsLmdsb2JhbFttZXRob2ROYW1lXTtcbiAgICAgICAgICAgIGlmICghbWV0aG9kKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBtZXRob2QuYXBwbHkodXRpbC5nbG9iYWwsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdChuYW1lLCBwcm9taXNlKSB7XG4gICAgcmV0dXJuIHtwcm9taXNlOiBwcm9taXNlfTtcbn1cblxudmFyIGV2ZW50VG9PYmplY3RHZW5lcmF0b3IgPSB7XG4gICAgcHJvbWlzZUNyZWF0ZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VGdWxmaWxsZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VSZWplY3RlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3QsXG4gICAgcHJvbWlzZVJlc29sdmVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlQ2FuY2VsbGVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlQ2hhaW5lZDogZnVuY3Rpb24obmFtZSwgcHJvbWlzZSwgY2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIHtwcm9taXNlOiBwcm9taXNlLCBjaGlsZDogY2hpbGR9O1xuICAgIH0sXG4gICAgd2FybmluZzogZnVuY3Rpb24obmFtZSwgd2FybmluZykge1xuICAgICAgICByZXR1cm4ge3dhcm5pbmc6IHdhcm5pbmd9O1xuICAgIH0sXG4gICAgdW5oYW5kbGVkUmVqZWN0aW9uOiBmdW5jdGlvbiAobmFtZSwgcmVhc29uLCBwcm9taXNlKSB7XG4gICAgICAgIHJldHVybiB7cmVhc29uOiByZWFzb24sIHByb21pc2U6IHByb21pc2V9O1xuICAgIH0sXG4gICAgcmVqZWN0aW9uSGFuZGxlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3Rcbn07XG5cbnZhciBhY3RpdmVGaXJlRXZlbnQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBnbG9iYWxFdmVudEZpcmVkID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgZ2xvYmFsRXZlbnRGaXJlZCA9IGZpcmVHbG9iYWxFdmVudC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlKTtcbiAgICAgICAgZ2xvYmFsRXZlbnRGaXJlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGRvbUV2ZW50RmlyZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBkb21FdmVudEZpcmVkID0gZmlyZURvbUV2ZW50KG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VG9PYmplY3RHZW5lcmF0b3JbbmFtZV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUpO1xuICAgICAgICBkb21FdmVudEZpcmVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tRXZlbnRGaXJlZCB8fCBnbG9iYWxFdmVudEZpcmVkO1xufTtcblxuUHJvbWlzZS5jb25maWcgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgb3B0cyA9IE9iamVjdChvcHRzKTtcbiAgICBpZiAoXCJsb25nU3RhY2tUcmFjZXNcIiBpbiBvcHRzKSB7XG4gICAgICAgIGlmIChvcHRzLmxvbmdTdGFja1RyYWNlcykge1xuICAgICAgICAgICAgUHJvbWlzZS5sb25nU3RhY2tUcmFjZXMoKTtcbiAgICAgICAgfSBlbHNlIGlmICghb3B0cy5sb25nU3RhY2tUcmFjZXMgJiYgUHJvbWlzZS5oYXNMb25nU3RhY2tUcmFjZXMoKSkge1xuICAgICAgICAgICAgZGlzYWJsZUxvbmdTdGFja1RyYWNlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChcIndhcm5pbmdzXCIgaW4gb3B0cykge1xuICAgICAgICB2YXIgd2FybmluZ3NPcHRpb24gPSBvcHRzLndhcm5pbmdzO1xuICAgICAgICBjb25maWcud2FybmluZ3MgPSAhIXdhcm5pbmdzT3B0aW9uO1xuICAgICAgICB3Rm9yZ290dGVuUmV0dXJuID0gY29uZmlnLndhcm5pbmdzO1xuXG4gICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KHdhcm5pbmdzT3B0aW9uKSkge1xuICAgICAgICAgICAgaWYgKFwid0ZvcmdvdHRlblJldHVyblwiIGluIHdhcm5pbmdzT3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgd0ZvcmdvdHRlblJldHVybiA9ICEhd2FybmluZ3NPcHRpb24ud0ZvcmdvdHRlblJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoXCJjYW5jZWxsYXRpb25cIiBpbiBvcHRzICYmIG9wdHMuY2FuY2VsbGF0aW9uICYmICFjb25maWcuY2FuY2VsbGF0aW9uKSB7XG4gICAgICAgIGlmIChhc3luYy5oYXZlSXRlbXNRdWV1ZWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIFwiY2Fubm90IGVuYWJsZSBjYW5jZWxsYXRpb24gYWZ0ZXIgcHJvbWlzZXMgYXJlIGluIHVzZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fY2xlYXJDYW5jZWxsYXRpb25EYXRhID1cbiAgICAgICAgICAgIGNhbmNlbGxhdGlvbkNsZWFyQ2FuY2VsbGF0aW9uRGF0YTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fb25DYW5jZWwgPSBjYW5jZWxsYXRpb25PbkNhbmNlbDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3NldE9uQ2FuY2VsID0gY2FuY2VsbGF0aW9uU2V0T25DYW5jZWw7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayA9XG4gICAgICAgICAgICBjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjaztcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBjYW5jZWxsYXRpb25FeGVjdXRlO1xuICAgICAgICBwcm9wYWdhdGVGcm9tRnVuY3Rpb24gPSBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tO1xuICAgICAgICBjb25maWcuY2FuY2VsbGF0aW9uID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKFwibW9uaXRvcmluZ1wiIGluIG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMubW9uaXRvcmluZyAmJiAhY29uZmlnLm1vbml0b3JpbmcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5tb25pdG9yaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBhY3RpdmVGaXJlRXZlbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAoIW9wdHMubW9uaXRvcmluZyAmJiBjb25maWcubW9uaXRvcmluZykge1xuICAgICAgICAgICAgY29uZmlnLm1vbml0b3JpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBkZWZhdWx0RmlyZUV2ZW50O1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZnVuY3Rpb24gZGVmYXVsdEZpcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG5cblByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBkZWZhdWx0RmlyZUV2ZW50O1xuUHJvbWlzZS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBmdW5jdGlvbihleGVjdXRvciwgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn07XG5Qcm9taXNlLnByb3RvdHlwZS5fb25DYW5jZWwgPSBmdW5jdGlvbiAoKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9zZXRPbkNhbmNlbCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7IDsgfTtcblByb21pc2UucHJvdG90eXBlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uKG9uQ2FuY2VsKSB7XG4gICAgO1xufTtcblByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZSA9IGZ1bmN0aW9uICgpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2UgPSBmdW5jdGlvbiAoKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9jbGVhckNhbmNlbGxhdGlvbkRhdGEgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBmdW5jdGlvbiAocGFyZW50LCBmbGFncykge1xuICAgIDtcbiAgICA7XG59O1xuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25FeGVjdXRlKGV4ZWN1dG9yLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0LCBmdW5jdGlvbihvbkNhbmNlbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbkNhbmNlbCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIm9uQ2FuY2VsIG11c3QgYmUgYSBmdW5jdGlvbiwgZ290OiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLnRvU3RyaW5nKG9uQ2FuY2VsKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhvbkNhbmNlbCk7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhvbkNhbmNlbCkge1xuICAgIGlmICghdGhpcy5faXNDYW5jZWxsYWJsZSgpKSByZXR1cm4gdGhpcztcblxuICAgIHZhciBwcmV2aW91c09uQ2FuY2VsID0gdGhpcy5fb25DYW5jZWwoKTtcbiAgICBpZiAocHJldmlvdXNPbkNhbmNlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh1dGlsLmlzQXJyYXkocHJldmlvdXNPbkNhbmNlbCkpIHtcbiAgICAgICAgICAgIHByZXZpb3VzT25DYW5jZWwucHVzaChvbkNhbmNlbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRPbkNhbmNlbChbcHJldmlvdXNPbkNhbmNlbCwgb25DYW5jZWxdKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3NldE9uQ2FuY2VsKG9uQ2FuY2VsKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNhbmNlbGxhdGlvbk9uQ2FuY2VsKCkge1xuICAgIHJldHVybiB0aGlzLl9vbkNhbmNlbEZpZWxkO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25TZXRPbkNhbmNlbChvbkNhbmNlbCkge1xuICAgIHRoaXMuX29uQ2FuY2VsRmllbGQgPSBvbkNhbmNlbDtcbn1cblxuZnVuY3Rpb24gY2FuY2VsbGF0aW9uQ2xlYXJDYW5jZWxsYXRpb25EYXRhKCkge1xuICAgIHRoaXMuX2NhbmNlbGxhdGlvblBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9vbkNhbmNlbEZpZWxkID0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tKHBhcmVudCwgZmxhZ3MpIHtcbiAgICBpZiAoKGZsYWdzICYgMSkgIT09IDApIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsbGF0aW9uUGFyZW50ID0gcGFyZW50O1xuICAgICAgICB2YXIgYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA9IHBhcmVudC5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbDtcbiAgICAgICAgaWYgKGJyYW5jaGVzUmVtYWluaW5nVG9DYW5jZWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50Ll9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCArIDE7XG4gICAgfVxuICAgIGlmICgoZmxhZ3MgJiAyKSAhPT0gMCAmJiBwYXJlbnQuX2lzQm91bmQoKSkge1xuICAgICAgICB0aGlzLl9zZXRCb3VuZFRvKHBhcmVudC5fYm91bmRUbyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBiaW5kaW5nUHJvcGFnYXRlRnJvbShwYXJlbnQsIGZsYWdzKSB7XG4gICAgaWYgKChmbGFncyAmIDIpICE9PSAwICYmIHBhcmVudC5faXNCb3VuZCgpKSB7XG4gICAgICAgIHRoaXMuX3NldEJvdW5kVG8ocGFyZW50Ll9ib3VuZFRvKTtcbiAgICB9XG59XG52YXIgcHJvcGFnYXRlRnJvbUZ1bmN0aW9uID0gYmluZGluZ1Byb3BhZ2F0ZUZyb207XG5cbmZ1bmN0aW9uIGJvdW5kVmFsdWVGdW5jdGlvbigpIHtcbiAgICB2YXIgcmV0ID0gdGhpcy5fYm91bmRUbztcbiAgICBpZiAocmV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHJldCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXQuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXQudmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBsb25nU3RhY2tUcmFjZXNDYXB0dXJlU3RhY2tUcmFjZSgpIHtcbiAgICB0aGlzLl90cmFjZSA9IG5ldyBDYXB0dXJlZFRyYWNlKHRoaXMuX3BlZWtDb250ZXh0KCkpO1xufVxuXG5mdW5jdGlvbiBsb25nU3RhY2tUcmFjZXNBdHRhY2hFeHRyYVRyYWNlKGVycm9yLCBpZ25vcmVTZWxmKSB7XG4gICAgaWYgKGNhbkF0dGFjaFRyYWNlKGVycm9yKSkge1xuICAgICAgICB2YXIgdHJhY2UgPSB0aGlzLl90cmFjZTtcbiAgICAgICAgaWYgKHRyYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChpZ25vcmVTZWxmKSB0cmFjZSA9IHRyYWNlLl9wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRyYWNlLmF0dGFjaEV4dHJhVHJhY2UoZXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKCFlcnJvci5fX3N0YWNrQ2xlYW5lZF9fKSB7XG4gICAgICAgICAgICB2YXIgcGFyc2VkID0gcGFyc2VTdGFja0FuZE1lc3NhZ2UoZXJyb3IpO1xuICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChlcnJvciwgXCJzdGFja1wiLFxuICAgICAgICAgICAgICAgIHBhcnNlZC5tZXNzYWdlICsgXCJcXG5cIiArIHBhcnNlZC5zdGFjay5qb2luKFwiXFxuXCIpKTtcbiAgICAgICAgICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AoZXJyb3IsIFwiX19zdGFja0NsZWFuZWRfX1wiLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKHJldHVyblZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgbmFtZSwgcHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQpIHtcbiAgICBpZiAocmV0dXJuVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBwcm9taXNlQ3JlYXRlZCAhPT0gbnVsbCAmJlxuICAgICAgICB3Rm9yZ290dGVuUmV0dXJuKSB7XG4gICAgICAgIGlmIChwYXJlbnQgIT09IHVuZGVmaW5lZCAmJiBwYXJlbnQuX3JldHVybmVkTm9uVW5kZWZpbmVkKCkpIHJldHVybjtcbiAgICAgICAgaWYgKChwcm9taXNlLl9iaXRGaWVsZCAmIDY1NTM1KSA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChuYW1lKSBuYW1lID0gbmFtZSArIFwiIFwiO1xuICAgICAgICB2YXIgaGFuZGxlckxpbmUgPSBcIlwiO1xuICAgICAgICB2YXIgY3JlYXRvckxpbmUgPSBcIlwiO1xuICAgICAgICBpZiAocHJvbWlzZUNyZWF0ZWQuX3RyYWNlKSB7XG4gICAgICAgICAgICB2YXIgdHJhY2VMaW5lcyA9IHByb21pc2VDcmVhdGVkLl90cmFjZS5zdGFjay5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgICAgIHZhciBzdGFjayA9IGNsZWFuU3RhY2sodHJhY2VMaW5lcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZUZyYW1lUGF0dGVybi50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5lTWF0Y2hlcyA9IGxpbmUubWF0Y2gocGFyc2VMaW5lUGF0dGVybik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lTWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlckxpbmUgID0gXCJhdCBcIiArIGxpbmVNYXRjaGVzWzFdICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjpcIiArIGxpbmVNYXRjaGVzWzJdICsgXCI6XCIgKyBsaW5lTWF0Y2hlc1szXSArIFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RVc2VyTGluZSA9IHN0YWNrWzBdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2VMaW5lcy5sZW5ndGg7ICsraSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFjZUxpbmVzW2ldID09PSBmaXJzdFVzZXJMaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdG9yTGluZSA9IFwiXFxuXCIgKyB0cmFjZUxpbmVzW2kgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1zZyA9IFwiYSBwcm9taXNlIHdhcyBjcmVhdGVkIGluIGEgXCIgKyBuYW1lICtcbiAgICAgICAgICAgIFwiaGFuZGxlciBcIiArIGhhbmRsZXJMaW5lICsgXCJidXQgd2FzIG5vdCByZXR1cm5lZCBmcm9tIGl0LCBcIiArXG4gICAgICAgICAgICBcInNlZSBodHRwOi8vZ29vLmdsL3JScU1Vd1wiICtcbiAgICAgICAgICAgIGNyZWF0b3JMaW5lO1xuICAgICAgICBwcm9taXNlLl93YXJuKG1zZywgdHJ1ZSwgcHJvbWlzZUNyZWF0ZWQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVwcmVjYXRlZChuYW1lLCByZXBsYWNlbWVudCkge1xuICAgIHZhciBtZXNzYWdlID0gbmFtZSArXG4gICAgICAgIFwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uLlwiO1xuICAgIGlmIChyZXBsYWNlbWVudCkgbWVzc2FnZSArPSBcIiBVc2UgXCIgKyByZXBsYWNlbWVudCArIFwiIGluc3RlYWQuXCI7XG4gICAgcmV0dXJuIHdhcm4obWVzc2FnZSk7XG59XG5cbmZ1bmN0aW9uIHdhcm4obWVzc2FnZSwgc2hvdWxkVXNlT3duVHJhY2UsIHByb21pc2UpIHtcbiAgICBpZiAoIWNvbmZpZy53YXJuaW5ncykgcmV0dXJuO1xuICAgIHZhciB3YXJuaW5nID0gbmV3IFdhcm5pbmcobWVzc2FnZSk7XG4gICAgdmFyIGN0eDtcbiAgICBpZiAoc2hvdWxkVXNlT3duVHJhY2UpIHtcbiAgICAgICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZSh3YXJuaW5nKTtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgKGN0eCA9IFByb21pc2UuX3BlZWtDb250ZXh0KCkpKSB7XG4gICAgICAgIGN0eC5hdHRhY2hFeHRyYVRyYWNlKHdhcm5pbmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZSh3YXJuaW5nKTtcbiAgICAgICAgd2FybmluZy5zdGFjayA9IHBhcnNlZC5tZXNzYWdlICsgXCJcXG5cIiArIHBhcnNlZC5zdGFjay5qb2luKFwiXFxuXCIpO1xuICAgIH1cblxuICAgIGlmICghYWN0aXZlRmlyZUV2ZW50KFwid2FybmluZ1wiLCB3YXJuaW5nKSkge1xuICAgICAgICBmb3JtYXRBbmRMb2dFcnJvcih3YXJuaW5nLCBcIlwiLCB0cnVlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlY29uc3RydWN0U3RhY2sobWVzc2FnZSwgc3RhY2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgIHN0YWNrc1tpXS5wdXNoKFwiRnJvbSBwcmV2aW91cyBldmVudDpcIik7XG4gICAgICAgIHN0YWNrc1tpXSA9IHN0YWNrc1tpXS5qb2luKFwiXFxuXCIpO1xuICAgIH1cbiAgICBpZiAoaSA8IHN0YWNrcy5sZW5ndGgpIHtcbiAgICAgICAgc3RhY2tzW2ldID0gc3RhY2tzW2ldLmpvaW4oXCJcXG5cIik7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlICsgXCJcXG5cIiArIHN0YWNrcy5qb2luKFwiXFxuXCIpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVEdXBsaWNhdGVPckVtcHR5SnVtcHMoc3RhY2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKHN0YWNrc1tpXS5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICgoaSArIDEgPCBzdGFja3MubGVuZ3RoKSAmJiBzdGFja3NbaV1bMF0gPT09IHN0YWNrc1tpKzFdWzBdKSkge1xuICAgICAgICAgICAgc3RhY2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ29tbW9uUm9vdHMoc3RhY2tzKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBzdGFja3NbMF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzdGFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHByZXYgPSBzdGFja3NbaV07XG4gICAgICAgIHZhciBjdXJyZW50TGFzdEluZGV4ID0gY3VycmVudC5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgY3VycmVudExhc3RMaW5lID0gY3VycmVudFtjdXJyZW50TGFzdEluZGV4XTtcbiAgICAgICAgdmFyIGNvbW1vblJvb3RNZWV0UG9pbnQgPSAtMTtcblxuICAgICAgICBmb3IgKHZhciBqID0gcHJldi5sZW5ndGggLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgaWYgKHByZXZbal0gPT09IGN1cnJlbnRMYXN0TGluZSkge1xuICAgICAgICAgICAgICAgIGNvbW1vblJvb3RNZWV0UG9pbnQgPSBqO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IGNvbW1vblJvb3RNZWV0UG9pbnQ7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgICAgICB2YXIgbGluZSA9IHByZXZbal07XG4gICAgICAgICAgICBpZiAoY3VycmVudFtjdXJyZW50TGFzdEluZGV4XSA9PT0gbGluZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQucG9wKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudExhc3RJbmRleC0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gcHJldjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNsZWFuU3RhY2soc3RhY2spIHtcbiAgICB2YXIgcmV0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICB2YXIgaXNUcmFjZUxpbmUgPSBcIiAgICAoTm8gc3RhY2sgdHJhY2UpXCIgPT09IGxpbmUgfHxcbiAgICAgICAgICAgIHN0YWNrRnJhbWVQYXR0ZXJuLnRlc3QobGluZSk7XG4gICAgICAgIHZhciBpc0ludGVybmFsRnJhbWUgPSBpc1RyYWNlTGluZSAmJiBzaG91bGRJZ25vcmUobGluZSk7XG4gICAgICAgIGlmIChpc1RyYWNlTGluZSAmJiAhaXNJbnRlcm5hbEZyYW1lKSB7XG4gICAgICAgICAgICBpZiAoaW5kZW50U3RhY2tGcmFtZXMgJiYgbGluZS5jaGFyQXQoMCkgIT09IFwiIFwiKSB7XG4gICAgICAgICAgICAgICAgbGluZSA9IFwiICAgIFwiICsgbGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldC5wdXNoKGxpbmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHN0YWNrRnJhbWVzQXNBcnJheShlcnJvcikge1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrLnJlcGxhY2UoL1xccyskL2csIFwiXCIpLnNwbGl0KFwiXFxuXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhY2subGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBzdGFja1tpXTtcbiAgICAgICAgaWYgKFwiICAgIChObyBzdGFjayB0cmFjZSlcIiA9PT0gbGluZSB8fCBzdGFja0ZyYW1lUGF0dGVybi50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgc3RhY2sgPSBzdGFjay5zbGljZShpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YWNrO1xufVxuXG5mdW5jdGlvbiBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcikge1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrO1xuICAgIHZhciBtZXNzYWdlID0gZXJyb3IudG9TdHJpbmcoKTtcbiAgICBzdGFjayA9IHR5cGVvZiBzdGFjayA9PT0gXCJzdHJpbmdcIiAmJiBzdGFjay5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyBzdGFja0ZyYW1lc0FzQXJyYXkoZXJyb3IpIDogW1wiICAgIChObyBzdGFjayB0cmFjZSlcIl07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGNsZWFuU3RhY2soc3RhY2spXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0QW5kTG9nRXJyb3IoZXJyb3IsIHRpdGxlLCBpc1NvZnQpIHtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2U7XG4gICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KGVycm9yKSkge1xuICAgICAgICAgICAgdmFyIHN0YWNrID0gZXJyb3Iuc3RhY2s7XG4gICAgICAgICAgICBtZXNzYWdlID0gdGl0bGUgKyBmb3JtYXRTdGFjayhzdGFjaywgZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRpdGxlICsgU3RyaW5nKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHByaW50V2FybmluZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBwcmludFdhcm5pbmcobWVzc2FnZSwgaXNTb2Z0KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uc29sZS5sb2cgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUubG9nID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZmlyZVJlamVjdGlvbkV2ZW50KG5hbWUsIGxvY2FsSGFuZGxlciwgcmVhc29uLCBwcm9taXNlKSB7XG4gICAgdmFyIGxvY2FsRXZlbnRGaXJlZCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgbG9jYWxIYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGxvY2FsRXZlbnRGaXJlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gXCJyZWplY3Rpb25IYW5kbGVkXCIpIHtcbiAgICAgICAgICAgICAgICBsb2NhbEhhbmRsZXIocHJvbWlzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2FsSGFuZGxlcihyZWFzb24sIHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUpO1xuICAgIH1cblxuICAgIGlmIChuYW1lID09PSBcInVuaGFuZGxlZFJlamVjdGlvblwiKSB7XG4gICAgICAgIGlmICghYWN0aXZlRmlyZUV2ZW50KG5hbWUsIHJlYXNvbiwgcHJvbWlzZSkgJiYgIWxvY2FsRXZlbnRGaXJlZCkge1xuICAgICAgICAgICAgZm9ybWF0QW5kTG9nRXJyb3IocmVhc29uLCBcIlVuaGFuZGxlZCByZWplY3Rpb24gXCIpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZlRmlyZUV2ZW50KG5hbWUsIHByb21pc2UpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0Tm9uRXJyb3Iob2JqKSB7XG4gICAgdmFyIHN0cjtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHN0ciA9IFwiW2Z1bmN0aW9uIFwiICtcbiAgICAgICAgICAgIChvYmoubmFtZSB8fCBcImFub255bW91c1wiKSArXG4gICAgICAgICAgICBcIl1cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdHIgPSBvYmogJiYgdHlwZW9mIG9iai50b1N0cmluZyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICA/IG9iai50b1N0cmluZygpIDogdXRpbC50b1N0cmluZyhvYmopO1xuICAgICAgICB2YXIgcnVzZWxlc3NUb1N0cmluZyA9IC9cXFtvYmplY3QgW2EtekEtWjAtOSRfXStcXF0vO1xuICAgICAgICBpZiAocnVzZWxlc3NUb1N0cmluZy50ZXN0KHN0cikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1N0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7XG4gICAgICAgICAgICAgICAgc3RyID0gbmV3U3RyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2goZSkge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHN0ciA9IFwiKGVtcHR5IGFycmF5KVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAoXCIoPFwiICsgc25pcChzdHIpICsgXCI+LCBubyBzdGFjayB0cmFjZSlcIik7XG59XG5cbmZ1bmN0aW9uIHNuaXAoc3RyKSB7XG4gICAgdmFyIG1heENoYXJzID0gNDE7XG4gICAgaWYgKHN0ci5sZW5ndGggPCBtYXhDaGFycykge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICByZXR1cm4gc3RyLnN1YnN0cigwLCBtYXhDaGFycyAtIDMpICsgXCIuLi5cIjtcbn1cblxuZnVuY3Rpb24gbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBjYXB0dXJlU3RhY2tUcmFjZSA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG52YXIgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfTtcbnZhciBwYXJzZUxpbmVJbmZvUmVnZXggPSAvW1xcLzxcXChdKFteOlxcL10rKTooXFxkKyk6KD86XFxkKylcXCk/XFxzKiQvO1xuZnVuY3Rpb24gcGFyc2VMaW5lSW5mbyhsaW5lKSB7XG4gICAgdmFyIG1hdGNoZXMgPSBsaW5lLm1hdGNoKHBhcnNlTGluZUluZm9SZWdleCk7XG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbGVOYW1lOiBtYXRjaGVzWzFdLFxuICAgICAgICAgICAgbGluZTogcGFyc2VJbnQobWF0Y2hlc1syXSwgMTApXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRCb3VuZHMoZmlyc3RMaW5lRXJyb3IsIGxhc3RMaW5lRXJyb3IpIHtcbiAgICBpZiAoIWxvbmdTdGFja1RyYWNlc0lzU3VwcG9ydGVkKCkpIHJldHVybjtcbiAgICB2YXIgZmlyc3RTdGFja0xpbmVzID0gZmlyc3RMaW5lRXJyb3Iuc3RhY2suc3BsaXQoXCJcXG5cIik7XG4gICAgdmFyIGxhc3RTdGFja0xpbmVzID0gbGFzdExpbmVFcnJvci5zdGFjay5zcGxpdChcIlxcblwiKTtcbiAgICB2YXIgZmlyc3RJbmRleCA9IC0xO1xuICAgIHZhciBsYXN0SW5kZXggPSAtMTtcbiAgICB2YXIgZmlyc3RGaWxlTmFtZTtcbiAgICB2YXIgbGFzdEZpbGVOYW1lO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3RTdGFja0xpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUxpbmVJbmZvKGZpcnN0U3RhY2tMaW5lc1tpXSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGZpcnN0RmlsZU5hbWUgPSByZXN1bHQuZmlsZU5hbWU7XG4gICAgICAgICAgICBmaXJzdEluZGV4ID0gcmVzdWx0LmxpbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RTdGFja0xpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUxpbmVJbmZvKGxhc3RTdGFja0xpbmVzW2ldKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgbGFzdEZpbGVOYW1lID0gcmVzdWx0LmZpbGVOYW1lO1xuICAgICAgICAgICAgbGFzdEluZGV4ID0gcmVzdWx0LmxpbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmlyc3RJbmRleCA8IDAgfHwgbGFzdEluZGV4IDwgMCB8fCAhZmlyc3RGaWxlTmFtZSB8fCAhbGFzdEZpbGVOYW1lIHx8XG4gICAgICAgIGZpcnN0RmlsZU5hbWUgIT09IGxhc3RGaWxlTmFtZSB8fCBmaXJzdEluZGV4ID49IGxhc3RJbmRleCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICBpZiAoYmx1ZWJpcmRGcmFtZVBhdHRlcm4udGVzdChsaW5lKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHZhciBpbmZvID0gcGFyc2VMaW5lSW5mbyhsaW5lKTtcbiAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgIGlmIChpbmZvLmZpbGVOYW1lID09PSBmaXJzdEZpbGVOYW1lICYmXG4gICAgICAgICAgICAgICAgKGZpcnN0SW5kZXggPD0gaW5mby5saW5lICYmIGluZm8ubGluZSA8PSBsYXN0SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIENhcHR1cmVkVHJhY2UocGFyZW50KSB7XG4gICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgIHRoaXMuX3Byb21pc2VzQ3JlYXRlZCA9IDA7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuX2xlbmd0aCA9IDEgKyAocGFyZW50ID09PSB1bmRlZmluZWQgPyAwIDogcGFyZW50Ll9sZW5ndGgpO1xuICAgIGNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIENhcHR1cmVkVHJhY2UpO1xuICAgIGlmIChsZW5ndGggPiAzMikgdGhpcy51bmN5Y2xlKCk7XG59XG51dGlsLmluaGVyaXRzKENhcHR1cmVkVHJhY2UsIEVycm9yKTtcbkNvbnRleHQuQ2FwdHVyZWRUcmFjZSA9IENhcHR1cmVkVHJhY2U7XG5cbkNhcHR1cmVkVHJhY2UucHJvdG90eXBlLnVuY3ljbGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoO1xuICAgIGlmIChsZW5ndGggPCAyKSByZXR1cm47XG4gICAgdmFyIG5vZGVzID0gW107XG4gICAgdmFyIHN0YWNrVG9JbmRleCA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIG5vZGUgPSB0aGlzOyBub2RlICE9PSB1bmRlZmluZWQ7ICsraSkge1xuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICBub2RlID0gbm9kZS5fcGFyZW50O1xuICAgIH1cbiAgICBsZW5ndGggPSB0aGlzLl9sZW5ndGggPSBpO1xuICAgIGZvciAodmFyIGkgPSBsZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgc3RhY2sgPSBub2Rlc1tpXS5zdGFjaztcbiAgICAgICAgaWYgKHN0YWNrVG9JbmRleFtzdGFja10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3RhY2tUb0luZGV4W3N0YWNrXSA9IGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY3VycmVudFN0YWNrID0gbm9kZXNbaV0uc3RhY2s7XG4gICAgICAgIHZhciBpbmRleCA9IHN0YWNrVG9JbmRleFtjdXJyZW50U3RhY2tdO1xuICAgICAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCAmJiBpbmRleCAhPT0gaSkge1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgIG5vZGVzW2luZGV4IC0gMV0uX3BhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBub2Rlc1tpbmRleCAtIDFdLl9sZW5ndGggPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZXNbaV0uX3BhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIG5vZGVzW2ldLl9sZW5ndGggPSAxO1xuICAgICAgICAgICAgdmFyIGN5Y2xlRWRnZU5vZGUgPSBpID4gMCA/IG5vZGVzW2kgLSAxXSA6IHRoaXM7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA8IGxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQgPSBub2Rlc1tpbmRleCArIDFdO1xuICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX3BhcmVudC51bmN5Y2xlKCk7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fbGVuZ3RoID1cbiAgICAgICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fcGFyZW50Ll9sZW5ndGggKyAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fbGVuZ3RoID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjdXJyZW50Q2hpbGRMZW5ndGggPSBjeWNsZUVkZ2VOb2RlLl9sZW5ndGggKyAxO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgLSAyOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgICAgIG5vZGVzW2pdLl9sZW5ndGggPSBjdXJyZW50Q2hpbGRMZW5ndGg7XG4gICAgICAgICAgICAgICAgY3VycmVudENoaWxkTGVuZ3RoKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5DYXB0dXJlZFRyYWNlLnByb3RvdHlwZS5hdHRhY2hFeHRyYVRyYWNlID0gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IuX19zdGFja0NsZWFuZWRfXykgcmV0dXJuO1xuICAgIHRoaXMudW5jeWNsZSgpO1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcik7XG4gICAgdmFyIG1lc3NhZ2UgPSBwYXJzZWQubWVzc2FnZTtcbiAgICB2YXIgc3RhY2tzID0gW3BhcnNlZC5zdGFja107XG5cbiAgICB2YXIgdHJhY2UgPSB0aGlzO1xuICAgIHdoaWxlICh0cmFjZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN0YWNrcy5wdXNoKGNsZWFuU3RhY2sodHJhY2Uuc3RhY2suc3BsaXQoXCJcXG5cIikpKTtcbiAgICAgICAgdHJhY2UgPSB0cmFjZS5fcGFyZW50O1xuICAgIH1cbiAgICByZW1vdmVDb21tb25Sb290cyhzdGFja3MpO1xuICAgIHJlbW92ZUR1cGxpY2F0ZU9yRW1wdHlKdW1wcyhzdGFja3MpO1xuICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AoZXJyb3IsIFwic3RhY2tcIiwgcmVjb25zdHJ1Y3RTdGFjayhtZXNzYWdlLCBzdGFja3MpKTtcbiAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKGVycm9yLCBcIl9fc3RhY2tDbGVhbmVkX19cIiwgdHJ1ZSk7XG59O1xuXG52YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSAoZnVuY3Rpb24gc3RhY2tEZXRlY3Rpb24oKSB7XG4gICAgdmFyIHY4c3RhY2tGcmFtZVBhdHRlcm4gPSAvXlxccyphdFxccyovO1xuICAgIHZhciB2OHN0YWNrRm9ybWF0dGVyID0gZnVuY3Rpb24oc3RhY2ssIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHJldHVybiBzdGFjaztcblxuICAgICAgICBpZiAoZXJyb3IubmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBlcnJvci5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvci50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtYXROb25FcnJvcihlcnJvcik7XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID09PSBcIm51bWJlclwiICYmXG4gICAgICAgIHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IHY4c3RhY2tGcmFtZVBhdHRlcm47XG4gICAgICAgIGZvcm1hdFN0YWNrID0gdjhzdGFja0Zvcm1hdHRlcjtcbiAgICAgICAgdmFyIGNhcHR1cmVTdGFja1RyYWNlID0gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U7XG5cbiAgICAgICAgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuIGJsdWViaXJkRnJhbWVQYXR0ZXJuLnRlc3QobGluZSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyZWNlaXZlciwgaWdub3JlVW50aWwpIHtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICAgICAgY2FwdHVyZVN0YWNrVHJhY2UocmVjZWl2ZXIsIGlnbm9yZVVudGlsKTtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCAtPSA2O1xuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKCk7XG5cbiAgICBpZiAodHlwZW9mIGVyci5zdGFjayA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICBlcnIuc3RhY2suc3BsaXQoXCJcXG5cIilbMF0uaW5kZXhPZihcInN0YWNrRGV0ZWN0aW9uQFwiKSA+PSAwKSB7XG4gICAgICAgIHN0YWNrRnJhbWVQYXR0ZXJuID0gL0AvO1xuICAgICAgICBmb3JtYXRTdGFjayA9IHY4c3RhY2tGb3JtYXR0ZXI7XG4gICAgICAgIGluZGVudFN0YWNrRnJhbWVzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhcHR1cmVTdGFja1RyYWNlKG8pIHtcbiAgICAgICAgICAgIG8uc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgaGFzU3RhY2tBZnRlclRocm93O1xuICAgIHRyeSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgICBoYXNTdGFja0FmdGVyVGhyb3cgPSAoXCJzdGFja1wiIGluIGUpO1xuICAgIH1cbiAgICBpZiAoIShcInN0YWNrXCIgaW4gZXJyKSAmJiBoYXNTdGFja0FmdGVyVGhyb3cgJiZcbiAgICAgICAgdHlwZW9mIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IHY4c3RhY2tGcmFtZVBhdHRlcm47XG4gICAgICAgIGZvcm1hdFN0YWNrID0gdjhzdGFja0Zvcm1hdHRlcjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhcHR1cmVTdGFja1RyYWNlKG8pIHtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICAgICAgdHJ5IHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICAgICAgICAgIGNhdGNoKGUpIHsgby5zdGFjayA9IGUuc3RhY2s7IH1cbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCAtPSA2O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZvcm1hdFN0YWNrID0gZnVuY3Rpb24oc3RhY2ssIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHJldHVybiBzdGFjaztcblxuICAgICAgICBpZiAoKHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGVycm9yID09PSBcImZ1bmN0aW9uXCIpICYmXG4gICAgICAgICAgICBlcnJvci5uYW1lICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm1hdE5vbkVycm9yKGVycm9yKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG51bGw7XG5cbn0pKFtdKTtcblxuaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBjb25zb2xlLndhcm4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBwcmludFdhcm5pbmcgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgfTtcbiAgICBpZiAodXRpbC5pc05vZGUgJiYgcHJvY2Vzcy5zdGRlcnIuaXNUVFkpIHtcbiAgICAgICAgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24obWVzc2FnZSwgaXNTb2Z0KSB7XG4gICAgICAgICAgICB2YXIgY29sb3IgPSBpc1NvZnQgPyBcIlxcdTAwMWJbMzNtXCIgOiBcIlxcdTAwMWJbMzFtXCI7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oY29sb3IgKyBtZXNzYWdlICsgXCJcXHUwMDFiWzBtXFxuXCIpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoIXV0aWwuaXNOb2RlICYmIHR5cGVvZiAobmV3IEVycm9yKCkuc3RhY2spID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHByaW50V2FybmluZyA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGlzU29mdCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiJWNcIiArIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NvZnQgPyBcImNvbG9yOiBkYXJrb3JhbmdlXCIgOiBcImNvbG9yOiByZWRcIik7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG52YXIgY29uZmlnID0ge1xuICAgIHdhcm5pbmdzOiB3YXJuaW5ncyxcbiAgICBsb25nU3RhY2tUcmFjZXM6IGZhbHNlLFxuICAgIGNhbmNlbGxhdGlvbjogZmFsc2UsXG4gICAgbW9uaXRvcmluZzogZmFsc2Vcbn07XG5cbmlmIChsb25nU3RhY2tUcmFjZXMpIFByb21pc2UubG9uZ1N0YWNrVHJhY2VzKCk7XG5cbnJldHVybiB7XG4gICAgbG9uZ1N0YWNrVHJhY2VzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5sb25nU3RhY2tUcmFjZXM7XG4gICAgfSxcbiAgICB3YXJuaW5nczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb25maWcud2FybmluZ3M7XG4gICAgfSxcbiAgICBjYW5jZWxsYXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uZmlnLmNhbmNlbGxhdGlvbjtcbiAgICB9LFxuICAgIG1vbml0b3Jpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uZmlnLm1vbml0b3Jpbmc7XG4gICAgfSxcbiAgICBwcm9wYWdhdGVGcm9tRnVuY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvcGFnYXRlRnJvbUZ1bmN0aW9uO1xuICAgIH0sXG4gICAgYm91bmRWYWx1ZUZ1bmN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJvdW5kVmFsdWVGdW5jdGlvbjtcbiAgICB9LFxuICAgIGNoZWNrRm9yZ290dGVuUmV0dXJuczogY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zLFxuICAgIHNldEJvdW5kczogc2V0Qm91bmRzLFxuICAgIHdhcm46IHdhcm4sXG4gICAgZGVwcmVjYXRlZDogZGVwcmVjYXRlZCxcbiAgICBDYXB0dXJlZFRyYWNlOiBDYXB0dXJlZFRyYWNlLFxuICAgIGZpcmVEb21FdmVudDogZmlyZURvbUV2ZW50LFxuICAgIGZpcmVHbG9iYWxFdmVudDogZmlyZUdsb2JhbEV2ZW50XG59O1xufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwxMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xuZnVuY3Rpb24gcmV0dXJuZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG59XG5mdW5jdGlvbiB0aHJvd2VyKCkge1xuICAgIHRocm93IHRoaXMucmVhc29uO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZVtcInJldHVyblwiXSA9XG5Qcm9taXNlLnByb3RvdHlwZS50aGVuUmV0dXJuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkgdmFsdWUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgIHJldHVybmVyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwge3ZhbHVlOiB2YWx1ZX0sIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZVtcInRocm93XCJdID1cblByb21pc2UucHJvdG90eXBlLnRoZW5UaHJvdyA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihcbiAgICAgICAgdGhyb3dlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtyZWFzb246IHJlYXNvbn0sIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5jYXRjaFRocm93ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICB1bmRlZmluZWQsIHRocm93ZXIsIHVuZGVmaW5lZCwge3JlYXNvbjogcmVhc29ufSwgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgX3JlYXNvbiA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbigpIHt0aHJvdyBfcmVhc29uO307XG4gICAgICAgIHJldHVybiB0aGlzLmNhdWdodChyZWFzb24sIGhhbmRsZXIpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLmNhdGNoUmV0dXJuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPD0gMSkge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB2YWx1ZS5zdXBwcmVzc1VuaGFuZGxlZFJlamVjdGlvbnMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICB1bmRlZmluZWQsIHJldHVybmVyLCB1bmRlZmluZWQsIHt2YWx1ZTogdmFsdWV9LCB1bmRlZmluZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfdmFsdWUgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIGlmIChfdmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSBfdmFsdWUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24oKSB7cmV0dXJuIF92YWx1ZTt9O1xuICAgICAgICByZXR1cm4gdGhpcy5jYXVnaHQodmFsdWUsIGhhbmRsZXIpO1xuICAgIH1cbn07XG59O1xuXG59LHt9XSwxMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciBQcm9taXNlUmVkdWNlID0gUHJvbWlzZS5yZWR1Y2U7XG52YXIgUHJvbWlzZUFsbCA9IFByb21pc2UuYWxsO1xuXG5mdW5jdGlvbiBwcm9taXNlQWxsVGhpcygpIHtcbiAgICByZXR1cm4gUHJvbWlzZUFsbCh0aGlzKTtcbn1cblxuZnVuY3Rpb24gUHJvbWlzZU1hcFNlcmllcyhwcm9taXNlcywgZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZShwcm9taXNlcywgZm4sIElOVEVSTkFMLCBJTlRFUk5BTCk7XG59XG5cblByb21pc2UucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZSh0aGlzLCBmbiwgSU5URVJOQUwsIDApXG4gICAgICAgICAgICAgIC5fdGhlbihwcm9taXNlQWxsVGhpcywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5tYXBTZXJpZXMgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZSh0aGlzLCBmbiwgSU5URVJOQUwsIElOVEVSTkFMKTtcbn07XG5cblByb21pc2UuZWFjaCA9IGZ1bmN0aW9uIChwcm9taXNlcywgZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZShwcm9taXNlcywgZm4sIElOVEVSTkFMLCAwKVxuICAgICAgICAgICAgICAuX3RoZW4ocHJvbWlzZUFsbFRoaXMsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBwcm9taXNlcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UubWFwU2VyaWVzID0gUHJvbWlzZU1hcFNlcmllcztcbn07XG5cblxufSx7fV0sMTI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xudmFyIE9iamVjdGZyZWV6ZSA9IGVzNS5mcmVlemU7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgaW5oZXJpdHMgPSB1dGlsLmluaGVyaXRzO1xudmFyIG5vdEVudW1lcmFibGVQcm9wID0gdXRpbC5ub3RFbnVtZXJhYmxlUHJvcDtcblxuZnVuY3Rpb24gc3ViRXJyb3IobmFtZVByb3BlcnR5LCBkZWZhdWx0TWVzc2FnZSkge1xuICAgIGZ1bmN0aW9uIFN1YkVycm9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFN1YkVycm9yKSkgcmV0dXJuIG5ldyBTdWJFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJtZXNzYWdlXCIsXG4gICAgICAgICAgICB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IG1lc3NhZ2UgOiBkZWZhdWx0TWVzc2FnZSk7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibmFtZVwiLCBuYW1lUHJvcGVydHkpO1xuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbmhlcml0cyhTdWJFcnJvciwgRXJyb3IpO1xuICAgIHJldHVybiBTdWJFcnJvcjtcbn1cblxudmFyIF9UeXBlRXJyb3IsIF9SYW5nZUVycm9yO1xudmFyIFdhcm5pbmcgPSBzdWJFcnJvcihcIldhcm5pbmdcIiwgXCJ3YXJuaW5nXCIpO1xudmFyIENhbmNlbGxhdGlvbkVycm9yID0gc3ViRXJyb3IoXCJDYW5jZWxsYXRpb25FcnJvclwiLCBcImNhbmNlbGxhdGlvbiBlcnJvclwiKTtcbnZhciBUaW1lb3V0RXJyb3IgPSBzdWJFcnJvcihcIlRpbWVvdXRFcnJvclwiLCBcInRpbWVvdXQgZXJyb3JcIik7XG52YXIgQWdncmVnYXRlRXJyb3IgPSBzdWJFcnJvcihcIkFnZ3JlZ2F0ZUVycm9yXCIsIFwiYWdncmVnYXRlIGVycm9yXCIpO1xudHJ5IHtcbiAgICBfVHlwZUVycm9yID0gVHlwZUVycm9yO1xuICAgIF9SYW5nZUVycm9yID0gUmFuZ2VFcnJvcjtcbn0gY2F0Y2goZSkge1xuICAgIF9UeXBlRXJyb3IgPSBzdWJFcnJvcihcIlR5cGVFcnJvclwiLCBcInR5cGUgZXJyb3JcIik7XG4gICAgX1JhbmdlRXJyb3IgPSBzdWJFcnJvcihcIlJhbmdlRXJyb3JcIiwgXCJyYW5nZSBlcnJvclwiKTtcbn1cblxudmFyIG1ldGhvZHMgPSAoXCJqb2luIHBvcCBwdXNoIHNoaWZ0IHVuc2hpZnQgc2xpY2UgZmlsdGVyIGZvckVhY2ggc29tZSBcIiArXG4gICAgXCJldmVyeSBtYXAgaW5kZXhPZiBsYXN0SW5kZXhPZiByZWR1Y2UgcmVkdWNlUmlnaHQgc29ydCByZXZlcnNlXCIpLnNwbGl0KFwiIFwiKTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRob2RzLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKHR5cGVvZiBBcnJheS5wcm90b3R5cGVbbWV0aG9kc1tpXV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBBZ2dyZWdhdGVFcnJvci5wcm90b3R5cGVbbWV0aG9kc1tpXV0gPSBBcnJheS5wcm90b3R5cGVbbWV0aG9kc1tpXV07XG4gICAgfVxufVxuXG5lczUuZGVmaW5lUHJvcGVydHkoQWdncmVnYXRlRXJyb3IucHJvdG90eXBlLCBcImxlbmd0aFwiLCB7XG4gICAgdmFsdWU6IDAsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG59KTtcbkFnZ3JlZ2F0ZUVycm9yLnByb3RvdHlwZVtcImlzT3BlcmF0aW9uYWxcIl0gPSB0cnVlO1xudmFyIGxldmVsID0gMDtcbkFnZ3JlZ2F0ZUVycm9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbmRlbnQgPSBBcnJheShsZXZlbCAqIDQgKyAxKS5qb2luKFwiIFwiKTtcbiAgICB2YXIgcmV0ID0gXCJcXG5cIiArIGluZGVudCArIFwiQWdncmVnYXRlRXJyb3Igb2Y6XCIgKyBcIlxcblwiO1xuICAgIGxldmVsKys7XG4gICAgaW5kZW50ID0gQXJyYXkobGV2ZWwgKiA0ICsgMSkuam9pbihcIiBcIik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzdHIgPSB0aGlzW2ldID09PSB0aGlzID8gXCJbQ2lyY3VsYXIgQWdncmVnYXRlRXJyb3JdXCIgOiB0aGlzW2ldICsgXCJcIjtcbiAgICAgICAgdmFyIGxpbmVzID0gc3RyLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbmVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICBsaW5lc1tqXSA9IGluZGVudCArIGxpbmVzW2pdO1xuICAgICAgICB9XG4gICAgICAgIHN0ciA9IGxpbmVzLmpvaW4oXCJcXG5cIik7XG4gICAgICAgIHJldCArPSBzdHIgKyBcIlxcblwiO1xuICAgIH1cbiAgICBsZXZlbC0tO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5mdW5jdGlvbiBPcGVyYXRpb25hbEVycm9yKG1lc3NhZ2UpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgT3BlcmF0aW9uYWxFcnJvcikpXG4gICAgICAgIHJldHVybiBuZXcgT3BlcmF0aW9uYWxFcnJvcihtZXNzYWdlKTtcbiAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm5hbWVcIiwgXCJPcGVyYXRpb25hbEVycm9yXCIpO1xuICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibWVzc2FnZVwiLCBtZXNzYWdlKTtcbiAgICB0aGlzLmNhdXNlID0gbWVzc2FnZTtcbiAgICB0aGlzW1wiaXNPcGVyYXRpb25hbFwiXSA9IHRydWU7XG5cbiAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibWVzc2FnZVwiLCBtZXNzYWdlLm1lc3NhZ2UpO1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcInN0YWNrXCIsIG1lc3NhZ2Uuc3RhY2spO1xuICAgIH0gZWxzZSBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgfVxuXG59XG5pbmhlcml0cyhPcGVyYXRpb25hbEVycm9yLCBFcnJvcik7XG5cbnZhciBlcnJvclR5cGVzID0gRXJyb3JbXCJfX0JsdWViaXJkRXJyb3JUeXBlc19fXCJdO1xuaWYgKCFlcnJvclR5cGVzKSB7XG4gICAgZXJyb3JUeXBlcyA9IE9iamVjdGZyZWV6ZSh7XG4gICAgICAgIENhbmNlbGxhdGlvbkVycm9yOiBDYW5jZWxsYXRpb25FcnJvcixcbiAgICAgICAgVGltZW91dEVycm9yOiBUaW1lb3V0RXJyb3IsXG4gICAgICAgIE9wZXJhdGlvbmFsRXJyb3I6IE9wZXJhdGlvbmFsRXJyb3IsXG4gICAgICAgIFJlamVjdGlvbkVycm9yOiBPcGVyYXRpb25hbEVycm9yLFxuICAgICAgICBBZ2dyZWdhdGVFcnJvcjogQWdncmVnYXRlRXJyb3JcbiAgICB9KTtcbiAgICBlczUuZGVmaW5lUHJvcGVydHkoRXJyb3IsIFwiX19CbHVlYmlyZEVycm9yVHlwZXNfX1wiLCB7XG4gICAgICAgIHZhbHVlOiBlcnJvclR5cGVzLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlXG4gICAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIEVycm9yOiBFcnJvcixcbiAgICBUeXBlRXJyb3I6IF9UeXBlRXJyb3IsXG4gICAgUmFuZ2VFcnJvcjogX1JhbmdlRXJyb3IsXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3I6IGVycm9yVHlwZXMuQ2FuY2VsbGF0aW9uRXJyb3IsXG4gICAgT3BlcmF0aW9uYWxFcnJvcjogZXJyb3JUeXBlcy5PcGVyYXRpb25hbEVycm9yLFxuICAgIFRpbWVvdXRFcnJvcjogZXJyb3JUeXBlcy5UaW1lb3V0RXJyb3IsXG4gICAgQWdncmVnYXRlRXJyb3I6IGVycm9yVHlwZXMuQWdncmVnYXRlRXJyb3IsXG4gICAgV2FybmluZzogV2FybmluZ1xufTtcblxufSx7XCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSwxMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaXNFUzUgPSAoZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICByZXR1cm4gdGhpcyA9PT0gdW5kZWZpbmVkO1xufSkoKTtcblxuaWYgKGlzRVM1KSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIGZyZWV6ZTogT2JqZWN0LmZyZWV6ZSxcbiAgICAgICAgZGVmaW5lUHJvcGVydHk6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSxcbiAgICAgICAgZ2V0RGVzY3JpcHRvcjogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgICAgICAga2V5czogT2JqZWN0LmtleXMsXG4gICAgICAgIG5hbWVzOiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxcbiAgICAgICAgZ2V0UHJvdG90eXBlT2Y6IE9iamVjdC5nZXRQcm90b3R5cGVPZixcbiAgICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheSxcbiAgICAgICAgaXNFUzU6IGlzRVM1LFxuICAgICAgICBwcm9wZXJ0eUlzV3JpdGFibGU6IGZ1bmN0aW9uKG9iaiwgcHJvcCkge1xuICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcCk7XG4gICAgICAgICAgICByZXR1cm4gISEoIWRlc2NyaXB0b3IgfHwgZGVzY3JpcHRvci53cml0YWJsZSB8fCBkZXNjcmlwdG9yLnNldCk7XG4gICAgICAgIH1cbiAgICB9O1xufSBlbHNlIHtcbiAgICB2YXIgaGFzID0ge30uaGFzT3duUHJvcGVydHk7XG4gICAgdmFyIHN0ciA9IHt9LnRvU3RyaW5nO1xuICAgIHZhciBwcm90byA9IHt9LmNvbnN0cnVjdG9yLnByb3RvdHlwZTtcblxuICAgIHZhciBPYmplY3RLZXlzID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIHJldCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gbykge1xuICAgICAgICAgICAgaWYgKGhhcy5jYWxsKG8sIGtleSkpIHtcbiAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcblxuICAgIHZhciBPYmplY3RHZXREZXNjcmlwdG9yID0gZnVuY3Rpb24obywga2V5KSB7XG4gICAgICAgIHJldHVybiB7dmFsdWU6IG9ba2V5XX07XG4gICAgfTtcblxuICAgIHZhciBPYmplY3REZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvLCBrZXksIGRlc2MpIHtcbiAgICAgICAgb1trZXldID0gZGVzYy52YWx1ZTtcbiAgICAgICAgcmV0dXJuIG87XG4gICAgfTtcblxuICAgIHZhciBPYmplY3RGcmVlemUgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcblxuICAgIHZhciBPYmplY3RHZXRQcm90b3R5cGVPZiA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qob2JqKS5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm90bztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgQXJyYXlJc0FycmF5ID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHN0ci5jYWxsKG9iaikgPT09IFwiW29iamVjdCBBcnJheV1cIjtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIGlzQXJyYXk6IEFycmF5SXNBcnJheSxcbiAgICAgICAga2V5czogT2JqZWN0S2V5cyxcbiAgICAgICAgbmFtZXM6IE9iamVjdEtleXMsXG4gICAgICAgIGRlZmluZVByb3BlcnR5OiBPYmplY3REZWZpbmVQcm9wZXJ0eSxcbiAgICAgICAgZ2V0RGVzY3JpcHRvcjogT2JqZWN0R2V0RGVzY3JpcHRvcixcbiAgICAgICAgZnJlZXplOiBPYmplY3RGcmVlemUsXG4gICAgICAgIGdldFByb3RvdHlwZU9mOiBPYmplY3RHZXRQcm90b3R5cGVPZixcbiAgICAgICAgaXNFUzU6IGlzRVM1LFxuICAgICAgICBwcm9wZXJ0eUlzV3JpdGFibGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG59LHt9XSwxNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciBQcm9taXNlTWFwID0gUHJvbWlzZS5tYXA7XG5cblByb21pc2UucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChmbiwgb3B0aW9ucykge1xuICAgIHJldHVybiBQcm9taXNlTWFwKHRoaXMsIGZuLCBvcHRpb25zLCBJTlRFUk5BTCk7XG59O1xuXG5Qcm9taXNlLmZpbHRlciA9IGZ1bmN0aW9uIChwcm9taXNlcywgZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gUHJvbWlzZU1hcChwcm9taXNlcywgZm4sIG9wdGlvbnMsIElOVEVSTkFMKTtcbn07XG59O1xuXG59LHt9XSwxNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgdHJ5Q29udmVydFRvUHJvbWlzZSkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIENhbmNlbGxhdGlvbkVycm9yID0gUHJvbWlzZS5DYW5jZWxsYXRpb25FcnJvcjtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG5cbmZ1bmN0aW9uIFBhc3NUaHJvdWdoSGFuZGxlckNvbnRleHQocHJvbWlzZSwgdHlwZSwgaGFuZGxlcikge1xuICAgIHRoaXMucHJvbWlzZSA9IHByb21pc2U7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xuICAgIHRoaXMuY2FsbGVkID0gZmFsc2U7XG4gICAgdGhpcy5jYW5jZWxQcm9taXNlID0gbnVsbDtcbn1cblxuUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dC5wcm90b3R5cGUuaXNGaW5hbGx5SGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnR5cGUgPT09IDA7XG59O1xuXG5mdW5jdGlvbiBGaW5hbGx5SGFuZGxlckNhbmNlbFJlYWN0aW9uKGZpbmFsbHlIYW5kbGVyKSB7XG4gICAgdGhpcy5maW5hbGx5SGFuZGxlciA9IGZpbmFsbHlIYW5kbGVyO1xufVxuXG5GaW5hbGx5SGFuZGxlckNhbmNlbFJlYWN0aW9uLnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgY2hlY2tDYW5jZWwodGhpcy5maW5hbGx5SGFuZGxlcik7XG59O1xuXG5mdW5jdGlvbiBjaGVja0NhbmNlbChjdHgsIHJlYXNvbikge1xuICAgIGlmIChjdHguY2FuY2VsUHJvbWlzZSAhPSBudWxsKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgY3R4LmNhbmNlbFByb21pc2UuX3JlamVjdChyZWFzb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmNhbmNlbFByb21pc2UuX2NhbmNlbCgpO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5jYW5jZWxQcm9taXNlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc3VjY2VlZCgpIHtcbiAgICByZXR1cm4gZmluYWxseUhhbmRsZXIuY2FsbCh0aGlzLCB0aGlzLnByb21pc2UuX3RhcmdldCgpLl9zZXR0bGVkVmFsdWUoKSk7XG59XG5mdW5jdGlvbiBmYWlsKHJlYXNvbikge1xuICAgIGlmIChjaGVja0NhbmNlbCh0aGlzLCByZWFzb24pKSByZXR1cm47XG4gICAgZXJyb3JPYmouZSA9IHJlYXNvbjtcbiAgICByZXR1cm4gZXJyb3JPYmo7XG59XG5mdW5jdGlvbiBmaW5hbGx5SGFuZGxlcihyZWFzb25PclZhbHVlKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG4gICAgdmFyIGhhbmRsZXIgPSB0aGlzLmhhbmRsZXI7XG5cbiAgICBpZiAoIXRoaXMuY2FsbGVkKSB7XG4gICAgICAgIHRoaXMuY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHJldCA9IHRoaXMuaXNGaW5hbGx5SGFuZGxlcigpXG4gICAgICAgICAgICA/IGhhbmRsZXIuY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCkpXG4gICAgICAgICAgICA6IGhhbmRsZXIuY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksIHJlYXNvbk9yVmFsdWUpO1xuICAgICAgICBpZiAocmV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHByb21pc2UuX3NldFJldHVybmVkTm9uVW5kZWZpbmVkKCk7XG4gICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXQsIHByb21pc2UpO1xuICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW5jZWxQcm9taXNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZS5faXNDYW5jZWxsZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlYXNvbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IENhbmNlbGxhdGlvbkVycm9yKFwibGF0ZSBjYW5jZWxsYXRpb24gb2JzZXJ2ZXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvck9iai5lID0gcmVhc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yT2JqO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1heWJlUHJvbWlzZS5pc1BlbmRpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRmluYWxseUhhbmRsZXJDYW5jZWxSZWFjdGlvbih0aGlzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heWJlUHJvbWlzZS5fdGhlbihcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VlZCwgZmFpbCwgdW5kZWZpbmVkLCB0aGlzLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByb21pc2UuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIGNoZWNrQ2FuY2VsKHRoaXMpO1xuICAgICAgICBlcnJvck9iai5lID0gcmVhc29uT3JWYWx1ZTtcbiAgICAgICAgcmV0dXJuIGVycm9yT2JqO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNoZWNrQ2FuY2VsKHRoaXMpO1xuICAgICAgICByZXR1cm4gcmVhc29uT3JWYWx1ZTtcbiAgICB9XG59XG5cblByb21pc2UucHJvdG90eXBlLl9wYXNzVGhyb3VnaCA9IGZ1bmN0aW9uKGhhbmRsZXIsIHR5cGUsIHN1Y2Nlc3MsIGZhaWwpIHtcbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRoaXMudGhlbigpO1xuICAgIHJldHVybiB0aGlzLl90aGVuKHN1Y2Nlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgZmFpbCxcbiAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgbmV3IFBhc3NUaHJvdWdoSGFuZGxlckNvbnRleHQodGhpcywgdHlwZSwgaGFuZGxlciksXG4gICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmxhc3RseSA9XG5Qcm9taXNlLnByb3RvdHlwZVtcImZpbmFsbHlcIl0gPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgIHJldHVybiB0aGlzLl9wYXNzVGhyb3VnaChoYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGx5SGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseUhhbmRsZXIpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGFwID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFzc1Rocm91Z2goaGFuZGxlciwgMSwgZmluYWxseUhhbmRsZXIpO1xufTtcblxucmV0dXJuIFBhc3NUaHJvdWdoSGFuZGxlckNvbnRleHQ7XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMTY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFwaVJlamVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFByb3h5YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcpIHtcbnZhciBlcnJvcnMgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIik7XG52YXIgVHlwZUVycm9yID0gZXJyb3JzLlR5cGVFcnJvcjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIHlpZWxkSGFuZGxlcnMgPSBbXTtcblxuZnVuY3Rpb24gcHJvbWlzZUZyb21ZaWVsZEhhbmRsZXIodmFsdWUsIHlpZWxkSGFuZGxlcnMsIHRyYWNlUGFyZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB5aWVsZEhhbmRsZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRyYWNlUGFyZW50Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2goeWllbGRIYW5kbGVyc1tpXSkodmFsdWUpO1xuICAgICAgICB0cmFjZVBhcmVudC5fcG9wQ29udGV4dCgpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgdHJhY2VQYXJlbnQuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgICAgICB2YXIgcmV0ID0gUHJvbWlzZS5yZWplY3QoZXJyb3JPYmouZSk7XG4gICAgICAgICAgICB0cmFjZVBhcmVudC5fcG9wQ29udGV4dCgpO1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXN1bHQsIHRyYWNlUGFyZW50KTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHJldHVybiBtYXliZVByb21pc2U7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBQcm9taXNlU3Bhd24oZ2VuZXJhdG9yRnVuY3Rpb24sIHJlY2VpdmVyLCB5aWVsZEhhbmRsZXIsIHN0YWNrKSB7XG4gICAgaWYgKGRlYnVnLmNhbmNlbGxhdGlvbigpKSB7XG4gICAgICAgIHZhciBpbnRlcm5hbCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgdmFyIF9maW5hbGx5UHJvbWlzZSA9IHRoaXMuX2ZpbmFsbHlQcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICB0aGlzLl9wcm9taXNlID0gaW50ZXJuYWwubGFzdGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9maW5hbGx5UHJvbWlzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGludGVybmFsLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICBpbnRlcm5hbC5fc2V0T25DYW5jZWwodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICBwcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIH1cbiAgICB0aGlzLl9zdGFjayA9IHN0YWNrO1xuICAgIHRoaXMuX2dlbmVyYXRvckZ1bmN0aW9uID0gZ2VuZXJhdG9yRnVuY3Rpb247XG4gICAgdGhpcy5fcmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICB0aGlzLl9nZW5lcmF0b3IgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5feWllbGRIYW5kbGVycyA9IHR5cGVvZiB5aWVsZEhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/IFt5aWVsZEhhbmRsZXJdLmNvbmNhdCh5aWVsZEhhbmRsZXJzKVxuICAgICAgICA6IHlpZWxkSGFuZGxlcnM7XG4gICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBudWxsO1xuICAgIHRoaXMuX2NhbmNlbGxhdGlvblBoYXNlID0gZmFsc2U7XG59XG51dGlsLmluaGVyaXRzKFByb21pc2VTcGF3biwgUHJveHlhYmxlKTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5faXNSZXNvbHZlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9wcm9taXNlID09PSBudWxsO1xufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3Byb21pc2UgPSB0aGlzLl9nZW5lcmF0b3IgPSBudWxsO1xuICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSAmJiB0aGlzLl9maW5hbGx5UHJvbWlzZSAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLl9maW5hbGx5UHJvbWlzZS5fZnVsZmlsbCgpO1xuICAgICAgICB0aGlzLl9maW5hbGx5UHJvbWlzZSA9IG51bGw7XG4gICAgfVxufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fcHJvbWlzZUNhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICB2YXIgaW1wbGVtZW50c1JldHVybiA9IHR5cGVvZiB0aGlzLl9nZW5lcmF0b3JbXCJyZXR1cm5cIl0gIT09IFwidW5kZWZpbmVkXCI7XG5cbiAgICB2YXIgcmVzdWx0O1xuICAgIGlmICghaW1wbGVtZW50c1JldHVybikge1xuICAgICAgICB2YXIgcmVhc29uID0gbmV3IFByb21pc2UuQ2FuY2VsbGF0aW9uRXJyb3IoXG4gICAgICAgICAgICBcImdlbmVyYXRvciAucmV0dXJuKCkgc2VudGluZWxcIik7XG4gICAgICAgIFByb21pc2UuY29yb3V0aW5lLnJldHVyblNlbnRpbmVsID0gcmVhc29uO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHJlYXNvbik7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2dlbmVyYXRvcltcInRocm93XCJdKS5jYWxsKHRoaXMuX2dlbmVyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbik7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgICAgICByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9nZW5lcmF0b3JbXCJyZXR1cm5cIl0pLmNhbGwodGhpcy5fZ2VuZXJhdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICB9XG4gICAgdGhpcy5fY2FuY2VsbGF0aW9uUGhhc2UgPSB0cnVlO1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9jb250aW51ZShyZXN1bHQpO1xufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2dlbmVyYXRvci5uZXh0KS5jYWxsKHRoaXMuX2dlbmVyYXRvciwgdmFsdWUpO1xuICAgIHRoaXMuX3Byb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICB0aGlzLl9jb250aW51ZShyZXN1bHQpO1xufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fcHJvbWlzZVJlamVjdGVkID0gZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX2F0dGFjaEV4dHJhVHJhY2UocmVhc29uKTtcbiAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9nZW5lcmF0b3JbXCJ0aHJvd1wiXSlcbiAgICAgICAgLmNhbGwodGhpcy5fZ2VuZXJhdG9yLCByZWFzb24pO1xuICAgIHRoaXMuX3Byb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICB0aGlzLl9jb250aW51ZShyZXN1bHQpO1xufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX3lpZWxkZWRQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3lpZWxkZWRQcm9taXNlO1xuICAgICAgICB0aGlzLl95aWVsZGVkUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIHByb21pc2UuY2FuY2VsKCk7XG4gICAgfVxufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5wcm9taXNlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9wcm9taXNlO1xufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fcnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2dlbmVyYXRvciA9IHRoaXMuX2dlbmVyYXRvckZ1bmN0aW9uLmNhbGwodGhpcy5fcmVjZWl2ZXIpO1xuICAgIHRoaXMuX3JlY2VpdmVyID1cbiAgICAgICAgdGhpcy5fZ2VuZXJhdG9yRnVuY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZCh1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fY29udGludWUgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlO1xuICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHRoaXMuX2NsZWFudXAoKTtcbiAgICAgICAgaWYgKHRoaXMuX2NhbmNlbGxhdGlvblBoYXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5jYW5jZWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyZXN1bHQuZSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgIGlmIChyZXN1bHQuZG9uZSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG4gICAgICAgIGlmICh0aGlzLl9jYW5jZWxsYXRpb25QaGFzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuY2FuY2VsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHZhbHVlLCB0aGlzLl9wcm9taXNlKTtcbiAgICAgICAgaWYgKCEobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcbiAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9XG4gICAgICAgICAgICAgICAgcHJvbWlzZUZyb21ZaWVsZEhhbmRsZXIobWF5YmVQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3lpZWxkSGFuZGxlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZSk7XG4gICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZVJlamVjdGVkKFxuICAgICAgICAgICAgICAgICAgICBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBIHZhbHVlICVzIHdhcyB5aWVsZGVkIHRoYXQgY291bGQgbm90IGJlIHRyZWF0ZWQgYXMgYSBwcm9taXNlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVxcdTAwMGFcIi5yZXBsYWNlKFwiJXNcIiwgdmFsdWUpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiRnJvbSBjb3JvdXRpbmU6XFx1MDAwYVwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YWNrLnNwbGl0KFwiXFxuXCIpLnNsaWNlKDEsIC03KS5qb2luKFwiXFxuXCIpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYXliZVByb21pc2UgPSBtYXliZVByb21pc2UuX3RhcmdldCgpO1xuICAgICAgICB2YXIgYml0RmllbGQgPSBtYXliZVByb21pc2UuX2JpdEZpZWxkO1xuICAgICAgICA7XG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBtYXliZVByb21pc2U7XG4gICAgICAgICAgICBtYXliZVByb21pc2UuX3Byb3h5KHRoaXMsIG51bGwpO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgICAgICBQcm9taXNlLl9hc3luYy5pbnZva2UoXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZCwgdGhpcywgbWF5YmVQcm9taXNlLl92YWx1ZSgpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICBQcm9taXNlLl9hc3luYy5pbnZva2UoXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZVJlamVjdGVkLCB0aGlzLCBtYXliZVByb21pc2UuX3JlYXNvbigpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcHJvbWlzZUNhbmNlbGxlZCgpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZS5jb3JvdXRpbmUgPSBmdW5jdGlvbiAoZ2VuZXJhdG9yRnVuY3Rpb24sIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIGdlbmVyYXRvckZ1bmN0aW9uICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImdlbmVyYXRvckZ1bmN0aW9uIG11c3QgYmUgYSBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHZhciB5aWVsZEhhbmRsZXIgPSBPYmplY3Qob3B0aW9ucykueWllbGRIYW5kbGVyO1xuICAgIHZhciBQcm9taXNlU3Bhd24kID0gUHJvbWlzZVNwYXduO1xuICAgIHZhciBzdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBnZW5lcmF0b3IgPSBnZW5lcmF0b3JGdW5jdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB2YXIgc3Bhd24gPSBuZXcgUHJvbWlzZVNwYXduJCh1bmRlZmluZWQsIHVuZGVmaW5lZCwgeWllbGRIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjayk7XG4gICAgICAgIHZhciByZXQgPSBzcGF3bi5wcm9taXNlKCk7XG4gICAgICAgIHNwYXduLl9nZW5lcmF0b3IgPSBnZW5lcmF0b3I7XG4gICAgICAgIHNwYXduLl9wcm9taXNlRnVsZmlsbGVkKHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbn07XG5cblByb21pc2UuY29yb3V0aW5lLmFkZFlpZWxkSGFuZGxlciA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICB5aWVsZEhhbmRsZXJzLnB1c2goZm4pO1xufTtcblxuUHJvbWlzZS5zcGF3biA9IGZ1bmN0aW9uIChnZW5lcmF0b3JGdW5jdGlvbikge1xuICAgIGRlYnVnLmRlcHJlY2F0ZWQoXCJQcm9taXNlLnNwYXduKClcIiwgXCJQcm9taXNlLmNvcm91dGluZSgpXCIpO1xuICAgIGlmICh0eXBlb2YgZ2VuZXJhdG9yRnVuY3Rpb24gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZ2VuZXJhdG9yRnVuY3Rpb24gbXVzdCBiZSBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgdmFyIHNwYXduID0gbmV3IFByb21pc2VTcGF3bihnZW5lcmF0b3JGdW5jdGlvbiwgdGhpcyk7XG4gICAgdmFyIHJldCA9IHNwYXduLnByb21pc2UoKTtcbiAgICBzcGF3bi5fcnVuKFByb21pc2Uuc3Bhd24pO1xuICAgIHJldHVybiByZXQ7XG59O1xufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwxNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID1cbmZ1bmN0aW9uKFByb21pc2UsIFByb21pc2VBcnJheSwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwsIGFzeW5jLFxuICAgICAgICAgZ2V0RG9tYWluKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgY2FuRXZhbHVhdGUgPSB1dGlsLmNhbkV2YWx1YXRlO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgcmVqZWN0O1xuXG5pZiAoIXRydWUpIHtcbmlmIChjYW5FdmFsdWF0ZSkge1xuICAgIHZhciB0aGVuQ2FsbGJhY2sgPSBmdW5jdGlvbihpKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJ2YWx1ZVwiLCBcImhvbGRlclwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGhvbGRlci5wSW5kZXggPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGhvbGRlci5jaGVja0Z1bGZpbGxtZW50KHRoaXMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiLnJlcGxhY2UoL0luZGV4L2csIGkpKTtcbiAgICB9O1xuXG4gICAgdmFyIHByb21pc2VTZXR0ZXIgPSBmdW5jdGlvbihpKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJwcm9taXNlXCIsIFwiaG9sZGVyXCIsIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGhvbGRlci5wSW5kZXggPSBwcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiLnJlcGxhY2UoL0luZGV4L2csIGkpKTtcbiAgICB9O1xuXG4gICAgdmFyIGdlbmVyYXRlSG9sZGVyQ2xhc3MgPSBmdW5jdGlvbih0b3RhbCkge1xuICAgICAgICB2YXIgcHJvcHMgPSBuZXcgQXJyYXkodG90YWwpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBwcm9wc1tpXSA9IFwidGhpcy5wXCIgKyAoaSsxKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXNzaWdubWVudCA9IHByb3BzLmpvaW4oXCIgPSBcIikgKyBcIiA9IG51bGw7XCI7XG4gICAgICAgIHZhciBjYW5jZWxsYXRpb25Db2RlPSBcInZhciBwcm9taXNlO1xcblwiICsgcHJvcHMubWFwKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgICAgICAgIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9IFwiICsgcHJvcCArIFwiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBpZiAocHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5jYW5jZWwoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiO1xuICAgICAgICB9KS5qb2luKFwiXFxuXCIpO1xuICAgICAgICB2YXIgcGFzc2VkQXJndW1lbnRzID0gcHJvcHMuam9pbihcIiwgXCIpO1xuICAgICAgICB2YXIgbmFtZSA9IFwiSG9sZGVyJFwiICsgdG90YWw7XG5cblxuICAgICAgICB2YXIgY29kZSA9IFwicmV0dXJuIGZ1bmN0aW9uKHRyeUNhdGNoLCBlcnJvck9iaiwgUHJvbWlzZSwgYXN5bmMpIHsgICAgXFxuXFxcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGZ1bmN0aW9uIFtUaGVOYW1lXShmbikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBbVGhlUHJvcGVydGllc10gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB0aGlzLmZuID0gZm47ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB0aGlzLmFzeW5jTmVlZGVkID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB0aGlzLm5vdyA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtUaGVOYW1lXS5wcm90b3R5cGUuX2NhbGxGdW5jdGlvbiA9IGZ1bmN0aW9uKHByb21pc2UpIHsgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gdHJ5Q2F0Y2godGhpcy5mbikoW1RoZVBhc3NlZEFyZ3VtZW50c10pOyAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9wb3BDb250ZXh0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmV0LmUsIGZhbHNlKTsgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHJldCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtUaGVOYW1lXS5wcm90b3R5cGUuY2hlY2tGdWxmaWxsbWVudCA9IGZ1bmN0aW9uKHByb21pc2UpIHsgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB2YXIgbm93ID0gKyt0aGlzLm5vdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBpZiAobm93ID09PSBbVGhlVG90YWxdKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXN5bmNOZWVkZWQpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jLmludm9rZSh0aGlzLl9jYWxsRnVuY3Rpb24sIHRoaXMsIHByb21pc2UpOyAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxGdW5jdGlvbihwcm9taXNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtUaGVOYW1lXS5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkgeyAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBbQ2FuY2VsbGF0aW9uQ29kZV0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHJldHVybiBbVGhlTmFtZV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgfSh0cnlDYXRjaCwgZXJyb3JPYmosIFByb21pc2UsIGFzeW5jKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCI7XG5cbiAgICAgICAgY29kZSA9IGNvZGUucmVwbGFjZSgvXFxbVGhlTmFtZVxcXS9nLCBuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1RoZVRvdGFsXFxdL2csIHRvdGFsKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1RoZVBhc3NlZEFyZ3VtZW50c1xcXS9nLCBwYXNzZWRBcmd1bWVudHMpXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxbVGhlUHJvcGVydGllc1xcXS9nLCBhc3NpZ25tZW50KVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW0NhbmNlbGxhdGlvbkNvZGVcXF0vZywgY2FuY2VsbGF0aW9uQ29kZSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcInRyeUNhdGNoXCIsIFwiZXJyb3JPYmpcIiwgXCJQcm9taXNlXCIsIFwiYXN5bmNcIiwgY29kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICh0cnlDYXRjaCwgZXJyb3JPYmosIFByb21pc2UsIGFzeW5jKTtcbiAgICB9O1xuXG4gICAgdmFyIGhvbGRlckNsYXNzZXMgPSBbXTtcbiAgICB2YXIgdGhlbkNhbGxiYWNrcyA9IFtdO1xuICAgIHZhciBwcm9taXNlU2V0dGVycyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4OyArK2kpIHtcbiAgICAgICAgaG9sZGVyQ2xhc3Nlcy5wdXNoKGdlbmVyYXRlSG9sZGVyQ2xhc3MoaSArIDEpKTtcbiAgICAgICAgdGhlbkNhbGxiYWNrcy5wdXNoKHRoZW5DYWxsYmFjayhpICsgMSkpO1xuICAgICAgICBwcm9taXNlU2V0dGVycy5wdXNoKHByb21pc2VTZXR0ZXIoaSArIDEpKTtcbiAgICB9XG5cbiAgICByZWplY3QgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xuICAgIH07XG59fVxuXG5Qcm9taXNlLmpvaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxhc3QgPSBhcmd1bWVudHMubGVuZ3RoIC0gMTtcbiAgICB2YXIgZm47XG4gICAgaWYgKGxhc3QgPiAwICYmIHR5cGVvZiBhcmd1bWVudHNbbGFzdF0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBmbiA9IGFyZ3VtZW50c1tsYXN0XTtcbiAgICAgICAgaWYgKCF0cnVlKSB7XG4gICAgICAgICAgICBpZiAobGFzdCA8PSA4ICYmIGNhbkV2YWx1YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgICAgICAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICAgICAgdmFyIEhvbGRlckNsYXNzID0gaG9sZGVyQ2xhc3Nlc1tsYXN0IC0gMV07XG4gICAgICAgICAgICAgICAgdmFyIGhvbGRlciA9IG5ldyBIb2xkZXJDbGFzcyhmbik7XG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrcyA9IHRoZW5DYWxsYmFja3M7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3Q7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShhcmd1bWVudHNbaV0sIHJldCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UgPSBtYXliZVByb21pc2UuX3RhcmdldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJpdEZpZWxkID0gbWF5YmVQcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fdGhlbihjYWxsYmFja3NbaV0sIHJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCByZXQsIGhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZVNldHRlcnNbaV0obWF5YmVQcm9taXNlLCBob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRlci5hc3luY05lZWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrc1tpXS5jYWxsKHJldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3ZhbHVlKCksIGhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0Ll9yZWplY3QobWF5YmVQcm9taXNlLl9yZWFzb24oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5fY2FuY2VsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3NbaV0uY2FsbChyZXQsIG1heWJlUHJvbWlzZSwgaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghcmV0Ll9pc0ZhdGVTZWFsZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaG9sZGVyLmFzeW5jTmVlZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9tYWluICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZGVyLmZuID0gdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgaG9sZGVyLmZuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXQuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICAgICAgICAgICAgICByZXQuX3NldE9uQ2FuY2VsKGhvbGRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7O1xuICAgIGlmIChmbikgYXJncy5wb3AoKTtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2VBcnJheShhcmdzKS5wcm9taXNlKCk7XG4gICAgcmV0dXJuIGZuICE9PSB1bmRlZmluZWQgPyByZXQuc3ByZWFkKGZuKSA6IHJldDtcbn07XG5cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwxODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZUFycmF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZWplY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIElOVEVSTkFMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Zykge1xudmFyIGdldERvbWFpbiA9IFByb21pc2UuX2dldERvbWFpbjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG5cbmZ1bmN0aW9uIE1hcHBpbmdQcm9taXNlQXJyYXkocHJvbWlzZXMsIGZuLCBsaW1pdCwgX2ZpbHRlcikge1xuICAgIHRoaXMuY29uc3RydWN0b3IkKHByb21pc2VzKTtcbiAgICB0aGlzLl9wcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHZhciBkb21haW4gPSBnZXREb21haW4oKTtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGRvbWFpbiA9PT0gbnVsbCA/IGZuIDogdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgZm4pO1xuICAgIHRoaXMuX3ByZXNlcnZlZFZhbHVlcyA9IF9maWx0ZXIgPT09IElOVEVSTkFMXG4gICAgICAgID8gbmV3IEFycmF5KHRoaXMubGVuZ3RoKCkpXG4gICAgICAgIDogbnVsbDtcbiAgICB0aGlzLl9saW1pdCA9IGxpbWl0O1xuICAgIHRoaXMuX2luRmxpZ2h0ID0gMDtcbiAgICB0aGlzLl9xdWV1ZSA9IFtdO1xuICAgIGFzeW5jLmludm9rZSh0aGlzLl9hc3luY0luaXQsIHRoaXMsIHVuZGVmaW5lZCk7XG59XG51dGlsLmluaGVyaXRzKE1hcHBpbmdQcm9taXNlQXJyYXksIFByb21pc2VBcnJheSk7XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9hc3luY0luaXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9pbml0JCh1bmRlZmluZWQsIC0yKTtcbn07XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkge307XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLl92YWx1ZXM7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoKCk7XG4gICAgdmFyIHByZXNlcnZlZFZhbHVlcyA9IHRoaXMuX3ByZXNlcnZlZFZhbHVlcztcbiAgICB2YXIgbGltaXQgPSB0aGlzLl9saW1pdDtcblxuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgaW5kZXggPSAoaW5kZXggKiAtMSkgLSAxO1xuICAgICAgICB2YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgIGlmIChsaW1pdCA+PSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9pbkZsaWdodC0tO1xuICAgICAgICAgICAgdGhpcy5fZHJhaW5RdWV1ZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobGltaXQgPj0gMSAmJiB0aGlzLl9pbkZsaWdodCA+PSBsaW1pdCkge1xuICAgICAgICAgICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fcXVldWUucHVzaChpbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXNlcnZlZFZhbHVlcyAhPT0gbnVsbCkgcHJlc2VydmVkVmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5fY2FsbGJhY2s7XG4gICAgICAgIHZhciByZWNlaXZlciA9IHByb21pc2UuX2JvdW5kVmFsdWUoKTtcbiAgICAgICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgdmFyIHJldCA9IHRyeUNhdGNoKGNhbGxiYWNrKS5jYWxsKHJlY2VpdmVyLCB2YWx1ZSwgaW5kZXgsIGxlbmd0aCk7XG4gICAgICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHByb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICAgICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICAgICAgcmV0LFxuICAgICAgICAgICAgcHJvbWlzZUNyZWF0ZWQsXG4gICAgICAgICAgICBwcmVzZXJ2ZWRWYWx1ZXMgIT09IG51bGwgPyBcIlByb21pc2UuZmlsdGVyXCIgOiBcIlByb21pc2UubWFwXCIsXG4gICAgICAgICAgICBwcm9taXNlXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3QocmV0LmUpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXQsIHRoaXMuX3Byb21pc2UpO1xuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIHZhciBiaXRGaWVsZCA9IG1heWJlUHJvbWlzZS5fYml0RmllbGQ7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICBpZiAobGltaXQgPj0gMSkgdGhpcy5faW5GbGlnaHQrKztcbiAgICAgICAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fcHJveHkodGhpcywgKGluZGV4ICsgMSkgKiAtMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIHJldCA9IG1heWJlUHJvbWlzZS5fdmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QobWF5YmVQcm9taXNlLl9yZWFzb24oKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpbmRleF0gPSByZXQ7XG4gICAgfVxuICAgIHZhciB0b3RhbFJlc29sdmVkID0gKyt0aGlzLl90b3RhbFJlc29sdmVkO1xuICAgIGlmICh0b3RhbFJlc29sdmVkID49IGxlbmd0aCkge1xuICAgICAgICBpZiAocHJlc2VydmVkVmFsdWVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9maWx0ZXIodmFsdWVzLCBwcmVzZXJ2ZWRWYWx1ZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZHJhaW5RdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcXVldWUgPSB0aGlzLl9xdWV1ZTtcbiAgICB2YXIgbGltaXQgPSB0aGlzLl9saW1pdDtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5fdmFsdWVzO1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwICYmIHRoaXMuX2luRmxpZ2h0IDwgbGltaXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuO1xuICAgICAgICB2YXIgaW5kZXggPSBxdWV1ZS5wb3AoKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZCh2YWx1ZXNbaW5kZXhdLCBpbmRleCk7XG4gICAgfVxufTtcblxuTWFwcGluZ1Byb21pc2VBcnJheS5wcm90b3R5cGUuX2ZpbHRlciA9IGZ1bmN0aW9uIChib29sZWFucywgdmFsdWVzKSB7XG4gICAgdmFyIGxlbiA9IHZhbHVlcy5sZW5ndGg7XG4gICAgdmFyIHJldCA9IG5ldyBBcnJheShsZW4pO1xuICAgIHZhciBqID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIGlmIChib29sZWFuc1tpXSkgcmV0W2orK10gPSB2YWx1ZXNbaV07XG4gICAgfVxuICAgIHJldC5sZW5ndGggPSBqO1xuICAgIHRoaXMuX3Jlc29sdmUocmV0KTtcbn07XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLnByZXNlcnZlZFZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJlc2VydmVkVmFsdWVzO1xufTtcblxuZnVuY3Rpb24gbWFwKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG5cbiAgICB2YXIgbGltaXQgPSAwO1xuICAgIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jb25jdXJyZW5jeSAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFR5cGVFcnJvcihcIidjb25jdXJyZW5jeScgbXVzdCBiZSBhIG51bWJlciBidXQgaXQgaXMgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyhvcHRpb25zLmNvbmN1cnJlbmN5KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGltaXQgPSBvcHRpb25zLmNvbmN1cnJlbmN5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25zIGFyZ3VtZW50IG11c3QgYmUgYW4gb2JqZWN0IGJ1dCBpdCBpcyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcob3B0aW9ucykpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsaW1pdCA9IHR5cGVvZiBsaW1pdCA9PT0gXCJudW1iZXJcIiAmJlxuICAgICAgICBpc0Zpbml0ZShsaW1pdCkgJiYgbGltaXQgPj0gMSA/IGxpbWl0IDogMDtcbiAgICByZXR1cm4gbmV3IE1hcHBpbmdQcm9taXNlQXJyYXkocHJvbWlzZXMsIGZuLCBsaW1pdCwgX2ZpbHRlcikucHJvbWlzZSgpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAoZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbWFwKHRoaXMsIGZuLCBvcHRpb25zLCBudWxsKTtcbn07XG5cblByb21pc2UubWFwID0gZnVuY3Rpb24gKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcikge1xuICAgIHJldHVybiBtYXAocHJvbWlzZXMsIGZuLCBvcHRpb25zLCBfZmlsdGVyKTtcbn07XG5cblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDE5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbiwgZGVidWcpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG5cblByb21pc2UubWV0aG9kID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBQcm9taXNlLlR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgcmV0Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICB2YXIgdmFsdWUgPSB0cnlDYXRjaChmbikuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIHByb21pc2VDcmVhdGVkID0gcmV0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgIGRlYnVnLmNoZWNrRm9yZ290dGVuUmV0dXJucyhcbiAgICAgICAgICAgIHZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgXCJQcm9taXNlLm1ldGhvZFwiLCByZXQpO1xuICAgICAgICByZXQuX3Jlc29sdmVGcm9tU3luY1ZhbHVlKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufTtcblxuUHJvbWlzZS5hdHRlbXB0ID0gUHJvbWlzZVtcInRyeVwiXSA9IGZ1bmN0aW9uIChmbikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgcmV0Ll9wdXNoQ29udGV4dCgpO1xuICAgIHZhciB2YWx1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZGVidWcuZGVwcmVjYXRlZChcImNhbGxpbmcgUHJvbWlzZS50cnkgd2l0aCBtb3JlIHRoYW4gMSBhcmd1bWVudFwiKTtcbiAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgdmFyIGN0eCA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgdmFsdWUgPSB1dGlsLmlzQXJyYXkoYXJnKSA/IHRyeUNhdGNoKGZuKS5hcHBseShjdHgsIGFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRyeUNhdGNoKGZuKS5jYWxsKGN0eCwgYXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IHRyeUNhdGNoKGZuKSgpO1xuICAgIH1cbiAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSByZXQuX3BvcENvbnRleHQoKTtcbiAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoXG4gICAgICAgIHZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgXCJQcm9taXNlLnRyeVwiLCByZXQpO1xuICAgIHJldC5fcmVzb2x2ZUZyb21TeW5jVmFsdWUodmFsdWUpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVzb2x2ZUZyb21TeW5jVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHV0aWwuZXJyb3JPYmopIHtcbiAgICAgICAgdGhpcy5fcmVqZWN0Q2FsbGJhY2sodmFsdWUuZSwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxufTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBtYXliZVdyYXBBc0Vycm9yID0gdXRpbC5tYXliZVdyYXBBc0Vycm9yO1xudmFyIGVycm9ycyA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKTtcbnZhciBPcGVyYXRpb25hbEVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xuXG5mdW5jdGlvbiBpc1VudHlwZWRFcnJvcihvYmopIHtcbiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgRXJyb3IgJiZcbiAgICAgICAgZXM1LmdldFByb3RvdHlwZU9mKG9iaikgPT09IEVycm9yLnByb3RvdHlwZTtcbn1cblxudmFyIHJFcnJvcktleSA9IC9eKD86bmFtZXxtZXNzYWdlfHN0YWNrfGNhdXNlKSQvO1xuZnVuY3Rpb24gd3JhcEFzT3BlcmF0aW9uYWxFcnJvcihvYmopIHtcbiAgICB2YXIgcmV0O1xuICAgIGlmIChpc1VudHlwZWRFcnJvcihvYmopKSB7XG4gICAgICAgIHJldCA9IG5ldyBPcGVyYXRpb25hbEVycm9yKG9iaik7XG4gICAgICAgIHJldC5uYW1lID0gb2JqLm5hbWU7XG4gICAgICAgIHJldC5tZXNzYWdlID0gb2JqLm1lc3NhZ2U7XG4gICAgICAgIHJldC5zdGFjayA9IG9iai5zdGFjaztcbiAgICAgICAgdmFyIGtleXMgPSBlczUua2V5cyhvYmopO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgaWYgKCFyRXJyb3JLZXkudGVzdChrZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICB1dGlsLm1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbihvYmopO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIG5vZGViYWNrRm9yUHJvbWlzZShwcm9taXNlLCBtdWx0aUFyZ3MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZXJyLCB2YWx1ZSkge1xuICAgICAgICBpZiAocHJvbWlzZSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlZCA9IHdyYXBBc09wZXJhdGlvbmFsRXJyb3IobWF5YmVXcmFwQXNFcnJvcihlcnIpKTtcbiAgICAgICAgICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2Uod3JhcHBlZCk7XG4gICAgICAgICAgICBwcm9taXNlLl9yZWplY3Qod3JhcHBlZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIW11bHRpQXJncykge1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTs7XG4gICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsKGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbm9kZWJhY2tGb3JQcm9taXNlO1xuXG59LHtcIi4vZXJyb3JzXCI6MTIsXCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSwyMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcblxuZnVuY3Rpb24gc3ByZWFkQWRhcHRlcih2YWwsIG5vZGViYWNrKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIGlmICghdXRpbC5pc0FycmF5KHZhbCkpIHJldHVybiBzdWNjZXNzQWRhcHRlci5jYWxsKHByb21pc2UsIHZhbCwgbm9kZWJhY2spO1xuICAgIHZhciByZXQgPVxuICAgICAgICB0cnlDYXRjaChub2RlYmFjaykuYXBwbHkocHJvbWlzZS5fYm91bmRWYWx1ZSgpLCBbbnVsbF0uY29uY2F0KHZhbCkpO1xuICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIocmV0LmUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3VjY2Vzc0FkYXB0ZXIodmFsLCBub2RlYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB2YXIgcmVjZWl2ZXIgPSBwcm9taXNlLl9ib3VuZFZhbHVlKCk7XG4gICAgdmFyIHJldCA9IHZhbCA9PT0gdW5kZWZpbmVkXG4gICAgICAgID8gdHJ5Q2F0Y2gobm9kZWJhY2spLmNhbGwocmVjZWl2ZXIsIG51bGwpXG4gICAgICAgIDogdHJ5Q2F0Y2gobm9kZWJhY2spLmNhbGwocmVjZWl2ZXIsIG51bGwsIHZhbCk7XG4gICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihyZXQuZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZXJyb3JBZGFwdGVyKHJlYXNvbiwgbm9kZWJhY2spIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgICAgdmFyIG5ld1JlYXNvbiA9IG5ldyBFcnJvcihyZWFzb24gKyBcIlwiKTtcbiAgICAgICAgbmV3UmVhc29uLmNhdXNlID0gcmVhc29uO1xuICAgICAgICByZWFzb24gPSBuZXdSZWFzb247XG4gICAgfVxuICAgIHZhciByZXQgPSB0cnlDYXRjaChub2RlYmFjaykuY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksIHJlYXNvbik7XG4gICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihyZXQuZSk7XG4gICAgfVxufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5hc0NhbGxiYWNrID0gUHJvbWlzZS5wcm90b3R5cGUubm9kZWlmeSA9IGZ1bmN0aW9uIChub2RlYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG5vZGViYWNrID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgYWRhcHRlciA9IHN1Y2Nlc3NBZGFwdGVyO1xuICAgICAgICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIE9iamVjdChvcHRpb25zKS5zcHJlYWQpIHtcbiAgICAgICAgICAgIGFkYXB0ZXIgPSBzcHJlYWRBZGFwdGVyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgZXJyb3JBZGFwdGVyLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIG5vZGViYWNrXG4gICAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG52YXIgbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJjaXJjdWxhciBwcm9taXNlIHJlc29sdXRpb24gY2hhaW5cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xufTtcbnZhciByZWZsZWN0SGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbih0aGlzLl90YXJnZXQoKSk7XG59O1xudmFyIGFwaVJlamVjdGlvbiA9IGZ1bmN0aW9uKG1zZykge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKG1zZykpO1xufTtcbmZ1bmN0aW9uIFByb3h5YWJsZSgpIHt9XG52YXIgVU5ERUZJTkVEX0JJTkRJTkcgPSB7fTtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcblxudmFyIGdldERvbWFpbjtcbmlmICh1dGlsLmlzTm9kZSkge1xuICAgIGdldERvbWFpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmV0ID0gcHJvY2Vzcy5kb21haW47XG4gICAgICAgIGlmIChyZXQgPT09IHVuZGVmaW5lZCkgcmV0ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBnZXREb21haW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cbnV0aWwubm90RW51bWVyYWJsZVByb3AoUHJvbWlzZSwgXCJfZ2V0RG9tYWluXCIsIGdldERvbWFpbik7XG5cbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgQXN5bmMgPSBfZGVyZXFfKFwiLi9hc3luY1wiKTtcbnZhciBhc3luYyA9IG5ldyBBc3luYygpO1xuZXM1LmRlZmluZVByb3BlcnR5KFByb21pc2UsIFwiX2FzeW5jXCIsIHt2YWx1ZTogYXN5bmN9KTtcbnZhciBlcnJvcnMgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIik7XG52YXIgVHlwZUVycm9yID0gUHJvbWlzZS5UeXBlRXJyb3IgPSBlcnJvcnMuVHlwZUVycm9yO1xuUHJvbWlzZS5SYW5nZUVycm9yID0gZXJyb3JzLlJhbmdlRXJyb3I7XG52YXIgQ2FuY2VsbGF0aW9uRXJyb3IgPSBQcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yID0gZXJyb3JzLkNhbmNlbGxhdGlvbkVycm9yO1xuUHJvbWlzZS5UaW1lb3V0RXJyb3IgPSBlcnJvcnMuVGltZW91dEVycm9yO1xuUHJvbWlzZS5PcGVyYXRpb25hbEVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG5Qcm9taXNlLlJlamVjdGlvbkVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG5Qcm9taXNlLkFnZ3JlZ2F0ZUVycm9yID0gZXJyb3JzLkFnZ3JlZ2F0ZUVycm9yO1xudmFyIElOVEVSTkFMID0gZnVuY3Rpb24oKXt9O1xudmFyIEFQUExZID0ge307XG52YXIgTkVYVF9GSUxURVIgPSB7fTtcbnZhciB0cnlDb252ZXJ0VG9Qcm9taXNlID0gX2RlcmVxXyhcIi4vdGhlbmFibGVzXCIpKFByb21pc2UsIElOVEVSTkFMKTtcbnZhciBQcm9taXNlQXJyYXkgPVxuICAgIF9kZXJlcV8oXCIuL3Byb21pc2VfYXJyYXlcIikoUHJvbWlzZSwgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uLCBQcm94eWFibGUpO1xudmFyIENvbnRleHQgPSBfZGVyZXFfKFwiLi9jb250ZXh0XCIpKFByb21pc2UpO1xuIC8qanNoaW50IHVudXNlZDpmYWxzZSovXG52YXIgY3JlYXRlQ29udGV4dCA9IENvbnRleHQuY3JlYXRlO1xudmFyIGRlYnVnID0gX2RlcmVxXyhcIi4vZGVidWdnYWJpbGl0eVwiKShQcm9taXNlLCBDb250ZXh0KTtcbnZhciBDYXB0dXJlZFRyYWNlID0gZGVidWcuQ2FwdHVyZWRUcmFjZTtcbnZhciBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0ID1cbiAgICBfZGVyZXFfKFwiLi9maW5hbGx5XCIpKFByb21pc2UsIHRyeUNvbnZlcnRUb1Byb21pc2UpO1xudmFyIGNhdGNoRmlsdGVyID0gX2RlcmVxXyhcIi4vY2F0Y2hfZmlsdGVyXCIpKE5FWFRfRklMVEVSKTtcbnZhciBub2RlYmFja0ZvclByb21pc2UgPSBfZGVyZXFfKFwiLi9ub2RlYmFja1wiKTtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuZnVuY3Rpb24gY2hlY2soc2VsZiwgZXhlY3V0b3IpIHtcbiAgICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGV4ZWN1dG9yKSk7XG4gICAgfVxuICAgIGlmIChzZWxmLmNvbnN0cnVjdG9yICE9PSBQcm9taXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgaW52b2tlZCBkaXJlY3RseVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSAwO1xuICAgIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcHJvbWlzZTAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVjZWl2ZXIwID0gdW5kZWZpbmVkO1xuICAgIGlmIChleGVjdXRvciAhPT0gSU5URVJOQUwpIHtcbiAgICAgICAgY2hlY2sodGhpcywgZXhlY3V0b3IpO1xuICAgICAgICB0aGlzLl9yZXNvbHZlRnJvbUV4ZWN1dG9yKGV4ZWN1dG9yKTtcbiAgICB9XG4gICAgdGhpcy5fcHJvbWlzZUNyZWF0ZWQoKTtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlQ3JlYXRlZFwiLCB0aGlzKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBQcm9taXNlXVwiO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuY2F1Z2h0ID0gUHJvbWlzZS5wcm90b3R5cGVbXCJjYXRjaFwiXSA9IGZ1bmN0aW9uIChmbikge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgIHZhciBjYXRjaEluc3RhbmNlcyA9IG5ldyBBcnJheShsZW4gLSAxKSxcbiAgICAgICAgICAgIGogPSAwLCBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuIC0gMTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgY2F0Y2hJbnN0YW5jZXNbaisrXSA9IGl0ZW07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYW4gb2JqZWN0IGJ1dCBnb3QgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkEgY2F0Y2ggc3RhdGVtZW50IHByZWRpY2F0ZSBcIiArIHV0aWwuY2xhc3NTdHJpbmcoaXRlbSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoSW5zdGFuY2VzLmxlbmd0aCA9IGo7XG4gICAgICAgIGZuID0gYXJndW1lbnRzW2ldO1xuICAgICAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgY2F0Y2hGaWx0ZXIoY2F0Y2hJbnN0YW5jZXMsIGZuLCB0aGlzKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRoZW4odW5kZWZpbmVkLCBmbik7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5yZWZsZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl90aGVuKHJlZmxlY3RIYW5kbGVyLFxuICAgICAgICByZWZsZWN0SGFuZGxlciwgdW5kZWZpbmVkLCB0aGlzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChkaWRGdWxmaWxsLCBkaWRSZWplY3QpIHtcbiAgICBpZiAoZGVidWcud2FybmluZ3MoKSAmJiBhcmd1bWVudHMubGVuZ3RoID4gMCAmJlxuICAgICAgICB0eXBlb2YgZGlkRnVsZmlsbCAhPT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIHR5cGVvZiBkaWRSZWplY3QgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgbXNnID0gXCIudGhlbigpIG9ubHkgYWNjZXB0cyBmdW5jdGlvbnMgYnV0IHdhcyBwYXNzZWQ6IFwiICtcbiAgICAgICAgICAgICAgICB1dGlsLmNsYXNzU3RyaW5nKGRpZEZ1bGZpbGwpO1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIG1zZyArPSBcIiwgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGRpZFJlamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fd2Fybihtc2cpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGhlbihkaWRGdWxmaWxsLCBkaWRSZWplY3QsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZG9uZSA9IGZ1bmN0aW9uIChkaWRGdWxmaWxsLCBkaWRSZWplY3QpIHtcbiAgICB2YXIgcHJvbWlzZSA9XG4gICAgICAgIHRoaXMuX3RoZW4oZGlkRnVsZmlsbCwgZGlkUmVqZWN0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICBwcm9taXNlLl9zZXRJc0ZpbmFsKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5zcHJlYWQgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmFsbCgpLl90aGVuKGZuLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgQVBQTFksIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldCA9IHtcbiAgICAgICAgaXNGdWxmaWxsZWQ6IGZhbHNlLFxuICAgICAgICBpc1JlamVjdGVkOiBmYWxzZSxcbiAgICAgICAgZnVsZmlsbG1lbnRWYWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICByZWplY3Rpb25SZWFzb246IHVuZGVmaW5lZFxuICAgIH07XG4gICAgaWYgKHRoaXMuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICByZXQuZnVsZmlsbG1lbnRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgICAgcmV0LmlzRnVsZmlsbGVkID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIHJldC5yZWplY3Rpb25SZWFzb24gPSB0aGlzLnJlYXNvbigpO1xuICAgICAgICByZXQuaXNSZWplY3RlZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5hbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuX3dhcm4oXCIuYWxsKCkgd2FzIHBhc3NlZCBhcmd1bWVudHMgYnV0IGl0IGRvZXMgbm90IHRha2UgYW55XCIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2VBcnJheSh0aGlzKS5wcm9taXNlKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChmbikge1xuICAgIHJldHVybiB0aGlzLmNhdWdodCh1dGlsLm9yaWdpbmF0ZXNGcm9tUmVqZWN0aW9uLCBmbik7XG59O1xuXG5Qcm9taXNlLmdldE5ld0xpYnJhcnlDb3B5ID0gbW9kdWxlLmV4cG9ydHM7XG5cblByb21pc2UuaXMgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgcmV0dXJuIHZhbCBpbnN0YW5jZW9mIFByb21pc2U7XG59O1xuXG5Qcm9taXNlLmZyb21Ob2RlID0gUHJvbWlzZS5mcm9tQ2FsbGJhY2sgPSBmdW5jdGlvbihmbikge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHZhciBtdWx0aUFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/ICEhT2JqZWN0KGFyZ3VtZW50c1sxXSkubXVsdGlBcmdzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKGZuKShub2RlYmFja0ZvclByb21pc2UocmV0LCBtdWx0aUFyZ3MpKTtcbiAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICByZXQuX3JlamVjdENhbGxiYWNrKHJlc3VsdC5lLCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKCFyZXQuX2lzRmF0ZVNlYWxlZCgpKSByZXQuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLmFsbCA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZUFycmF5KHByb21pc2VzKS5wcm9taXNlKCk7XG59O1xuXG5Qcm9taXNlLmNhc3QgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgdmFyIHJldCA9IHRyeUNvbnZlcnRUb1Byb21pc2Uob2JqKTtcbiAgICBpZiAoIShyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuICAgICAgICByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgcmV0Ll9zZXRGdWxmaWxsZWQoKTtcbiAgICAgICAgcmV0Ll9yZWplY3Rpb25IYW5kbGVyMCA9IG9iajtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucmVzb2x2ZSA9IFByb21pc2UuZnVsZmlsbGVkID0gUHJvbWlzZS5jYXN0O1xuXG5Qcm9taXNlLnJlamVjdCA9IFByb21pc2UucmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgcmV0Ll9yZWplY3RDYWxsYmFjayhyZWFzb24sIHRydWUpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnNldFNjaGVkdWxlciA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICByZXR1cm4gYXN5bmMuc2V0U2NoZWR1bGVyKGZuKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl90aGVuID0gZnVuY3Rpb24gKFxuICAgIGRpZEZ1bGZpbGwsXG4gICAgZGlkUmVqZWN0LFxuICAgIF8sICAgIHJlY2VpdmVyLFxuICAgIGludGVybmFsRGF0YVxuKSB7XG4gICAgdmFyIGhhdmVJbnRlcm5hbERhdGEgPSBpbnRlcm5hbERhdGEgIT09IHVuZGVmaW5lZDtcbiAgICB2YXIgcHJvbWlzZSA9IGhhdmVJbnRlcm5hbERhdGEgPyBpbnRlcm5hbERhdGEgOiBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIHZhciBiaXRGaWVsZCA9IHRhcmdldC5fYml0RmllbGQ7XG5cbiAgICBpZiAoIWhhdmVJbnRlcm5hbERhdGEpIHtcbiAgICAgICAgcHJvbWlzZS5fcHJvcGFnYXRlRnJvbSh0aGlzLCAzKTtcbiAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgaWYgKHJlY2VpdmVyID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICgodGhpcy5fYml0RmllbGQgJiAyMDk3MTUyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIGlmICghKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlciA9IHRoaXMuX2JvdW5kVmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB0YXJnZXQgPT09IHRoaXMgPyB1bmRlZmluZWQgOiB0aGlzLl9ib3VuZFRvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VDaGFpbmVkXCIsIHRoaXMsIHByb21pc2UpO1xuICAgIH1cblxuICAgIHZhciBkb21haW4gPSBnZXREb21haW4oKTtcbiAgICBpZiAoISgoYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgIHZhciBoYW5kbGVyLCB2YWx1ZSwgc2V0dGxlciA9IHRhcmdldC5fc2V0dGxlUHJvbWlzZUN0eDtcbiAgICAgICAgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRhcmdldC5fcmVqZWN0aW9uSGFuZGxlcjA7XG4gICAgICAgICAgICBoYW5kbGVyID0gZGlkRnVsZmlsbDtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0YXJnZXQuX2Z1bGZpbGxtZW50SGFuZGxlcjA7XG4gICAgICAgICAgICBoYW5kbGVyID0gZGlkUmVqZWN0O1xuICAgICAgICAgICAgdGFyZ2V0Ll91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXR0bGVyID0gdGFyZ2V0Ll9zZXR0bGVQcm9taXNlTGF0ZUNhbmNlbGxhdGlvbk9ic2VydmVyO1xuICAgICAgICAgICAgdmFsdWUgPSBuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoXCJsYXRlIGNhbmNlbGxhdGlvbiBvYnNlcnZlclwiKTtcbiAgICAgICAgICAgIHRhcmdldC5fYXR0YWNoRXh0cmFUcmFjZSh2YWx1ZSk7XG4gICAgICAgICAgICBoYW5kbGVyID0gZGlkUmVqZWN0O1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMuaW52b2tlKHNldHRsZXIsIHRhcmdldCwge1xuICAgICAgICAgICAgaGFuZGxlcjogZG9tYWluID09PSBudWxsID8gaGFuZGxlclxuICAgICAgICAgICAgICAgIDogKHR5cGVvZiBoYW5kbGVyID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgaGFuZGxlcikpLFxuICAgICAgICAgICAgcHJvbWlzZTogcHJvbWlzZSxcbiAgICAgICAgICAgIHJlY2VpdmVyOiByZWNlaXZlcixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQuX2FkZENhbGxiYWNrcyhkaWRGdWxmaWxsLCBkaWRSZWplY3QsIHByb21pc2UsIHJlY2VpdmVyLCBkb21haW4pO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2xlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fYml0RmllbGQgJiA2NTUzNTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0ZhdGVTZWFsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDExNzUwNjA0OCkgIT09IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNGb2xsb3dpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDY3MTA4ODY0KSA9PT0gNjcxMDg4NjQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0TGVuZ3RoID0gZnVuY3Rpb24gKGxlbikge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gKHRoaXMuX2JpdEZpZWxkICYgLTY1NTM2KSB8XG4gICAgICAgIChsZW4gJiA2NTUzNSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0RnVsZmlsbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAzMzU1NDQzMjtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlRnVsZmlsbGVkXCIsIHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFJlamVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAxNjc3NzIxNjtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlUmVqZWN0ZWRcIiwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0Rm9sbG93aW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCA2NzEwODg2NDtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlUmVzb2x2ZWRcIiwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0SXNGaW5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgNDE5NDMwNDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0ZpbmFsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA0MTk0MzA0KSA+IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdW5zZXRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkICYgKH42NTUzNik7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDY1NTM2O1xuICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VDYW5jZWxsZWRcIiwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0V2lsbEJlQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDgzODg2MDg7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0QXN5bmNHdWFyYW50ZWVkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGFzeW5jLmhhc0N1c3RvbVNjaGVkdWxlcigpKSByZXR1cm47XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDEzNDIxNzcyODtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWNlaXZlckF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgdmFyIHJldCA9IGluZGV4ID09PSAwID8gdGhpcy5fcmVjZWl2ZXIwIDogdGhpc1tcbiAgICAgICAgICAgIGluZGV4ICogNCAtIDQgKyAzXTtcbiAgICBpZiAocmV0ID09PSBVTkRFRklORURfQklORElORykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSBpZiAocmV0ID09PSB1bmRlZmluZWQgJiYgdGhpcy5faXNCb3VuZCgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ib3VuZFZhbHVlKCk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcHJvbWlzZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXNbXG4gICAgICAgICAgICBpbmRleCAqIDQgLSA0ICsgMl07XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZnVsZmlsbG1lbnRIYW5kbGVyQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpc1tcbiAgICAgICAgICAgIGluZGV4ICogNCAtIDQgKyAwXTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3Rpb25IYW5kbGVyQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpc1tcbiAgICAgICAgICAgIGluZGV4ICogNCAtIDQgKyAxXTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9ib3VuZFZhbHVlID0gZnVuY3Rpb24oKSB7fTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX21pZ3JhdGVDYWxsYmFjazAgPSBmdW5jdGlvbiAoZm9sbG93ZXIpIHtcbiAgICB2YXIgYml0RmllbGQgPSBmb2xsb3dlci5fYml0RmllbGQ7XG4gICAgdmFyIGZ1bGZpbGwgPSBmb2xsb3dlci5fZnVsZmlsbG1lbnRIYW5kbGVyMDtcbiAgICB2YXIgcmVqZWN0ID0gZm9sbG93ZXIuX3JlamVjdGlvbkhhbmRsZXIwO1xuICAgIHZhciBwcm9taXNlID0gZm9sbG93ZXIuX3Byb21pc2UwO1xuICAgIHZhciByZWNlaXZlciA9IGZvbGxvd2VyLl9yZWNlaXZlckF0KDApO1xuICAgIGlmIChyZWNlaXZlciA9PT0gdW5kZWZpbmVkKSByZWNlaXZlciA9IFVOREVGSU5FRF9CSU5ESU5HO1xuICAgIHRoaXMuX2FkZENhbGxiYWNrcyhmdWxmaWxsLCByZWplY3QsIHByb21pc2UsIHJlY2VpdmVyLCBudWxsKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9taWdyYXRlQ2FsbGJhY2tBdCA9IGZ1bmN0aW9uIChmb2xsb3dlciwgaW5kZXgpIHtcbiAgICB2YXIgZnVsZmlsbCA9IGZvbGxvd2VyLl9mdWxmaWxsbWVudEhhbmRsZXJBdChpbmRleCk7XG4gICAgdmFyIHJlamVjdCA9IGZvbGxvd2VyLl9yZWplY3Rpb25IYW5kbGVyQXQoaW5kZXgpO1xuICAgIHZhciBwcm9taXNlID0gZm9sbG93ZXIuX3Byb21pc2VBdChpbmRleCk7XG4gICAgdmFyIHJlY2VpdmVyID0gZm9sbG93ZXIuX3JlY2VpdmVyQXQoaW5kZXgpO1xuICAgIGlmIChyZWNlaXZlciA9PT0gdW5kZWZpbmVkKSByZWNlaXZlciA9IFVOREVGSU5FRF9CSU5ESU5HO1xuICAgIHRoaXMuX2FkZENhbGxiYWNrcyhmdWxmaWxsLCByZWplY3QsIHByb21pc2UsIHJlY2VpdmVyLCBudWxsKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9hZGRDYWxsYmFja3MgPSBmdW5jdGlvbiAoXG4gICAgZnVsZmlsbCxcbiAgICByZWplY3QsXG4gICAgcHJvbWlzZSxcbiAgICByZWNlaXZlcixcbiAgICBkb21haW5cbikge1xuICAgIHZhciBpbmRleCA9IHRoaXMuX2xlbmd0aCgpO1xuXG4gICAgaWYgKGluZGV4ID49IDY1NTM1IC0gNCkge1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX3NldExlbmd0aCgwKTtcbiAgICB9XG5cbiAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgdGhpcy5fcHJvbWlzZTAgPSBwcm9taXNlO1xuICAgICAgICB0aGlzLl9yZWNlaXZlcjAgPSByZWNlaXZlcjtcbiAgICAgICAgaWYgKHR5cGVvZiBmdWxmaWxsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPVxuICAgICAgICAgICAgICAgIGRvbWFpbiA9PT0gbnVsbCA/IGZ1bGZpbGwgOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBmdWxmaWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlamVjdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMCA9XG4gICAgICAgICAgICAgICAgZG9tYWluID09PSBudWxsID8gcmVqZWN0IDogdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBiYXNlID0gaW5kZXggKiA0IC0gNDtcbiAgICAgICAgdGhpc1tiYXNlICsgMl0gPSBwcm9taXNlO1xuICAgICAgICB0aGlzW2Jhc2UgKyAzXSA9IHJlY2VpdmVyO1xuICAgICAgICBpZiAodHlwZW9mIGZ1bGZpbGwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpc1tiYXNlICsgMF0gPVxuICAgICAgICAgICAgICAgIGRvbWFpbiA9PT0gbnVsbCA/IGZ1bGZpbGwgOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBmdWxmaWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlamVjdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzW2Jhc2UgKyAxXSA9XG4gICAgICAgICAgICAgICAgZG9tYWluID09PSBudWxsID8gcmVqZWN0IDogdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9zZXRMZW5ndGgoaW5kZXggKyAxKTtcbiAgICByZXR1cm4gaW5kZXg7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcHJveHkgPSBmdW5jdGlvbiAocHJveHlhYmxlLCBhcmcpIHtcbiAgICB0aGlzLl9hZGRDYWxsYmFja3ModW5kZWZpbmVkLCB1bmRlZmluZWQsIGFyZywgcHJveHlhYmxlLCBudWxsKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZXNvbHZlQ2FsbGJhY2sgPSBmdW5jdGlvbih2YWx1ZSwgc2hvdWxkQmluZCkge1xuICAgIGlmICgoKHRoaXMuX2JpdEZpZWxkICYgMTE3NTA2MDQ4KSAhPT0gMCkpIHJldHVybjtcbiAgICBpZiAodmFsdWUgPT09IHRoaXMpXG4gICAgICAgIHJldHVybiB0aGlzLl9yZWplY3RDYWxsYmFjayhtYWtlU2VsZlJlc29sdXRpb25FcnJvcigpLCBmYWxzZSk7XG4gICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodmFsdWUsIHRoaXMpO1xuICAgIGlmICghKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSByZXR1cm4gdGhpcy5fZnVsZmlsbCh2YWx1ZSk7XG5cbiAgICBpZiAoc2hvdWxkQmluZCkgdGhpcy5fcHJvcGFnYXRlRnJvbShtYXliZVByb21pc2UsIDIpO1xuXG4gICAgdmFyIHByb21pc2UgPSBtYXliZVByb21pc2UuX3RhcmdldCgpO1xuXG4gICAgaWYgKHByb21pc2UgPT09IHRoaXMpIHtcbiAgICAgICAgdGhpcy5fcmVqZWN0KG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yKCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGJpdEZpZWxkID0gcHJvbWlzZS5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLl9sZW5ndGgoKTtcbiAgICAgICAgaWYgKGxlbiA+IDApIHByb21pc2UuX21pZ3JhdGVDYWxsYmFjazAodGhpcyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHByb21pc2UuX21pZ3JhdGVDYWxsYmFja0F0KHRoaXMsIGkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldEZvbGxvd2luZygpO1xuICAgICAgICB0aGlzLl9zZXRMZW5ndGgoMCk7XG4gICAgICAgIHRoaXMuX3NldEZvbGxvd2VlKHByb21pc2UpO1xuICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgdGhpcy5fZnVsZmlsbChwcm9taXNlLl92YWx1ZSgpKTtcbiAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdChwcm9taXNlLl9yZWFzb24oKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlYXNvbiA9IG5ldyBDYW5jZWxsYXRpb25FcnJvcihcImxhdGUgY2FuY2VsbGF0aW9uIG9ic2VydmVyXCIpO1xuICAgICAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHJlYXNvbik7XG4gICAgICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3RDYWxsYmFjayA9XG5mdW5jdGlvbihyZWFzb24sIHN5bmNocm9ub3VzLCBpZ25vcmVOb25FcnJvcldhcm5pbmdzKSB7XG4gICAgdmFyIHRyYWNlID0gdXRpbC5lbnN1cmVFcnJvck9iamVjdChyZWFzb24pO1xuICAgIHZhciBoYXNTdGFjayA9IHRyYWNlID09PSByZWFzb247XG4gICAgaWYgKCFoYXNTdGFjayAmJiAhaWdub3JlTm9uRXJyb3JXYXJuaW5ncyAmJiBkZWJ1Zy53YXJuaW5ncygpKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gXCJhIHByb21pc2Ugd2FzIHJlamVjdGVkIHdpdGggYSBub24tZXJyb3I6IFwiICtcbiAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcocmVhc29uKTtcbiAgICAgICAgdGhpcy5fd2FybihtZXNzYWdlLCB0cnVlKTtcbiAgICB9XG4gICAgdGhpcy5fYXR0YWNoRXh0cmFUcmFjZSh0cmFjZSwgc3luY2hyb25vdXMgPyBoYXNTdGFjayA6IGZhbHNlKTtcbiAgICB0aGlzLl9yZWplY3QocmVhc29uKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZXNvbHZlRnJvbUV4ZWN1dG9yID0gZnVuY3Rpb24gKGV4ZWN1dG9yKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIHRoaXMuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdGhpcy5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgc3luY2hyb25vdXMgPSB0cnVlO1xuICAgIHZhciByID0gdGhpcy5fZXhlY3V0ZShleGVjdXRvciwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHJlYXNvbiwgc3luY2hyb25vdXMpO1xuICAgIH0pO1xuICAgIHN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgdGhpcy5fcG9wQ29udGV4dCgpO1xuXG4gICAgaWYgKHIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyLCB0cnVlKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZUZyb21IYW5kbGVyID0gZnVuY3Rpb24gKFxuICAgIGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZVxuKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gcHJvbWlzZS5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiA2NTUzNikgIT09IDApKSByZXR1cm47XG4gICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgeDtcbiAgICBpZiAocmVjZWl2ZXIgPT09IEFQUExZKSB7XG4gICAgICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlLmxlbmd0aCAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgeCA9IGVycm9yT2JqO1xuICAgICAgICAgICAgeC5lID0gbmV3IFR5cGVFcnJvcihcImNhbm5vdCAuc3ByZWFkKCkgYSBub24tYXJyYXk6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcodmFsdWUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHggPSB0cnlDYXRjaChoYW5kbGVyKS5hcHBseSh0aGlzLl9ib3VuZFZhbHVlKCksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSB0cnlDYXRjaChoYW5kbGVyKS5jYWxsKHJlY2VpdmVyLCB2YWx1ZSk7XG4gICAgfVxuICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHByb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICBiaXRGaWVsZCA9IHByb21pc2UuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgNjU1MzYpICE9PSAwKSkgcmV0dXJuO1xuXG4gICAgaWYgKHggPT09IE5FWFRfRklMVEVSKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdCh2YWx1ZSk7XG4gICAgfSBlbHNlIGlmICh4ID09PSBlcnJvck9iaikge1xuICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayh4LmUsIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoeCwgcHJvbWlzZUNyZWF0ZWQsIFwiXCIsICBwcm9taXNlLCB0aGlzKTtcbiAgICAgICAgcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl90YXJnZXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmV0ID0gdGhpcztcbiAgICB3aGlsZSAocmV0Ll9pc0ZvbGxvd2luZygpKSByZXQgPSByZXQuX2ZvbGxvd2VlKCk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mb2xsb3dlZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRGb2xsb3dlZSA9IGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMCA9IHByb21pc2U7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZSA9IGZ1bmN0aW9uKHByb21pc2UsIGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSkge1xuICAgIHZhciBpc1Byb21pc2UgPSBwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZTtcbiAgICB2YXIgYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZDtcbiAgICB2YXIgYXN5bmNHdWFyYW50ZWVkID0gKChiaXRGaWVsZCAmIDEzNDIxNzcyOCkgIT09IDApO1xuICAgIGlmICgoKGJpdEZpZWxkICYgNjU1MzYpICE9PSAwKSkge1xuICAgICAgICBpZiAoaXNQcm9taXNlKSBwcm9taXNlLl9pbnZva2VJbnRlcm5hbE9uQ2FuY2VsKCk7XG5cbiAgICAgICAgaWYgKHJlY2VpdmVyIGluc3RhbmNlb2YgUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dCAmJlxuICAgICAgICAgICAgcmVjZWl2ZXIuaXNGaW5hbGx5SGFuZGxlcigpKSB7XG4gICAgICAgICAgICByZWNlaXZlci5jYW5jZWxQcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgICAgIGlmICh0cnlDYXRjaChoYW5kbGVyKS5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0KGVycm9yT2JqLmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZXIgPT09IHJlZmxlY3RIYW5kbGVyKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsKHJlZmxlY3RIYW5kbGVyLmNhbGwocmVjZWl2ZXIpKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZWNlaXZlciBpbnN0YW5jZW9mIFByb3h5YWJsZSkge1xuICAgICAgICAgICAgcmVjZWl2ZXIuX3Byb21pc2VDYW5jZWxsZWQocHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlIHx8IHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlQXJyYXkpIHtcbiAgICAgICAgICAgIHByb21pc2UuX2NhbmNlbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVjZWl2ZXIuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBoYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgaWYgKCFpc1Byb21pc2UpIHtcbiAgICAgICAgICAgIGhhbmRsZXIuY2FsbChyZWNlaXZlciwgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGFzeW5jR3VhcmFudGVlZCkgcHJvbWlzZS5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlRnJvbUhhbmRsZXIoaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVjZWl2ZXIgaW5zdGFuY2VvZiBQcm94eWFibGUpIHtcbiAgICAgICAgaWYgKCFyZWNlaXZlci5faXNSZXNvbHZlZCgpKSB7XG4gICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlci5fcHJvbWlzZUZ1bGZpbGxlZCh2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyLl9wcm9taXNlUmVqZWN0ZWQodmFsdWUsIHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1Byb21pc2UpIHtcbiAgICAgICAgaWYgKGFzeW5jR3VhcmFudGVlZCkgcHJvbWlzZS5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9taXNlLl9yZWplY3QodmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2VMYXRlQ2FuY2VsbGF0aW9uT2JzZXJ2ZXIgPSBmdW5jdGlvbihjdHgpIHtcbiAgICB2YXIgaGFuZGxlciA9IGN0eC5oYW5kbGVyO1xuICAgIHZhciBwcm9taXNlID0gY3R4LnByb21pc2U7XG4gICAgdmFyIHJlY2VpdmVyID0gY3R4LnJlY2VpdmVyO1xuICAgIHZhciB2YWx1ZSA9IGN0eC52YWx1ZTtcbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBpZiAoIShwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcbiAgICAgICAgICAgIGhhbmRsZXIuY2FsbChyZWNlaXZlciwgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZUZyb21IYW5kbGVyKGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdCh2YWx1ZSk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2VDdHggPSBmdW5jdGlvbihjdHgpIHtcbiAgICB0aGlzLl9zZXR0bGVQcm9taXNlKGN0eC5wcm9taXNlLCBjdHguaGFuZGxlciwgY3R4LnJlY2VpdmVyLCBjdHgudmFsdWUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2UwID0gZnVuY3Rpb24oaGFuZGxlciwgdmFsdWUsIGJpdEZpZWxkKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlMDtcbiAgICB2YXIgcmVjZWl2ZXIgPSB0aGlzLl9yZWNlaXZlckF0KDApO1xuICAgIHRoaXMuX3Byb21pc2UwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3JlY2VpdmVyMCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9zZXR0bGVQcm9taXNlKHByb21pc2UsIGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2xlYXJDYWxsYmFja0RhdGFBdEluZGV4ID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICB2YXIgYmFzZSA9IGluZGV4ICogNCAtIDQ7XG4gICAgdGhpc1tiYXNlICsgMl0gPVxuICAgIHRoaXNbYmFzZSArIDNdID1cbiAgICB0aGlzW2Jhc2UgKyAwXSA9XG4gICAgdGhpc1tiYXNlICsgMV0gPSB1bmRlZmluZWQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZnVsZmlsbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBiaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgMTE3NTA2MDQ4KSA+Pj4gMTYpKSByZXR1cm47XG4gICAgaWYgKHZhbHVlID09PSB0aGlzKSB7XG4gICAgICAgIHZhciBlcnIgPSBtYWtlU2VsZlJlc29sdXRpb25FcnJvcigpO1xuICAgICAgICB0aGlzLl9hdHRhY2hFeHRyYVRyYWNlKGVycik7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWplY3QoZXJyKTtcbiAgICB9XG4gICAgdGhpcy5fc2V0RnVsZmlsbGVkKCk7XG4gICAgdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAgPSB2YWx1ZTtcblxuICAgIGlmICgoYml0RmllbGQgJiA2NTUzNSkgPiAwKSB7XG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgMTM0MjE3NzI4KSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldHRsZVByb21pc2VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhc3luYy5zZXR0bGVQcm9taXNlcyh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3QgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gdGhpcy5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiAxMTc1MDYwNDgpID4+PiAxNikpIHJldHVybjtcbiAgICB0aGlzLl9zZXRSZWplY3RlZCgpO1xuICAgIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPSByZWFzb247XG5cbiAgICBpZiAodGhpcy5faXNGaW5hbCgpKSB7XG4gICAgICAgIHJldHVybiBhc3luYy5mYXRhbEVycm9yKHJlYXNvbiwgdXRpbC5pc05vZGUpO1xuICAgIH1cblxuICAgIGlmICgoYml0RmllbGQgJiA2NTUzNSkgPiAwKSB7XG4gICAgICAgIGFzeW5jLnNldHRsZVByb21pc2VzKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2Vuc3VyZVBvc3NpYmxlUmVqZWN0aW9uSGFuZGxlZCgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mdWxmaWxsUHJvbWlzZXMgPSBmdW5jdGlvbiAobGVuLCB2YWx1ZSkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXJBdChpKTtcbiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlQXQoaSk7XG4gICAgICAgIHZhciByZWNlaXZlciA9IHRoaXMuX3JlY2VpdmVyQXQoaSk7XG4gICAgICAgIHRoaXMuX2NsZWFyQ2FsbGJhY2tEYXRhQXRJbmRleChpKTtcbiAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZShwcm9taXNlLCBoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3RQcm9taXNlcyA9IGZ1bmN0aW9uIChsZW4sIHJlYXNvbikge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSB0aGlzLl9yZWplY3Rpb25IYW5kbGVyQXQoaSk7XG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZUF0KGkpO1xuICAgICAgICB2YXIgcmVjZWl2ZXIgPSB0aGlzLl9yZWNlaXZlckF0KGkpO1xuICAgICAgICB0aGlzLl9jbGVhckNhbGxiYWNrRGF0YUF0SW5kZXgoaSk7XG4gICAgICAgIHRoaXMuX3NldHRsZVByb21pc2UocHJvbWlzZSwgaGFuZGxlciwgcmVjZWl2ZXIsIHJlYXNvbik7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2VzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBiaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkO1xuICAgIHZhciBsZW4gPSAoYml0RmllbGQgJiA2NTUzNSk7XG5cbiAgICBpZiAobGVuID4gMCkge1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDE2ODQyNzUyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHZhciByZWFzb24gPSB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwO1xuICAgICAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZTAodGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAsIHJlYXNvbiwgYml0RmllbGQpO1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0UHJvbWlzZXMobGVuLCByZWFzb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjA7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlMCh0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwLCB2YWx1ZSwgYml0RmllbGQpO1xuICAgICAgICAgICAgdGhpcy5fZnVsZmlsbFByb21pc2VzKGxlbiwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldExlbmd0aCgwKTtcbiAgICB9XG4gICAgdGhpcy5fY2xlYXJDYW5jZWxsYXRpb25EYXRhKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlZFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gdGhpcy5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMDtcbiAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGRlZmVyUmVzb2x2ZSh2KSB7dGhpcy5wcm9taXNlLl9yZXNvbHZlQ2FsbGJhY2sodik7fVxuZnVuY3Rpb24gZGVmZXJSZWplY3Qodikge3RoaXMucHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2sodiwgZmFsc2UpO31cblxuUHJvbWlzZS5kZWZlciA9IFByb21pc2UucGVuZGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnLmRlcHJlY2F0ZWQoXCJQcm9taXNlLmRlZmVyXCIsIFwibmV3IFByb21pc2VcIik7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvbWlzZTogcHJvbWlzZSxcbiAgICAgICAgcmVzb2x2ZTogZGVmZXJSZXNvbHZlLFxuICAgICAgICByZWplY3Q6IGRlZmVyUmVqZWN0XG4gICAgfTtcbn07XG5cbnV0aWwubm90RW51bWVyYWJsZVByb3AoUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgXCJfbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IpO1xuXG5fZGVyZXFfKFwiLi9tZXRob2RcIikoUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbixcbiAgICBkZWJ1Zyk7XG5fZGVyZXFfKFwiLi9iaW5kXCIpKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBkZWJ1Zyk7XG5fZGVyZXFfKFwiLi9jYW5jZWxcIikoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24sIGRlYnVnKTtcbl9kZXJlcV8oXCIuL2RpcmVjdF9yZXNvbHZlXCIpKFByb21pc2UpO1xuX2RlcmVxXyhcIi4vc3luY2hyb25vdXNfaW5zcGVjdGlvblwiKShQcm9taXNlKTtcbl9kZXJlcV8oXCIuL2pvaW5cIikoXG4gICAgUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBJTlRFUk5BTCwgYXN5bmMsIGdldERvbWFpbik7XG5Qcm9taXNlLlByb21pc2UgPSBQcm9taXNlO1xuUHJvbWlzZS52ZXJzaW9uID0gXCIzLjQuNlwiO1xuX2RlcmVxXygnLi9tYXAuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbiwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwsIGRlYnVnKTtcbl9kZXJlcV8oJy4vY2FsbF9nZXQuanMnKShQcm9taXNlKTtcbl9kZXJlcV8oJy4vdXNpbmcuanMnKShQcm9taXNlLCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsIGNyZWF0ZUNvbnRleHQsIElOVEVSTkFMLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL3RpbWVycy5qcycpKFByb21pc2UsIElOVEVSTkFMLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL2dlbmVyYXRvcnMuanMnKShQcm9taXNlLCBhcGlSZWplY3Rpb24sIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBQcm94eWFibGUsIGRlYnVnKTtcbl9kZXJlcV8oJy4vbm9kZWlmeS5qcycpKFByb21pc2UpO1xuX2RlcmVxXygnLi9wcm9taXNpZnkuanMnKShQcm9taXNlLCBJTlRFUk5BTCk7XG5fZGVyZXFfKCcuL3Byb3BzLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24pO1xuX2RlcmVxXygnLi9yYWNlLmpzJykoUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbik7XG5fZGVyZXFfKCcuL3JlZHVjZS5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBJTlRFUk5BTCwgZGVidWcpO1xuX2RlcmVxXygnLi9zZXR0bGUuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGRlYnVnKTtcbl9kZXJlcV8oJy4vc29tZS5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uKTtcbl9kZXJlcV8oJy4vZmlsdGVyLmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xuX2RlcmVxXygnLi9lYWNoLmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xuX2RlcmVxXygnLi9hbnkuanMnKShQcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIHV0aWwudG9GYXN0UHJvcGVydGllcyhQcm9taXNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICB1dGlsLnRvRmFzdFByb3BlcnRpZXMoUHJvbWlzZS5wcm90b3R5cGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZnVuY3Rpb24gZmlsbFR5cGVzKHZhbHVlKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICB2YXIgcCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgcC5fZnVsZmlsbG1lbnRIYW5kbGVyMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHAuX3JlamVjdGlvbkhhbmRsZXIwID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBwLl9wcm9taXNlMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgcC5fcmVjZWl2ZXIwID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIC8vIENvbXBsZXRlIHNsYWNrIHRyYWNraW5nLCBvcHQgb3V0IG9mIGZpZWxkLXR5cGUgdHJhY2tpbmcgYW5kICAgICAgICAgICBcbiAgICAvLyBzdGFiaWxpemUgbWFwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKHthOiAxfSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyh7YjogMn0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXMoe2M6IDN9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyhmdW5jdGlvbigpe30pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXModW5kZWZpbmVkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKGZhbHNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyhuZXcgUHJvbWlzZShJTlRFUk5BTCkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBkZWJ1Zy5zZXRCb3VuZHMoQXN5bmMuZmlyc3RMaW5lRXJyb3IsIHV0aWwubGFzdExpbmVFcnJvcik7ICAgICAgICAgICAgICAgXG4gICAgcmV0dXJuIFByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG59O1xuXG59LHtcIi4vYW55LmpzXCI6MSxcIi4vYXN5bmNcIjoyLFwiLi9iaW5kXCI6MyxcIi4vY2FsbF9nZXQuanNcIjo1LFwiLi9jYW5jZWxcIjo2LFwiLi9jYXRjaF9maWx0ZXJcIjo3LFwiLi9jb250ZXh0XCI6OCxcIi4vZGVidWdnYWJpbGl0eVwiOjksXCIuL2RpcmVjdF9yZXNvbHZlXCI6MTAsXCIuL2VhY2guanNcIjoxMSxcIi4vZXJyb3JzXCI6MTIsXCIuL2VzNVwiOjEzLFwiLi9maWx0ZXIuanNcIjoxNCxcIi4vZmluYWxseVwiOjE1LFwiLi9nZW5lcmF0b3JzLmpzXCI6MTYsXCIuL2pvaW5cIjoxNyxcIi4vbWFwLmpzXCI6MTgsXCIuL21ldGhvZFwiOjE5LFwiLi9ub2RlYmFja1wiOjIwLFwiLi9ub2RlaWZ5LmpzXCI6MjEsXCIuL3Byb21pc2VfYXJyYXlcIjoyMyxcIi4vcHJvbWlzaWZ5LmpzXCI6MjQsXCIuL3Byb3BzLmpzXCI6MjUsXCIuL3JhY2UuanNcIjoyNyxcIi4vcmVkdWNlLmpzXCI6MjgsXCIuL3NldHRsZS5qc1wiOjMwLFwiLi9zb21lLmpzXCI6MzEsXCIuL3N5bmNocm9ub3VzX2luc3BlY3Rpb25cIjozMixcIi4vdGhlbmFibGVzXCI6MzMsXCIuL3RpbWVycy5qc1wiOjM0LFwiLi91c2luZy5qc1wiOjM1LFwiLi91dGlsXCI6MzZ9XSwyMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgYXBpUmVqZWN0aW9uLCBQcm94eWFibGUpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBpc0FycmF5ID0gdXRpbC5pc0FycmF5O1xuXG5mdW5jdGlvbiB0b1Jlc29sdXRpb25WYWx1ZSh2YWwpIHtcbiAgICBzd2l0Y2godmFsKSB7XG4gICAgY2FzZSAtMjogcmV0dXJuIFtdO1xuICAgIGNhc2UgLTM6IHJldHVybiB7fTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFByb21pc2VBcnJheSh2YWx1ZXMpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgaWYgKHZhbHVlcyBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZS5fcHJvcGFnYXRlRnJvbSh2YWx1ZXMsIDMpO1xuICAgIH1cbiAgICBwcm9taXNlLl9zZXRPbkNhbmNlbCh0aGlzKTtcbiAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICB0aGlzLl90b3RhbFJlc29sdmVkID0gMDtcbiAgICB0aGlzLl9pbml0KHVuZGVmaW5lZCwgLTIpO1xufVxudXRpbC5pbmhlcml0cyhQcm9taXNlQXJyYXksIFByb3h5YWJsZSk7XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLnByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gaW5pdChfLCByZXNvbHZlVmFsdWVJZkVtcHR5KSB7XG4gICAgdmFyIHZhbHVlcyA9IHRyeUNvbnZlcnRUb1Byb21pc2UodGhpcy5fdmFsdWVzLCB0aGlzLl9wcm9taXNlKTtcbiAgICBpZiAodmFsdWVzIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuX3RhcmdldCgpO1xuICAgICAgICB2YXIgYml0RmllbGQgPSB2YWx1ZXMuX2JpdEZpZWxkO1xuICAgICAgICA7XG4gICAgICAgIHRoaXMuX3ZhbHVlcyA9IHZhbHVlcztcblxuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcy5fdGhlbihcbiAgICAgICAgICAgICAgICBpbml0LFxuICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdCxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICByZXNvbHZlVmFsdWVJZkVtcHR5XG4gICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlcy5fdmFsdWUoKTtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdCh2YWx1ZXMuX3JlYXNvbigpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YWx1ZXMgPSB1dGlsLmFzQXJyYXkodmFsdWVzKTtcbiAgICBpZiAodmFsdWVzID09PSBudWxsKSB7XG4gICAgICAgIHZhciBlcnIgPSBhcGlSZWplY3Rpb24oXG4gICAgICAgICAgICBcImV4cGVjdGluZyBhbiBhcnJheSBvciBhbiBpdGVyYWJsZSBvYmplY3QgYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcodmFsdWVzKSkucmVhc29uKCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3JlamVjdENhbGxiYWNrKGVyciwgZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKHJlc29sdmVWYWx1ZUlmRW1wdHkgPT09IC01KSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlRW1wdHlBcnJheSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0b1Jlc29sdXRpb25WYWx1ZShyZXNvbHZlVmFsdWVJZkVtcHR5KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pdGVyYXRlKHZhbHVlcyk7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pdGVyYXRlID0gZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgdmFyIGxlbiA9IHRoaXMuZ2V0QWN0dWFsTGVuZ3RoKHZhbHVlcy5sZW5ndGgpO1xuICAgIHRoaXMuX2xlbmd0aCA9IGxlbjtcbiAgICB0aGlzLl92YWx1ZXMgPSB0aGlzLnNob3VsZENvcHlWYWx1ZXMoKSA/IG5ldyBBcnJheShsZW4pIDogdGhpcy5fdmFsdWVzO1xuICAgIHZhciByZXN1bHQgPSB0aGlzLl9wcm9taXNlO1xuICAgIHZhciBpc1Jlc29sdmVkID0gZmFsc2U7XG4gICAgdmFyIGJpdEZpZWxkID0gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHZhbHVlc1tpXSwgcmVzdWx0KTtcblxuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIGJpdEZpZWxkID0gbWF5YmVQcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJpdEZpZWxkID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1Jlc29sdmVkKSB7XG4gICAgICAgICAgICBpZiAoYml0RmllbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtYXliZVByb21pc2Uuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYml0RmllbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fcHJveHkodGhpcywgaSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzW2ldID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0aGlzLl9wcm9taXNlRnVsZmlsbGVkKG1heWJlUHJvbWlzZS5fdmFsdWUoKSwgaSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRoaXMuX3Byb21pc2VSZWplY3RlZChtYXliZVByb21pc2UuX3JlYXNvbigpLCBpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRoaXMuX3Byb21pc2VDYW5jZWxsZWQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpc1Jlc29sdmVkID0gdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZChtYXliZVByb21pc2UsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghaXNSZXNvbHZlZCkgcmVzdWx0Ll9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX2lzUmVzb2x2ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcyA9PT0gbnVsbDtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSB8fCAhdGhpcy5fcHJvbWlzZS5faXNDYW5jZWxsYWJsZSgpKSByZXR1cm47XG4gICAgdGhpcy5fdmFsdWVzID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9jYW5jZWwoKTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3JlamVjdCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX3JlamVjdENhbGxiYWNrKHJlYXNvbiwgZmFsc2UpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICB0aGlzLl92YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgdmFyIHRvdGFsUmVzb2x2ZWQgPSArK3RoaXMuX3RvdGFsUmVzb2x2ZWQ7XG4gICAgaWYgKHRvdGFsUmVzb2x2ZWQgPj0gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmUodGhpcy5fdmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB0aGlzLl90b3RhbFJlc29sdmVkKys7XG4gICAgdGhpcy5fcmVqZWN0KHJlYXNvbik7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNSZXNvbHZlZCgpKSByZXR1cm47XG4gICAgdmFyIHZhbHVlcyA9IHRoaXMuX3ZhbHVlcztcbiAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICBpZiAodmFsdWVzIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB2YWx1ZXMuY2FuY2VsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZXNbaV0gaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzW2ldLmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zaG91bGRDb3B5VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5nZXRBY3R1YWxMZW5ndGggPSBmdW5jdGlvbiAobGVuKSB7XG4gICAgcmV0dXJuIGxlbjtcbn07XG5cbnJldHVybiBQcm9taXNlQXJyYXk7XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMjQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMKSB7XG52YXIgVEhJUyA9IHt9O1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIG5vZGViYWNrRm9yUHJvbWlzZSA9IF9kZXJlcV8oXCIuL25vZGViYWNrXCIpO1xudmFyIHdpdGhBcHBlbmRlZCA9IHV0aWwud2l0aEFwcGVuZGVkO1xudmFyIG1heWJlV3JhcEFzRXJyb3IgPSB1dGlsLm1heWJlV3JhcEFzRXJyb3I7XG52YXIgY2FuRXZhbHVhdGUgPSB1dGlsLmNhbkV2YWx1YXRlO1xudmFyIFR5cGVFcnJvciA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKS5UeXBlRXJyb3I7XG52YXIgZGVmYXVsdFN1ZmZpeCA9IFwiQXN5bmNcIjtcbnZhciBkZWZhdWx0UHJvbWlzaWZpZWQgPSB7X19pc1Byb21pc2lmaWVkX186IHRydWV9O1xudmFyIG5vQ29weVByb3BzID0gW1xuICAgIFwiYXJpdHlcIiwgICAgXCJsZW5ndGhcIixcbiAgICBcIm5hbWVcIixcbiAgICBcImFyZ3VtZW50c1wiLFxuICAgIFwiY2FsbGVyXCIsXG4gICAgXCJjYWxsZWVcIixcbiAgICBcInByb3RvdHlwZVwiLFxuICAgIFwiX19pc1Byb21pc2lmaWVkX19cIlxuXTtcbnZhciBub0NvcHlQcm9wc1BhdHRlcm4gPSBuZXcgUmVnRXhwKFwiXig/OlwiICsgbm9Db3B5UHJvcHMuam9pbihcInxcIikgKyBcIikkXCIpO1xuXG52YXIgZGVmYXVsdEZpbHRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdXRpbC5pc0lkZW50aWZpZXIobmFtZSkgJiZcbiAgICAgICAgbmFtZS5jaGFyQXQoMCkgIT09IFwiX1wiICYmXG4gICAgICAgIG5hbWUgIT09IFwiY29uc3RydWN0b3JcIjtcbn07XG5cbmZ1bmN0aW9uIHByb3BzRmlsdGVyKGtleSkge1xuICAgIHJldHVybiAhbm9Db3B5UHJvcHNQYXR0ZXJuLnRlc3Qoa2V5KTtcbn1cblxuZnVuY3Rpb24gaXNQcm9taXNpZmllZChmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmbi5fX2lzUHJvbWlzaWZpZWRfXyA9PT0gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFzUHJvbWlzaWZpZWQob2JqLCBrZXksIHN1ZmZpeCkge1xuICAgIHZhciB2YWwgPSB1dGlsLmdldERhdGFQcm9wZXJ0eU9yRGVmYXVsdChvYmosIGtleSArIHN1ZmZpeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFByb21pc2lmaWVkKTtcbiAgICByZXR1cm4gdmFsID8gaXNQcm9taXNpZmllZCh2YWwpIDogZmFsc2U7XG59XG5mdW5jdGlvbiBjaGVja1ZhbGlkKHJldCwgc3VmZml4LCBzdWZmaXhSZWdleHApIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICB2YXIga2V5ID0gcmV0W2ldO1xuICAgICAgICBpZiAoc3VmZml4UmVnZXhwLnRlc3Qoa2V5KSkge1xuICAgICAgICAgICAgdmFyIGtleVdpdGhvdXRBc3luY1N1ZmZpeCA9IGtleS5yZXBsYWNlKHN1ZmZpeFJlZ2V4cCwgXCJcIik7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJldC5sZW5ndGg7IGogKz0gMikge1xuICAgICAgICAgICAgICAgIGlmIChyZXRbal0gPT09IGtleVdpdGhvdXRBc3luY1N1ZmZpeCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHByb21pc2lmeSBhbiBBUEkgdGhhdCBoYXMgbm9ybWFsIG1ldGhvZHMgd2l0aCAnJXMnLXN1ZmZpeFxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoXCIlc1wiLCBzdWZmaXgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHByb21pc2lmaWFibGVNZXRob2RzKG9iaiwgc3VmZml4LCBzdWZmaXhSZWdleHAsIGZpbHRlcikge1xuICAgIHZhciBrZXlzID0gdXRpbC5pbmhlcml0ZWREYXRhS2V5cyhvYmopO1xuICAgIHZhciByZXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICB2YXIgcGFzc2VzRGVmYXVsdEZpbHRlciA9IGZpbHRlciA9PT0gZGVmYXVsdEZpbHRlclxuICAgICAgICAgICAgPyB0cnVlIDogZGVmYXVsdEZpbHRlcihrZXksIHZhbHVlLCBvYmopO1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICFpc1Byb21pc2lmaWVkKHZhbHVlKSAmJlxuICAgICAgICAgICAgIWhhc1Byb21pc2lmaWVkKG9iaiwga2V5LCBzdWZmaXgpICYmXG4gICAgICAgICAgICBmaWx0ZXIoa2V5LCB2YWx1ZSwgb2JqLCBwYXNzZXNEZWZhdWx0RmlsdGVyKSkge1xuICAgICAgICAgICAgcmV0LnB1c2goa2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tWYWxpZChyZXQsIHN1ZmZpeCwgc3VmZml4UmVnZXhwKTtcbiAgICByZXR1cm4gcmV0O1xufVxuXG52YXIgZXNjYXBlSWRlbnRSZWdleCA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvKFskXSkvLCBcIlxcXFwkXCIpO1xufTtcblxudmFyIG1ha2VOb2RlUHJvbWlzaWZpZWRFdmFsO1xuaWYgKCF0cnVlKSB7XG52YXIgc3dpdGNoQ2FzZUFyZ3VtZW50T3JkZXIgPSBmdW5jdGlvbihsaWtlbHlBcmd1bWVudENvdW50KSB7XG4gICAgdmFyIHJldCA9IFtsaWtlbHlBcmd1bWVudENvdW50XTtcbiAgICB2YXIgbWluID0gTWF0aC5tYXgoMCwgbGlrZWx5QXJndW1lbnRDb3VudCAtIDEgLSAzKTtcbiAgICBmb3IodmFyIGkgPSBsaWtlbHlBcmd1bWVudENvdW50IC0gMTsgaSA+PSBtaW47IC0taSkge1xuICAgICAgICByZXQucHVzaChpKTtcbiAgICB9XG4gICAgZm9yKHZhciBpID0gbGlrZWx5QXJndW1lbnRDb3VudCArIDE7IGkgPD0gMzsgKytpKSB7XG4gICAgICAgIHJldC5wdXNoKGkpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxudmFyIGFyZ3VtZW50U2VxdWVuY2UgPSBmdW5jdGlvbihhcmd1bWVudENvdW50KSB7XG4gICAgcmV0dXJuIHV0aWwuZmlsbGVkUmFuZ2UoYXJndW1lbnRDb3VudCwgXCJfYXJnXCIsIFwiXCIpO1xufTtcblxudmFyIHBhcmFtZXRlckRlY2xhcmF0aW9uID0gZnVuY3Rpb24ocGFyYW1ldGVyQ291bnQpIHtcbiAgICByZXR1cm4gdXRpbC5maWxsZWRSYW5nZShcbiAgICAgICAgTWF0aC5tYXgocGFyYW1ldGVyQ291bnQsIDMpLCBcIl9hcmdcIiwgXCJcIik7XG59O1xuXG52YXIgcGFyYW1ldGVyQ291bnQgPSBmdW5jdGlvbihmbikge1xuICAgIGlmICh0eXBlb2YgZm4ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbihmbi5sZW5ndGgsIDEwMjMgKyAxKSwgMCk7XG4gICAgfVxuICAgIHJldHVybiAwO1xufTtcblxubWFrZU5vZGVQcm9taXNpZmllZEV2YWwgPVxuZnVuY3Rpb24oY2FsbGJhY2ssIHJlY2VpdmVyLCBvcmlnaW5hbE5hbWUsIGZuLCBfLCBtdWx0aUFyZ3MpIHtcbiAgICB2YXIgbmV3UGFyYW1ldGVyQ291bnQgPSBNYXRoLm1heCgwLCBwYXJhbWV0ZXJDb3VudChmbikgLSAxKTtcbiAgICB2YXIgYXJndW1lbnRPcmRlciA9IHN3aXRjaENhc2VBcmd1bWVudE9yZGVyKG5ld1BhcmFtZXRlckNvdW50KTtcbiAgICB2YXIgc2hvdWxkUHJveHlUaGlzID0gdHlwZW9mIGNhbGxiYWNrID09PSBcInN0cmluZ1wiIHx8IHJlY2VpdmVyID09PSBUSElTO1xuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVDYWxsRm9yQXJndW1lbnRDb3VudChjb3VudCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50U2VxdWVuY2UoY291bnQpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgdmFyIGNvbW1hID0gY291bnQgPiAwID8gXCIsIFwiIDogXCJcIjtcbiAgICAgICAgdmFyIHJldDtcbiAgICAgICAgaWYgKHNob3VsZFByb3h5VGhpcykge1xuICAgICAgICAgICAgcmV0ID0gXCJyZXQgPSBjYWxsYmFjay5jYWxsKHRoaXMsIHt7YXJnc319LCBub2RlYmFjayk7IGJyZWFrO1xcblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0ID0gcmVjZWl2ZXIgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gXCJyZXQgPSBjYWxsYmFjayh7e2FyZ3N9fSwgbm9kZWJhY2spOyBicmVhaztcXG5cIlxuICAgICAgICAgICAgICAgIDogXCJyZXQgPSBjYWxsYmFjay5jYWxsKHJlY2VpdmVyLCB7e2FyZ3N9fSwgbm9kZWJhY2spOyBicmVhaztcXG5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0LnJlcGxhY2UoXCJ7e2FyZ3N9fVwiLCBhcmdzKS5yZXBsYWNlKFwiLCBcIiwgY29tbWEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlQXJndW1lbnRTd2l0Y2hDYXNlKCkge1xuICAgICAgICB2YXIgcmV0ID0gXCJcIjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudE9yZGVyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICByZXQgKz0gXCJjYXNlIFwiICsgYXJndW1lbnRPcmRlcltpXSArXCI6XCIgK1xuICAgICAgICAgICAgICAgIGdlbmVyYXRlQ2FsbEZvckFyZ3VtZW50Q291bnQoYXJndW1lbnRPcmRlcltpXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXQgKz0gXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGxlbiArIDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBpID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGFyZ3NbaV0gPSBub2RlYmFjazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtDb2RlRm9yQ2FsbF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCIucmVwbGFjZShcIltDb2RlRm9yQ2FsbF1cIiwgKHNob3VsZFByb3h5VGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwicmV0ID0gY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7XFxuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcInJldCA9IGNhbGxiYWNrLmFwcGx5KHJlY2VpdmVyLCBhcmdzKTtcXG5cIikpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIHZhciBnZXRGdW5jdGlvbkNvZGUgPSB0eXBlb2YgY2FsbGJhY2sgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoXCJ0aGlzICE9IG51bGwgPyB0aGlzWydcIitjYWxsYmFjaytcIiddIDogZm5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImZuXCI7XG4gICAgdmFyIGJvZHkgPSBcIid1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICB2YXIgcmV0ID0gZnVuY3Rpb24gKFBhcmFtZXRlcnMpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIG5vZGViYWNrID0gbm9kZWJhY2tGb3JQcm9taXNlKHByb21pc2UsIFwiICsgbXVsdGlBcmdzICsgXCIpOyAgIFxcblxcXG4gICAgICAgICAgICB2YXIgcmV0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSB0cnlDYXRjaChbR2V0RnVuY3Rpb25Db2RlXSk7ICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBzd2l0Y2gobGVuKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgW0NvZGVGb3JTd2l0Y2hDYXNlXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2sobWF5YmVXcmFwQXNFcnJvcihyZXQuZSksIHRydWUsIHRydWUpO1xcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBpZiAoIXByb21pc2UuX2lzRmF0ZVNlYWxlZCgpKSBwcm9taXNlLl9zZXRBc3luY0d1YXJhbnRlZWQoKTsgICAgIFxcblxcXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHJldCwgJ19faXNQcm9taXNpZmllZF9fJywgdHJ1ZSk7ICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIHJldHVybiByZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgXCIucmVwbGFjZShcIltDb2RlRm9yU3dpdGNoQ2FzZV1cIiwgZ2VuZXJhdGVBcmd1bWVudFN3aXRjaENhc2UoKSlcbiAgICAgICAgLnJlcGxhY2UoXCJbR2V0RnVuY3Rpb25Db2RlXVwiLCBnZXRGdW5jdGlvbkNvZGUpO1xuICAgIGJvZHkgPSBib2R5LnJlcGxhY2UoXCJQYXJhbWV0ZXJzXCIsIHBhcmFtZXRlckRlY2xhcmF0aW9uKG5ld1BhcmFtZXRlckNvdW50KSk7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcIlByb21pc2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZm5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicmVjZWl2ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid2l0aEFwcGVuZGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1heWJlV3JhcEFzRXJyb3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibm9kZWJhY2tGb3JQcm9taXNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRyeUNhdGNoXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVycm9yT2JqXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5vdEVudW1lcmFibGVQcm9wXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIklOVEVSTkFMXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5KShcbiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgZm4sXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyLFxuICAgICAgICAgICAgICAgICAgICB3aXRoQXBwZW5kZWQsXG4gICAgICAgICAgICAgICAgICAgIG1heWJlV3JhcEFzRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIG5vZGViYWNrRm9yUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgdXRpbC50cnlDYXRjaCxcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5lcnJvck9iaixcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcCxcbiAgICAgICAgICAgICAgICAgICAgSU5URVJOQUwpO1xufTtcbn1cblxuZnVuY3Rpb24gbWFrZU5vZGVQcm9taXNpZmllZENsb3N1cmUoY2FsbGJhY2ssIHJlY2VpdmVyLCBfLCBmbiwgX18sIG11bHRpQXJncykge1xuICAgIHZhciBkZWZhdWx0VGhpcyA9IChmdW5jdGlvbigpIHtyZXR1cm4gdGhpczt9KSgpO1xuICAgIHZhciBtZXRob2QgPSBjYWxsYmFjaztcbiAgICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcm9taXNpZmllZCgpIHtcbiAgICAgICAgdmFyIF9yZWNlaXZlciA9IHJlY2VpdmVyO1xuICAgICAgICBpZiAocmVjZWl2ZXIgPT09IFRISVMpIF9yZWNlaXZlciA9IHRoaXM7XG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICBwcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICB2YXIgY2IgPSB0eXBlb2YgbWV0aG9kID09PSBcInN0cmluZ1wiICYmIHRoaXMgIT09IGRlZmF1bHRUaGlzXG4gICAgICAgICAgICA/IHRoaXNbbWV0aG9kXSA6IGNhbGxiYWNrO1xuICAgICAgICB2YXIgZm4gPSBub2RlYmFja0ZvclByb21pc2UocHJvbWlzZSwgbXVsdGlBcmdzKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNiLmFwcGx5KF9yZWNlaXZlciwgd2l0aEFwcGVuZGVkKGFyZ3VtZW50cywgZm4pKTtcbiAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhtYXliZVdyYXBBc0Vycm9yKGUpLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByb21pc2UuX2lzRmF0ZVNlYWxlZCgpKSBwcm9taXNlLl9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AocHJvbWlzaWZpZWQsIFwiX19pc1Byb21pc2lmaWVkX19cIiwgdHJ1ZSk7XG4gICAgcmV0dXJuIHByb21pc2lmaWVkO1xufVxuXG52YXIgbWFrZU5vZGVQcm9taXNpZmllZCA9IGNhbkV2YWx1YXRlXG4gICAgPyBtYWtlTm9kZVByb21pc2lmaWVkRXZhbFxuICAgIDogbWFrZU5vZGVQcm9taXNpZmllZENsb3N1cmU7XG5cbmZ1bmN0aW9uIHByb21pc2lmeUFsbChvYmosIHN1ZmZpeCwgZmlsdGVyLCBwcm9taXNpZmllciwgbXVsdGlBcmdzKSB7XG4gICAgdmFyIHN1ZmZpeFJlZ2V4cCA9IG5ldyBSZWdFeHAoZXNjYXBlSWRlbnRSZWdleChzdWZmaXgpICsgXCIkXCIpO1xuICAgIHZhciBtZXRob2RzID1cbiAgICAgICAgcHJvbWlzaWZpYWJsZU1ldGhvZHMob2JqLCBzdWZmaXgsIHN1ZmZpeFJlZ2V4cCwgZmlsdGVyKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBtZXRob2RzLmxlbmd0aDsgaSA8IGxlbjsgaSs9IDIpIHtcbiAgICAgICAgdmFyIGtleSA9IG1ldGhvZHNbaV07XG4gICAgICAgIHZhciBmbiA9IG1ldGhvZHNbaSsxXTtcbiAgICAgICAgdmFyIHByb21pc2lmaWVkS2V5ID0ga2V5ICsgc3VmZml4O1xuICAgICAgICBpZiAocHJvbWlzaWZpZXIgPT09IG1ha2VOb2RlUHJvbWlzaWZpZWQpIHtcbiAgICAgICAgICAgIG9ialtwcm9taXNpZmllZEtleV0gPVxuICAgICAgICAgICAgICAgIG1ha2VOb2RlUHJvbWlzaWZpZWQoa2V5LCBUSElTLCBrZXksIGZuLCBzdWZmaXgsIG11bHRpQXJncyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgcHJvbWlzaWZpZWQgPSBwcm9taXNpZmllcihmbiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VOb2RlUHJvbWlzaWZpZWQoa2V5LCBUSElTLCBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4sIHN1ZmZpeCwgbXVsdGlBcmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChwcm9taXNpZmllZCwgXCJfX2lzUHJvbWlzaWZpZWRfX1wiLCB0cnVlKTtcbiAgICAgICAgICAgIG9ialtwcm9taXNpZmllZEtleV0gPSBwcm9taXNpZmllZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1dGlsLnRvRmFzdFByb3BlcnRpZXMob2JqKTtcbiAgICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBwcm9taXNpZnkoY2FsbGJhY2ssIHJlY2VpdmVyLCBtdWx0aUFyZ3MpIHtcbiAgICByZXR1cm4gbWFrZU5vZGVQcm9taXNpZmllZChjYWxsYmFjaywgcmVjZWl2ZXIsIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2ssIG51bGwsIG11bHRpQXJncyk7XG59XG5cblByb21pc2UucHJvbWlzaWZ5ID0gZnVuY3Rpb24gKGZuLCBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICBpZiAoaXNQcm9taXNpZmllZChmbikpIHtcbiAgICAgICAgcmV0dXJuIGZuO1xuICAgIH1cbiAgICBvcHRpb25zID0gT2JqZWN0KG9wdGlvbnMpO1xuICAgIHZhciByZWNlaXZlciA9IG9wdGlvbnMuY29udGV4dCA9PT0gdW5kZWZpbmVkID8gVEhJUyA6IG9wdGlvbnMuY29udGV4dDtcbiAgICB2YXIgbXVsdGlBcmdzID0gISFvcHRpb25zLm11bHRpQXJncztcbiAgICB2YXIgcmV0ID0gcHJvbWlzaWZ5KGZuLCByZWNlaXZlciwgbXVsdGlBcmdzKTtcbiAgICB1dGlsLmNvcHlEZXNjcmlwdG9ycyhmbiwgcmV0LCBwcm9wc0ZpbHRlcik7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvbWlzaWZ5QWxsID0gZnVuY3Rpb24gKHRhcmdldCwgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwidGhlIHRhcmdldCBvZiBwcm9taXNpZnlBbGwgbXVzdCBiZSBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIG9wdGlvbnMgPSBPYmplY3Qob3B0aW9ucyk7XG4gICAgdmFyIG11bHRpQXJncyA9ICEhb3B0aW9ucy5tdWx0aUFyZ3M7XG4gICAgdmFyIHN1ZmZpeCA9IG9wdGlvbnMuc3VmZml4O1xuICAgIGlmICh0eXBlb2Ygc3VmZml4ICE9PSBcInN0cmluZ1wiKSBzdWZmaXggPSBkZWZhdWx0U3VmZml4O1xuICAgIHZhciBmaWx0ZXIgPSBvcHRpb25zLmZpbHRlcjtcbiAgICBpZiAodHlwZW9mIGZpbHRlciAhPT0gXCJmdW5jdGlvblwiKSBmaWx0ZXIgPSBkZWZhdWx0RmlsdGVyO1xuICAgIHZhciBwcm9taXNpZmllciA9IG9wdGlvbnMucHJvbWlzaWZpZXI7XG4gICAgaWYgKHR5cGVvZiBwcm9taXNpZmllciAhPT0gXCJmdW5jdGlvblwiKSBwcm9taXNpZmllciA9IG1ha2VOb2RlUHJvbWlzaWZpZWQ7XG5cbiAgICBpZiAoIXV0aWwuaXNJZGVudGlmaWVyKHN1ZmZpeCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzdWZmaXggbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXJcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cblxuICAgIHZhciBrZXlzID0gdXRpbC5pbmhlcml0ZWREYXRhS2V5cyh0YXJnZXQpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0YXJnZXRba2V5c1tpXV07XG4gICAgICAgIGlmIChrZXlzW2ldICE9PSBcImNvbnN0cnVjdG9yXCIgJiZcbiAgICAgICAgICAgIHV0aWwuaXNDbGFzcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHByb21pc2lmeUFsbCh2YWx1ZS5wcm90b3R5cGUsIHN1ZmZpeCwgZmlsdGVyLCBwcm9taXNpZmllcixcbiAgICAgICAgICAgICAgICBtdWx0aUFyZ3MpO1xuICAgICAgICAgICAgcHJvbWlzaWZ5QWxsKHZhbHVlLCBzdWZmaXgsIGZpbHRlciwgcHJvbWlzaWZpZXIsIG11bHRpQXJncyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzaWZ5QWxsKHRhcmdldCwgc3VmZml4LCBmaWx0ZXIsIHByb21pc2lmaWVyLCBtdWx0aUFyZ3MpO1xufTtcbn07XG5cblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi9ub2RlYmFja1wiOjIwLFwiLi91dGlsXCI6MzZ9XSwyNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oXG4gICAgUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24pIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBpc09iamVjdCA9IHV0aWwuaXNPYmplY3Q7XG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xudmFyIEVzNk1hcDtcbmlmICh0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCIpIEVzNk1hcCA9IE1hcDtcblxudmFyIG1hcFRvRW50cmllcyA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBzaXplID0gMDtcblxuICAgIGZ1bmN0aW9uIGV4dHJhY3RFbnRyeSh2YWx1ZSwga2V5KSB7XG4gICAgICAgIHRoaXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgIHRoaXNbaW5kZXggKyBzaXplXSA9IGtleTtcbiAgICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gbWFwVG9FbnRyaWVzKG1hcCkge1xuICAgICAgICBzaXplID0gbWFwLnNpemU7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgdmFyIHJldCA9IG5ldyBBcnJheShtYXAuc2l6ZSAqIDIpO1xuICAgICAgICBtYXAuZm9yRWFjaChleHRyYWN0RW50cnksIHJldCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbn0pKCk7XG5cbnZhciBlbnRyaWVzVG9NYXAgPSBmdW5jdGlvbihlbnRyaWVzKSB7XG4gICAgdmFyIHJldCA9IG5ldyBFczZNYXAoKTtcbiAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGggLyAyIHwgMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBrZXkgPSBlbnRyaWVzW2xlbmd0aCArIGldO1xuICAgICAgICB2YXIgdmFsdWUgPSBlbnRyaWVzW2ldO1xuICAgICAgICByZXQuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuZnVuY3Rpb24gUHJvcGVydGllc1Byb21pc2VBcnJheShvYmopIHtcbiAgICB2YXIgaXNNYXAgPSBmYWxzZTtcbiAgICB2YXIgZW50cmllcztcbiAgICBpZiAoRXM2TWFwICE9PSB1bmRlZmluZWQgJiYgb2JqIGluc3RhbmNlb2YgRXM2TWFwKSB7XG4gICAgICAgIGVudHJpZXMgPSBtYXBUb0VudHJpZXMob2JqKTtcbiAgICAgICAgaXNNYXAgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBrZXlzID0gZXM1LmtleXMob2JqKTtcbiAgICAgICAgdmFyIGxlbiA9IGtleXMubGVuZ3RoO1xuICAgICAgICBlbnRyaWVzID0gbmV3IEFycmF5KGxlbiAqIDIpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgIGVudHJpZXNbaV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgIGVudHJpZXNbaSArIGxlbl0gPSBrZXk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQoZW50cmllcyk7XG4gICAgdGhpcy5faXNNYXAgPSBpc01hcDtcbiAgICB0aGlzLl9pbml0JCh1bmRlZmluZWQsIC0zKTtcbn1cbnV0aWwuaW5oZXJpdHMoUHJvcGVydGllc1Byb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuUHJvcGVydGllc1Byb21pc2VBcnJheS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAoKSB7fTtcblxuUHJvcGVydGllc1Byb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgdGhpcy5fdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgIHZhciB0b3RhbFJlc29sdmVkID0gKyt0aGlzLl90b3RhbFJlc29sdmVkO1xuICAgIGlmICh0b3RhbFJlc29sdmVkID49IHRoaXMuX2xlbmd0aCkge1xuICAgICAgICB2YXIgdmFsO1xuICAgICAgICBpZiAodGhpcy5faXNNYXApIHtcbiAgICAgICAgICAgIHZhbCA9IGVudHJpZXNUb01hcCh0aGlzLl92YWx1ZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsID0ge307XG4gICAgICAgICAgICB2YXIga2V5T2Zmc2V0ID0gdGhpcy5sZW5ndGgoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmxlbmd0aCgpOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YWxbdGhpcy5fdmFsdWVzW2kgKyBrZXlPZmZzZXRdXSA9IHRoaXMuX3ZhbHVlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZXNvbHZlKHZhbCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5Qcm9wZXJ0aWVzUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zaG91bGRDb3B5VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb3BlcnRpZXNQcm9taXNlQXJyYXkucHJvdG90eXBlLmdldEFjdHVhbExlbmd0aCA9IGZ1bmN0aW9uIChsZW4pIHtcbiAgICByZXR1cm4gbGVuID4+IDE7XG59O1xuXG5mdW5jdGlvbiBwcm9wcyhwcm9taXNlcykge1xuICAgIHZhciByZXQ7XG4gICAgdmFyIGNhc3RWYWx1ZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocHJvbWlzZXMpO1xuXG4gICAgaWYgKCFpc09iamVjdChjYXN0VmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJjYW5ub3QgYXdhaXQgcHJvcGVydGllcyBvZiBhIG5vbi1vYmplY3RcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH0gZWxzZSBpZiAoY2FzdFZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXQgPSBjYXN0VmFsdWUuX3RoZW4oXG4gICAgICAgICAgICBQcm9taXNlLnByb3BzLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IG5ldyBQcm9wZXJ0aWVzUHJvbWlzZUFycmF5KGNhc3RWYWx1ZSkucHJvbWlzZSgpO1xuICAgIH1cblxuICAgIGlmIChjYXN0VmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldC5fcHJvcGFnYXRlRnJvbShjYXN0VmFsdWUsIDIpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5wcm9wcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvcHModGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3BzID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIHByb3BzKHByb21pc2VzKTtcbn07XG59O1xuXG59LHtcIi4vZXM1XCI6MTMsXCIuL3V0aWxcIjozNn1dLDI2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gYXJyYXlNb3ZlKHNyYywgc3JjSW5kZXgsIGRzdCwgZHN0SW5kZXgsIGxlbikge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgZHN0W2ogKyBkc3RJbmRleF0gPSBzcmNbaiArIHNyY0luZGV4XTtcbiAgICAgICAgc3JjW2ogKyBzcmNJbmRleF0gPSB2b2lkIDA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBRdWV1ZShjYXBhY2l0eSkge1xuICAgIHRoaXMuX2NhcGFjaXR5ID0gY2FwYWNpdHk7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICB0aGlzLl9mcm9udCA9IDA7XG59XG5cblF1ZXVlLnByb3RvdHlwZS5fd2lsbEJlT3ZlckNhcGFjaXR5ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FwYWNpdHkgPCBzaXplO1xufTtcblxuUXVldWUucHJvdG90eXBlLl9wdXNoT25lID0gZnVuY3Rpb24gKGFyZykge1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCgpO1xuICAgIHRoaXMuX2NoZWNrQ2FwYWNpdHkobGVuZ3RoICsgMSk7XG4gICAgdmFyIGkgPSAodGhpcy5fZnJvbnQgKyBsZW5ndGgpICYgKHRoaXMuX2NhcGFjaXR5IC0gMSk7XG4gICAgdGhpc1tpXSA9IGFyZztcbiAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGggKyAxO1xufTtcblxuUXVldWUucHJvdG90eXBlLl91bnNoaWZ0T25lID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgY2FwYWNpdHkgPSB0aGlzLl9jYXBhY2l0eTtcbiAgICB0aGlzLl9jaGVja0NhcGFjaXR5KHRoaXMubGVuZ3RoKCkgKyAxKTtcbiAgICB2YXIgZnJvbnQgPSB0aGlzLl9mcm9udDtcbiAgICB2YXIgaSA9ICgoKCggZnJvbnQgLSAxICkgJlxuICAgICAgICAgICAgICAgICAgICAoIGNhcGFjaXR5IC0gMSkgKSBeIGNhcGFjaXR5ICkgLSBjYXBhY2l0eSApO1xuICAgIHRoaXNbaV0gPSB2YWx1ZTtcbiAgICB0aGlzLl9mcm9udCA9IGk7XG4gICAgdGhpcy5fbGVuZ3RoID0gdGhpcy5sZW5ndGgoKSArIDE7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgdGhpcy5fdW5zaGlmdE9uZShhcmcpO1xuICAgIHRoaXMuX3Vuc2hpZnRPbmUocmVjZWl2ZXIpO1xuICAgIHRoaXMuX3Vuc2hpZnRPbmUoZm4pO1xufTtcblxuUXVldWUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGgoKSArIDM7XG4gICAgaWYgKHRoaXMuX3dpbGxCZU92ZXJDYXBhY2l0eShsZW5ndGgpKSB7XG4gICAgICAgIHRoaXMuX3B1c2hPbmUoZm4pO1xuICAgICAgICB0aGlzLl9wdXNoT25lKHJlY2VpdmVyKTtcbiAgICAgICAgdGhpcy5fcHVzaE9uZShhcmcpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBqID0gdGhpcy5fZnJvbnQgKyBsZW5ndGggLSAzO1xuICAgIHRoaXMuX2NoZWNrQ2FwYWNpdHkobGVuZ3RoKTtcbiAgICB2YXIgd3JhcE1hc2sgPSB0aGlzLl9jYXBhY2l0eSAtIDE7XG4gICAgdGhpc1soaiArIDApICYgd3JhcE1hc2tdID0gZm47XG4gICAgdGhpc1soaiArIDEpICYgd3JhcE1hc2tdID0gcmVjZWl2ZXI7XG4gICAgdGhpc1soaiArIDIpICYgd3JhcE1hc2tdID0gYXJnO1xuICAgIHRoaXMuX2xlbmd0aCA9IGxlbmd0aDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZnJvbnQgPSB0aGlzLl9mcm9udCxcbiAgICAgICAgcmV0ID0gdGhpc1tmcm9udF07XG5cbiAgICB0aGlzW2Zyb250XSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9mcm9udCA9IChmcm9udCArIDEpICYgKHRoaXMuX2NhcGFjaXR5IC0gMSk7XG4gICAgdGhpcy5fbGVuZ3RoLS07XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xlbmd0aDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5fY2hlY2tDYXBhY2l0eSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgaWYgKHRoaXMuX2NhcGFjaXR5IDwgc2l6ZSkge1xuICAgICAgICB0aGlzLl9yZXNpemVUbyh0aGlzLl9jYXBhY2l0eSA8PCAxKTtcbiAgICB9XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUuX3Jlc2l6ZVRvID0gZnVuY3Rpb24gKGNhcGFjaXR5KSB7XG4gICAgdmFyIG9sZENhcGFjaXR5ID0gdGhpcy5fY2FwYWNpdHk7XG4gICAgdGhpcy5fY2FwYWNpdHkgPSBjYXBhY2l0eTtcbiAgICB2YXIgZnJvbnQgPSB0aGlzLl9mcm9udDtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoO1xuICAgIHZhciBtb3ZlSXRlbXNDb3VudCA9IChmcm9udCArIGxlbmd0aCkgJiAob2xkQ2FwYWNpdHkgLSAxKTtcbiAgICBhcnJheU1vdmUodGhpcywgMCwgdGhpcywgb2xkQ2FwYWNpdHksIG1vdmVJdGVtc0NvdW50KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUXVldWU7XG5cbn0se31dLDI3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihcbiAgICBQcm9taXNlLCBJTlRFUk5BTCwgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG5cbnZhciByYWNlTGF0ZXIgPSBmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHJhY2UoYXJyYXksIHByb21pc2UpO1xuICAgIH0pO1xufTtcblxuZnVuY3Rpb24gcmFjZShwcm9taXNlcywgcGFyZW50KSB7XG4gICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocHJvbWlzZXMpO1xuXG4gICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0dXJuIHJhY2VMYXRlcihtYXliZVByb21pc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21pc2VzID0gdXRpbC5hc0FycmF5KHByb21pc2VzKTtcbiAgICAgICAgaWYgKHByb21pc2VzID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhbiBhcnJheSBvciBhbiBpdGVyYWJsZSBvYmplY3QgYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcocHJvbWlzZXMpKTtcbiAgICB9XG5cbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIGlmIChwYXJlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXQuX3Byb3BhZ2F0ZUZyb20ocGFyZW50LCAzKTtcbiAgICB9XG4gICAgdmFyIGZ1bGZpbGwgPSByZXQuX2Z1bGZpbGw7XG4gICAgdmFyIHJlamVjdCA9IHJldC5fcmVqZWN0O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwcm9taXNlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB2YXIgdmFsID0gcHJvbWlzZXNbaV07XG5cbiAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkICYmICEoaSBpbiBwcm9taXNlcykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgUHJvbWlzZS5jYXN0KHZhbCkuX3RoZW4oZnVsZmlsbCwgcmVqZWN0LCB1bmRlZmluZWQsIHJldCwgbnVsbCk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cblByb21pc2UucmFjZSA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiByYWNlKHByb21pc2VzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcmFjZSh0aGlzLCB1bmRlZmluZWQpO1xufTtcblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDI4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlQXJyYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFwaVJlamVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKSB7XG52YXIgZ2V0RG9tYWluID0gUHJvbWlzZS5fZ2V0RG9tYWluO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcblxuZnVuY3Rpb24gUmVkdWN0aW9uUHJvbWlzZUFycmF5KHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCkge1xuICAgIHRoaXMuY29uc3RydWN0b3IkKHByb21pc2VzKTtcbiAgICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKCk7XG4gICAgdGhpcy5fZm4gPSBkb21haW4gPT09IG51bGwgPyBmbiA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIGZuKTtcbiAgICBpZiAoaW5pdGlhbFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaW5pdGlhbFZhbHVlID0gUHJvbWlzZS5yZXNvbHZlKGluaXRpYWxWYWx1ZSk7XG4gICAgICAgIGluaXRpYWxWYWx1ZS5fYXR0YWNoQ2FuY2VsbGF0aW9uQ2FsbGJhY2sodGhpcyk7XG4gICAgfVxuICAgIHRoaXMuX2luaXRpYWxWYWx1ZSA9IGluaXRpYWxWYWx1ZTtcbiAgICB0aGlzLl9jdXJyZW50Q2FuY2VsbGFibGUgPSBudWxsO1xuICAgIGlmKF9lYWNoID09PSBJTlRFUk5BTCkge1xuICAgICAgICB0aGlzLl9lYWNoVmFsdWVzID0gQXJyYXkodGhpcy5fbGVuZ3RoKTtcbiAgICB9IGVsc2UgaWYgKF9lYWNoID09PSAwKSB7XG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHRoaXMuX3Byb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtNSk7XG59XG51dGlsLmluaGVyaXRzKFJlZHVjdGlvblByb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZ290QWNjdW0gPSBmdW5jdGlvbihhY2N1bSkge1xuICAgIGlmICh0aGlzLl9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQgJiYgXG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMgIT09IG51bGwgJiYgXG4gICAgICAgIGFjY3VtICE9PSBJTlRFUk5BTCkge1xuICAgICAgICB0aGlzLl9lYWNoVmFsdWVzLnB1c2goYWNjdW0pO1xuICAgIH1cbn07XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX2VhY2hDb21wbGV0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuX2VhY2hWYWx1ZXMgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fZWFjaFZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2VhY2hWYWx1ZXM7XG59O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24oKSB7fTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzb2x2ZUVtcHR5QXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX2VhY2hWYWx1ZXMgIT09IHVuZGVmaW5lZCA/IHRoaXMuX2VhY2hWYWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2luaXRpYWxWYWx1ZSk7XG59O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLnNob3VsZENvcHlWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5fcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHZhbHVlKTtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oc2VuZGVyKSB7XG4gICAgaWYgKHNlbmRlciA9PT0gdGhpcy5faW5pdGlhbFZhbHVlKSByZXR1cm4gdGhpcy5fY2FuY2VsKCk7XG4gICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuO1xuICAgIHRoaXMuX3Jlc3VsdENhbmNlbGxlZCQoKTtcbiAgICBpZiAodGhpcy5fY3VycmVudENhbmNlbGxhYmxlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB0aGlzLl9jdXJyZW50Q2FuY2VsbGFibGUuY2FuY2VsKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9pbml0aWFsVmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHRoaXMuX2luaXRpYWxWYWx1ZS5jYW5jZWwoKTtcbiAgICB9XG59O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pdGVyYXRlID0gZnVuY3Rpb24gKHZhbHVlcykge1xuICAgIHRoaXMuX3ZhbHVlcyA9IHZhbHVlcztcbiAgICB2YXIgdmFsdWU7XG4gICAgdmFyIGk7XG4gICAgdmFyIGxlbmd0aCA9IHZhbHVlcy5sZW5ndGg7XG4gICAgaWYgKHRoaXMuX2luaXRpYWxWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlID0gdGhpcy5faW5pdGlhbFZhbHVlO1xuICAgICAgICBpID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IFByb21pc2UucmVzb2x2ZSh2YWx1ZXNbMF0pO1xuICAgICAgICBpID0gMTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50Q2FuY2VsbGFibGUgPSB2YWx1ZTtcblxuICAgIGlmICghdmFsdWUuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB7XG4gICAgICAgICAgICAgICAgYWNjdW06IG51bGwsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlc1tpXSxcbiAgICAgICAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICAgICAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICAgICAgICAgICAgICBhcnJheTogdGhpc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuX3RoZW4oZ290QWNjdW0sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjdHgsIHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZWFjaFZhbHVlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWVcbiAgICAgICAgICAgIC5fdGhlbih0aGlzLl9lYWNoQ29tcGxldGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICB2YWx1ZS5fdGhlbihjb21wbGV0ZWQsIGNvbXBsZXRlZCwgdW5kZWZpbmVkLCB2YWx1ZSwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5yZWR1Y2UgPSBmdW5jdGlvbiAoZm4sIGluaXRpYWxWYWx1ZSkge1xuICAgIHJldHVybiByZWR1Y2UodGhpcywgZm4sIGluaXRpYWxWYWx1ZSwgbnVsbCk7XG59O1xuXG5Qcm9taXNlLnJlZHVjZSA9IGZ1bmN0aW9uIChwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpIHtcbiAgICByZXR1cm4gcmVkdWNlKHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCk7XG59O1xuXG5mdW5jdGlvbiBjb21wbGV0ZWQodmFsdWVPclJlYXNvbiwgYXJyYXkpIHtcbiAgICBpZiAodGhpcy5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgIGFycmF5Ll9yZXNvbHZlKHZhbHVlT3JSZWFzb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGFycmF5Ll9yZWplY3QodmFsdWVPclJlYXNvbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZWR1Y2UocHJvbWlzZXMsIGZuLCBpbml0aWFsVmFsdWUsIF9lYWNoKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICB2YXIgYXJyYXkgPSBuZXcgUmVkdWN0aW9uUHJvbWlzZUFycmF5KHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCk7XG4gICAgcmV0dXJuIGFycmF5LnByb21pc2UoKTtcbn1cblxuZnVuY3Rpb24gZ290QWNjdW0oYWNjdW0pIHtcbiAgICB0aGlzLmFjY3VtID0gYWNjdW07XG4gICAgdGhpcy5hcnJheS5fZ290QWNjdW0oYWNjdW0pO1xuICAgIHZhciB2YWx1ZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodGhpcy52YWx1ZSwgdGhpcy5hcnJheS5fcHJvbWlzZSk7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB0aGlzLmFycmF5Ll9jdXJyZW50Q2FuY2VsbGFibGUgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHZhbHVlLl90aGVuKGdvdFZhbHVlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZ290VmFsdWUuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnb3RWYWx1ZSh2YWx1ZSkge1xuICAgIHZhciBhcnJheSA9IHRoaXMuYXJyYXk7XG4gICAgdmFyIHByb21pc2UgPSBhcnJheS5fcHJvbWlzZTtcbiAgICB2YXIgZm4gPSB0cnlDYXRjaChhcnJheS5fZm4pO1xuICAgIHByb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgdmFyIHJldDtcbiAgICBpZiAoYXJyYXkuX2VhY2hWYWx1ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXQgPSBmbi5jYWxsKHByb21pc2UuX2JvdW5kVmFsdWUoKSwgdmFsdWUsIHRoaXMuaW5kZXgsIHRoaXMubGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXQgPSBmbi5jYWxsKHByb21pc2UuX2JvdW5kVmFsdWUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWNjdW0sIHZhbHVlLCB0aGlzLmluZGV4LCB0aGlzLmxlbmd0aCk7XG4gICAgfVxuICAgIGlmIChyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIGFycmF5Ll9jdXJyZW50Q2FuY2VsbGFibGUgPSByZXQ7XG4gICAgfVxuICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHByb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoXG4gICAgICAgIHJldCxcbiAgICAgICAgcHJvbWlzZUNyZWF0ZWQsXG4gICAgICAgIGFycmF5Ll9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQgPyBcIlByb21pc2UuZWFjaFwiIDogXCJQcm9taXNlLnJlZHVjZVwiLFxuICAgICAgICBwcm9taXNlXG4gICAgKTtcbiAgICByZXR1cm4gcmV0O1xufVxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDI5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIHNjaGVkdWxlO1xudmFyIG5vQXN5bmNTY2hlZHVsZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhc3luYyBzY2hlZHVsZXIgYXZhaWxhYmxlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbn07XG52YXIgTmF0aXZlUHJvbWlzZSA9IHV0aWwuZ2V0TmF0aXZlUHJvbWlzZSgpO1xuaWYgKHV0aWwuaXNOb2RlICYmIHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdmFyIEdsb2JhbFNldEltbWVkaWF0ZSA9IGdsb2JhbC5zZXRJbW1lZGlhdGU7XG4gICAgdmFyIFByb2Nlc3NOZXh0VGljayA9IHByb2Nlc3MubmV4dFRpY2s7XG4gICAgc2NoZWR1bGUgPSB1dGlsLmlzUmVjZW50Tm9kZVxuICAgICAgICAgICAgICAgID8gZnVuY3Rpb24oZm4pIHsgR2xvYmFsU2V0SW1tZWRpYXRlLmNhbGwoZ2xvYmFsLCBmbik7IH1cbiAgICAgICAgICAgICAgICA6IGZ1bmN0aW9uKGZuKSB7IFByb2Nlc3NOZXh0VGljay5jYWxsKHByb2Nlc3MsIGZuKTsgfTtcbn0gZWxzZSBpZiAodHlwZW9mIE5hdGl2ZVByb21pc2UgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICB0eXBlb2YgTmF0aXZlUHJvbWlzZS5yZXNvbHZlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB2YXIgbmF0aXZlUHJvbWlzZSA9IE5hdGl2ZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIHNjaGVkdWxlID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgbmF0aXZlUHJvbWlzZS50aGVuKGZuKTtcbiAgICB9O1xufSBlbHNlIGlmICgodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09IFwidW5kZWZpbmVkXCIpICYmXG4gICAgICAgICAgISh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICB3aW5kb3cubmF2aWdhdG9yICYmXG4gICAgICAgICAgICAod2luZG93Lm5hdmlnYXRvci5zdGFuZGFsb25lIHx8IHdpbmRvdy5jb3Jkb3ZhKSkpIHtcbiAgICBzY2hlZHVsZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHZhciBvcHRzID0ge2F0dHJpYnV0ZXM6IHRydWV9O1xuICAgICAgICB2YXIgdG9nZ2xlU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBkaXYyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdmFyIG8yID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkaXYuY2xhc3NMaXN0LnRvZ2dsZShcImZvb1wiKTtcbiAgICAgICAgICAgIHRvZ2dsZVNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgbzIub2JzZXJ2ZShkaXYyLCBvcHRzKTtcblxuICAgICAgICB2YXIgc2NoZWR1bGVUb2dnbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0b2dnbGVTY2hlZHVsZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICB0b2dnbGVTY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGRpdjIuY2xhc3NMaXN0LnRvZ2dsZShcImZvb1wiKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBzY2hlZHVsZShmbikge1xuICAgICAgICAgICAgdmFyIG8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvLm9ic2VydmUoZGl2LCBvcHRzKTtcbiAgICAgICAgICAgIHNjaGVkdWxlVG9nZ2xlKCk7XG4gICAgICAgIH07XG4gICAgfSkoKTtcbn0gZWxzZSBpZiAodHlwZW9mIHNldEltbWVkaWF0ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHNjaGVkdWxlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHNldEltbWVkaWF0ZShmbik7XG4gICAgfTtcbn0gZWxzZSBpZiAodHlwZW9mIHNldFRpbWVvdXQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBzY2hlZHVsZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBzY2hlZHVsZSA9IG5vQXN5bmNTY2hlZHVsZXI7XG59XG5tb2R1bGUuZXhwb3J0cyA9IHNjaGVkdWxlO1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9XG4gICAgZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBkZWJ1Zykge1xudmFyIFByb21pc2VJbnNwZWN0aW9uID0gUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcblxuZnVuY3Rpb24gU2V0dGxlZFByb21pc2VBcnJheSh2YWx1ZXMpIHtcbiAgICB0aGlzLmNvbnN0cnVjdG9yJCh2YWx1ZXMpO1xufVxudXRpbC5pbmhlcml0cyhTZXR0bGVkUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5TZXR0bGVkUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZVJlc29sdmVkID0gZnVuY3Rpb24gKGluZGV4LCBpbnNwZWN0aW9uKSB7XG4gICAgdGhpcy5fdmFsdWVzW2luZGV4XSA9IGluc3BlY3Rpb247XG4gICAgdmFyIHRvdGFsUmVzb2x2ZWQgPSArK3RoaXMuX3RvdGFsUmVzb2x2ZWQ7XG4gICAgaWYgKHRvdGFsUmVzb2x2ZWQgPj0gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmUodGhpcy5fdmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblNldHRsZWRQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZUluc3BlY3Rpb24oKTtcbiAgICByZXQuX2JpdEZpZWxkID0gMzM1NTQ0MzI7XG4gICAgcmV0Ll9zZXR0bGVkVmFsdWVGaWVsZCA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzLl9wcm9taXNlUmVzb2x2ZWQoaW5kZXgsIHJldCk7XG59O1xuU2V0dGxlZFByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24sIGluZGV4KSB7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlSW5zcGVjdGlvbigpO1xuICAgIHJldC5fYml0RmllbGQgPSAxNjc3NzIxNjtcbiAgICByZXQuX3NldHRsZWRWYWx1ZUZpZWxkID0gcmVhc29uO1xuICAgIHJldHVybiB0aGlzLl9wcm9taXNlUmVzb2x2ZWQoaW5kZXgsIHJldCk7XG59O1xuXG5Qcm9taXNlLnNldHRsZSA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIGRlYnVnLmRlcHJlY2F0ZWQoXCIuc2V0dGxlKClcIiwgXCIucmVmbGVjdCgpXCIpO1xuICAgIHJldHVybiBuZXcgU2V0dGxlZFByb21pc2VBcnJheShwcm9taXNlcykucHJvbWlzZSgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc2V0dGxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBQcm9taXNlLnNldHRsZSh0aGlzKTtcbn07XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9XG5mdW5jdGlvbihQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIFJhbmdlRXJyb3IgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIikuUmFuZ2VFcnJvcjtcbnZhciBBZ2dyZWdhdGVFcnJvciA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKS5BZ2dyZWdhdGVFcnJvcjtcbnZhciBpc0FycmF5ID0gdXRpbC5pc0FycmF5O1xudmFyIENBTkNFTExBVElPTiA9IHt9O1xuXG5cbmZ1bmN0aW9uIFNvbWVQcm9taXNlQXJyYXkodmFsdWVzKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQodmFsdWVzKTtcbiAgICB0aGlzLl9ob3dNYW55ID0gMDtcbiAgICB0aGlzLl91bndyYXAgPSBmYWxzZTtcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlO1xufVxudXRpbC5pbmhlcml0cyhTb21lUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2hvd01hbnkgPT09IDApIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZShbXSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtNSk7XG4gICAgdmFyIGlzQXJyYXlSZXNvbHZlZCA9IGlzQXJyYXkodGhpcy5fdmFsdWVzKTtcbiAgICBpZiAoIXRoaXMuX2lzUmVzb2x2ZWQoKSAmJlxuICAgICAgICBpc0FycmF5UmVzb2x2ZWQgJiZcbiAgICAgICAgdGhpcy5faG93TWFueSA+IHRoaXMuX2NhblBvc3NpYmx5RnVsZmlsbCgpKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdCh0aGlzLl9nZXRSYW5nZUVycm9yKHRoaXMubGVuZ3RoKCkpKTtcbiAgICB9XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB0aGlzLl9pbml0KCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zZXRVbndyYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fdW53cmFwID0gdHJ1ZTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLmhvd01hbnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hvd01hbnk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zZXRIb3dNYW55ID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgdGhpcy5faG93TWFueSA9IGNvdW50O1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl9hZGRGdWxmaWxsZWQodmFsdWUpO1xuICAgIGlmICh0aGlzLl9mdWxmaWxsZWQoKSA9PT0gdGhpcy5ob3dNYW55KCkpIHtcbiAgICAgICAgdGhpcy5fdmFsdWVzLmxlbmd0aCA9IHRoaXMuaG93TWFueSgpO1xuICAgICAgICBpZiAodGhpcy5ob3dNYW55KCkgPT09IDEgJiYgdGhpcy5fdW53cmFwKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX3ZhbHVlc1swXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX3ZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcblxufTtcblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlUmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhpcy5fYWRkUmVqZWN0ZWQocmVhc29uKTtcbiAgICByZXR1cm4gdGhpcy5fY2hlY2tPdXRjb21lKCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUNhbmNlbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdmFsdWVzIGluc3RhbmNlb2YgUHJvbWlzZSB8fCB0aGlzLl92YWx1ZXMgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FuY2VsKCk7XG4gICAgfVxuICAgIHRoaXMuX2FkZFJlamVjdGVkKENBTkNFTExBVElPTik7XG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrT3V0Y29tZSgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2NoZWNrT3V0Y29tZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmhvd01hbnkoKSA+IHRoaXMuX2NhblBvc3NpYmx5RnVsZmlsbCgpKSB7XG4gICAgICAgIHZhciBlID0gbmV3IEFnZ3JlZ2F0ZUVycm9yKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCgpOyBpIDwgdGhpcy5fdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fdmFsdWVzW2ldICE9PSBDQU5DRUxMQVRJT04pIHtcbiAgICAgICAgICAgICAgICBlLnB1c2godGhpcy5fdmFsdWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3QoZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2Z1bGZpbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdG90YWxSZXNvbHZlZDtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZWplY3RlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWVzLmxlbmd0aCAtIHRoaXMubGVuZ3RoKCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fYWRkUmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhpcy5fdmFsdWVzLnB1c2gocmVhc29uKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9hZGRGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl92YWx1ZXNbdGhpcy5fdG90YWxSZXNvbHZlZCsrXSA9IHZhbHVlO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2NhblBvc3NpYmx5RnVsZmlsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5sZW5ndGgoKSAtIHRoaXMuX3JlamVjdGVkKCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZ2V0UmFuZ2VFcnJvciA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIHZhciBtZXNzYWdlID0gXCJJbnB1dCBhcnJheSBtdXN0IGNvbnRhaW4gYXQgbGVhc3QgXCIgK1xuICAgICAgICAgICAgdGhpcy5faG93TWFueSArIFwiIGl0ZW1zIGJ1dCBjb250YWlucyBvbmx5IFwiICsgY291bnQgKyBcIiBpdGVtc1wiO1xuICAgIHJldHVybiBuZXcgUmFuZ2VFcnJvcihtZXNzYWdlKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZXNvbHZlRW1wdHlBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9yZWplY3QodGhpcy5fZ2V0UmFuZ2VFcnJvcigwKSk7XG59O1xuXG5mdW5jdGlvbiBzb21lKHByb21pc2VzLCBob3dNYW55KSB7XG4gICAgaWYgKChob3dNYW55IHwgMCkgIT09IGhvd01hbnkgfHwgaG93TWFueSA8IDApIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhIHBvc2l0aXZlIGludGVnZXJcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICB2YXIgcmV0ID0gbmV3IFNvbWVQcm9taXNlQXJyYXkocHJvbWlzZXMpO1xuICAgIHZhciBwcm9taXNlID0gcmV0LnByb21pc2UoKTtcbiAgICByZXQuc2V0SG93TWFueShob3dNYW55KTtcbiAgICByZXQuaW5pdCgpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5Qcm9taXNlLnNvbWUgPSBmdW5jdGlvbiAocHJvbWlzZXMsIGhvd01hbnkpIHtcbiAgICByZXR1cm4gc29tZShwcm9taXNlcywgaG93TWFueSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5zb21lID0gZnVuY3Rpb24gKGhvd01hbnkpIHtcbiAgICByZXR1cm4gc29tZSh0aGlzLCBob3dNYW55KTtcbn07XG5cblByb21pc2UuX1NvbWVQcm9taXNlQXJyYXkgPSBTb21lUHJvbWlzZUFycmF5O1xufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwzMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xuZnVuY3Rpb24gUHJvbWlzZUluc3BlY3Rpb24ocHJvbWlzZSkge1xuICAgIGlmIChwcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UuX3RhcmdldCgpO1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IHByb21pc2UuX2JpdEZpZWxkO1xuICAgICAgICB0aGlzLl9zZXR0bGVkVmFsdWVGaWVsZCA9IHByb21pc2UuX2lzRmF0ZVNlYWxlZCgpXG4gICAgICAgICAgICA/IHByb21pc2UuX3NldHRsZWRWYWx1ZSgpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSAwO1xuICAgICAgICB0aGlzLl9zZXR0bGVkVmFsdWVGaWVsZCA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cblByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5fc2V0dGxlZFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZUZpZWxkO1xufTtcblxudmFyIHZhbHVlID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW5ub3QgZ2V0IGZ1bGZpbGxtZW50IHZhbHVlIG9mIGEgbm9uLWZ1bGZpbGxlZCBwcm9taXNlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZSgpO1xufTtcblxudmFyIHJlYXNvbiA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5lcnJvciA9XG5Qcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUucmVhc29uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc1JlamVjdGVkKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbm5vdCBnZXQgcmVqZWN0aW9uIHJlYXNvbiBvZiBhIG5vbi1yZWplY3RlZCBwcm9taXNlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZSgpO1xufTtcblxudmFyIGlzRnVsZmlsbGVkID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzRnVsZmlsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMDtcbn07XG5cbnZhciBpc1JlamVjdGVkID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzUmVqZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMDtcbn07XG5cbnZhciBpc1BlbmRpbmcgPSBQcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuaXNQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDA7XG59O1xuXG52YXIgaXNSZXNvbHZlZCA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc1Jlc29sdmVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA1MDMzMTY0OCkgIT09IDA7XG59O1xuXG5Qcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuaXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgODQ1NDE0NCkgIT09IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fX2lzQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDY1NTM2KSA9PT0gNjU1MzY7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0KCkuX19pc0NhbmNlbGxlZCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMuX3RhcmdldCgpLl9iaXRGaWVsZCAmIDg0NTQxNDQpICE9PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNQZW5kaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGlzUGVuZGluZy5jYWxsKHRoaXMuX3RhcmdldCgpKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzUmVqZWN0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaXNSZWplY3RlZC5jYWxsKHRoaXMuX3RhcmdldCgpKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzRnVsZmlsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGlzRnVsZmlsbGVkLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNSZXNvbHZlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBpc1Jlc29sdmVkLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdmFsdWUuY2FsbCh0aGlzLl90YXJnZXQoKSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5yZWFzb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgdGFyZ2V0Ll91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgcmV0dXJuIHJlYXNvbi5jYWxsKHRhcmdldCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fc2V0dGxlZFZhbHVlKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVhc29uID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbn07XG5cblByb21pc2UuUHJvbWlzZUluc3BlY3Rpb24gPSBQcm9taXNlSW5zcGVjdGlvbjtcbn07XG5cbn0se31dLDMzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBJTlRFUk5BTCkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciBpc09iamVjdCA9IHV0aWwuaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIHRyeUNvbnZlcnRUb1Byb21pc2Uob2JqLCBjb250ZXh0KSB7XG4gICAgaWYgKGlzT2JqZWN0KG9iaikpIHtcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIFByb21pc2UpIHJldHVybiBvYmo7XG4gICAgICAgIHZhciB0aGVuID0gZ2V0VGhlbihvYmopO1xuICAgICAgICBpZiAodGhlbiA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgIGlmIChjb250ZXh0KSBjb250ZXh0Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICAgICAgdmFyIHJldCA9IFByb21pc2UucmVqZWN0KHRoZW4uZSk7XG4gICAgICAgICAgICBpZiAoY29udGV4dCkgY29udGV4dC5fcG9wQ29udGV4dCgpO1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBpZiAoaXNBbnlCbHVlYmlyZFByb21pc2Uob2JqKSkge1xuICAgICAgICAgICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgICAgICAgICAgb2JqLl90aGVuKFxuICAgICAgICAgICAgICAgICAgICByZXQuX2Z1bGZpbGwsXG4gICAgICAgICAgICAgICAgICAgIHJldC5fcmVqZWN0LFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHJldCxcbiAgICAgICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkb1RoZW5hYmxlKG9iaiwgdGhlbiwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gZG9HZXRUaGVuKG9iaikge1xuICAgIHJldHVybiBvYmoudGhlbjtcbn1cblxuZnVuY3Rpb24gZ2V0VGhlbihvYmopIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZG9HZXRUaGVuKG9iaik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlcnJvck9iai5lID0gZTtcbiAgICAgICAgcmV0dXJuIGVycm9yT2JqO1xuICAgIH1cbn1cblxudmFyIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbmZ1bmN0aW9uIGlzQW55Qmx1ZWJpcmRQcm9taXNlKG9iaikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBoYXNQcm9wLmNhbGwob2JqLCBcIl9wcm9taXNlMFwiKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRvVGhlbmFibGUoeCwgdGhlbiwgY29udGV4dCkge1xuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHZhciByZXQgPSBwcm9taXNlO1xuICAgIGlmIChjb250ZXh0KSBjb250ZXh0Ll9wdXNoQ29udGV4dCgpO1xuICAgIHByb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgaWYgKGNvbnRleHQpIGNvbnRleHQuX3BvcENvbnRleHQoKTtcbiAgICB2YXIgc3luY2hyb25vdXMgPSB0cnVlO1xuICAgIHZhciByZXN1bHQgPSB1dGlsLnRyeUNhdGNoKHRoZW4pLmNhbGwoeCwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICBzeW5jaHJvbm91cyA9IGZhbHNlO1xuXG4gICAgaWYgKHByb21pc2UgJiYgcmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyZXN1bHQuZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgaWYgKCFwcm9taXNlKSByZXR1cm47XG4gICAgICAgIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgICAgICAgaWYgKCFwcm9taXNlKSByZXR1cm47XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHJlYXNvbiwgc3luY2hyb25vdXMsIHRydWUpO1xuICAgICAgICBwcm9taXNlID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxucmV0dXJuIHRyeUNvbnZlcnRUb1Byb21pc2U7XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMLCBkZWJ1Zykge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIFRpbWVvdXRFcnJvciA9IFByb21pc2UuVGltZW91dEVycm9yO1xuXG5mdW5jdGlvbiBIYW5kbGVXcmFwcGVyKGhhbmRsZSkgIHtcbiAgICB0aGlzLmhhbmRsZSA9IGhhbmRsZTtcbn1cblxuSGFuZGxlV3JhcHBlci5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmhhbmRsZSk7XG59O1xuXG52YXIgYWZ0ZXJWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBkZWxheSgrdGhpcykudGhlblJldHVybih2YWx1ZSk7IH07XG52YXIgZGVsYXkgPSBQcm9taXNlLmRlbGF5ID0gZnVuY3Rpb24gKG1zLCB2YWx1ZSkge1xuICAgIHZhciByZXQ7XG4gICAgdmFyIGhhbmRsZTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXQgPSBQcm9taXNlLnJlc29sdmUodmFsdWUpXG4gICAgICAgICAgICAgICAgLl90aGVuKGFmdGVyVmFsdWUsIG51bGwsIG51bGwsIG1zLCB1bmRlZmluZWQpO1xuICAgICAgICBpZiAoZGVidWcuY2FuY2VsbGF0aW9uKCkgJiYgdmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXQuX3NldE9uQ2FuY2VsKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgaGFuZGxlID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsgcmV0Ll9mdWxmaWxsKCk7IH0sICttcyk7XG4gICAgICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSkge1xuICAgICAgICAgICAgcmV0Ll9zZXRPbkNhbmNlbChuZXcgSGFuZGxlV3JhcHBlcihoYW5kbGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgfVxuICAgIHJldC5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRlbGF5ID0gZnVuY3Rpb24gKG1zKSB7XG4gICAgcmV0dXJuIGRlbGF5KG1zLCB0aGlzKTtcbn07XG5cbnZhciBhZnRlclRpbWVvdXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgbWVzc2FnZSwgcGFyZW50KSB7XG4gICAgdmFyIGVycjtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgZXJyID0gbWVzc2FnZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVyciA9IG5ldyBUaW1lb3V0RXJyb3IoXCJvcGVyYXRpb24gdGltZWQgb3V0XCIpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZXJyID0gbmV3IFRpbWVvdXRFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgdXRpbC5tYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24oZXJyKTtcbiAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKGVycik7XG4gICAgcHJvbWlzZS5fcmVqZWN0KGVycik7XG5cbiAgICBpZiAocGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgcGFyZW50LmNhbmNlbCgpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIHN1Y2Nlc3NDbGVhcih2YWx1ZSkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmhhbmRsZSk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBmYWlsdXJlQ2xlYXIocmVhc29uKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaGFuZGxlKTtcbiAgICB0aHJvdyByZWFzb247XG59XG5cblByb21pc2UucHJvdG90eXBlLnRpbWVvdXQgPSBmdW5jdGlvbiAobXMsIG1lc3NhZ2UpIHtcbiAgICBtcyA9ICttcztcbiAgICB2YXIgcmV0LCBwYXJlbnQ7XG5cbiAgICB2YXIgaGFuZGxlV3JhcHBlciA9IG5ldyBIYW5kbGVXcmFwcGVyKHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZW91dFRpbWVvdXQoKSB7XG4gICAgICAgIGlmIChyZXQuaXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgIGFmdGVyVGltZW91dChyZXQsIG1lc3NhZ2UsIHBhcmVudCk7XG4gICAgICAgIH1cbiAgICB9LCBtcykpO1xuXG4gICAgaWYgKGRlYnVnLmNhbmNlbGxhdGlvbigpKSB7XG4gICAgICAgIHBhcmVudCA9IHRoaXMudGhlbigpO1xuICAgICAgICByZXQgPSBwYXJlbnQuX3RoZW4oc3VjY2Vzc0NsZWFyLCBmYWlsdXJlQ2xlYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBoYW5kbGVXcmFwcGVyLCB1bmRlZmluZWQpO1xuICAgICAgICByZXQuX3NldE9uQ2FuY2VsKGhhbmRsZVdyYXBwZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IHRoaXMuX3RoZW4oc3VjY2Vzc0NsZWFyLCBmYWlsdXJlQ2xlYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBoYW5kbGVXcmFwcGVyLCB1bmRlZmluZWQpO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG59O1xuXG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChQcm9taXNlLCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgY3JlYXRlQ29udGV4dCwgSU5URVJOQUwsIGRlYnVnKSB7XG4gICAgdmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xuICAgIHZhciBUeXBlRXJyb3IgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIikuVHlwZUVycm9yO1xuICAgIHZhciBpbmhlcml0cyA9IF9kZXJlcV8oXCIuL3V0aWxcIikuaW5oZXJpdHM7XG4gICAgdmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbiAgICB2YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuICAgIHZhciBOVUxMID0ge307XG5cbiAgICBmdW5jdGlvbiB0aHJvd2VyKGUpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGU7fSwgMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FzdFByZXNlcnZpbmdEaXNwb3NhYmxlKHRoZW5hYmxlKSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHRoZW5hYmxlKTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSAhPT0gdGhlbmFibGUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGVuYWJsZS5faXNEaXNwb3NhYmxlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGVuYWJsZS5fZ2V0RGlzcG9zZXIgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgdGhlbmFibGUuX2lzRGlzcG9zYWJsZSgpKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UuX3NldERpc3Bvc2FibGUodGhlbmFibGUuX2dldERpc3Bvc2VyKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXliZVByb21pc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpc3Bvc2UocmVzb3VyY2VzLCBpbnNwZWN0aW9uKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IHJlc291cmNlcy5sZW5ndGg7XG4gICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIGZ1bmN0aW9uIGl0ZXJhdG9yKCkge1xuICAgICAgICAgICAgaWYgKGkgPj0gbGVuKSByZXR1cm4gcmV0Ll9mdWxmaWxsKCk7XG4gICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gY2FzdFByZXNlcnZpbmdEaXNwb3NhYmxlKHJlc291cmNlc1tpKytdKTtcbiAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlICYmXG4gICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9pc0Rpc3Bvc2FibGUoKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX2dldERpc3Bvc2VyKCkudHJ5RGlzcG9zZShpbnNwZWN0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy5wcm9taXNlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aHJvd2VyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF5YmVQcm9taXNlLl90aGVuKGl0ZXJhdG9yLCB0aHJvd2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZXJhdG9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaXRlcmF0b3IoKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBEaXNwb3NlcihkYXRhLCBwcm9taXNlLCBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLl9wcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxuXG4gICAgRGlzcG9zZXIucHJvdG90eXBlLmRhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUucHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG4gICAgfTtcblxuICAgIERpc3Bvc2VyLnByb3RvdHlwZS5yZXNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvbWlzZSgpLmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb21pc2UoKS52YWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOVUxMO1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUudHJ5RGlzcG9zZSA9IGZ1bmN0aW9uKGluc3BlY3Rpb24pIHtcbiAgICAgICAgdmFyIHJlc291cmNlID0gdGhpcy5yZXNvdXJjZSgpO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuX2NvbnRleHQ7XG4gICAgICAgIGlmIChjb250ZXh0ICE9PSB1bmRlZmluZWQpIGNvbnRleHQuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgIHZhciByZXQgPSByZXNvdXJjZSAhPT0gTlVMTFxuICAgICAgICAgICAgPyB0aGlzLmRvRGlzcG9zZShyZXNvdXJjZSwgaW5zcGVjdGlvbikgOiBudWxsO1xuICAgICAgICBpZiAoY29udGV4dCAhPT0gdW5kZWZpbmVkKSBjb250ZXh0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3Vuc2V0RGlzcG9zYWJsZSgpO1xuICAgICAgICB0aGlzLl9kYXRhID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG4gICAgRGlzcG9zZXIuaXNEaXNwb3NlciA9IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIHJldHVybiAoZCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGQucmVzb3VyY2UgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBkLnRyeURpc3Bvc2UgPT09IFwiZnVuY3Rpb25cIik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEZ1bmN0aW9uRGlzcG9zZXIoZm4sIHByb21pc2UsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciQoZm4sIHByb21pc2UsIGNvbnRleHQpO1xuICAgIH1cbiAgICBpbmhlcml0cyhGdW5jdGlvbkRpc3Bvc2VyLCBEaXNwb3Nlcik7XG5cbiAgICBGdW5jdGlvbkRpc3Bvc2VyLnByb3RvdHlwZS5kb0Rpc3Bvc2UgPSBmdW5jdGlvbiAocmVzb3VyY2UsIGluc3BlY3Rpb24pIHtcbiAgICAgICAgdmFyIGZuID0gdGhpcy5kYXRhKCk7XG4gICAgICAgIHJldHVybiBmbi5jYWxsKHJlc291cmNlLCByZXNvdXJjZSwgaW5zcGVjdGlvbik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG1heWJlVW53cmFwRGlzcG9zZXIodmFsdWUpIHtcbiAgICAgICAgaWYgKERpc3Bvc2VyLmlzRGlzcG9zZXIodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc291cmNlc1t0aGlzLmluZGV4XS5fc2V0RGlzcG9zYWJsZSh2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUucHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBSZXNvdXJjZUxpc3QobGVuZ3RoKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLnByb21pc2UgPSBudWxsO1xuICAgICAgICB0aGlzW2xlbmd0aC0xXSA9IG51bGw7XG4gICAgfVxuXG4gICAgUmVzb3VyY2VMaXN0LnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzW2ldO1xuICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBQcm9taXNlLnVzaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA8IDIpIHJldHVybiBhcGlSZWplY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICBcInlvdSBtdXN0IHBhc3MgYXQgbGVhc3QgMiBhcmd1bWVudHMgdG8gUHJvbWlzZS51c2luZ1wiKTtcbiAgICAgICAgdmFyIGZuID0gYXJndW1lbnRzW2xlbiAtIDFdO1xuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbnB1dDtcbiAgICAgICAgdmFyIHNwcmVhZEFyZ3MgPSB0cnVlO1xuICAgICAgICBpZiAobGVuID09PSAyICYmIEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICAgICAgaW5wdXQgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICBsZW4gPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgICAgICBzcHJlYWRBcmdzID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnB1dCA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgIGxlbi0tO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXNvdXJjZXMgPSBuZXcgUmVzb3VyY2VMaXN0KGxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciByZXNvdXJjZSA9IGlucHV0W2ldO1xuICAgICAgICAgICAgaWYgKERpc3Bvc2VyLmlzRGlzcG9zZXIocmVzb3VyY2UpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3Bvc2VyID0gcmVzb3VyY2U7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UgPSByZXNvdXJjZS5wcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuX3NldERpc3Bvc2FibGUoZGlzcG9zZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXNvdXJjZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2UgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl90aGVuKG1heWJlVW53cmFwRGlzcG9zZXIsIG51bGwsIG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXM6IHJlc291cmNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaVxuICAgICAgICAgICAgICAgICAgICB9LCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc291cmNlc1tpXSA9IHJlc291cmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlZmxlY3RlZFJlc291cmNlcyA9IG5ldyBBcnJheShyZXNvdXJjZXMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWZsZWN0ZWRSZXNvdXJjZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHJlZmxlY3RlZFJlc291cmNlc1tpXSA9IFByb21pc2UucmVzb2x2ZShyZXNvdXJjZXNbaV0pLnJlZmxlY3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXN1bHRQcm9taXNlID0gUHJvbWlzZS5hbGwocmVmbGVjdGVkUmVzb3VyY2VzKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oaW5zcGVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluc3BlY3Rpb25zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnNwZWN0aW9uID0gaW5zcGVjdGlvbnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JPYmouZSA9IGluc3BlY3Rpb24uZXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaW5zcGVjdGlvbi5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRQcm9taXNlLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluc3BlY3Rpb25zW2ldID0gaW5zcGVjdGlvbi52YWx1ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuXG4gICAgICAgICAgICAgICAgZm4gPSB0cnlDYXRjaChmbik7XG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IHNwcmVhZEFyZ3NcbiAgICAgICAgICAgICAgICAgICAgPyBmbi5hcHBseSh1bmRlZmluZWQsIGluc3BlY3Rpb25zKSA6IGZuKGluc3BlY3Rpb25zKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgICAgICAgICAgICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICAgICAgICAgICAgICByZXQsIHByb21pc2VDcmVhdGVkLCBcIlByb21pc2UudXNpbmdcIiwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gcmVzdWx0UHJvbWlzZS5sYXN0bHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5zcGVjdGlvbiA9IG5ldyBQcm9taXNlLlByb21pc2VJbnNwZWN0aW9uKHJlc3VsdFByb21pc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGRpc3Bvc2UocmVzb3VyY2VzLCBpbnNwZWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlc291cmNlcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgcHJvbWlzZS5fc2V0T25DYW5jZWwocmVzb3VyY2VzKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl9zZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKGRpc3Bvc2VyKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAxMzEwNzI7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VyID0gZGlzcG9zZXI7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl9pc0Rpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAxMzEwNzIpID4gMDtcbiAgICB9O1xuXG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX2dldERpc3Bvc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzcG9zZXI7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl91bnNldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjEzMTA3Mik7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VyID0gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICBQcm9taXNlLnByb3RvdHlwZS5kaXNwb3NlciA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBpZiAodHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25EaXNwb3NlcihmbiwgdGhpcywgY3JlYXRlQ29udGV4dCgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgfTtcblxufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwzNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgY2FuRXZhbHVhdGUgPSB0eXBlb2YgbmF2aWdhdG9yID09IFwidW5kZWZpbmVkXCI7XG5cbnZhciBlcnJvck9iaiA9IHtlOiB7fX07XG52YXIgdHJ5Q2F0Y2hUYXJnZXQ7XG52YXIgZ2xvYmFsT2JqZWN0ID0gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDpcbiAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDpcbiAgICB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDpcbiAgICB0aGlzICE9PSB1bmRlZmluZWQgPyB0aGlzIDogbnVsbDtcblxuZnVuY3Rpb24gdHJ5Q2F0Y2hlcigpIHtcbiAgICB0cnkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdHJ5Q2F0Y2hUYXJnZXQ7XG4gICAgICAgIHRyeUNhdGNoVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmouZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9XG59XG5mdW5jdGlvbiB0cnlDYXRjaChmbikge1xuICAgIHRyeUNhdGNoVGFyZ2V0ID0gZm47XG4gICAgcmV0dXJuIHRyeUNhdGNoZXI7XG59XG5cbnZhciBpbmhlcml0cyA9IGZ1bmN0aW9uKENoaWxkLCBQYXJlbnQpIHtcbiAgICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gICAgZnVuY3Rpb24gVCgpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IENoaWxkO1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yJCA9IFBhcmVudDtcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHlOYW1lIGluIFBhcmVudC5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIGlmIChoYXNQcm9wLmNhbGwoUGFyZW50LnByb3RvdHlwZSwgcHJvcGVydHlOYW1lKSAmJlxuICAgICAgICAgICAgICAgIHByb3BlcnR5TmFtZS5jaGFyQXQocHJvcGVydHlOYW1lLmxlbmd0aC0xKSAhPT0gXCIkXCJcbiAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpc1twcm9wZXJ0eU5hbWUgKyBcIiRcIl0gPSBQYXJlbnQucHJvdG90eXBlW3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgVC5wcm90b3R5cGUgPSBQYXJlbnQucHJvdG90eXBlO1xuICAgIENoaWxkLnByb3RvdHlwZSA9IG5ldyBUKCk7XG4gICAgcmV0dXJuIENoaWxkLnByb3RvdHlwZTtcbn07XG5cblxuZnVuY3Rpb24gaXNQcmltaXRpdmUodmFsKSB7XG4gICAgcmV0dXJuIHZhbCA9PSBudWxsIHx8IHZhbCA9PT0gdHJ1ZSB8fCB2YWwgPT09IGZhbHNlIHx8XG4gICAgICAgIHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIjtcblxufVxuXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIG1heWJlV3JhcEFzRXJyb3IobWF5YmVFcnJvcikge1xuICAgIGlmICghaXNQcmltaXRpdmUobWF5YmVFcnJvcikpIHJldHVybiBtYXliZUVycm9yO1xuXG4gICAgcmV0dXJuIG5ldyBFcnJvcihzYWZlVG9TdHJpbmcobWF5YmVFcnJvcikpO1xufVxuXG5mdW5jdGlvbiB3aXRoQXBwZW5kZWQodGFyZ2V0LCBhcHBlbmRlZSkge1xuICAgIHZhciBsZW4gPSB0YXJnZXQubGVuZ3RoO1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkobGVuICsgMSk7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHJldFtpXSA9IHRhcmdldFtpXTtcbiAgICB9XG4gICAgcmV0W2ldID0gYXBwZW5kZWU7XG4gICAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0KG9iaiwga2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgICBpZiAoZXM1LmlzRVM1KSB7XG4gICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG5cbiAgICAgICAgaWYgKGRlc2MgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2MuZ2V0ID09IG51bGwgJiYgZGVzYy5zZXQgPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICA/IGRlc2MudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkgPyBvYmpba2V5XSA6IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5vdEVudW1lcmFibGVQcm9wKG9iaiwgbmFtZSwgdmFsdWUpIHtcbiAgICBpZiAoaXNQcmltaXRpdmUob2JqKSkgcmV0dXJuIG9iajtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH07XG4gICAgZXM1LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwgZGVzY3JpcHRvcik7XG4gICAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gdGhyb3dlcihyKSB7XG4gICAgdGhyb3cgcjtcbn1cblxudmFyIGluaGVyaXRlZERhdGFLZXlzID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBleGNsdWRlZFByb3RvdHlwZXMgPSBbXG4gICAgICAgIEFycmF5LnByb3RvdHlwZSxcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgICAgRnVuY3Rpb24ucHJvdG90eXBlXG4gICAgXTtcblxuICAgIHZhciBpc0V4Y2x1ZGVkUHJvdG8gPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleGNsdWRlZFByb3RvdHlwZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChleGNsdWRlZFByb3RvdHlwZXNbaV0gPT09IHZhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgaWYgKGVzNS5pc0VTNSkge1xuICAgICAgICB2YXIgZ2V0S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgICAgICB2YXIgdmlzaXRlZEtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgd2hpbGUgKG9iaiAhPSBudWxsICYmICFpc0V4Y2x1ZGVkUHJvdG8ob2JqKSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlzO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMgPSBnZXRLZXlzKG9iaik7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2aXNpdGVkS2V5c1trZXldKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaXRlZEtleXNba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXNjICE9IG51bGwgJiYgZGVzYy5nZXQgPT0gbnVsbCAmJiBkZXNjLnNldCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9iaiA9IGVzNS5nZXRQcm90b3R5cGVPZihvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICBpZiAoaXNFeGNsdWRlZFByb3RvKG9iaikpIHJldHVybiBbXTtcbiAgICAgICAgICAgIHZhciByZXQgPSBbXTtcblxuICAgICAgICAgICAgLypqc2hpbnQgZm9yaW46ZmFsc2UgKi9cbiAgICAgICAgICAgIGVudW1lcmF0aW9uOiBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1Byb3AuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4Y2x1ZGVkUHJvdG90eXBlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1Byb3AuY2FsbChleGNsdWRlZFByb3RvdHlwZXNbaV0sIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBlbnVtZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH07XG4gICAgfVxuXG59KSgpO1xuXG52YXIgdGhpc0Fzc2lnbm1lbnRQYXR0ZXJuID0gL3RoaXNcXHMqXFwuXFxzKlxcUytcXHMqPS87XG5mdW5jdGlvbiBpc0NsYXNzKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IGVzNS5uYW1lcyhmbi5wcm90b3R5cGUpO1xuXG4gICAgICAgICAgICB2YXIgaGFzTWV0aG9kcyA9IGVzNS5pc0VTNSAmJiBrZXlzLmxlbmd0aCA+IDE7XG4gICAgICAgICAgICB2YXIgaGFzTWV0aG9kc090aGVyVGhhbkNvbnN0cnVjdG9yID0ga2V5cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgIShrZXlzLmxlbmd0aCA9PT0gMSAmJiBrZXlzWzBdID09PSBcImNvbnN0cnVjdG9yXCIpO1xuICAgICAgICAgICAgdmFyIGhhc1RoaXNBc3NpZ25tZW50QW5kU3RhdGljTWV0aG9kcyA9XG4gICAgICAgICAgICAgICAgdGhpc0Fzc2lnbm1lbnRQYXR0ZXJuLnRlc3QoZm4gKyBcIlwiKSAmJiBlczUubmFtZXMoZm4pLmxlbmd0aCA+IDA7XG5cbiAgICAgICAgICAgIGlmIChoYXNNZXRob2RzIHx8IGhhc01ldGhvZHNPdGhlclRoYW5Db25zdHJ1Y3RvciB8fFxuICAgICAgICAgICAgICAgIGhhc1RoaXNBc3NpZ25tZW50QW5kU3RhdGljTWV0aG9kcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRvRmFzdFByb3BlcnRpZXMob2JqKSB7XG4gICAgLypqc2hpbnQgLVcwMjcsLVcwNTUsLVcwMzEqL1xuICAgIGZ1bmN0aW9uIEZha2VDb25zdHJ1Y3RvcigpIHt9XG4gICAgRmFrZUNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IG9iajtcbiAgICB2YXIgbCA9IDg7XG4gICAgd2hpbGUgKGwtLSkgbmV3IEZha2VDb25zdHJ1Y3RvcigpO1xuICAgIHJldHVybiBvYmo7XG4gICAgZXZhbChvYmopO1xufVxuXG52YXIgcmlkZW50ID0gL15bYS16JF9dW2EteiRfMC05XSokL2k7XG5mdW5jdGlvbiBpc0lkZW50aWZpZXIoc3RyKSB7XG4gICAgcmV0dXJuIHJpZGVudC50ZXN0KHN0cik7XG59XG5cbmZ1bmN0aW9uIGZpbGxlZFJhbmdlKGNvdW50LCBwcmVmaXgsIHN1ZmZpeCkge1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkoY291bnQpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgIHJldFtpXSA9IHByZWZpeCArIGkgKyBzdWZmaXg7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHNhZmVUb1N0cmluZyhvYmopIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gb2JqICsgXCJcIjtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBcIltubyBzdHJpbmcgcmVwcmVzZW50YXRpb25dXCI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0Vycm9yKG9iaikge1xuICAgIHJldHVybiBvYmogIT09IG51bGwgJiZcbiAgICAgICAgICAgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICB0eXBlb2Ygb2JqLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgdHlwZW9mIG9iai5uYW1lID09PSBcInN0cmluZ1wiO1xufVxuXG5mdW5jdGlvbiBtYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24oZSkge1xuICAgIHRyeSB7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKGUsIFwiaXNPcGVyYXRpb25hbFwiLCB0cnVlKTtcbiAgICB9XG4gICAgY2F0Y2goaWdub3JlKSB7fVxufVxuXG5mdW5jdGlvbiBvcmlnaW5hdGVzRnJvbVJlamVjdGlvbihlKSB7XG4gICAgaWYgKGUgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAoKGUgaW5zdGFuY2VvZiBFcnJvcltcIl9fQmx1ZWJpcmRFcnJvclR5cGVzX19cIl0uT3BlcmF0aW9uYWxFcnJvcikgfHxcbiAgICAgICAgZVtcImlzT3BlcmF0aW9uYWxcIl0gPT09IHRydWUpO1xufVxuXG5mdW5jdGlvbiBjYW5BdHRhY2hUcmFjZShvYmopIHtcbiAgICByZXR1cm4gaXNFcnJvcihvYmopICYmIGVzNS5wcm9wZXJ0eUlzV3JpdGFibGUob2JqLCBcInN0YWNrXCIpO1xufVxuXG52YXIgZW5zdXJlRXJyb3JPYmplY3QgPSAoZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEoXCJzdGFja1wiIGluIG5ldyBFcnJvcigpKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjYW5BdHRhY2hUcmFjZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIHRyeSB7dGhyb3cgbmV3IEVycm9yKHNhZmVUb1N0cmluZyh2YWx1ZSkpO31cbiAgICAgICAgICAgIGNhdGNoKGVycikge3JldHVybiBlcnI7fVxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGNhbkF0dGFjaFRyYWNlKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihzYWZlVG9TdHJpbmcodmFsdWUpKTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG5mdW5jdGlvbiBjbGFzc1N0cmluZyhvYmopIHtcbiAgICByZXR1cm4ge30udG9TdHJpbmcuY2FsbChvYmopO1xufVxuXG5mdW5jdGlvbiBjb3B5RGVzY3JpcHRvcnMoZnJvbSwgdG8sIGZpbHRlcikge1xuICAgIHZhciBrZXlzID0gZXM1Lm5hbWVzKGZyb20pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgaWYgKGZpbHRlcihrZXkpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGVzNS5kZWZpbmVQcm9wZXJ0eSh0bywga2V5LCBlczUuZ2V0RGVzY3JpcHRvcihmcm9tLCBrZXkpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIGFzQXJyYXkgPSBmdW5jdGlvbih2KSB7XG4gICAgaWYgKGVzNS5pc0FycmF5KHYpKSB7XG4gICAgICAgIHJldHVybiB2O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvcikge1xuICAgIHZhciBBcnJheUZyb20gPSB0eXBlb2YgQXJyYXkuZnJvbSA9PT0gXCJmdW5jdGlvblwiID8gZnVuY3Rpb24odikge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh2KTtcbiAgICB9IDogZnVuY3Rpb24odikge1xuICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgIHZhciBpdCA9IHZbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICB2YXIgaXRSZXN1bHQ7XG4gICAgICAgIHdoaWxlICghKChpdFJlc3VsdCA9IGl0Lm5leHQoKSkuZG9uZSkpIHtcbiAgICAgICAgICAgIHJldC5wdXNoKGl0UmVzdWx0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG5cbiAgICBhc0FycmF5ID0gZnVuY3Rpb24odikge1xuICAgICAgICBpZiAoZXM1LmlzQXJyYXkodikpIHtcbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9IGVsc2UgaWYgKHYgIT0gbnVsbCAmJiB0eXBlb2YgdltTeW1ib2wuaXRlcmF0b3JdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheUZyb20odik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cblxudmFyIGlzTm9kZSA9IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIGNsYXNzU3RyaW5nKHByb2Nlc3MpLnRvTG93ZXJDYXNlKCkgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiO1xuXG5mdW5jdGlvbiBlbnYoa2V5LCBkZWYpIHtcbiAgICByZXR1cm4gaXNOb2RlID8gcHJvY2Vzcy5lbnZba2V5XSA6IGRlZjtcbn1cblxuZnVuY3Rpb24gZ2V0TmF0aXZlUHJvbWlzZSgpIHtcbiAgICBpZiAodHlwZW9mIFByb21pc2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbigpe30pO1xuICAgICAgICAgICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwocHJvbWlzZSkgPT09IFwiW29iamVjdCBQcm9taXNlXVwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkb21haW5CaW5kKHNlbGYsIGNiKSB7XG4gICAgcmV0dXJuIHNlbGYuYmluZChjYik7XG59XG5cbnZhciByZXQgPSB7XG4gICAgaXNDbGFzczogaXNDbGFzcyxcbiAgICBpc0lkZW50aWZpZXI6IGlzSWRlbnRpZmllcixcbiAgICBpbmhlcml0ZWREYXRhS2V5czogaW5oZXJpdGVkRGF0YUtleXMsXG4gICAgZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0OiBnZXREYXRhUHJvcGVydHlPckRlZmF1bHQsXG4gICAgdGhyb3dlcjogdGhyb3dlcixcbiAgICBpc0FycmF5OiBlczUuaXNBcnJheSxcbiAgICBhc0FycmF5OiBhc0FycmF5LFxuICAgIG5vdEVudW1lcmFibGVQcm9wOiBub3RFbnVtZXJhYmxlUHJvcCxcbiAgICBpc1ByaW1pdGl2ZTogaXNQcmltaXRpdmUsXG4gICAgaXNPYmplY3Q6IGlzT2JqZWN0LFxuICAgIGlzRXJyb3I6IGlzRXJyb3IsXG4gICAgY2FuRXZhbHVhdGU6IGNhbkV2YWx1YXRlLFxuICAgIGVycm9yT2JqOiBlcnJvck9iaixcbiAgICB0cnlDYXRjaDogdHJ5Q2F0Y2gsXG4gICAgaW5oZXJpdHM6IGluaGVyaXRzLFxuICAgIHdpdGhBcHBlbmRlZDogd2l0aEFwcGVuZGVkLFxuICAgIG1heWJlV3JhcEFzRXJyb3I6IG1heWJlV3JhcEFzRXJyb3IsXG4gICAgdG9GYXN0UHJvcGVydGllczogdG9GYXN0UHJvcGVydGllcyxcbiAgICBmaWxsZWRSYW5nZTogZmlsbGVkUmFuZ2UsXG4gICAgdG9TdHJpbmc6IHNhZmVUb1N0cmluZyxcbiAgICBjYW5BdHRhY2hUcmFjZTogY2FuQXR0YWNoVHJhY2UsXG4gICAgZW5zdXJlRXJyb3JPYmplY3Q6IGVuc3VyZUVycm9yT2JqZWN0LFxuICAgIG9yaWdpbmF0ZXNGcm9tUmVqZWN0aW9uOiBvcmlnaW5hdGVzRnJvbVJlamVjdGlvbixcbiAgICBtYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb246IG1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbixcbiAgICBjbGFzc1N0cmluZzogY2xhc3NTdHJpbmcsXG4gICAgY29weURlc2NyaXB0b3JzOiBjb3B5RGVzY3JpcHRvcnMsXG4gICAgaGFzRGV2VG9vbHM6IHR5cGVvZiBjaHJvbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY2hyb21lICYmXG4gICAgICAgICAgICAgICAgIHR5cGVvZiBjaHJvbWUubG9hZFRpbWVzID09PSBcImZ1bmN0aW9uXCIsXG4gICAgaXNOb2RlOiBpc05vZGUsXG4gICAgZW52OiBlbnYsXG4gICAgZ2xvYmFsOiBnbG9iYWxPYmplY3QsXG4gICAgZ2V0TmF0aXZlUHJvbWlzZTogZ2V0TmF0aXZlUHJvbWlzZSxcbiAgICBkb21haW5CaW5kOiBkb21haW5CaW5kXG59O1xucmV0LmlzUmVjZW50Tm9kZSA9IHJldC5pc05vZGUgJiYgKGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ZXJzaW9uID0gcHJvY2Vzcy52ZXJzaW9ucy5ub2RlLnNwbGl0KFwiLlwiKS5tYXAoTnVtYmVyKTtcbiAgICByZXR1cm4gKHZlcnNpb25bMF0gPT09IDAgJiYgdmVyc2lvblsxXSA+IDEwKSB8fCAodmVyc2lvblswXSA+IDApO1xufSkoKTtcblxuaWYgKHJldC5pc05vZGUpIHJldC50b0Zhc3RQcm9wZXJ0aWVzKHByb2Nlc3MpO1xuXG50cnkge3Rocm93IG5ldyBFcnJvcigpOyB9IGNhdGNoIChlKSB7cmV0Lmxhc3RMaW5lRXJyb3IgPSBlO31cbm1vZHVsZS5leHBvcnRzID0gcmV0O1xuXG59LHtcIi4vZXM1XCI6MTN9XX0se30sWzRdKSg0KVxufSk7ICAgICAgICAgICAgICAgICAgICA7aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdyAhPT0gbnVsbCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUCA9IHdpbmRvdy5Qcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZiAhPT0gbnVsbCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5QID0gc2VsZi5Qcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0iLCIvKiBGbGFzaCBkZXRlY3Rpb24gZnJvbSBTV0ZPYmplY3Q6IGNvZGUuZ29vZ2xlLmNvbS9wL3N3Zm9iamVjdFxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIFxuICogQHJldHVybnMgYSB2ZXJzaW9uIG51bWJlciBvciAtMSBpZiBubyBwbGF5ZXJcbiAqL1xudmFyIGdldEZsYXNoVmVyc2lvbiA9IGZ1bmN0aW9uKCkge1xuXHRcblx0XHR2YXIgU1cgPSBcIlNob2Nrd2F2ZVwiLFxuXHRcdFx0RkxBU0ggPSBcIkZsYXNoXCIsXG5cdFx0XHRTSE9DS1dBVkVfRkxBU0ggPSBTVyArIFwiIFwiICsgRkxBU0gsXG5cdFx0XHRTSE9DS1dBVkVfRkxBU0hfQVggPSBTVytGTEFTSCtcIi5cIitTVytGTEFTSCxcblx0XHRcdEZMQVNIX01JTUVfVFlQRSA9IFwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIixcblx0XHRcdG5hdiA9IG5hdmlnYXRvcixcblx0XHRcdHBhcnNlID0gcGFyc2VGbG9hdCxcblx0XHRcdHBsdWdpbnMgPSBuYXYucGx1Z2lucyxcblx0XHRcdG1pbWVzID0gbmF2Lm1pbWVUeXBlcyxcblx0XHRcdGQsIGE7XG5cdFx0aWYgKCEhcGx1Z2lucyAmJiB0eXBlb2YgcGx1Z2luc1tTSE9DS1dBVkVfRkxBU0hdID09IFwib2JqZWN0XCIpIHtcblx0XHRcdGQgPSBwbHVnaW5zW1NIT0NLV0FWRV9GTEFTSF0uZGVzY3JpcHRpb247XG5cdFx0XHRpZiAoISFkICYmICEoISFtaW1lcyAmJiAhIW1pbWVzW0ZMQVNIX01JTUVfVFlQRV0gJiYgIW1pbWVzW0ZMQVNIX01JTUVfVFlQRV0uZW5hYmxlZFBsdWdpbikpIHtcblx0XHRcdFx0cmV0dXJuIHBhcnNlKCBkLnJlcGxhY2UoL14uKlxccysoXFxTKylcXHMrXFxTKyQvLCBcIiQxXCIpICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgaWYgKCAhIXdpbmRvdy5BY3RpdmVYT2JqZWN0ICkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YSA9IG5ldyBBY3RpdmVYT2JqZWN0KFNIT0NLV0FWRV9GTEFTSF9BWCk7XG5cdFx0XHRcdGlmIChhKSB7XG5cdFx0XHRcdFx0ZCA9IGEuR2V0VmFyaWFibGUoXCIkdmVyc2lvblwiKTtcblx0XHRcdFx0XHRpZiAoISFkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcGFyc2UoZC5yZXBsYWNlKC9eXFxTK1xccysoXFxkKyksKFxcZCspLiokL2ksJyQxLiQyJykpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Y2F0Y2goZSkge31cblx0XHR9XG5cdFx0cmV0dXJuIC0xO1xuXHRcdFxufTsiLCIvKiEgICAgU1dGT2JqZWN0IHYyLjMuMjAxMzA1MjEgPGh0dHA6Ly9naXRodWIuY29tL3N3Zm9iamVjdC9zd2ZvYmplY3Q+XG4gICAgaXMgcmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIDxodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocD5cbiovXG52YXIgc3dmb2JqZWN0PWZ1bmN0aW9uKCl7dmFyIEQ9XCJ1bmRlZmluZWRcIixyPVwib2JqZWN0XCIsVD1cIlNob2Nrd2F2ZSBGbGFzaFwiLFo9XCJTaG9ja3dhdmVGbGFzaC5TaG9ja3dhdmVGbGFzaFwiLHE9XCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiLFM9XCJTV0ZPYmplY3RFeHBySW5zdFwiLHg9XCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixRPXdpbmRvdyxoPWRvY3VtZW50LHQ9bmF2aWdhdG9yLFY9ZmFsc2UsWD1bXSxvPVtdLFA9W10sSz1bXSxJLHAsRSxCLEw9ZmFsc2UsYT1mYWxzZSxtLEcsaj10cnVlLGw9ZmFsc2UsTz1mdW5jdGlvbigpe3ZhciBhZD10eXBlb2YgaC5nZXRFbGVtZW50QnlJZCE9RCYmdHlwZW9mIGguZ2V0RWxlbWVudHNCeVRhZ05hbWUhPUQmJnR5cGVvZiBoLmNyZWF0ZUVsZW1lbnQhPUQsYWs9dC51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxhYj10LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksYWg9YWI/L3dpbi8udGVzdChhYik6L3dpbi8udGVzdChhayksYWY9YWI/L21hYy8udGVzdChhYik6L21hYy8udGVzdChhayksYWk9L3dlYmtpdC8udGVzdChhayk/cGFyc2VGbG9hdChhay5yZXBsYWNlKC9eLip3ZWJraXRcXC8oXFxkKyhcXC5cXGQrKT8pLiokLyxcIiQxXCIpKTpmYWxzZSxhYT10LmFwcE5hbWU9PT1cIk1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlclwiLGFqPVswLDAsMF0sYWU9bnVsbDtpZih0eXBlb2YgdC5wbHVnaW5zIT1EJiZ0eXBlb2YgdC5wbHVnaW5zW1RdPT1yKXthZT10LnBsdWdpbnNbVF0uZGVzY3JpcHRpb247aWYoYWUmJih0eXBlb2YgdC5taW1lVHlwZXMhPUQmJnQubWltZVR5cGVzW3FdJiZ0Lm1pbWVUeXBlc1txXS5lbmFibGVkUGx1Z2luKSl7Vj10cnVlO2FhPWZhbHNlO2FlPWFlLnJlcGxhY2UoL14uKlxccysoXFxTK1xccytcXFMrJCkvLFwiJDFcIik7YWpbMF09bihhZS5yZXBsYWNlKC9eKC4qKVxcLi4qJC8sXCIkMVwiKSk7YWpbMV09bihhZS5yZXBsYWNlKC9eLipcXC4oLiopXFxzLiokLyxcIiQxXCIpKTthalsyXT0vW2EtekEtWl0vLnRlc3QoYWUpP24oYWUucmVwbGFjZSgvXi4qW2EtekEtWl0rKC4qKSQvLFwiJDFcIikpOjB9fWVsc2V7aWYodHlwZW9mIFEuQWN0aXZlWE9iamVjdCE9RCl7dHJ5e3ZhciBhZz1uZXcgQWN0aXZlWE9iamVjdChaKTtpZihhZyl7YWU9YWcuR2V0VmFyaWFibGUoXCIkdmVyc2lvblwiKTtpZihhZSl7YWE9dHJ1ZTthZT1hZS5zcGxpdChcIiBcIilbMV0uc3BsaXQoXCIsXCIpO2FqPVtuKGFlWzBdKSxuKGFlWzFdKSxuKGFlWzJdKV19fX1jYXRjaChhYyl7fX19cmV0dXJue3czOmFkLHB2OmFqLHdrOmFpLGllOmFhLHdpbjphaCxtYWM6YWZ9fSgpLGk9ZnVuY3Rpb24oKXtpZighTy53Myl7cmV0dXJufWlmKCh0eXBlb2YgaC5yZWFkeVN0YXRlIT1EJiYoaC5yZWFkeVN0YXRlPT09XCJjb21wbGV0ZVwifHxoLnJlYWR5U3RhdGU9PT1cImludGVyYWN0aXZlXCIpKXx8KHR5cGVvZiBoLnJlYWR5U3RhdGU9PUQmJihoLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXXx8aC5ib2R5KSkpe2YoKX1pZighTCl7aWYodHlwZW9mIGguYWRkRXZlbnRMaXN0ZW5lciE9RCl7aC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGYsZmFsc2UpfWlmKE8uaWUpe2guYXR0YWNoRXZlbnQoeCxmdW5jdGlvbiBhYSgpe2lmKGgucmVhZHlTdGF0ZT09XCJjb21wbGV0ZVwiKXtoLmRldGFjaEV2ZW50KHgsYWEpO2YoKX19KTtpZihRPT10b3ApeyhmdW5jdGlvbiBhYygpe2lmKEwpe3JldHVybn10cnl7aC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwoXCJsZWZ0XCIpfWNhdGNoKGFkKXtzZXRUaW1lb3V0KGFjLDApO3JldHVybn1mKCl9KCkpfX1pZihPLndrKXsoZnVuY3Rpb24gYWIoKXtpZihMKXtyZXR1cm59aWYoIS9sb2FkZWR8Y29tcGxldGUvLnRlc3QoaC5yZWFkeVN0YXRlKSl7c2V0VGltZW91dChhYiwwKTtyZXR1cm59ZigpfSgpKX19fSgpO2Z1bmN0aW9uIGYoKXtpZihMfHwhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdKXtyZXR1cm59dHJ5e3ZhciBhYyxhZD1DKFwic3BhblwiKTthZC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO2FjPWguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdLmFwcGVuZENoaWxkKGFkKTthYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGFjKTthYz1udWxsO2FkPW51bGx9Y2F0Y2goYWUpe3JldHVybn1MPXRydWU7dmFyIGFhPVgubGVuZ3RoO2Zvcih2YXIgYWI9MDthYjxhYTthYisrKXtYW2FiXSgpfX1mdW5jdGlvbiBNKGFhKXtpZihMKXthYSgpfWVsc2V7WFtYLmxlbmd0aF09YWF9fWZ1bmN0aW9uIHMoYWIpe2lmKHR5cGVvZiBRLmFkZEV2ZW50TGlzdGVuZXIhPUQpe1EuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixhYixmYWxzZSl9ZWxzZXtpZih0eXBlb2YgaC5hZGRFdmVudExpc3RlbmVyIT1EKXtoLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsYWIsZmFsc2UpfWVsc2V7aWYodHlwZW9mIFEuYXR0YWNoRXZlbnQhPUQpe2coUSxcIm9ubG9hZFwiLGFiKX1lbHNle2lmKHR5cGVvZiBRLm9ubG9hZD09XCJmdW5jdGlvblwiKXt2YXIgYWE9US5vbmxvYWQ7US5vbmxvYWQ9ZnVuY3Rpb24oKXthYSgpO2FiKCl9fWVsc2V7US5vbmxvYWQ9YWJ9fX19fWZ1bmN0aW9uIFkoKXt2YXIgYWE9aC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07dmFyIGFlPUMocik7YWUuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcInZpc2liaWxpdHk6IGhpZGRlbjtcIik7YWUuc2V0QXR0cmlidXRlKFwidHlwZVwiLHEpO3ZhciBhZD1hYS5hcHBlbmRDaGlsZChhZSk7aWYoYWQpe3ZhciBhYz0wOyhmdW5jdGlvbiBhYigpe2lmKHR5cGVvZiBhZC5HZXRWYXJpYWJsZSE9RCl7dHJ5e3ZhciBhZz1hZC5HZXRWYXJpYWJsZShcIiR2ZXJzaW9uXCIpO2lmKGFnKXthZz1hZy5zcGxpdChcIiBcIilbMV0uc3BsaXQoXCIsXCIpO08ucHY9W24oYWdbMF0pLG4oYWdbMV0pLG4oYWdbMl0pXX19Y2F0Y2goYWYpe08ucHY9WzgsMCwwXX19ZWxzZXtpZihhYzwxMCl7YWMrKztzZXRUaW1lb3V0KGFiLDEwKTtyZXR1cm59fWFhLnJlbW92ZUNoaWxkKGFlKTthZD1udWxsO0goKX0oKSl9ZWxzZXtIKCl9fWZ1bmN0aW9uIEgoKXt2YXIgYWo9by5sZW5ndGg7aWYoYWo+MCl7Zm9yKHZhciBhaT0wO2FpPGFqO2FpKyspe3ZhciBhYj1vW2FpXS5pZDt2YXIgYWU9b1thaV0uY2FsbGJhY2tGbjt2YXIgYWQ9e3N1Y2Nlc3M6ZmFsc2UsaWQ6YWJ9O2lmKE8ucHZbMF0+MCl7dmFyIGFoPWMoYWIpO2lmKGFoKXtpZihGKG9bYWldLnN3ZlZlcnNpb24pJiYhKE8ud2smJk8ud2s8MzEyKSl7dyhhYix0cnVlKTtpZihhZSl7YWQuc3VjY2Vzcz10cnVlO2FkLnJlZj16KGFiKTthZC5pZD1hYjthZShhZCl9fWVsc2V7aWYob1thaV0uZXhwcmVzc0luc3RhbGwmJkEoKSl7dmFyIGFsPXt9O2FsLmRhdGE9b1thaV0uZXhwcmVzc0luc3RhbGw7YWwud2lkdGg9YWguZ2V0QXR0cmlidXRlKFwid2lkdGhcIil8fFwiMFwiO2FsLmhlaWdodD1haC5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIil8fFwiMFwiO2lmKGFoLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpKXthbC5zdHlsZWNsYXNzPWFoLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfWlmKGFoLmdldEF0dHJpYnV0ZShcImFsaWduXCIpKXthbC5hbGlnbj1haC5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKX12YXIgYWs9e307dmFyIGFhPWFoLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyYW1cIik7dmFyIGFmPWFhLmxlbmd0aDtmb3IodmFyIGFnPTA7YWc8YWY7YWcrKyl7aWYoYWFbYWddLmdldEF0dHJpYnV0ZShcIm5hbWVcIikudG9Mb3dlckNhc2UoKSE9XCJtb3ZpZVwiKXtha1thYVthZ10uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV09YWFbYWddLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfX1SKGFsLGFrLGFiLGFlKX1lbHNle2IoYWgpO2lmKGFlKXthZShhZCl9fX19fWVsc2V7dyhhYix0cnVlKTtpZihhZSl7dmFyIGFjPXooYWIpO2lmKGFjJiZ0eXBlb2YgYWMuU2V0VmFyaWFibGUhPUQpe2FkLnN1Y2Nlc3M9dHJ1ZTthZC5yZWY9YWM7YWQuaWQ9YWMuaWR9YWUoYWQpfX19fX1YWzBdPWZ1bmN0aW9uKCl7aWYoVil7WSgpfWVsc2V7SCgpfX07ZnVuY3Rpb24geihhYyl7dmFyIGFhPW51bGwsYWI9YyhhYyk7aWYoYWImJmFiLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PT1cIk9CSkVDVFwiKXtpZih0eXBlb2YgYWIuU2V0VmFyaWFibGUhPT1EKXthYT1hYn1lbHNle2FhPWFiLmdldEVsZW1lbnRzQnlUYWdOYW1lKHIpWzBdfHxhYn19cmV0dXJuIGFhfWZ1bmN0aW9uIEEoKXtyZXR1cm4gIWEmJkYoXCI2LjAuNjVcIikmJihPLndpbnx8Ty5tYWMpJiYhKE8ud2smJk8ud2s8MzEyKX1mdW5jdGlvbiBSKGFkLGFlLGFhLGFjKXt2YXIgYWg9YyhhYSk7YWE9VyhhYSk7YT10cnVlO0U9YWN8fG51bGw7Qj17c3VjY2VzczpmYWxzZSxpZDphYX07aWYoYWgpe2lmKGFoLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PVwiT0JKRUNUXCIpe0k9SihhaCk7cD1udWxsfWVsc2V7ST1haDtwPWFhfWFkLmlkPVM7aWYodHlwZW9mIGFkLndpZHRoPT1EfHwoIS8lJC8udGVzdChhZC53aWR0aCkmJm4oYWQud2lkdGgpPDMxMCkpe2FkLndpZHRoPVwiMzEwXCJ9aWYodHlwZW9mIGFkLmhlaWdodD09RHx8KCEvJSQvLnRlc3QoYWQuaGVpZ2h0KSYmbihhZC5oZWlnaHQpPDEzNykpe2FkLmhlaWdodD1cIjEzN1wifXZhciBhZz1PLmllP1wiQWN0aXZlWFwiOlwiUGx1Z0luXCIsYWY9XCJNTXJlZGlyZWN0VVJMPVwiK2VuY29kZVVSSUNvbXBvbmVudChRLmxvY2F0aW9uLnRvU3RyaW5nKCkucmVwbGFjZSgvJi9nLFwiJTI2XCIpKStcIiZNTXBsYXllclR5cGU9XCIrYWcrXCImTU1kb2N0aXRsZT1cIitlbmNvZGVVUklDb21wb25lbnQoaC50aXRsZS5zbGljZSgwLDQ3KStcIiAtIEZsYXNoIFBsYXllciBJbnN0YWxsYXRpb25cIik7aWYodHlwZW9mIGFlLmZsYXNodmFycyE9RCl7YWUuZmxhc2h2YXJzKz1cIiZcIithZn1lbHNle2FlLmZsYXNodmFycz1hZn1pZihPLmllJiZhaC5yZWFkeVN0YXRlIT00KXt2YXIgYWI9QyhcImRpdlwiKTtcbmFhKz1cIlNXRk9iamVjdE5ld1wiO2FiLnNldEF0dHJpYnV0ZShcImlkXCIsYWEpO2FoLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGFiLGFoKTthaC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3koYWgpfXUoYWQsYWUsYWEpfX1mdW5jdGlvbiBiKGFiKXtpZihPLmllJiZhYi5yZWFkeVN0YXRlIT00KXthYi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3ZhciBhYT1DKFwiZGl2XCIpO2FiLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGFhLGFiKTthYS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChKKGFiKSxhYSk7eShhYil9ZWxzZXthYi5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChKKGFiKSxhYil9fWZ1bmN0aW9uIEooYWYpe3ZhciBhZT1DKFwiZGl2XCIpO2lmKE8ud2luJiZPLmllKXthZS5pbm5lckhUTUw9YWYuaW5uZXJIVE1MfWVsc2V7dmFyIGFiPWFmLmdldEVsZW1lbnRzQnlUYWdOYW1lKHIpWzBdO2lmKGFiKXt2YXIgYWc9YWIuY2hpbGROb2RlcztpZihhZyl7dmFyIGFhPWFnLmxlbmd0aDtmb3IodmFyIGFkPTA7YWQ8YWE7YWQrKyl7aWYoIShhZ1thZF0ubm9kZVR5cGU9PTEmJmFnW2FkXS5ub2RlTmFtZT09XCJQQVJBTVwiKSYmIShhZ1thZF0ubm9kZVR5cGU9PTgpKXthZS5hcHBlbmRDaGlsZChhZ1thZF0uY2xvbmVOb2RlKHRydWUpKX19fX19cmV0dXJuIGFlfWZ1bmN0aW9uIGsoYWEsYWIpe3ZhciBhYz1DKFwiZGl2XCIpO2FjLmlubmVySFRNTD1cIjxvYmplY3QgY2xhc3NpZD0nY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwJz48cGFyYW0gbmFtZT0nbW92aWUnIHZhbHVlPSdcIithYStcIic+XCIrYWIrXCI8L29iamVjdD5cIjtyZXR1cm4gYWMuZmlyc3RDaGlsZH1mdW5jdGlvbiB1KGFpLGFnLGFiKXt2YXIgYWEsYWQ9YyhhYik7YWI9VyhhYik7aWYoTy53ayYmTy53azwzMTIpe3JldHVybiBhYX1pZihhZCl7dmFyIGFjPShPLmllKT9DKFwiZGl2XCIpOkMociksYWYsYWgsYWU7aWYodHlwZW9mIGFpLmlkPT1EKXthaS5pZD1hYn1mb3IoYWUgaW4gYWcpe2lmKGFnLmhhc093blByb3BlcnR5KGFlKSYmYWUudG9Mb3dlckNhc2UoKSE9PVwibW92aWVcIil7ZShhYyxhZSxhZ1thZV0pfX1pZihPLmllKXthYz1rKGFpLmRhdGEsYWMuaW5uZXJIVE1MKX1mb3IoYWYgaW4gYWkpe2lmKGFpLmhhc093blByb3BlcnR5KGFmKSl7YWg9YWYudG9Mb3dlckNhc2UoKTtpZihhaD09PVwic3R5bGVjbGFzc1wiKXthYy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGFpW2FmXSl9ZWxzZXtpZihhaCE9PVwiY2xhc3NpZFwiJiZhaCE9PVwiZGF0YVwiKXthYy5zZXRBdHRyaWJ1dGUoYWYsYWlbYWZdKX19fX1pZihPLmllKXtQW1AubGVuZ3RoXT1haS5pZH1lbHNle2FjLnNldEF0dHJpYnV0ZShcInR5cGVcIixxKTthYy5zZXRBdHRyaWJ1dGUoXCJkYXRhXCIsYWkuZGF0YSl9YWQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoYWMsYWQpO2FhPWFjfXJldHVybiBhYX1mdW5jdGlvbiBlKGFjLGFhLGFiKXt2YXIgYWQ9QyhcInBhcmFtXCIpO2FkLnNldEF0dHJpYnV0ZShcIm5hbWVcIixhYSk7YWQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixhYik7YWMuYXBwZW5kQ2hpbGQoYWQpfWZ1bmN0aW9uIHkoYWMpe3ZhciBhYj1jKGFjKTtpZihhYiYmYWIubm9kZU5hbWUudG9VcHBlckNhc2UoKT09XCJPQkpFQ1RcIil7aWYoTy5pZSl7YWIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjsoZnVuY3Rpb24gYWEoKXtpZihhYi5yZWFkeVN0YXRlPT00KXtmb3IodmFyIGFkIGluIGFiKXtpZih0eXBlb2YgYWJbYWRdPT1cImZ1bmN0aW9uXCIpe2FiW2FkXT1udWxsfX1hYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGFiKX1lbHNle3NldFRpbWVvdXQoYWEsMTApfX0oKSl9ZWxzZXthYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGFiKX19fWZ1bmN0aW9uIFUoYWEpe3JldHVybihhYSYmYWEubm9kZVR5cGUmJmFhLm5vZGVUeXBlPT09MSl9ZnVuY3Rpb24gVyhhYSl7cmV0dXJuKFUoYWEpKT9hYS5pZDphYX1mdW5jdGlvbiBjKGFjKXtpZihVKGFjKSl7cmV0dXJuIGFjfXZhciBhYT1udWxsO3RyeXthYT1oLmdldEVsZW1lbnRCeUlkKGFjKX1jYXRjaChhYil7fXJldHVybiBhYX1mdW5jdGlvbiBDKGFhKXtyZXR1cm4gaC5jcmVhdGVFbGVtZW50KGFhKX1mdW5jdGlvbiBuKGFhKXtyZXR1cm4gcGFyc2VJbnQoYWEsMTApfWZ1bmN0aW9uIGcoYWMsYWEsYWIpe2FjLmF0dGFjaEV2ZW50KGFhLGFiKTtLW0subGVuZ3RoXT1bYWMsYWEsYWJdfWZ1bmN0aW9uIEYoYWMpe2FjKz1cIlwiO3ZhciBhYj1PLnB2LGFhPWFjLnNwbGl0KFwiLlwiKTthYVswXT1uKGFhWzBdKTthYVsxXT1uKGFhWzFdKXx8MDthYVsyXT1uKGFhWzJdKXx8MDtyZXR1cm4oYWJbMF0+YWFbMF18fChhYlswXT09YWFbMF0mJmFiWzFdPmFhWzFdKXx8KGFiWzBdPT1hYVswXSYmYWJbMV09PWFhWzFdJiZhYlsyXT49YWFbMl0pKT90cnVlOmZhbHNlfWZ1bmN0aW9uIHYoYWYsYWIsYWcsYWUpe3ZhciBhZD1oLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtpZighYWQpe3JldHVybn12YXIgYWE9KHR5cGVvZiBhZz09XCJzdHJpbmdcIik/YWc6XCJzY3JlZW5cIjtpZihhZSl7bT1udWxsO0c9bnVsbH1pZighbXx8RyE9YWEpe3ZhciBhYz1DKFwic3R5bGVcIik7YWMuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwidGV4dC9jc3NcIik7YWMuc2V0QXR0cmlidXRlKFwibWVkaWFcIixhYSk7bT1hZC5hcHBlbmRDaGlsZChhYyk7aWYoTy5pZSYmdHlwZW9mIGguc3R5bGVTaGVldHMhPUQmJmguc3R5bGVTaGVldHMubGVuZ3RoPjApe209aC5zdHlsZVNoZWV0c1toLnN0eWxlU2hlZXRzLmxlbmd0aC0xXX1HPWFhfWlmKG0pe2lmKHR5cGVvZiBtLmFkZFJ1bGUhPUQpe20uYWRkUnVsZShhZixhYil9ZWxzZXtpZih0eXBlb2YgaC5jcmVhdGVUZXh0Tm9kZSE9RCl7bS5hcHBlbmRDaGlsZChoLmNyZWF0ZVRleHROb2RlKGFmK1wiIHtcIithYitcIn1cIikpfX19fWZ1bmN0aW9uIHcoYWQsYWEpe2lmKCFqKXtyZXR1cm59dmFyIGFiPWFhP1widmlzaWJsZVwiOlwiaGlkZGVuXCIsYWM9YyhhZCk7aWYoTCYmYWMpe2FjLnN0eWxlLnZpc2liaWxpdHk9YWJ9ZWxzZXtpZih0eXBlb2YgYWQ9PT1cInN0cmluZ1wiKXt2KFwiI1wiK2FkLFwidmlzaWJpbGl0eTpcIithYil9fX1mdW5jdGlvbiBOKGFiKXt2YXIgYWM9L1tcXFxcXFxcIjw+XFwuO10vO3ZhciBhYT1hYy5leGVjKGFiKSE9bnVsbDtyZXR1cm4gYWEmJnR5cGVvZiBlbmNvZGVVUklDb21wb25lbnQhPUQ/ZW5jb2RlVVJJQ29tcG9uZW50KGFiKTphYn12YXIgZD1mdW5jdGlvbigpe2lmKE8uaWUpe3dpbmRvdy5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZnVuY3Rpb24oKXt2YXIgYWY9Sy5sZW5ndGg7Zm9yKHZhciBhZT0wO2FlPGFmO2FlKyspe0tbYWVdWzBdLmRldGFjaEV2ZW50KEtbYWVdWzFdLEtbYWVdWzJdKX12YXIgYWM9UC5sZW5ndGg7Zm9yKHZhciBhZD0wO2FkPGFjO2FkKyspe3koUFthZF0pfWZvcih2YXIgYWIgaW4gTyl7T1thYl09bnVsbH1PPW51bGw7Zm9yKHZhciBhYSBpbiBzd2ZvYmplY3Qpe3N3Zm9iamVjdFthYV09bnVsbH1zd2ZvYmplY3Q9bnVsbH0pfX0oKTtyZXR1cm57cmVnaXN0ZXJPYmplY3Q6ZnVuY3Rpb24oYWUsYWEsYWQsYWMpe2lmKE8udzMmJmFlJiZhYSl7dmFyIGFiPXt9O2FiLmlkPWFlO2FiLnN3ZlZlcnNpb249YWE7YWIuZXhwcmVzc0luc3RhbGw9YWQ7YWIuY2FsbGJhY2tGbj1hYztvW28ubGVuZ3RoXT1hYjt3KGFlLGZhbHNlKX1lbHNle2lmKGFjKXthYyh7c3VjY2VzczpmYWxzZSxpZDphZX0pfX19LGdldE9iamVjdEJ5SWQ6ZnVuY3Rpb24oYWEpe2lmKE8udzMpe3JldHVybiB6KGFhKX19LGVtYmVkU1dGOmZ1bmN0aW9uKGFmLGFsLGFpLGFrLGFiLGFlLGFkLGFoLGFqLGFnKXt2YXIgYWM9VyhhbCksYWE9e3N1Y2Nlc3M6ZmFsc2UsaWQ6YWN9O2lmKE8udzMmJiEoTy53ayYmTy53azwzMTIpJiZhZiYmYWwmJmFpJiZhayYmYWIpe3coYWMsZmFsc2UpO00oZnVuY3Rpb24oKXthaSs9XCJcIjthays9XCJcIjt2YXIgYW49e307aWYoYWomJnR5cGVvZiBhaj09PXIpe2Zvcih2YXIgYXEgaW4gYWope2FuW2FxXT1halthcV19fWFuLmRhdGE9YWY7YW4ud2lkdGg9YWk7YW4uaGVpZ2h0PWFrO3ZhciBhcj17fTtpZihhaCYmdHlwZW9mIGFoPT09cil7Zm9yKHZhciBhbyBpbiBhaCl7YXJbYW9dPWFoW2FvXX19aWYoYWQmJnR5cGVvZiBhZD09PXIpe2Zvcih2YXIgYW0gaW4gYWQpe2lmKGFkLmhhc093blByb3BlcnR5KGFtKSl7dmFyIGFwPShsKT9lbmNvZGVVUklDb21wb25lbnQoYW0pOmFtLGF0PShsKT9lbmNvZGVVUklDb21wb25lbnQoYWRbYW1dKTphZFthbV07aWYodHlwZW9mIGFyLmZsYXNodmFycyE9RCl7YXIuZmxhc2h2YXJzKz1cIiZcIithcCtcIj1cIithdH1lbHNle2FyLmZsYXNodmFycz1hcCtcIj1cIithdH19fX1pZihGKGFiKSl7dmFyIGF1PXUoYW4sYXIsYWwpO2lmKGFuLmlkPT1hYyl7dyhhYyx0cnVlKX1hYS5zdWNjZXNzPXRydWU7YWEucmVmPWF1O2FhLmlkPWF1LmlkfWVsc2V7aWYoYWUmJkEoKSl7YW4uZGF0YT1hZTtSKGFuLGFyLGFsLGFnKTtyZXR1cm59ZWxzZXt3KGFjLHRydWUpfX1pZihhZyl7YWcoYWEpfX0pfWVsc2V7aWYoYWcpe2FnKGFhKX19fSxzd2l0Y2hPZmZBdXRvSGlkZVNob3c6ZnVuY3Rpb24oKXtqPWZhbHNlfSxlbmFibGVVcmlFbmNvZGluZzpmdW5jdGlvbihhYSl7bD0odHlwZW9mIGFhPT09RCk/dHJ1ZTphYX0sdWE6TyxnZXRGbGFzaFBsYXllclZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm57bWFqb3I6Ty5wdlswXSxtaW5vcjpPLnB2WzFdLHJlbGVhc2U6Ty5wdlsyXX19LGhhc0ZsYXNoUGxheWVyVmVyc2lvbjpGLGNyZWF0ZVNXRjpmdW5jdGlvbihhYyxhYixhYSl7aWYoTy53Myl7cmV0dXJuIHUoYWMsYWIsYWEpfWVsc2V7cmV0dXJuIHVuZGVmaW5lZH19LHNob3dFeHByZXNzSW5zdGFsbDpmdW5jdGlvbihhYyxhZCxhYSxhYil7aWYoTy53MyYmQSgpKXtSKGFjLGFkLGFhLGFiKX19LHJlbW92ZVNXRjpmdW5jdGlvbihhYSl7aWYoTy53Myl7eShhYSl9fSxjcmVhdGVDU1M6ZnVuY3Rpb24oYWQsYWMsYWIsYWEpe2lmKE8udzMpe3YoYWQsYWMsYWIsYWEpfX0sYWRkRG9tTG9hZEV2ZW50Ok0sYWRkTG9hZEV2ZW50OnMsZ2V0UXVlcnlQYXJhbVZhbHVlOmZ1bmN0aW9uKGFkKXt2YXIgYWM9aC5sb2NhdGlvbi5zZWFyY2h8fGgubG9jYXRpb24uaGFzaDtcbmlmKGFjKXtpZigvXFw/Ly50ZXN0KGFjKSl7YWM9YWMuc3BsaXQoXCI/XCIpWzFdfWlmKGFkPT1udWxsKXtyZXR1cm4gTihhYyl9dmFyIGFiPWFjLnNwbGl0KFwiJlwiKTtmb3IodmFyIGFhPTA7YWE8YWIubGVuZ3RoO2FhKyspe2lmKGFiW2FhXS5zdWJzdHJpbmcoMCxhYlthYV0uaW5kZXhPZihcIj1cIikpPT1hZCl7cmV0dXJuIE4oYWJbYWFdLnN1YnN0cmluZygoYWJbYWFdLmluZGV4T2YoXCI9XCIpKzEpKSl9fX1yZXR1cm5cIlwifSxleHByZXNzSW5zdGFsbENhbGxiYWNrOmZ1bmN0aW9uKCl7aWYoYSl7dmFyIGFhPWMoUyk7aWYoYWEmJkkpe2FhLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKEksYWEpO2lmKHApe3cocCx0cnVlKTtpZihPLmllKXtJLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wifX1pZihFKXtFKEIpfX1hPWZhbHNlfX0sdmVyc2lvbjpcIjIuM1wifX0oKTtcbiIsInZhciBvbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhcnNlciA9IHtcbiAgICAgICAgbnVtYmVyOiBmdW5jdGlvbiAoZWwsIGtleSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5wYXJzZShlbCwga2V5KTtcblxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXJyYXk6IGZ1bmN0aW9uIChlbCwga2V5KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnBhcnNlKGVsLCBrZXkpO1xuICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnNwbGl0KCcgJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGJvb2w6IGZ1bmN0aW9uIChlbCwga2V5KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnBhcnNlKGVsLCBrZXkpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gSlNPTi5wYXJzZSh2YWx1ZSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZmFsc2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuICEhdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoZWwsIGtleSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW91dHN0cmVhbS0nICsga2V5KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNjcmlwdFRhZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XG5cbiAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBzY3JpcHRUYWdzKSB7XG4gICAgICAgICAgICB2YXIgYWlkID0gcGFyc2VyLm51bWJlcihzY3JpcHRUYWdzW2l0ZW1dLCAnYWlkJyk7XG5cbiAgICAgICAgICAgIGlmICghIWFpZCAmJiAhaXNOYU4oYWlkKSkge1xuICAgICAgICAgICAgICAgIGluaXRPdXRzdHJlYW0oe1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogcGFyc2VyLm51bWJlcihzY3JpcHRUYWdzW2l0ZW1dLCAnd2lkdGgnKSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBwYXJzZXIubnVtYmVyKHNjcmlwdFRhZ3NbaXRlbV0sICdoZWlnaHQnKSxcbiAgICAgICAgICAgICAgICAgICAgaXNTU1A6IHBhcnNlci5ib29sKHNjcmlwdFRhZ3NbaXRlbV0sICdTU1AnKSxcbiAgICAgICAgICAgICAgICAgICAgVlBBSURNb2RlOiBwYXJzZXIuYXJyYXkoc2NyaXB0VGFnc1tpdGVtXSwgJ21vZGUnKSxcbiAgICAgICAgICAgICAgICAgICAgYWlkOiBhaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lckVsOiBjcmVhdGVFbChzY3JpcHRUYWdzW2l0ZW1dKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSkoKTtcblxuXG4gICAgZnVuY3Rpb24gaW5pdE91dHN0cmVhbShvcHRpb25zKSB7XG4gICAgICAgIG5ldyBPdXRzdHJlYW0oe1xuICAgICAgICAgICAgYWlkOiBvcHRpb25zLmFpZCxcbiAgICAgICAgICAgIGlzU1NQOiBvcHRpb25zLmlzU1NQLFxuICAgICAgICAgICAgVlBBSURNb2RlOiBvcHRpb25zLlZQQUlETW9kZSxcbiAgICAgICAgICAgIHdpZHRoOiBpc05hTihvcHRpb25zLndpZHRoKSA/IDQwMCA6IG9wdGlvbnMud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGlzTmFOKG9wdGlvbnMuaGVpZ2h0KSA/IDMwMCA6IG9wdGlvbnMuaGVpZ2h0LFxuICAgICAgICAgICAgY29udGFpbmVyRWw6IG9wdGlvbnMuY29udGFpbmVyRWxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc05hTih2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbCAhPSB2YWw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRWwoZWwpIHtcbiAgICAgICAgdmFyIGFkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgICAgIHBhcmVudEVsID0gZWwucGFyZW50Tm9kZTtcblxuICAgICAgICBpZiAocGFyZW50RWwudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09IFwiSEVBRFwiKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFkQ29udGFpbmVyKTtcblxuICAgICAgICAgICAgcmV0dXJuIGFkQ29udGFpbmVyO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyZW50RWwuaW5zZXJ0QmVmb3JlKGFkQ29udGFpbmVyLCBlbCk7XG5cbiAgICAgICAgcmV0dXJuIGFkQ29udGFpbmVyO1xuICAgIH1cbn07XG5cbmlmICh3aW5kb3cgIT09IHRvcCkge1xuICAgIG9ubG9hZCgpO1xufSBlbHNlIHtcbiAgICB3aW5kb3cub25sb2FkID0gb25sb2FkO1xufVxuIiwiOyhmdW5jdGlvbihyb290LCB1bmRlZmluZWQpIHtcbnZhciByb290ID0gcm9vdCB8fHdpbmRvdztcbmlmKCFyb290LmNvbnNvbGUpe1xuICAgIHJvb3QuY29uc29sZSA9IHtcbiAgICAgICAgbG9nOiBmdW5jdGlvbihhKXtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGEpe1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuaWYgKCFyb290LkpTT04pIHtcbiAgICByb290LkpTT04gPSB7XG4gICAgICAgIHBhcnNlOiBmdW5jdGlvbihzSlNPTikgeyByZXR1cm4gZXZhbCgnKCcgKyBzSlNPTiArICcpJyk7IH0sXG4gICAgICAgIHN0cmluZ2lmeTogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG4gICAgICAgICAgICB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYSkgPT09ICdbb2JqZWN0IEFycmF5XSc7IH07XG4gICAgICAgICAgICB2YXIgZXNjTWFwID0geydcIic6ICdcXFxcXCInLCAnXFxcXCc6ICdcXFxcXFxcXCcsICdcXGInOiAnXFxcXGInLCAnXFxmJzogJ1xcXFxmJywgJ1xcbic6ICdcXFxcbicsICdcXHInOiAnXFxcXHInLCAnXFx0JzogJ1xcXFx0J307XG4gICAgICAgICAgICB2YXIgZXNjRnVuYyA9IGZ1bmN0aW9uIChtKSB7IHJldHVybiBlc2NNYXBbbV0gfHwgJ1xcXFx1JyArIChtLmNoYXJDb2RlQXQoMCkgKyAweDEwMDAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpOyB9O1xuICAgICAgICAgICAgdmFyIGVzY1JFID0gL1tcXFxcXCJcXHUwMDAwLVxcdTAwMUZcXHUyMDI4XFx1MjAyOV0vZztcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBzdHJpbmdpZnkodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ251bGwnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNGaW5pdGUodmFsdWUpID8gdmFsdWUudG9TdHJpbmcoKSA6ICdudWxsJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZ2lmeSh2YWx1ZS50b0pTT04oKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXMgPSAnWyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyArPSAoaSA/ICcsICcgOiAnJykgKyBzdHJpbmdpZnkodmFsdWVbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcyArICddJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuaGFzT3duUHJvcGVydHkoaykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcC5wdXNoKHN0cmluZ2lmeShrKSArICc6ICcgKyBzdHJpbmdpZnkodmFsdWVba10pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAneycgKyB0bXAuam9pbignLCAnKSArICd9JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gJ1wiJyArIHZhbHVlLnRvU3RyaW5nKCkucmVwbGFjZShlc2NSRSwgZXNjRnVuYykgKyAnXCInO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkoKVxuICAgIH07XG59XG5cbi8vIEZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2tleXNcbmlmICghT2JqZWN0LmtleXMpIHtcbiAgICBPYmplY3Qua2V5cyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuICAgICAgICAgICAgaGFzRG9udEVudW1CdWcgPSAhKHsgdG9TdHJpbmc6IG51bGwgfSkucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyksXG4gICAgICAgICAgICBkb250RW51bXMgPSBbXG4gICAgICAgICAgICAgICAgJ3RvU3RyaW5nJyxcbiAgICAgICAgICAgICAgICAndG9Mb2NhbGVTdHJpbmcnLFxuICAgICAgICAgICAgICAgICd2YWx1ZU9mJyxcbiAgICAgICAgICAgICAgICAnaGFzT3duUHJvcGVydHknLFxuICAgICAgICAgICAgICAgICdpc1Byb3RvdHlwZU9mJyxcbiAgICAgICAgICAgICAgICAncHJvcGVydHlJc0VudW1lcmFibGUnLFxuICAgICAgICAgICAgICAgICdjb25zdHJ1Y3RvcidcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBkb250RW51bXNMZW5ndGggPSBkb250RW51bXMubGVuZ3RoO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyAmJiAodHlwZW9mIG9iaiAhPT0gJ2Z1bmN0aW9uJyB8fCBvYmogPT09IG51bGwpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmtleXMgY2FsbGVkIG9uIG5vbi1vYmplY3QnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdLCBwcm9wLCBpO1xuXG4gICAgICAgICAgICBmb3IgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChwcm9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChoYXNEb250RW51bUJ1Zykge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkb250RW51bXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGRvbnRFbnVtc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRvbnRFbnVtc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgIH0oKSk7XG59XG5cbmlmICghQXJyYXkuaXNBcnJheSkge1xuICAgIEFycmF5LmlzQXJyYXkgPSBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIH07XG59XG5cbmlmICghRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQpIHtcbiAgICBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uKG9UaGlzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgLy8gY2xvc2VzdCB0aGluZyBwb3NzaWJsZSB0byB0aGUgRUNNQVNjcmlwdCA1XG4gICAgICAgICAgICAvLyBpbnRlcm5hbCBJc0NhbGxhYmxlIGZ1bmN0aW9uXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbi5wcm90b3R5cGUuYmluZCAtIHdoYXQgaXMgdHJ5aW5nIHRvIGJlIGJvdW5kIGlzIG5vdCBjYWxsYWJsZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFBcmdzICAgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxuICAgICAgICAgICAgZlRvQmluZCA9IHRoaXMsXG4gICAgICAgICAgICBmTk9QICAgID0gZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgICAgIGZCb3VuZCAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZlRvQmluZC5hcHBseSh0aGlzIGluc3RhbmNlb2YgZk5PUFxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG9UaGlzLFxuICAgICAgICAgICAgICAgICAgICBhQXJncy5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBpZiAodGhpcy5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIC8vIEZ1bmN0aW9uLnByb3RvdHlwZSBkb2Vzbid0IGhhdmUgYSBwcm90b3R5cGUgcHJvcGVydHlcbiAgICAgICAgICAgIGZOT1AucHJvdG90eXBlID0gdGhpcy5wcm90b3R5cGU7XG4gICAgICAgIH1cbiAgICAgICAgZkJvdW5kLnByb3RvdHlwZSA9IG5ldyBmTk9QKCk7XG5cbiAgICAgICAgcmV0dXJuIGZCb3VuZDtcbiAgICB9O1xufVxuXG4vLyBQcm9kdWN0aW9uIHN0ZXBzIG9mIEVDTUEtMjYyLCBFZGl0aW9uIDUsIDE1LjQuNC4xNFxuLy8gUmVmZXJlbmNlOiBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjQuNC4xNFxuaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZikge1xuICAgIEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24oc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KSB7XG5cbiAgICAgICAgdmFyIGs7XG5cbiAgICAgICAgLy8gMS4gTGV0IG8gYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIFRvT2JqZWN0IHBhc3NpbmdcbiAgICAgICAgLy8gICAgdGhlIHRoaXMgdmFsdWUgYXMgdGhlIGFyZ3VtZW50LlxuICAgICAgICBpZiAodGhpcyA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInRoaXNcIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbyA9IE9iamVjdCh0aGlzKTtcblxuICAgICAgICAvLyAyLiBMZXQgbGVuVmFsdWUgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBHZXRcbiAgICAgICAgLy8gICAgaW50ZXJuYWwgbWV0aG9kIG9mIG8gd2l0aCB0aGUgYXJndW1lbnQgXCJsZW5ndGhcIi5cbiAgICAgICAgLy8gMy4gTGV0IGxlbiBiZSBUb1VpbnQzMihsZW5WYWx1ZSkuXG4gICAgICAgIHZhciBsZW4gPSBvLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgICAvLyA0LiBJZiBsZW4gaXMgMCwgcmV0dXJuIC0xLlxuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cblxuICAgICAgICAvLyA1LiBJZiBhcmd1bWVudCBmcm9tSW5kZXggd2FzIHBhc3NlZCBsZXQgbiBiZVxuICAgICAgICAvLyAgICBUb0ludGVnZXIoZnJvbUluZGV4KTsgZWxzZSBsZXQgbiBiZSAwLlxuICAgICAgICB2YXIgbiA9ICtmcm9tSW5kZXggfHwgMDtcblxuICAgICAgICBpZiAoTWF0aC5hYnMobikgPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICBuID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDYuIElmIG4gPj0gbGVuLCByZXR1cm4gLTEuXG4gICAgICAgIGlmIChuID49IGxlbikge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gNy4gSWYgbiA+PSAwLCB0aGVuIExldCBrIGJlIG4uXG4gICAgICAgIC8vIDguIEVsc2UsIG48MCwgTGV0IGsgYmUgbGVuIC0gYWJzKG4pLlxuICAgICAgICAvLyAgICBJZiBrIGlzIGxlc3MgdGhhbiAwLCB0aGVuIGxldCBrIGJlIDAuXG4gICAgICAgIGsgPSBNYXRoLm1heChuID49IDAgPyBuIDogbGVuIC0gTWF0aC5hYnMobiksIDApO1xuXG4gICAgICAgIC8vIDkuIFJlcGVhdCwgd2hpbGUgayA8IGxlblxuICAgICAgICB3aGlsZSAoayA8IGxlbikge1xuICAgICAgICAgICAgLy8gYS4gTGV0IFBrIGJlIFRvU3RyaW5nKGspLlxuICAgICAgICAgICAgLy8gICBUaGlzIGlzIGltcGxpY2l0IGZvciBMSFMgb3BlcmFuZHMgb2YgdGhlIGluIG9wZXJhdG9yXG4gICAgICAgICAgICAvLyBiLiBMZXQga1ByZXNlbnQgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZVxuICAgICAgICAgICAgLy8gICAgSGFzUHJvcGVydHkgaW50ZXJuYWwgbWV0aG9kIG9mIG8gd2l0aCBhcmd1bWVudCBQay5cbiAgICAgICAgICAgIC8vICAgVGhpcyBzdGVwIGNhbiBiZSBjb21iaW5lZCB3aXRoIGNcbiAgICAgICAgICAgIC8vIGMuIElmIGtQcmVzZW50IGlzIHRydWUsIHRoZW5cbiAgICAgICAgICAgIC8vICAgIGkuICBMZXQgZWxlbWVudEsgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBHZXRcbiAgICAgICAgICAgIC8vICAgICAgICBpbnRlcm5hbCBtZXRob2Qgb2YgbyB3aXRoIHRoZSBhcmd1bWVudCBUb1N0cmluZyhrKS5cbiAgICAgICAgICAgIC8vICAgaWkuICBMZXQgc2FtZSBiZSB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZVxuICAgICAgICAgICAgLy8gICAgICAgIFN0cmljdCBFcXVhbGl0eSBDb21wYXJpc29uIEFsZ29yaXRobSB0b1xuICAgICAgICAgICAgLy8gICAgICAgIHNlYXJjaEVsZW1lbnQgYW5kIGVsZW1lbnRLLlxuICAgICAgICAgICAgLy8gIGlpaS4gIElmIHNhbWUgaXMgdHJ1ZSwgcmV0dXJuIGsuXG4gICAgICAgICAgICBpZiAoayBpbiBvICYmIG9ba10gPT09IHNlYXJjaEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGsrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbn1cbi8qIEBwcmVzZXJ2ZVxuICogVGhlIE1JVCBMaWNlbnNlIChNSVQpXG4gKiBcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IFBldGthIEFudG9ub3ZcbiAqIFxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICogXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKiBcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiAqIFRIRSBTT0ZUV0FSRS5cbiAqIFxuICovXG4vKipcbiAqIGJsdWViaXJkIGJ1aWxkIHZlcnNpb24gMy40LjZcbiAqIEZlYXR1cmVzIGVuYWJsZWQ6IGNvcmUsIHJhY2UsIGNhbGxfZ2V0LCBnZW5lcmF0b3JzLCBtYXAsIG5vZGVpZnksIHByb21pc2lmeSwgcHJvcHMsIHJlZHVjZSwgc2V0dGxlLCBzb21lLCB1c2luZywgdGltZXJzLCBmaWx0ZXIsIGFueSwgZWFjaFxuKi9cbiFmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIGY7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz9mPXdpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2Y9Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiYoZj1zZWxmKSxmLlByb21pc2U9ZSgpfX0oZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIF9kZXJlcV89PVwiZnVuY3Rpb25cIiYmX2RlcmVxXztpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgX2RlcmVxXz09XCJmdW5jdGlvblwiJiZfZGVyZXFfO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xudmFyIFNvbWVQcm9taXNlQXJyYXkgPSBQcm9taXNlLl9Tb21lUHJvbWlzZUFycmF5O1xuZnVuY3Rpb24gYW55KHByb21pc2VzKSB7XG4gICAgdmFyIHJldCA9IG5ldyBTb21lUHJvbWlzZUFycmF5KHByb21pc2VzKTtcbiAgICB2YXIgcHJvbWlzZSA9IHJldC5wcm9taXNlKCk7XG4gICAgcmV0LnNldEhvd01hbnkoMSk7XG4gICAgcmV0LnNldFVud3JhcCgpO1xuICAgIHJldC5pbml0KCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cblByb21pc2UuYW55ID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIGFueShwcm9taXNlcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5hbnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFueSh0aGlzKTtcbn07XG5cbn07XG5cbn0se31dLDI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgZmlyc3RMaW5lRXJyb3I7XG50cnkge3Rocm93IG5ldyBFcnJvcigpOyB9IGNhdGNoIChlKSB7Zmlyc3RMaW5lRXJyb3IgPSBlO31cbnZhciBzY2hlZHVsZSA9IF9kZXJlcV8oXCIuL3NjaGVkdWxlXCIpO1xudmFyIFF1ZXVlID0gX2RlcmVxXyhcIi4vcXVldWVcIik7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG5cbmZ1bmN0aW9uIEFzeW5jKCkge1xuICAgIHRoaXMuX2N1c3RvbVNjaGVkdWxlciA9IGZhbHNlO1xuICAgIHRoaXMuX2lzVGlja1VzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9sYXRlUXVldWUgPSBuZXcgUXVldWUoMTYpO1xuICAgIHRoaXMuX25vcm1hbFF1ZXVlID0gbmV3IFF1ZXVlKDE2KTtcbiAgICB0aGlzLl9oYXZlRHJhaW5lZFF1ZXVlcyA9IGZhbHNlO1xuICAgIHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkID0gdHJ1ZTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5kcmFpblF1ZXVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5fZHJhaW5RdWV1ZXMoKTtcbiAgICB9O1xuICAgIHRoaXMuX3NjaGVkdWxlID0gc2NoZWR1bGU7XG59XG5cbkFzeW5jLnByb3RvdHlwZS5zZXRTY2hlZHVsZXIgPSBmdW5jdGlvbihmbikge1xuICAgIHZhciBwcmV2ID0gdGhpcy5fc2NoZWR1bGU7XG4gICAgdGhpcy5fc2NoZWR1bGUgPSBmbjtcbiAgICB0aGlzLl9jdXN0b21TY2hlZHVsZXIgPSB0cnVlO1xuICAgIHJldHVybiBwcmV2O1xufTtcblxuQXN5bmMucHJvdG90eXBlLmhhc0N1c3RvbVNjaGVkdWxlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXN0b21TY2hlZHVsZXI7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuZW5hYmxlVHJhbXBvbGluZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkID0gdHJ1ZTtcbn07XG5cbkFzeW5jLnByb3RvdHlwZS5kaXNhYmxlVHJhbXBvbGluZUlmTmVjZXNzYXJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHV0aWwuaGFzRGV2VG9vbHMpIHtcbiAgICAgICAgdGhpcy5fdHJhbXBvbGluZUVuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuaGF2ZUl0ZW1zUXVldWVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1RpY2tVc2VkIHx8IHRoaXMuX2hhdmVEcmFpbmVkUXVldWVzO1xufTtcblxuXG5Bc3luYy5wcm90b3R5cGUuZmF0YWxFcnJvciA9IGZ1bmN0aW9uKGUsIGlzTm9kZSkge1xuICAgIGlmIChpc05vZGUpIHtcbiAgICAgICAgcHJvY2Vzcy5zdGRlcnIud3JpdGUoXCJGYXRhbCBcIiArIChlIGluc3RhbmNlb2YgRXJyb3IgPyBlLnN0YWNrIDogZSkgK1xuICAgICAgICAgICAgXCJcXG5cIik7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRocm93TGF0ZXIoZSk7XG4gICAgfVxufTtcblxuQXN5bmMucHJvdG90eXBlLnRocm93TGF0ZXIgPSBmdW5jdGlvbihmbiwgYXJnKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgYXJnID0gZm47XG4gICAgICAgIGZuID0gZnVuY3Rpb24gKCkgeyB0aHJvdyBhcmc7IH07XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm4oYXJnKTtcbiAgICAgICAgfSwgMCk7XG4gICAgfSBlbHNlIHRyeSB7XG4gICAgICAgIHRoaXMuX3NjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm4oYXJnKTtcbiAgICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhc3luYyBzY2hlZHVsZXIgYXZhaWxhYmxlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBBc3luY0ludm9rZUxhdGVyKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgdGhpcy5fbGF0ZVF1ZXVlLnB1c2goZm4sIHJlY2VpdmVyLCBhcmcpO1xuICAgIHRoaXMuX3F1ZXVlVGljaygpO1xufVxuXG5mdW5jdGlvbiBBc3luY0ludm9rZShmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgIHRoaXMuX25vcm1hbFF1ZXVlLnB1c2goZm4sIHJlY2VpdmVyLCBhcmcpO1xuICAgIHRoaXMuX3F1ZXVlVGljaygpO1xufVxuXG5mdW5jdGlvbiBBc3luY1NldHRsZVByb21pc2VzKHByb21pc2UpIHtcbiAgICB0aGlzLl9ub3JtYWxRdWV1ZS5fcHVzaE9uZShwcm9taXNlKTtcbiAgICB0aGlzLl9xdWV1ZVRpY2soKTtcbn1cblxuaWYgKCF1dGlsLmhhc0RldlRvb2xzKSB7XG4gICAgQXN5bmMucHJvdG90eXBlLmludm9rZUxhdGVyID0gQXN5bmNJbnZva2VMYXRlcjtcbiAgICBBc3luYy5wcm90b3R5cGUuaW52b2tlID0gQXN5bmNJbnZva2U7XG4gICAgQXN5bmMucHJvdG90eXBlLnNldHRsZVByb21pc2VzID0gQXN5bmNTZXR0bGVQcm9taXNlcztcbn0gZWxzZSB7XG4gICAgQXN5bmMucHJvdG90eXBlLmludm9rZUxhdGVyID0gZnVuY3Rpb24gKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgICAgIGlmICh0aGlzLl90cmFtcG9saW5lRW5hYmxlZCkge1xuICAgICAgICAgICAgQXN5bmNJbnZva2VMYXRlci5jYWxsKHRoaXMsIGZuLCByZWNlaXZlciwgYXJnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuLmNhbGwocmVjZWl2ZXIsIGFyZyk7XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIEFzeW5jLnByb3RvdHlwZS5pbnZva2UgPSBmdW5jdGlvbiAoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkKSB7XG4gICAgICAgICAgICBBc3luY0ludm9rZS5jYWxsKHRoaXMsIGZuLCByZWNlaXZlciwgYXJnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGZuLmNhbGwocmVjZWl2ZXIsIGFyZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBBc3luYy5wcm90b3R5cGUuc2V0dGxlUHJvbWlzZXMgPSBmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICAgIGlmICh0aGlzLl90cmFtcG9saW5lRW5hYmxlZCkge1xuICAgICAgICAgICAgQXN5bmNTZXR0bGVQcm9taXNlcy5jYWxsKHRoaXMsIHByb21pc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fc2V0dGxlUHJvbWlzZXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuQXN5bmMucHJvdG90eXBlLmludm9rZUZpcnN0ID0gZnVuY3Rpb24gKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgdGhpcy5fbm9ybWFsUXVldWUudW5zaGlmdChmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgdGhpcy5fcXVldWVUaWNrKCk7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuX2RyYWluUXVldWUgPSBmdW5jdGlvbihxdWV1ZSkge1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgoKSA+IDApIHtcbiAgICAgICAgdmFyIGZuID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBmbi5fc2V0dGxlUHJvbWlzZXMoKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZWNlaXZlciA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIHZhciBhcmcgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICBmbi5jYWxsKHJlY2VpdmVyLCBhcmcpO1xuICAgIH1cbn07XG5cbkFzeW5jLnByb3RvdHlwZS5fZHJhaW5RdWV1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fZHJhaW5RdWV1ZSh0aGlzLl9ub3JtYWxRdWV1ZSk7XG4gICAgdGhpcy5fcmVzZXQoKTtcbiAgICB0aGlzLl9oYXZlRHJhaW5lZFF1ZXVlcyA9IHRydWU7XG4gICAgdGhpcy5fZHJhaW5RdWV1ZSh0aGlzLl9sYXRlUXVldWUpO1xufTtcblxuQXN5bmMucHJvdG90eXBlLl9xdWV1ZVRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLl9pc1RpY2tVc2VkKSB7XG4gICAgICAgIHRoaXMuX2lzVGlja1VzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zY2hlZHVsZSh0aGlzLmRyYWluUXVldWVzKTtcbiAgICB9XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuX3Jlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2lzVGlja1VzZWQgPSBmYWxzZTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQXN5bmM7XG5tb2R1bGUuZXhwb3J0cy5maXJzdExpbmVFcnJvciA9IGZpcnN0TGluZUVycm9yO1xuXG59LHtcIi4vcXVldWVcIjoyNixcIi4vc2NoZWR1bGVcIjoyOSxcIi4vdXRpbFwiOjM2fV0sMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGRlYnVnKSB7XG52YXIgY2FsbGVkQmluZCA9IGZhbHNlO1xudmFyIHJlamVjdFRoaXMgPSBmdW5jdGlvbihfLCBlKSB7XG4gICAgdGhpcy5fcmVqZWN0KGUpO1xufTtcblxudmFyIHRhcmdldFJlamVjdGVkID0gZnVuY3Rpb24oZSwgY29udGV4dCkge1xuICAgIGNvbnRleHQucHJvbWlzZVJlamVjdGlvblF1ZXVlZCA9IHRydWU7XG4gICAgY29udGV4dC5iaW5kaW5nUHJvbWlzZS5fdGhlbihyZWplY3RUaGlzLCByZWplY3RUaGlzLCBudWxsLCB0aGlzLCBlKTtcbn07XG5cbnZhciBiaW5kaW5nUmVzb2x2ZWQgPSBmdW5jdGlvbih0aGlzQXJnLCBjb250ZXh0KSB7XG4gICAgaWYgKCgodGhpcy5fYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVDYWxsYmFjayhjb250ZXh0LnRhcmdldCk7XG4gICAgfVxufTtcblxudmFyIGJpbmRpbmdSZWplY3RlZCA9IGZ1bmN0aW9uKGUsIGNvbnRleHQpIHtcbiAgICBpZiAoIWNvbnRleHQucHJvbWlzZVJlamVjdGlvblF1ZXVlZCkgdGhpcy5fcmVqZWN0KGUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uICh0aGlzQXJnKSB7XG4gICAgaWYgKCFjYWxsZWRCaW5kKSB7XG4gICAgICAgIGNhbGxlZEJpbmQgPSB0cnVlO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fcHJvcGFnYXRlRnJvbSA9IGRlYnVnLnByb3BhZ2F0ZUZyb21GdW5jdGlvbigpO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fYm91bmRWYWx1ZSA9IGRlYnVnLmJvdW5kVmFsdWVGdW5jdGlvbigpO1xuICAgIH1cbiAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh0aGlzQXJnKTtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHJldC5fcHJvcGFnYXRlRnJvbSh0aGlzLCAxKTtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgcmV0Ll9zZXRCb3VuZFRvKG1heWJlUHJvbWlzZSk7XG4gICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7XG4gICAgICAgICAgICBwcm9taXNlUmVqZWN0aW9uUXVldWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHByb21pc2U6IHJldCxcbiAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICAgICAgYmluZGluZ1Byb21pc2U6IG1heWJlUHJvbWlzZVxuICAgICAgICB9O1xuICAgICAgICB0YXJnZXQuX3RoZW4oSU5URVJOQUwsIHRhcmdldFJlamVjdGVkLCB1bmRlZmluZWQsIHJldCwgY29udGV4dCk7XG4gICAgICAgIG1heWJlUHJvbWlzZS5fdGhlbihcbiAgICAgICAgICAgIGJpbmRpbmdSZXNvbHZlZCwgYmluZGluZ1JlamVjdGVkLCB1bmRlZmluZWQsIHJldCwgY29udGV4dCk7XG4gICAgICAgIHJldC5fc2V0T25DYW5jZWwobWF5YmVQcm9taXNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXQuX3Jlc29sdmVDYWxsYmFjayh0YXJnZXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldEJvdW5kVG8gPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAyMDk3MTUyO1xuICAgICAgICB0aGlzLl9ib3VuZFRvID0gb2JqO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjIwOTcxNTIpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0JvdW5kID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAyMDk3MTUyKSA9PT0gMjA5NzE1Mjtcbn07XG5cblByb21pc2UuYmluZCA9IGZ1bmN0aW9uICh0aGlzQXJnLCB2YWx1ZSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLmJpbmQodGhpc0FyZyk7XG59O1xufTtcblxufSx7fV0sNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBvbGQ7XG5pZiAodHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIpIG9sZCA9IFByb21pc2U7XG5mdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgIHRyeSB7IGlmIChQcm9taXNlID09PSBibHVlYmlyZCkgUHJvbWlzZSA9IG9sZDsgfVxuICAgIGNhdGNoIChlKSB7fVxuICAgIHJldHVybiBibHVlYmlyZDtcbn1cbnZhciBibHVlYmlyZCA9IF9kZXJlcV8oXCIuL3Byb21pc2VcIikoKTtcbmJsdWViaXJkLm5vQ29uZmxpY3QgPSBub0NvbmZsaWN0O1xubW9kdWxlLmV4cG9ydHMgPSBibHVlYmlyZDtcblxufSx7XCIuL3Byb21pc2VcIjoyMn1dLDU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgY3IgPSBPYmplY3QuY3JlYXRlO1xuaWYgKGNyKSB7XG4gICAgdmFyIGNhbGxlckNhY2hlID0gY3IobnVsbCk7XG4gICAgdmFyIGdldHRlckNhY2hlID0gY3IobnVsbCk7XG4gICAgY2FsbGVyQ2FjaGVbXCIgc2l6ZVwiXSA9IGdldHRlckNhY2hlW1wiIHNpemVcIl0gPSAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBjYW5FdmFsdWF0ZSA9IHV0aWwuY2FuRXZhbHVhdGU7XG52YXIgaXNJZGVudGlmaWVyID0gdXRpbC5pc0lkZW50aWZpZXI7XG5cbnZhciBnZXRNZXRob2RDYWxsZXI7XG52YXIgZ2V0R2V0dGVyO1xuaWYgKCF0cnVlKSB7XG52YXIgbWFrZU1ldGhvZENhbGxlciA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcImVuc3VyZU1ldGhvZFwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmopIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAndXNlIHN0cmljdCcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBlbnN1cmVNZXRob2Qob2JqLCAnbWV0aG9kTmFtZScpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBzd2l0Y2gobGVuKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUodGhpc1swXSk7ICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUodGhpc1swXSwgdGhpc1sxXSk7ICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUodGhpc1swXSwgdGhpc1sxXSwgdGhpc1syXSk7ICAgIFxcblxcXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gb2JqLm1ldGhvZE5hbWUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoubWV0aG9kTmFtZS5hcHBseShvYmosIHRoaXMpOyAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIFwiLnJlcGxhY2UoL21ldGhvZE5hbWUvZywgbWV0aG9kTmFtZSkpKGVuc3VyZU1ldGhvZCk7XG59O1xuXG52YXIgbWFrZUdldHRlciA9IGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUpIHtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwib2JqXCIsIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgJ3VzZSBzdHJpY3QnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgcmV0dXJuIG9iai5wcm9wZXJ0eU5hbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCIucmVwbGFjZShcInByb3BlcnR5TmFtZVwiLCBwcm9wZXJ0eU5hbWUpKTtcbn07XG5cbnZhciBnZXRDb21waWxlZCA9IGZ1bmN0aW9uKG5hbWUsIGNvbXBpbGVyLCBjYWNoZSkge1xuICAgIHZhciByZXQgPSBjYWNoZVtuYW1lXTtcbiAgICBpZiAodHlwZW9mIHJldCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGlmICghaXNJZGVudGlmaWVyKG5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXQgPSBjb21waWxlcihuYW1lKTtcbiAgICAgICAgY2FjaGVbbmFtZV0gPSByZXQ7XG4gICAgICAgIGNhY2hlW1wiIHNpemVcIl0rKztcbiAgICAgICAgaWYgKGNhY2hlW1wiIHNpemVcIl0gPiA1MTIpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoY2FjaGUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkgZGVsZXRlIGNhY2hlW2tleXNbaV1dO1xuICAgICAgICAgICAgY2FjaGVbXCIgc2l6ZVwiXSA9IGtleXMubGVuZ3RoIC0gMjU2O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5nZXRNZXRob2RDYWxsZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGdldENvbXBpbGVkKG5hbWUsIG1ha2VNZXRob2RDYWxsZXIsIGNhbGxlckNhY2hlKTtcbn07XG5cbmdldEdldHRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gZ2V0Q29tcGlsZWQobmFtZSwgbWFrZUdldHRlciwgZ2V0dGVyQ2FjaGUpO1xufTtcbn1cblxuZnVuY3Rpb24gZW5zdXJlTWV0aG9kKG9iaiwgbWV0aG9kTmFtZSkge1xuICAgIHZhciBmbjtcbiAgICBpZiAob2JqICE9IG51bGwpIGZuID0gb2JqW21ldGhvZE5hbWVdO1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgbWVzc2FnZSA9IFwiT2JqZWN0IFwiICsgdXRpbC5jbGFzc1N0cmluZyhvYmopICsgXCIgaGFzIG5vIG1ldGhvZCAnXCIgK1xuICAgICAgICAgICAgdXRpbC50b1N0cmluZyhtZXRob2ROYW1lKSArIFwiJ1wiO1xuICAgICAgICB0aHJvdyBuZXcgUHJvbWlzZS5UeXBlRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICAgIHJldHVybiBmbjtcbn1cblxuZnVuY3Rpb24gY2FsbGVyKG9iaikge1xuICAgIHZhciBtZXRob2ROYW1lID0gdGhpcy5wb3AoKTtcbiAgICB2YXIgZm4gPSBlbnN1cmVNZXRob2Qob2JqLCBtZXRob2ROYW1lKTtcbiAgICByZXR1cm4gZm4uYXBwbHkob2JqLCB0aGlzKTtcbn1cblByb21pc2UucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOztcbiAgICBpZiAoIXRydWUpIHtcbiAgICAgICAgaWYgKGNhbkV2YWx1YXRlKSB7XG4gICAgICAgICAgICB2YXIgbWF5YmVDYWxsZXIgPSBnZXRNZXRob2RDYWxsZXIobWV0aG9kTmFtZSk7XG4gICAgICAgICAgICBpZiAobWF5YmVDYWxsZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdGhlbihcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVDYWxsZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcmdzLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFyZ3MucHVzaChtZXRob2ROYW1lKTtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihjYWxsZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcmdzLCB1bmRlZmluZWQpO1xufTtcblxuZnVuY3Rpb24gbmFtZWRHZXR0ZXIob2JqKSB7XG4gICAgcmV0dXJuIG9ialt0aGlzXTtcbn1cbmZ1bmN0aW9uIGluZGV4ZWRHZXR0ZXIob2JqKSB7XG4gICAgdmFyIGluZGV4ID0gK3RoaXM7XG4gICAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSBNYXRoLm1heCgwLCBpbmRleCArIG9iai5sZW5ndGgpO1xuICAgIHJldHVybiBvYmpbaW5kZXhdO1xufVxuUHJvbWlzZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkge1xuICAgIHZhciBpc0luZGV4ID0gKHR5cGVvZiBwcm9wZXJ0eU5hbWUgPT09IFwibnVtYmVyXCIpO1xuICAgIHZhciBnZXR0ZXI7XG4gICAgaWYgKCFpc0luZGV4KSB7XG4gICAgICAgIGlmIChjYW5FdmFsdWF0ZSkge1xuICAgICAgICAgICAgdmFyIG1heWJlR2V0dGVyID0gZ2V0R2V0dGVyKHByb3BlcnR5TmFtZSk7XG4gICAgICAgICAgICBnZXR0ZXIgPSBtYXliZUdldHRlciAhPT0gbnVsbCA/IG1heWJlR2V0dGVyIDogbmFtZWRHZXR0ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZXR0ZXIgPSBuYW1lZEdldHRlcjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGdldHRlciA9IGluZGV4ZWRHZXR0ZXI7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90aGVuKGdldHRlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHByb3BlcnR5TmFtZSwgdW5kZWZpbmVkKTtcbn07XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24sIGRlYnVnKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciBhc3luYyA9IFByb21pc2UuX2FzeW5jO1xuXG5Qcm9taXNlLnByb3RvdHlwZVtcImJyZWFrXCJdID0gUHJvbWlzZS5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFkZWJ1Zy5jYW5jZWxsYXRpb24oKSkgcmV0dXJuIHRoaXMuX3dhcm4oXCJjYW5jZWxsYXRpb24gaXMgZGlzYWJsZWRcIik7XG5cbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdmFyIGNoaWxkID0gcHJvbWlzZTtcbiAgICB3aGlsZSAocHJvbWlzZS5faXNDYW5jZWxsYWJsZSgpKSB7XG4gICAgICAgIGlmICghcHJvbWlzZS5fY2FuY2VsQnkoY2hpbGQpKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQuX2lzRm9sbG93aW5nKCkpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hpbGQuX2NhbmNlbEJyYW5jaGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJlbnQgPSBwcm9taXNlLl9jYW5jZWxsYXRpb25QYXJlbnQ7XG4gICAgICAgIGlmIChwYXJlbnQgPT0gbnVsbCB8fCAhcGFyZW50Ll9pc0NhbmNlbGxhYmxlKCkpIHtcbiAgICAgICAgICAgIGlmIChwcm9taXNlLl9pc0ZvbGxvd2luZygpKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fZm9sbG93ZWUoKS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fY2FuY2VsQnJhbmNoZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHByb21pc2UuX2lzRm9sbG93aW5nKCkpIHByb21pc2UuX2ZvbGxvd2VlKCkuY2FuY2VsKCk7XG4gICAgICAgICAgICBwcm9taXNlLl9zZXRXaWxsQmVDYW5jZWxsZWQoKTtcbiAgICAgICAgICAgIGNoaWxkID0gcHJvbWlzZTtcbiAgICAgICAgICAgIHByb21pc2UgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fYnJhbmNoSGFzQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbC0tO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Vub3VnaEJyYW5jaGVzSGF2ZUNhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgdGhpcy5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA8PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NhbmNlbEJ5ID0gZnVuY3Rpb24oY2FuY2VsbGVyKSB7XG4gICAgaWYgKGNhbmNlbGxlciA9PT0gdGhpcykge1xuICAgICAgICB0aGlzLl9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gMDtcbiAgICAgICAgdGhpcy5faW52b2tlT25DYW5jZWwoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYnJhbmNoSGFzQ2FuY2VsbGVkKCk7XG4gICAgICAgIGlmICh0aGlzLl9lbm91Z2hCcmFuY2hlc0hhdmVDYW5jZWxsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5faW52b2tlT25DYW5jZWwoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9jYW5jZWxCcmFuY2hlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9lbm91Z2hCcmFuY2hlc0hhdmVDYW5jZWxsZWQoKSkge1xuICAgICAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9pc0NhbmNlbGxhYmxlKCkpIHJldHVybjtcbiAgICB0aGlzLl9zZXRDYW5jZWxsZWQoKTtcbiAgICBhc3luYy5pbnZva2UodGhpcy5fY2FuY2VsUHJvbWlzZXMsIHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2FuY2VsUHJvbWlzZXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fbGVuZ3RoKCkgPiAwKSB0aGlzLl9zZXR0bGVQcm9taXNlcygpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Vuc2V0T25DYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9vbkNhbmNlbEZpZWxkID0gdW5kZWZpbmVkO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzQ2FuY2VsbGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1BlbmRpbmcoKSAmJiAhdGhpcy5faXNDYW5jZWxsZWQoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzQ2FuY2VsbGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1BlbmRpbmcoKSAmJiAhdGhpcy5pc0NhbmNlbGxlZCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2RvSW52b2tlT25DYW5jZWwgPSBmdW5jdGlvbihvbkNhbmNlbENhbGxiYWNrLCBpbnRlcm5hbE9ubHkpIHtcbiAgICBpZiAodXRpbC5pc0FycmF5KG9uQ2FuY2VsQ2FsbGJhY2spKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb25DYW5jZWxDYWxsYmFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fZG9JbnZva2VPbkNhbmNlbChvbkNhbmNlbENhbGxiYWNrW2ldLCBpbnRlcm5hbE9ubHkpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChvbkNhbmNlbENhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvbkNhbmNlbENhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGlmICghaW50ZXJuYWxPbmx5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0cnlDYXRjaChvbkNhbmNlbENhbGxiYWNrKS5jYWxsKHRoaXMuX2JvdW5kVmFsdWUoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGUgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F0dGFjaEV4dHJhVHJhY2UoZS5lKTtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlLmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uQ2FuY2VsQ2FsbGJhY2suX3Jlc3VsdENhbmNlbGxlZCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pbnZva2VPbkNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbkNhbmNlbENhbGxiYWNrID0gdGhpcy5fb25DYW5jZWwoKTtcbiAgICB0aGlzLl91bnNldE9uQ2FuY2VsKCk7XG4gICAgYXN5bmMuaW52b2tlKHRoaXMuX2RvSW52b2tlT25DYW5jZWwsIHRoaXMsIG9uQ2FuY2VsQ2FsbGJhY2spO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2ludm9rZUludGVybmFsT25DYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNDYW5jZWxsYWJsZSgpKSB7XG4gICAgICAgIHRoaXMuX2RvSW52b2tlT25DYW5jZWwodGhpcy5fb25DYW5jZWwoKSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuX3Vuc2V0T25DYW5jZWwoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jYW5jZWwoKTtcbn07XG5cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSw3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihORVhUX0ZJTFRFUikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGdldEtleXMgPSBfZGVyZXFfKFwiLi9lczVcIikua2V5cztcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xuXG5mdW5jdGlvbiBjYXRjaEZpbHRlcihpbnN0YW5jZXMsIGNiLCBwcm9taXNlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGJvdW5kVG8gPSBwcm9taXNlLl9ib3VuZFZhbHVlKCk7XG4gICAgICAgIHByZWRpY2F0ZUxvb3A6IGZvciAodmFyIGkgPSAwOyBpIDwgaW5zdGFuY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGluc3RhbmNlc1tpXTtcblxuICAgICAgICAgICAgaWYgKGl0ZW0gPT09IEVycm9yIHx8XG4gICAgICAgICAgICAgICAgKGl0ZW0gIT0gbnVsbCAmJiBpdGVtLnByb3RvdHlwZSBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ5Q2F0Y2goY2IpLmNhbGwoYm91bmRUbywgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoZXNQcmVkaWNhdGUgPSB0cnlDYXRjaChpdGVtKS5jYWxsKGJvdW5kVG8sIGUpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzUHJlZGljYXRlID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlc1ByZWRpY2F0ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoZXNQcmVkaWNhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyeUNhdGNoKGNiKS5jYWxsKGJvdW5kVG8sIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXRpbC5pc09iamVjdChlKSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gZ2V0S2V5cyhpdGVtKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbal07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtW2tleV0gIT0gZVtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBwcmVkaWNhdGVMb29wO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnlDYXRjaChjYikuY2FsbChib3VuZFRvLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTkVYVF9GSUxURVI7XG4gICAgfTtcbn1cblxucmV0dXJuIGNhdGNoRmlsdGVyO1xufTtcblxufSx7XCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSw4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlKSB7XG52YXIgbG9uZ1N0YWNrVHJhY2VzID0gZmFsc2U7XG52YXIgY29udGV4dFN0YWNrID0gW107XG5cblByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZCA9IGZ1bmN0aW9uKCkge307XG5Qcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBmdW5jdGlvbigpIHtyZXR1cm4gbnVsbDt9O1xuUHJvbWlzZS5fcGVla0NvbnRleHQgPSBQcm9taXNlLnByb3RvdHlwZS5fcGVla0NvbnRleHQgPSBmdW5jdGlvbigpIHt9O1xuXG5mdW5jdGlvbiBDb250ZXh0KCkge1xuICAgIHRoaXMuX3RyYWNlID0gbmV3IENvbnRleHQuQ2FwdHVyZWRUcmFjZShwZWVrQ29udGV4dCgpKTtcbn1cbkNvbnRleHQucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl90cmFjZS5fcHJvbWlzZUNyZWF0ZWQgPSBudWxsO1xuICAgICAgICBjb250ZXh0U3RhY2sucHVzaCh0aGlzLl90cmFjZSk7XG4gICAgfVxufTtcblxuQ29udGV4dC5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3RyYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHRyYWNlID0gY29udGV4dFN0YWNrLnBvcCgpO1xuICAgICAgICB2YXIgcmV0ID0gdHJhY2UuX3Byb21pc2VDcmVhdGVkO1xuICAgICAgICB0cmFjZS5fcHJvbWlzZUNyZWF0ZWQgPSBudWxsO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbnRleHQoKSB7XG4gICAgaWYgKGxvbmdTdGFja1RyYWNlcykgcmV0dXJuIG5ldyBDb250ZXh0KCk7XG59XG5cbmZ1bmN0aW9uIHBlZWtDb250ZXh0KCkge1xuICAgIHZhciBsYXN0SW5kZXggPSBjb250ZXh0U3RhY2subGVuZ3RoIC0gMTtcbiAgICBpZiAobGFzdEluZGV4ID49IDApIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHRTdGFja1tsYXN0SW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuQ29udGV4dC5DYXB0dXJlZFRyYWNlID0gbnVsbDtcbkNvbnRleHQuY3JlYXRlID0gY3JlYXRlQ29udGV4dDtcbkNvbnRleHQuZGVhY3RpdmF0ZUxvbmdTdGFja1RyYWNlcyA9IGZ1bmN0aW9uKCkge307XG5Db250ZXh0LmFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIFByb21pc2VfcHVzaENvbnRleHQgPSBQcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfcG9wQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wb3BDb250ZXh0O1xuICAgIHZhciBQcm9taXNlX1BlZWtDb250ZXh0ID0gUHJvbWlzZS5fcGVla0NvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfcGVla0NvbnRleHQgPSBQcm9taXNlLnByb3RvdHlwZS5fcGVla0NvbnRleHQ7XG4gICAgdmFyIFByb21pc2VfcHJvbWlzZUNyZWF0ZWQgPSBQcm9taXNlLnByb3RvdHlwZS5fcHJvbWlzZUNyZWF0ZWQ7XG4gICAgQ29udGV4dC5kZWFjdGl2YXRlTG9uZ1N0YWNrVHJhY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IFByb21pc2VfcHVzaENvbnRleHQ7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wb3BDb250ZXh0ID0gUHJvbWlzZV9wb3BDb250ZXh0O1xuICAgICAgICBQcm9taXNlLl9wZWVrQ29udGV4dCA9IFByb21pc2VfUGVla0NvbnRleHQ7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dCA9IFByb21pc2VfcGVla0NvbnRleHQ7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZCA9IFByb21pc2VfcHJvbWlzZUNyZWF0ZWQ7XG4gICAgICAgIGxvbmdTdGFja1RyYWNlcyA9IGZhbHNlO1xuICAgIH07XG4gICAgbG9uZ1N0YWNrVHJhY2VzID0gdHJ1ZTtcbiAgICBQcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQgPSBDb250ZXh0LnByb3RvdHlwZS5fcHVzaENvbnRleHQ7XG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX3BvcENvbnRleHQgPSBDb250ZXh0LnByb3RvdHlwZS5fcG9wQ29udGV4dDtcbiAgICBQcm9taXNlLl9wZWVrQ29udGV4dCA9IFByb21pc2UucHJvdG90eXBlLl9wZWVrQ29udGV4dCA9IHBlZWtDb250ZXh0O1xuICAgIFByb21pc2UucHJvdG90eXBlLl9wcm9taXNlQ3JlYXRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3R4ID0gdGhpcy5fcGVla0NvbnRleHQoKTtcbiAgICAgICAgaWYgKGN0eCAmJiBjdHguX3Byb21pc2VDcmVhdGVkID09IG51bGwpIGN0eC5fcHJvbWlzZUNyZWF0ZWQgPSB0aGlzO1xuICAgIH07XG59O1xucmV0dXJuIENvbnRleHQ7XG59O1xuXG59LHt9XSw5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBDb250ZXh0KSB7XG52YXIgZ2V0RG9tYWluID0gUHJvbWlzZS5fZ2V0RG9tYWluO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG52YXIgV2FybmluZyA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKS5XYXJuaW5nO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGNhbkF0dGFjaFRyYWNlID0gdXRpbC5jYW5BdHRhY2hUcmFjZTtcbnZhciB1bmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkO1xudmFyIHBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uO1xudmFyIGJsdWViaXJkRnJhbWVQYXR0ZXJuID1cbiAgICAvW1xcXFxcXC9dYmx1ZWJpcmRbXFxcXFxcL11qc1tcXFxcXFwvXShyZWxlYXNlfGRlYnVnfGluc3RydW1lbnRlZCkvO1xudmFyIG5vZGVGcmFtZVBhdHRlcm4gPSAvXFwoKD86dGltZXJzXFwuanMpOlxcZCs6XFxkK1xcKS87XG52YXIgcGFyc2VMaW5lUGF0dGVybiA9IC9bXFwvPFxcKF0oLis/KTooXFxkKyk6KFxcZCspXFwpP1xccyokLztcbnZhciBzdGFja0ZyYW1lUGF0dGVybiA9IG51bGw7XG52YXIgZm9ybWF0U3RhY2sgPSBudWxsO1xudmFyIGluZGVudFN0YWNrRnJhbWVzID0gZmFsc2U7XG52YXIgcHJpbnRXYXJuaW5nO1xudmFyIGRlYnVnZ2luZyA9ICEhKHV0aWwuZW52KFwiQkxVRUJJUkRfREVCVUdcIikgIT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHRydWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLmVudihcIkJMVUVCSVJEX0RFQlVHXCIpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5lbnYoXCJOT0RFX0VOVlwiKSA9PT0gXCJkZXZlbG9wbWVudFwiKSk7XG5cbnZhciB3YXJuaW5ncyA9ICEhKHV0aWwuZW52KFwiQkxVRUJJUkRfV0FSTklOR1NcIikgIT0gMCAmJlxuICAgIChkZWJ1Z2dpbmcgfHwgdXRpbC5lbnYoXCJCTFVFQklSRF9XQVJOSU5HU1wiKSkpO1xuXG52YXIgbG9uZ1N0YWNrVHJhY2VzID0gISEodXRpbC5lbnYoXCJCTFVFQklSRF9MT05HX1NUQUNLX1RSQUNFU1wiKSAhPSAwICYmXG4gICAgKGRlYnVnZ2luZyB8fCB1dGlsLmVudihcIkJMVUVCSVJEX0xPTkdfU1RBQ0tfVFJBQ0VTXCIpKSk7XG5cbnZhciB3Rm9yZ290dGVuUmV0dXJuID0gdXRpbC5lbnYoXCJCTFVFQklSRF9XX0ZPUkdPVFRFTl9SRVRVUk5cIikgIT0gMCAmJlxuICAgICh3YXJuaW5ncyB8fCAhIXV0aWwuZW52KFwiQkxVRUJJUkRfV19GT1JHT1RURU5fUkVUVVJOXCIpKTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIHRhcmdldC5fYml0RmllbGQgPSAoKHRhcmdldC5fYml0RmllbGQgJiAofjEwNDg1NzYpKSB8XG4gICAgICAgICAgICAgICAgICAgICAgNTI0Mjg4KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9lbnN1cmVQb3NzaWJsZVJlamVjdGlvbkhhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCh0aGlzLl9iaXRGaWVsZCAmIDUyNDI4OCkgIT09IDApIHJldHVybjtcbiAgICB0aGlzLl9zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgIGFzeW5jLmludm9rZUxhdGVyKHRoaXMuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbiwgdGhpcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb25Jc0hhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZmlyZVJlamVjdGlvbkV2ZW50KFwicmVqZWN0aW9uSGFuZGxlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQsIHVuZGVmaW5lZCwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0UmV0dXJuZWROb25VbmRlZmluZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMjY4NDM1NDU2O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JldHVybmVkTm9uVW5kZWZpbmVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDI2ODQzNTQ1NikgIT09IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbm90aWZ5VW5oYW5kbGVkUmVqZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc1JlamVjdGlvblVuaGFuZGxlZCgpKSB7XG4gICAgICAgIHZhciByZWFzb24gPSB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbiAgICAgICAgdGhpcy5fc2V0VW5oYW5kbGVkUmVqZWN0aW9uSXNOb3RpZmllZCgpO1xuICAgICAgICBmaXJlUmVqZWN0aW9uRXZlbnQoXCJ1bmhhbmRsZWRSZWplY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24sIHJlYXNvbiwgdGhpcyk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDI2MjE0NDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCAmICh+MjYyMTQ0KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc1VuaGFuZGxlZFJlamVjdGlvbk5vdGlmaWVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAyNjIxNDQpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMTA0ODU3Njtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjEwNDg1NzYpO1xuICAgIGlmICh0aGlzLl9pc1VuaGFuZGxlZFJlamVjdGlvbk5vdGlmaWVkKCkpIHtcbiAgICAgICAgdGhpcy5fdW5zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkKCk7XG4gICAgICAgIHRoaXMuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbklzSGFuZGxlZCgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc1JlamVjdGlvblVuaGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMTA0ODU3NikgPiAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3dhcm4gPSBmdW5jdGlvbihtZXNzYWdlLCBzaG91bGRVc2VPd25UcmFjZSwgcHJvbWlzZSkge1xuICAgIHJldHVybiB3YXJuKG1lc3NhZ2UsIHNob3VsZFVzZU93blRyYWNlLCBwcm9taXNlIHx8IHRoaXMpO1xufTtcblxuUHJvbWlzZS5vblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIHBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uID1cbiAgICAgICAgdHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIgPyAoZG9tYWluID09PSBudWxsID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4gOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBmbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbn07XG5cblByb21pc2Uub25VbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgdmFyIGRvbWFpbiA9IGdldERvbWFpbigpO1xuICAgIHVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQgPVxuICAgICAgICB0eXBlb2YgZm4gPT09IFwiZnVuY3Rpb25cIiA/IChkb21haW4gPT09IG51bGwgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIGZuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xufTtcblxudmFyIGRpc2FibGVMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5sb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFzeW5jLmhhdmVJdGVtc1F1ZXVlZCgpICYmICFjb25maWcubG9uZ1N0YWNrVHJhY2VzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbm5vdCBlbmFibGUgbG9uZyBzdGFjayB0cmFjZXMgYWZ0ZXIgcHJvbWlzZXMgaGF2ZSBiZWVuIGNyZWF0ZWRcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICBpZiAoIWNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICB2YXIgUHJvbWlzZV9jYXB0dXJlU3RhY2tUcmFjZSA9IFByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZTtcbiAgICAgICAgdmFyIFByb21pc2VfYXR0YWNoRXh0cmFUcmFjZSA9IFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hFeHRyYVRyYWNlO1xuICAgICAgICBjb25maWcubG9uZ1N0YWNrVHJhY2VzID0gdHJ1ZTtcbiAgICAgICAgZGlzYWJsZUxvbmdTdGFja1RyYWNlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGFzeW5jLmhhdmVJdGVtc1F1ZXVlZCgpICYmICFjb25maWcubG9uZ1N0YWNrVHJhY2VzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2Fubm90IGVuYWJsZSBsb25nIHN0YWNrIHRyYWNlcyBhZnRlciBwcm9taXNlcyBoYXZlIGJlZW4gY3JlYXRlZFxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fY2FwdHVyZVN0YWNrVHJhY2UgPSBQcm9taXNlX2NhcHR1cmVTdGFja1RyYWNlO1xuICAgICAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2UgPSBQcm9taXNlX2F0dGFjaEV4dHJhVHJhY2U7XG4gICAgICAgICAgICBDb250ZXh0LmRlYWN0aXZhdGVMb25nU3RhY2tUcmFjZXMoKTtcbiAgICAgICAgICAgIGFzeW5jLmVuYWJsZVRyYW1wb2xpbmUoKTtcbiAgICAgICAgICAgIGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2NhcHR1cmVTdGFja1RyYWNlID0gbG9uZ1N0YWNrVHJhY2VzQ2FwdHVyZVN0YWNrVHJhY2U7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hFeHRyYVRyYWNlID0gbG9uZ1N0YWNrVHJhY2VzQXR0YWNoRXh0cmFUcmFjZTtcbiAgICAgICAgQ29udGV4dC5hY3RpdmF0ZUxvbmdTdGFja1RyYWNlcygpO1xuICAgICAgICBhc3luYy5kaXNhYmxlVHJhbXBvbGluZUlmTmVjZXNzYXJ5KCk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5oYXNMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKTtcbn07XG5cbnZhciBmaXJlRG9tRXZlbnQgPSAoZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBDdXN0b21FdmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJDdXN0b21FdmVudFwiKTtcbiAgICAgICAgICAgIHV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KG5hbWUudG9Mb3dlckNhc2UoKSwge1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF1dGlsLmdsb2JhbC5kaXNwYXRjaEV2ZW50KGRvbUV2ZW50KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIEV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudChcIkN1c3RvbUV2ZW50XCIpO1xuICAgICAgICAgICAgdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obmFtZSwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9tRXZlbnQgPSBuZXcgRXZlbnQobmFtZS50b0xvd2VyQ2FzZSgpLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkb21FdmVudC5kZXRhaWwgPSBldmVudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZG9tRXZlbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7XG4gICAgICAgICAgICBldmVudC5pbml0Q3VzdG9tRXZlbnQoXCJ0ZXN0aW5ndGhlZXZlbnRcIiwgZmFsc2UsIHRydWUsIHt9KTtcbiAgICAgICAgICAgIHV0aWwuZ2xvYmFsLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvbUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTtcbiAgICAgICAgICAgICAgICBkb21FdmVudC5pbml0Q3VzdG9tRXZlbnQobmFtZS50b0xvd2VyQ2FzZSgpLCBmYWxzZSwgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiAhdXRpbC5nbG9iYWwuZGlzcGF0Y2hFdmVudChkb21FdmVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufSkoKTtcblxudmFyIGZpcmVHbG9iYWxFdmVudCA9IChmdW5jdGlvbigpIHtcbiAgICBpZiAodXRpbC5pc05vZGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3MuZW1pdC5hcHBseShwcm9jZXNzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdXRpbC5nbG9iYWwpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IFwib25cIiArIG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSB1dGlsLmdsb2JhbFttZXRob2ROYW1lXTtcbiAgICAgICAgICAgIGlmICghbWV0aG9kKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBtZXRob2QuYXBwbHkodXRpbC5nbG9iYWwsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdChuYW1lLCBwcm9taXNlKSB7XG4gICAgcmV0dXJuIHtwcm9taXNlOiBwcm9taXNlfTtcbn1cblxudmFyIGV2ZW50VG9PYmplY3RHZW5lcmF0b3IgPSB7XG4gICAgcHJvbWlzZUNyZWF0ZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VGdWxmaWxsZWQ6IGdlbmVyYXRlUHJvbWlzZUxpZmVjeWNsZUV2ZW50T2JqZWN0LFxuICAgIHByb21pc2VSZWplY3RlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3QsXG4gICAgcHJvbWlzZVJlc29sdmVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlQ2FuY2VsbGVkOiBnZW5lcmF0ZVByb21pc2VMaWZlY3ljbGVFdmVudE9iamVjdCxcbiAgICBwcm9taXNlQ2hhaW5lZDogZnVuY3Rpb24obmFtZSwgcHJvbWlzZSwgY2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIHtwcm9taXNlOiBwcm9taXNlLCBjaGlsZDogY2hpbGR9O1xuICAgIH0sXG4gICAgd2FybmluZzogZnVuY3Rpb24obmFtZSwgd2FybmluZykge1xuICAgICAgICByZXR1cm4ge3dhcm5pbmc6IHdhcm5pbmd9O1xuICAgIH0sXG4gICAgdW5oYW5kbGVkUmVqZWN0aW9uOiBmdW5jdGlvbiAobmFtZSwgcmVhc29uLCBwcm9taXNlKSB7XG4gICAgICAgIHJldHVybiB7cmVhc29uOiByZWFzb24sIHByb21pc2U6IHByb21pc2V9O1xuICAgIH0sXG4gICAgcmVqZWN0aW9uSGFuZGxlZDogZ2VuZXJhdGVQcm9taXNlTGlmZWN5Y2xlRXZlbnRPYmplY3Rcbn07XG5cbnZhciBhY3RpdmVGaXJlRXZlbnQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBnbG9iYWxFdmVudEZpcmVkID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgZ2xvYmFsRXZlbnRGaXJlZCA9IGZpcmVHbG9iYWxFdmVudC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlKTtcbiAgICAgICAgZ2xvYmFsRXZlbnRGaXJlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGRvbUV2ZW50RmlyZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBkb21FdmVudEZpcmVkID0gZmlyZURvbUV2ZW50KG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VG9PYmplY3RHZW5lcmF0b3JbbmFtZV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUpO1xuICAgICAgICBkb21FdmVudEZpcmVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tRXZlbnRGaXJlZCB8fCBnbG9iYWxFdmVudEZpcmVkO1xufTtcblxuUHJvbWlzZS5jb25maWcgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgb3B0cyA9IE9iamVjdChvcHRzKTtcbiAgICBpZiAoXCJsb25nU3RhY2tUcmFjZXNcIiBpbiBvcHRzKSB7XG4gICAgICAgIGlmIChvcHRzLmxvbmdTdGFja1RyYWNlcykge1xuICAgICAgICAgICAgUHJvbWlzZS5sb25nU3RhY2tUcmFjZXMoKTtcbiAgICAgICAgfSBlbHNlIGlmICghb3B0cy5sb25nU3RhY2tUcmFjZXMgJiYgUHJvbWlzZS5oYXNMb25nU3RhY2tUcmFjZXMoKSkge1xuICAgICAgICAgICAgZGlzYWJsZUxvbmdTdGFja1RyYWNlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChcIndhcm5pbmdzXCIgaW4gb3B0cykge1xuICAgICAgICB2YXIgd2FybmluZ3NPcHRpb24gPSBvcHRzLndhcm5pbmdzO1xuICAgICAgICBjb25maWcud2FybmluZ3MgPSAhIXdhcm5pbmdzT3B0aW9uO1xuICAgICAgICB3Rm9yZ290dGVuUmV0dXJuID0gY29uZmlnLndhcm5pbmdzO1xuXG4gICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KHdhcm5pbmdzT3B0aW9uKSkge1xuICAgICAgICAgICAgaWYgKFwid0ZvcmdvdHRlblJldHVyblwiIGluIHdhcm5pbmdzT3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgd0ZvcmdvdHRlblJldHVybiA9ICEhd2FybmluZ3NPcHRpb24ud0ZvcmdvdHRlblJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoXCJjYW5jZWxsYXRpb25cIiBpbiBvcHRzICYmIG9wdHMuY2FuY2VsbGF0aW9uICYmICFjb25maWcuY2FuY2VsbGF0aW9uKSB7XG4gICAgICAgIGlmIChhc3luYy5oYXZlSXRlbXNRdWV1ZWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIFwiY2Fubm90IGVuYWJsZSBjYW5jZWxsYXRpb24gYWZ0ZXIgcHJvbWlzZXMgYXJlIGluIHVzZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fY2xlYXJDYW5jZWxsYXRpb25EYXRhID1cbiAgICAgICAgICAgIGNhbmNlbGxhdGlvbkNsZWFyQ2FuY2VsbGF0aW9uRGF0YTtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tO1xuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS5fb25DYW5jZWwgPSBjYW5jZWxsYXRpb25PbkNhbmNlbDtcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX3NldE9uQ2FuY2VsID0gY2FuY2VsbGF0aW9uU2V0T25DYW5jZWw7XG4gICAgICAgIFByb21pc2UucHJvdG90eXBlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayA9XG4gICAgICAgICAgICBjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjaztcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBjYW5jZWxsYXRpb25FeGVjdXRlO1xuICAgICAgICBwcm9wYWdhdGVGcm9tRnVuY3Rpb24gPSBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tO1xuICAgICAgICBjb25maWcuY2FuY2VsbGF0aW9uID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKFwibW9uaXRvcmluZ1wiIGluIG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMubW9uaXRvcmluZyAmJiAhY29uZmlnLm1vbml0b3JpbmcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5tb25pdG9yaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBhY3RpdmVGaXJlRXZlbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAoIW9wdHMubW9uaXRvcmluZyAmJiBjb25maWcubW9uaXRvcmluZykge1xuICAgICAgICAgICAgY29uZmlnLm1vbml0b3JpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIFByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBkZWZhdWx0RmlyZUV2ZW50O1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZnVuY3Rpb24gZGVmYXVsdEZpcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG5cblByb21pc2UucHJvdG90eXBlLl9maXJlRXZlbnQgPSBkZWZhdWx0RmlyZUV2ZW50O1xuUHJvbWlzZS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBmdW5jdGlvbihleGVjdXRvciwgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn07XG5Qcm9taXNlLnByb3RvdHlwZS5fb25DYW5jZWwgPSBmdW5jdGlvbiAoKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9zZXRPbkNhbmNlbCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7IDsgfTtcblByb21pc2UucHJvdG90eXBlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uKG9uQ2FuY2VsKSB7XG4gICAgO1xufTtcblByb21pc2UucHJvdG90eXBlLl9jYXB0dXJlU3RhY2tUcmFjZSA9IGZ1bmN0aW9uICgpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2UgPSBmdW5jdGlvbiAoKSB7fTtcblByb21pc2UucHJvdG90eXBlLl9jbGVhckNhbmNlbGxhdGlvbkRhdGEgPSBmdW5jdGlvbigpIHt9O1xuUHJvbWlzZS5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb20gPSBmdW5jdGlvbiAocGFyZW50LCBmbGFncykge1xuICAgIDtcbiAgICA7XG59O1xuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25FeGVjdXRlKGV4ZWN1dG9yLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0LCBmdW5jdGlvbihvbkNhbmNlbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbkNhbmNlbCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIm9uQ2FuY2VsIG11c3QgYmUgYSBmdW5jdGlvbiwgZ290OiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLnRvU3RyaW5nKG9uQ2FuY2VsKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhvbkNhbmNlbCk7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25BdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhvbkNhbmNlbCkge1xuICAgIGlmICghdGhpcy5faXNDYW5jZWxsYWJsZSgpKSByZXR1cm4gdGhpcztcblxuICAgIHZhciBwcmV2aW91c09uQ2FuY2VsID0gdGhpcy5fb25DYW5jZWwoKTtcbiAgICBpZiAocHJldmlvdXNPbkNhbmNlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh1dGlsLmlzQXJyYXkocHJldmlvdXNPbkNhbmNlbCkpIHtcbiAgICAgICAgICAgIHByZXZpb3VzT25DYW5jZWwucHVzaChvbkNhbmNlbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRPbkNhbmNlbChbcHJldmlvdXNPbkNhbmNlbCwgb25DYW5jZWxdKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3NldE9uQ2FuY2VsKG9uQ2FuY2VsKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNhbmNlbGxhdGlvbk9uQ2FuY2VsKCkge1xuICAgIHJldHVybiB0aGlzLl9vbkNhbmNlbEZpZWxkO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25TZXRPbkNhbmNlbChvbkNhbmNlbCkge1xuICAgIHRoaXMuX29uQ2FuY2VsRmllbGQgPSBvbkNhbmNlbDtcbn1cblxuZnVuY3Rpb24gY2FuY2VsbGF0aW9uQ2xlYXJDYW5jZWxsYXRpb25EYXRhKCkge1xuICAgIHRoaXMuX2NhbmNlbGxhdGlvblBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9vbkNhbmNlbEZpZWxkID0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxsYXRpb25Qcm9wYWdhdGVGcm9tKHBhcmVudCwgZmxhZ3MpIHtcbiAgICBpZiAoKGZsYWdzICYgMSkgIT09IDApIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsbGF0aW9uUGFyZW50ID0gcGFyZW50O1xuICAgICAgICB2YXIgYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA9IHBhcmVudC5fYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbDtcbiAgICAgICAgaWYgKGJyYW5jaGVzUmVtYWluaW5nVG9DYW5jZWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50Ll9icmFuY2hlc1JlbWFpbmluZ1RvQ2FuY2VsID0gYnJhbmNoZXNSZW1haW5pbmdUb0NhbmNlbCArIDE7XG4gICAgfVxuICAgIGlmICgoZmxhZ3MgJiAyKSAhPT0gMCAmJiBwYXJlbnQuX2lzQm91bmQoKSkge1xuICAgICAgICB0aGlzLl9zZXRCb3VuZFRvKHBhcmVudC5fYm91bmRUbyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBiaW5kaW5nUHJvcGFnYXRlRnJvbShwYXJlbnQsIGZsYWdzKSB7XG4gICAgaWYgKChmbGFncyAmIDIpICE9PSAwICYmIHBhcmVudC5faXNCb3VuZCgpKSB7XG4gICAgICAgIHRoaXMuX3NldEJvdW5kVG8ocGFyZW50Ll9ib3VuZFRvKTtcbiAgICB9XG59XG52YXIgcHJvcGFnYXRlRnJvbUZ1bmN0aW9uID0gYmluZGluZ1Byb3BhZ2F0ZUZyb207XG5cbmZ1bmN0aW9uIGJvdW5kVmFsdWVGdW5jdGlvbigpIHtcbiAgICB2YXIgcmV0ID0gdGhpcy5fYm91bmRUbztcbiAgICBpZiAocmV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHJldCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXQuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXQudmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBsb25nU3RhY2tUcmFjZXNDYXB0dXJlU3RhY2tUcmFjZSgpIHtcbiAgICB0aGlzLl90cmFjZSA9IG5ldyBDYXB0dXJlZFRyYWNlKHRoaXMuX3BlZWtDb250ZXh0KCkpO1xufVxuXG5mdW5jdGlvbiBsb25nU3RhY2tUcmFjZXNBdHRhY2hFeHRyYVRyYWNlKGVycm9yLCBpZ25vcmVTZWxmKSB7XG4gICAgaWYgKGNhbkF0dGFjaFRyYWNlKGVycm9yKSkge1xuICAgICAgICB2YXIgdHJhY2UgPSB0aGlzLl90cmFjZTtcbiAgICAgICAgaWYgKHRyYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChpZ25vcmVTZWxmKSB0cmFjZSA9IHRyYWNlLl9wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRyYWNlLmF0dGFjaEV4dHJhVHJhY2UoZXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKCFlcnJvci5fX3N0YWNrQ2xlYW5lZF9fKSB7XG4gICAgICAgICAgICB2YXIgcGFyc2VkID0gcGFyc2VTdGFja0FuZE1lc3NhZ2UoZXJyb3IpO1xuICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChlcnJvciwgXCJzdGFja1wiLFxuICAgICAgICAgICAgICAgIHBhcnNlZC5tZXNzYWdlICsgXCJcXG5cIiArIHBhcnNlZC5zdGFjay5qb2luKFwiXFxuXCIpKTtcbiAgICAgICAgICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AoZXJyb3IsIFwiX19zdGFja0NsZWFuZWRfX1wiLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKHJldHVyblZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgbmFtZSwgcHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQpIHtcbiAgICBpZiAocmV0dXJuVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBwcm9taXNlQ3JlYXRlZCAhPT0gbnVsbCAmJlxuICAgICAgICB3Rm9yZ290dGVuUmV0dXJuKSB7XG4gICAgICAgIGlmIChwYXJlbnQgIT09IHVuZGVmaW5lZCAmJiBwYXJlbnQuX3JldHVybmVkTm9uVW5kZWZpbmVkKCkpIHJldHVybjtcbiAgICAgICAgaWYgKChwcm9taXNlLl9iaXRGaWVsZCAmIDY1NTM1KSA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChuYW1lKSBuYW1lID0gbmFtZSArIFwiIFwiO1xuICAgICAgICB2YXIgaGFuZGxlckxpbmUgPSBcIlwiO1xuICAgICAgICB2YXIgY3JlYXRvckxpbmUgPSBcIlwiO1xuICAgICAgICBpZiAocHJvbWlzZUNyZWF0ZWQuX3RyYWNlKSB7XG4gICAgICAgICAgICB2YXIgdHJhY2VMaW5lcyA9IHByb21pc2VDcmVhdGVkLl90cmFjZS5zdGFjay5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgICAgIHZhciBzdGFjayA9IGNsZWFuU3RhY2sodHJhY2VMaW5lcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZUZyYW1lUGF0dGVybi50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5lTWF0Y2hlcyA9IGxpbmUubWF0Y2gocGFyc2VMaW5lUGF0dGVybik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lTWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlckxpbmUgID0gXCJhdCBcIiArIGxpbmVNYXRjaGVzWzFdICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjpcIiArIGxpbmVNYXRjaGVzWzJdICsgXCI6XCIgKyBsaW5lTWF0Y2hlc1szXSArIFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RVc2VyTGluZSA9IHN0YWNrWzBdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2VMaW5lcy5sZW5ndGg7ICsraSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFjZUxpbmVzW2ldID09PSBmaXJzdFVzZXJMaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdG9yTGluZSA9IFwiXFxuXCIgKyB0cmFjZUxpbmVzW2kgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1zZyA9IFwiYSBwcm9taXNlIHdhcyBjcmVhdGVkIGluIGEgXCIgKyBuYW1lICtcbiAgICAgICAgICAgIFwiaGFuZGxlciBcIiArIGhhbmRsZXJMaW5lICsgXCJidXQgd2FzIG5vdCByZXR1cm5lZCBmcm9tIGl0LCBcIiArXG4gICAgICAgICAgICBcInNlZSBodHRwOi8vZ29vLmdsL3JScU1Vd1wiICtcbiAgICAgICAgICAgIGNyZWF0b3JMaW5lO1xuICAgICAgICBwcm9taXNlLl93YXJuKG1zZywgdHJ1ZSwgcHJvbWlzZUNyZWF0ZWQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVwcmVjYXRlZChuYW1lLCByZXBsYWNlbWVudCkge1xuICAgIHZhciBtZXNzYWdlID0gbmFtZSArXG4gICAgICAgIFwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uLlwiO1xuICAgIGlmIChyZXBsYWNlbWVudCkgbWVzc2FnZSArPSBcIiBVc2UgXCIgKyByZXBsYWNlbWVudCArIFwiIGluc3RlYWQuXCI7XG4gICAgcmV0dXJuIHdhcm4obWVzc2FnZSk7XG59XG5cbmZ1bmN0aW9uIHdhcm4obWVzc2FnZSwgc2hvdWxkVXNlT3duVHJhY2UsIHByb21pc2UpIHtcbiAgICBpZiAoIWNvbmZpZy53YXJuaW5ncykgcmV0dXJuO1xuICAgIHZhciB3YXJuaW5nID0gbmV3IFdhcm5pbmcobWVzc2FnZSk7XG4gICAgdmFyIGN0eDtcbiAgICBpZiAoc2hvdWxkVXNlT3duVHJhY2UpIHtcbiAgICAgICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZSh3YXJuaW5nKTtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5sb25nU3RhY2tUcmFjZXMgJiYgKGN0eCA9IFByb21pc2UuX3BlZWtDb250ZXh0KCkpKSB7XG4gICAgICAgIGN0eC5hdHRhY2hFeHRyYVRyYWNlKHdhcm5pbmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZSh3YXJuaW5nKTtcbiAgICAgICAgd2FybmluZy5zdGFjayA9IHBhcnNlZC5tZXNzYWdlICsgXCJcXG5cIiArIHBhcnNlZC5zdGFjay5qb2luKFwiXFxuXCIpO1xuICAgIH1cblxuICAgIGlmICghYWN0aXZlRmlyZUV2ZW50KFwid2FybmluZ1wiLCB3YXJuaW5nKSkge1xuICAgICAgICBmb3JtYXRBbmRMb2dFcnJvcih3YXJuaW5nLCBcIlwiLCB0cnVlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlY29uc3RydWN0U3RhY2sobWVzc2FnZSwgc3RhY2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgIHN0YWNrc1tpXS5wdXNoKFwiRnJvbSBwcmV2aW91cyBldmVudDpcIik7XG4gICAgICAgIHN0YWNrc1tpXSA9IHN0YWNrc1tpXS5qb2luKFwiXFxuXCIpO1xuICAgIH1cbiAgICBpZiAoaSA8IHN0YWNrcy5sZW5ndGgpIHtcbiAgICAgICAgc3RhY2tzW2ldID0gc3RhY2tzW2ldLmpvaW4oXCJcXG5cIik7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlICsgXCJcXG5cIiArIHN0YWNrcy5qb2luKFwiXFxuXCIpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVEdXBsaWNhdGVPckVtcHR5SnVtcHMoc3RhY2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKHN0YWNrc1tpXS5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICgoaSArIDEgPCBzdGFja3MubGVuZ3RoKSAmJiBzdGFja3NbaV1bMF0gPT09IHN0YWNrc1tpKzFdWzBdKSkge1xuICAgICAgICAgICAgc3RhY2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ29tbW9uUm9vdHMoc3RhY2tzKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBzdGFja3NbMF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzdGFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHByZXYgPSBzdGFja3NbaV07XG4gICAgICAgIHZhciBjdXJyZW50TGFzdEluZGV4ID0gY3VycmVudC5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgY3VycmVudExhc3RMaW5lID0gY3VycmVudFtjdXJyZW50TGFzdEluZGV4XTtcbiAgICAgICAgdmFyIGNvbW1vblJvb3RNZWV0UG9pbnQgPSAtMTtcblxuICAgICAgICBmb3IgKHZhciBqID0gcHJldi5sZW5ndGggLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgaWYgKHByZXZbal0gPT09IGN1cnJlbnRMYXN0TGluZSkge1xuICAgICAgICAgICAgICAgIGNvbW1vblJvb3RNZWV0UG9pbnQgPSBqO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IGNvbW1vblJvb3RNZWV0UG9pbnQ7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgICAgICB2YXIgbGluZSA9IHByZXZbal07XG4gICAgICAgICAgICBpZiAoY3VycmVudFtjdXJyZW50TGFzdEluZGV4XSA9PT0gbGluZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQucG9wKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudExhc3RJbmRleC0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gcHJldjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNsZWFuU3RhY2soc3RhY2spIHtcbiAgICB2YXIgcmV0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICB2YXIgaXNUcmFjZUxpbmUgPSBcIiAgICAoTm8gc3RhY2sgdHJhY2UpXCIgPT09IGxpbmUgfHxcbiAgICAgICAgICAgIHN0YWNrRnJhbWVQYXR0ZXJuLnRlc3QobGluZSk7XG4gICAgICAgIHZhciBpc0ludGVybmFsRnJhbWUgPSBpc1RyYWNlTGluZSAmJiBzaG91bGRJZ25vcmUobGluZSk7XG4gICAgICAgIGlmIChpc1RyYWNlTGluZSAmJiAhaXNJbnRlcm5hbEZyYW1lKSB7XG4gICAgICAgICAgICBpZiAoaW5kZW50U3RhY2tGcmFtZXMgJiYgbGluZS5jaGFyQXQoMCkgIT09IFwiIFwiKSB7XG4gICAgICAgICAgICAgICAgbGluZSA9IFwiICAgIFwiICsgbGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldC5wdXNoKGxpbmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHN0YWNrRnJhbWVzQXNBcnJheShlcnJvcikge1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrLnJlcGxhY2UoL1xccyskL2csIFwiXCIpLnNwbGl0KFwiXFxuXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhY2subGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBzdGFja1tpXTtcbiAgICAgICAgaWYgKFwiICAgIChObyBzdGFjayB0cmFjZSlcIiA9PT0gbGluZSB8fCBzdGFja0ZyYW1lUGF0dGVybi50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgc3RhY2sgPSBzdGFjay5zbGljZShpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YWNrO1xufVxuXG5mdW5jdGlvbiBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcikge1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrO1xuICAgIHZhciBtZXNzYWdlID0gZXJyb3IudG9TdHJpbmcoKTtcbiAgICBzdGFjayA9IHR5cGVvZiBzdGFjayA9PT0gXCJzdHJpbmdcIiAmJiBzdGFjay5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyBzdGFja0ZyYW1lc0FzQXJyYXkoZXJyb3IpIDogW1wiICAgIChObyBzdGFjayB0cmFjZSlcIl07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGNsZWFuU3RhY2soc3RhY2spXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0QW5kTG9nRXJyb3IoZXJyb3IsIHRpdGxlLCBpc1NvZnQpIHtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2U7XG4gICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KGVycm9yKSkge1xuICAgICAgICAgICAgdmFyIHN0YWNrID0gZXJyb3Iuc3RhY2s7XG4gICAgICAgICAgICBtZXNzYWdlID0gdGl0bGUgKyBmb3JtYXRTdGFjayhzdGFjaywgZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRpdGxlICsgU3RyaW5nKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHByaW50V2FybmluZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBwcmludFdhcm5pbmcobWVzc2FnZSwgaXNTb2Z0KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uc29sZS5sb2cgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUubG9nID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZmlyZVJlamVjdGlvbkV2ZW50KG5hbWUsIGxvY2FsSGFuZGxlciwgcmVhc29uLCBwcm9taXNlKSB7XG4gICAgdmFyIGxvY2FsRXZlbnRGaXJlZCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgbG9jYWxIYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGxvY2FsRXZlbnRGaXJlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gXCJyZWplY3Rpb25IYW5kbGVkXCIpIHtcbiAgICAgICAgICAgICAgICBsb2NhbEhhbmRsZXIocHJvbWlzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2FsSGFuZGxlcihyZWFzb24sIHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKGUpO1xuICAgIH1cblxuICAgIGlmIChuYW1lID09PSBcInVuaGFuZGxlZFJlamVjdGlvblwiKSB7XG4gICAgICAgIGlmICghYWN0aXZlRmlyZUV2ZW50KG5hbWUsIHJlYXNvbiwgcHJvbWlzZSkgJiYgIWxvY2FsRXZlbnRGaXJlZCkge1xuICAgICAgICAgICAgZm9ybWF0QW5kTG9nRXJyb3IocmVhc29uLCBcIlVuaGFuZGxlZCByZWplY3Rpb24gXCIpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZlRmlyZUV2ZW50KG5hbWUsIHByb21pc2UpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0Tm9uRXJyb3Iob2JqKSB7XG4gICAgdmFyIHN0cjtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHN0ciA9IFwiW2Z1bmN0aW9uIFwiICtcbiAgICAgICAgICAgIChvYmoubmFtZSB8fCBcImFub255bW91c1wiKSArXG4gICAgICAgICAgICBcIl1cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdHIgPSBvYmogJiYgdHlwZW9mIG9iai50b1N0cmluZyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICA/IG9iai50b1N0cmluZygpIDogdXRpbC50b1N0cmluZyhvYmopO1xuICAgICAgICB2YXIgcnVzZWxlc3NUb1N0cmluZyA9IC9cXFtvYmplY3QgW2EtekEtWjAtOSRfXStcXF0vO1xuICAgICAgICBpZiAocnVzZWxlc3NUb1N0cmluZy50ZXN0KHN0cikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1N0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7XG4gICAgICAgICAgICAgICAgc3RyID0gbmV3U3RyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2goZSkge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHN0ciA9IFwiKGVtcHR5IGFycmF5KVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAoXCIoPFwiICsgc25pcChzdHIpICsgXCI+LCBubyBzdGFjayB0cmFjZSlcIik7XG59XG5cbmZ1bmN0aW9uIHNuaXAoc3RyKSB7XG4gICAgdmFyIG1heENoYXJzID0gNDE7XG4gICAgaWYgKHN0ci5sZW5ndGggPCBtYXhDaGFycykge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICByZXR1cm4gc3RyLnN1YnN0cigwLCBtYXhDaGFycyAtIDMpICsgXCIuLi5cIjtcbn1cblxuZnVuY3Rpb24gbG9uZ1N0YWNrVHJhY2VzSXNTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBjYXB0dXJlU3RhY2tUcmFjZSA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG52YXIgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfTtcbnZhciBwYXJzZUxpbmVJbmZvUmVnZXggPSAvW1xcLzxcXChdKFteOlxcL10rKTooXFxkKyk6KD86XFxkKylcXCk/XFxzKiQvO1xuZnVuY3Rpb24gcGFyc2VMaW5lSW5mbyhsaW5lKSB7XG4gICAgdmFyIG1hdGNoZXMgPSBsaW5lLm1hdGNoKHBhcnNlTGluZUluZm9SZWdleCk7XG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbGVOYW1lOiBtYXRjaGVzWzFdLFxuICAgICAgICAgICAgbGluZTogcGFyc2VJbnQobWF0Y2hlc1syXSwgMTApXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRCb3VuZHMoZmlyc3RMaW5lRXJyb3IsIGxhc3RMaW5lRXJyb3IpIHtcbiAgICBpZiAoIWxvbmdTdGFja1RyYWNlc0lzU3VwcG9ydGVkKCkpIHJldHVybjtcbiAgICB2YXIgZmlyc3RTdGFja0xpbmVzID0gZmlyc3RMaW5lRXJyb3Iuc3RhY2suc3BsaXQoXCJcXG5cIik7XG4gICAgdmFyIGxhc3RTdGFja0xpbmVzID0gbGFzdExpbmVFcnJvci5zdGFjay5zcGxpdChcIlxcblwiKTtcbiAgICB2YXIgZmlyc3RJbmRleCA9IC0xO1xuICAgIHZhciBsYXN0SW5kZXggPSAtMTtcbiAgICB2YXIgZmlyc3RGaWxlTmFtZTtcbiAgICB2YXIgbGFzdEZpbGVOYW1lO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3RTdGFja0xpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUxpbmVJbmZvKGZpcnN0U3RhY2tMaW5lc1tpXSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGZpcnN0RmlsZU5hbWUgPSByZXN1bHQuZmlsZU5hbWU7XG4gICAgICAgICAgICBmaXJzdEluZGV4ID0gcmVzdWx0LmxpbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RTdGFja0xpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUxpbmVJbmZvKGxhc3RTdGFja0xpbmVzW2ldKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgbGFzdEZpbGVOYW1lID0gcmVzdWx0LmZpbGVOYW1lO1xuICAgICAgICAgICAgbGFzdEluZGV4ID0gcmVzdWx0LmxpbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmlyc3RJbmRleCA8IDAgfHwgbGFzdEluZGV4IDwgMCB8fCAhZmlyc3RGaWxlTmFtZSB8fCAhbGFzdEZpbGVOYW1lIHx8XG4gICAgICAgIGZpcnN0RmlsZU5hbWUgIT09IGxhc3RGaWxlTmFtZSB8fCBmaXJzdEluZGV4ID49IGxhc3RJbmRleCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICBpZiAoYmx1ZWJpcmRGcmFtZVBhdHRlcm4udGVzdChsaW5lKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHZhciBpbmZvID0gcGFyc2VMaW5lSW5mbyhsaW5lKTtcbiAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgIGlmIChpbmZvLmZpbGVOYW1lID09PSBmaXJzdEZpbGVOYW1lICYmXG4gICAgICAgICAgICAgICAgKGZpcnN0SW5kZXggPD0gaW5mby5saW5lICYmIGluZm8ubGluZSA8PSBsYXN0SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIENhcHR1cmVkVHJhY2UocGFyZW50KSB7XG4gICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgIHRoaXMuX3Byb21pc2VzQ3JlYXRlZCA9IDA7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuX2xlbmd0aCA9IDEgKyAocGFyZW50ID09PSB1bmRlZmluZWQgPyAwIDogcGFyZW50Ll9sZW5ndGgpO1xuICAgIGNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIENhcHR1cmVkVHJhY2UpO1xuICAgIGlmIChsZW5ndGggPiAzMikgdGhpcy51bmN5Y2xlKCk7XG59XG51dGlsLmluaGVyaXRzKENhcHR1cmVkVHJhY2UsIEVycm9yKTtcbkNvbnRleHQuQ2FwdHVyZWRUcmFjZSA9IENhcHR1cmVkVHJhY2U7XG5cbkNhcHR1cmVkVHJhY2UucHJvdG90eXBlLnVuY3ljbGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoO1xuICAgIGlmIChsZW5ndGggPCAyKSByZXR1cm47XG4gICAgdmFyIG5vZGVzID0gW107XG4gICAgdmFyIHN0YWNrVG9JbmRleCA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIG5vZGUgPSB0aGlzOyBub2RlICE9PSB1bmRlZmluZWQ7ICsraSkge1xuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICBub2RlID0gbm9kZS5fcGFyZW50O1xuICAgIH1cbiAgICBsZW5ndGggPSB0aGlzLl9sZW5ndGggPSBpO1xuICAgIGZvciAodmFyIGkgPSBsZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgc3RhY2sgPSBub2Rlc1tpXS5zdGFjaztcbiAgICAgICAgaWYgKHN0YWNrVG9JbmRleFtzdGFja10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3RhY2tUb0luZGV4W3N0YWNrXSA9IGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY3VycmVudFN0YWNrID0gbm9kZXNbaV0uc3RhY2s7XG4gICAgICAgIHZhciBpbmRleCA9IHN0YWNrVG9JbmRleFtjdXJyZW50U3RhY2tdO1xuICAgICAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCAmJiBpbmRleCAhPT0gaSkge1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgIG5vZGVzW2luZGV4IC0gMV0uX3BhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBub2Rlc1tpbmRleCAtIDFdLl9sZW5ndGggPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZXNbaV0uX3BhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIG5vZGVzW2ldLl9sZW5ndGggPSAxO1xuICAgICAgICAgICAgdmFyIGN5Y2xlRWRnZU5vZGUgPSBpID4gMCA/IG5vZGVzW2kgLSAxXSA6IHRoaXM7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA8IGxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQgPSBub2Rlc1tpbmRleCArIDFdO1xuICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX3BhcmVudC51bmN5Y2xlKCk7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fbGVuZ3RoID1cbiAgICAgICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fcGFyZW50Ll9sZW5ndGggKyAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fbGVuZ3RoID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjdXJyZW50Q2hpbGRMZW5ndGggPSBjeWNsZUVkZ2VOb2RlLl9sZW5ndGggKyAxO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgLSAyOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgICAgIG5vZGVzW2pdLl9sZW5ndGggPSBjdXJyZW50Q2hpbGRMZW5ndGg7XG4gICAgICAgICAgICAgICAgY3VycmVudENoaWxkTGVuZ3RoKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5DYXB0dXJlZFRyYWNlLnByb3RvdHlwZS5hdHRhY2hFeHRyYVRyYWNlID0gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IuX19zdGFja0NsZWFuZWRfXykgcmV0dXJuO1xuICAgIHRoaXMudW5jeWNsZSgpO1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZVN0YWNrQW5kTWVzc2FnZShlcnJvcik7XG4gICAgdmFyIG1lc3NhZ2UgPSBwYXJzZWQubWVzc2FnZTtcbiAgICB2YXIgc3RhY2tzID0gW3BhcnNlZC5zdGFja107XG5cbiAgICB2YXIgdHJhY2UgPSB0aGlzO1xuICAgIHdoaWxlICh0cmFjZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN0YWNrcy5wdXNoKGNsZWFuU3RhY2sodHJhY2Uuc3RhY2suc3BsaXQoXCJcXG5cIikpKTtcbiAgICAgICAgdHJhY2UgPSB0cmFjZS5fcGFyZW50O1xuICAgIH1cbiAgICByZW1vdmVDb21tb25Sb290cyhzdGFja3MpO1xuICAgIHJlbW92ZUR1cGxpY2F0ZU9yRW1wdHlKdW1wcyhzdGFja3MpO1xuICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AoZXJyb3IsIFwic3RhY2tcIiwgcmVjb25zdHJ1Y3RTdGFjayhtZXNzYWdlLCBzdGFja3MpKTtcbiAgICB1dGlsLm5vdEVudW1lcmFibGVQcm9wKGVycm9yLCBcIl9fc3RhY2tDbGVhbmVkX19cIiwgdHJ1ZSk7XG59O1xuXG52YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSAoZnVuY3Rpb24gc3RhY2tEZXRlY3Rpb24oKSB7XG4gICAgdmFyIHY4c3RhY2tGcmFtZVBhdHRlcm4gPSAvXlxccyphdFxccyovO1xuICAgIHZhciB2OHN0YWNrRm9ybWF0dGVyID0gZnVuY3Rpb24oc3RhY2ssIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHJldHVybiBzdGFjaztcblxuICAgICAgICBpZiAoZXJyb3IubmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBlcnJvci5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvci50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtYXROb25FcnJvcihlcnJvcik7XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID09PSBcIm51bWJlclwiICYmXG4gICAgICAgIHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IHY4c3RhY2tGcmFtZVBhdHRlcm47XG4gICAgICAgIGZvcm1hdFN0YWNrID0gdjhzdGFja0Zvcm1hdHRlcjtcbiAgICAgICAgdmFyIGNhcHR1cmVTdGFja1RyYWNlID0gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U7XG5cbiAgICAgICAgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuIGJsdWViaXJkRnJhbWVQYXR0ZXJuLnRlc3QobGluZSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyZWNlaXZlciwgaWdub3JlVW50aWwpIHtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICAgICAgY2FwdHVyZVN0YWNrVHJhY2UocmVjZWl2ZXIsIGlnbm9yZVVudGlsKTtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCAtPSA2O1xuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKCk7XG5cbiAgICBpZiAodHlwZW9mIGVyci5zdGFjayA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICBlcnIuc3RhY2suc3BsaXQoXCJcXG5cIilbMF0uaW5kZXhPZihcInN0YWNrRGV0ZWN0aW9uQFwiKSA+PSAwKSB7XG4gICAgICAgIHN0YWNrRnJhbWVQYXR0ZXJuID0gL0AvO1xuICAgICAgICBmb3JtYXRTdGFjayA9IHY4c3RhY2tGb3JtYXR0ZXI7XG4gICAgICAgIGluZGVudFN0YWNrRnJhbWVzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhcHR1cmVTdGFja1RyYWNlKG8pIHtcbiAgICAgICAgICAgIG8uc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgaGFzU3RhY2tBZnRlclRocm93O1xuICAgIHRyeSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgICBoYXNTdGFja0FmdGVyVGhyb3cgPSAoXCJzdGFja1wiIGluIGUpO1xuICAgIH1cbiAgICBpZiAoIShcInN0YWNrXCIgaW4gZXJyKSAmJiBoYXNTdGFja0FmdGVyVGhyb3cgJiZcbiAgICAgICAgdHlwZW9mIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IHY4c3RhY2tGcmFtZVBhdHRlcm47XG4gICAgICAgIGZvcm1hdFN0YWNrID0gdjhzdGFja0Zvcm1hdHRlcjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhcHR1cmVTdGFja1RyYWNlKG8pIHtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCArPSA2O1xuICAgICAgICAgICAgdHJ5IHsgdGhyb3cgbmV3IEVycm9yKCk7IH1cbiAgICAgICAgICAgIGNhdGNoKGUpIHsgby5zdGFjayA9IGUuc3RhY2s7IH1cbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCAtPSA2O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZvcm1hdFN0YWNrID0gZnVuY3Rpb24oc3RhY2ssIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHJldHVybiBzdGFjaztcblxuICAgICAgICBpZiAoKHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGVycm9yID09PSBcImZ1bmN0aW9uXCIpICYmXG4gICAgICAgICAgICBlcnJvci5uYW1lICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm1hdE5vbkVycm9yKGVycm9yKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG51bGw7XG5cbn0pKFtdKTtcblxuaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBjb25zb2xlLndhcm4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBwcmludFdhcm5pbmcgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgfTtcbiAgICBpZiAodXRpbC5pc05vZGUgJiYgcHJvY2Vzcy5zdGRlcnIuaXNUVFkpIHtcbiAgICAgICAgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24obWVzc2FnZSwgaXNTb2Z0KSB7XG4gICAgICAgICAgICB2YXIgY29sb3IgPSBpc1NvZnQgPyBcIlxcdTAwMWJbMzNtXCIgOiBcIlxcdTAwMWJbMzFtXCI7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oY29sb3IgKyBtZXNzYWdlICsgXCJcXHUwMDFiWzBtXFxuXCIpO1xuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoIXV0aWwuaXNOb2RlICYmIHR5cGVvZiAobmV3IEVycm9yKCkuc3RhY2spID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHByaW50V2FybmluZyA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGlzU29mdCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiJWNcIiArIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NvZnQgPyBcImNvbG9yOiBkYXJrb3JhbmdlXCIgOiBcImNvbG9yOiByZWRcIik7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG52YXIgY29uZmlnID0ge1xuICAgIHdhcm5pbmdzOiB3YXJuaW5ncyxcbiAgICBsb25nU3RhY2tUcmFjZXM6IGZhbHNlLFxuICAgIGNhbmNlbGxhdGlvbjogZmFsc2UsXG4gICAgbW9uaXRvcmluZzogZmFsc2Vcbn07XG5cbmlmIChsb25nU3RhY2tUcmFjZXMpIFByb21pc2UubG9uZ1N0YWNrVHJhY2VzKCk7XG5cbnJldHVybiB7XG4gICAgbG9uZ1N0YWNrVHJhY2VzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5sb25nU3RhY2tUcmFjZXM7XG4gICAgfSxcbiAgICB3YXJuaW5nczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb25maWcud2FybmluZ3M7XG4gICAgfSxcbiAgICBjYW5jZWxsYXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uZmlnLmNhbmNlbGxhdGlvbjtcbiAgICB9LFxuICAgIG1vbml0b3Jpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uZmlnLm1vbml0b3Jpbmc7XG4gICAgfSxcbiAgICBwcm9wYWdhdGVGcm9tRnVuY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvcGFnYXRlRnJvbUZ1bmN0aW9uO1xuICAgIH0sXG4gICAgYm91bmRWYWx1ZUZ1bmN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJvdW5kVmFsdWVGdW5jdGlvbjtcbiAgICB9LFxuICAgIGNoZWNrRm9yZ290dGVuUmV0dXJuczogY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zLFxuICAgIHNldEJvdW5kczogc2V0Qm91bmRzLFxuICAgIHdhcm46IHdhcm4sXG4gICAgZGVwcmVjYXRlZDogZGVwcmVjYXRlZCxcbiAgICBDYXB0dXJlZFRyYWNlOiBDYXB0dXJlZFRyYWNlLFxuICAgIGZpcmVEb21FdmVudDogZmlyZURvbUV2ZW50LFxuICAgIGZpcmVHbG9iYWxFdmVudDogZmlyZUdsb2JhbEV2ZW50XG59O1xufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwxMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xuZnVuY3Rpb24gcmV0dXJuZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG59XG5mdW5jdGlvbiB0aHJvd2VyKCkge1xuICAgIHRocm93IHRoaXMucmVhc29uO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZVtcInJldHVyblwiXSA9XG5Qcm9taXNlLnByb3RvdHlwZS50aGVuUmV0dXJuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkgdmFsdWUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgIHJldHVybmVyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwge3ZhbHVlOiB2YWx1ZX0sIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZVtcInRocm93XCJdID1cblByb21pc2UucHJvdG90eXBlLnRoZW5UaHJvdyA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihcbiAgICAgICAgdGhyb3dlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtyZWFzb246IHJlYXNvbn0sIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5jYXRjaFRocm93ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICB1bmRlZmluZWQsIHRocm93ZXIsIHVuZGVmaW5lZCwge3JlYXNvbjogcmVhc29ufSwgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgX3JlYXNvbiA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbigpIHt0aHJvdyBfcmVhc29uO307XG4gICAgICAgIHJldHVybiB0aGlzLmNhdWdodChyZWFzb24sIGhhbmRsZXIpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLmNhdGNoUmV0dXJuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPD0gMSkge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB2YWx1ZS5zdXBwcmVzc1VuaGFuZGxlZFJlamVjdGlvbnMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICB1bmRlZmluZWQsIHJldHVybmVyLCB1bmRlZmluZWQsIHt2YWx1ZTogdmFsdWV9LCB1bmRlZmluZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfdmFsdWUgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIGlmIChfdmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSBfdmFsdWUuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24oKSB7cmV0dXJuIF92YWx1ZTt9O1xuICAgICAgICByZXR1cm4gdGhpcy5jYXVnaHQodmFsdWUsIGhhbmRsZXIpO1xuICAgIH1cbn07XG59O1xuXG59LHt9XSwxMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciBQcm9taXNlUmVkdWNlID0gUHJvbWlzZS5yZWR1Y2U7XG52YXIgUHJvbWlzZUFsbCA9IFByb21pc2UuYWxsO1xuXG5mdW5jdGlvbiBwcm9taXNlQWxsVGhpcygpIHtcbiAgICByZXR1cm4gUHJvbWlzZUFsbCh0aGlzKTtcbn1cblxuZnVuY3Rpb24gUHJvbWlzZU1hcFNlcmllcyhwcm9taXNlcywgZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZShwcm9taXNlcywgZm4sIElOVEVSTkFMLCBJTlRFUk5BTCk7XG59XG5cblByb21pc2UucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZSh0aGlzLCBmbiwgSU5URVJOQUwsIDApXG4gICAgICAgICAgICAgIC5fdGhlbihwcm9taXNlQWxsVGhpcywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5tYXBTZXJpZXMgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZSh0aGlzLCBmbiwgSU5URVJOQUwsIElOVEVSTkFMKTtcbn07XG5cblByb21pc2UuZWFjaCA9IGZ1bmN0aW9uIChwcm9taXNlcywgZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZShwcm9taXNlcywgZm4sIElOVEVSTkFMLCAwKVxuICAgICAgICAgICAgICAuX3RoZW4ocHJvbWlzZUFsbFRoaXMsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBwcm9taXNlcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UubWFwU2VyaWVzID0gUHJvbWlzZU1hcFNlcmllcztcbn07XG5cblxufSx7fV0sMTI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xudmFyIE9iamVjdGZyZWV6ZSA9IGVzNS5mcmVlemU7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgaW5oZXJpdHMgPSB1dGlsLmluaGVyaXRzO1xudmFyIG5vdEVudW1lcmFibGVQcm9wID0gdXRpbC5ub3RFbnVtZXJhYmxlUHJvcDtcblxuZnVuY3Rpb24gc3ViRXJyb3IobmFtZVByb3BlcnR5LCBkZWZhdWx0TWVzc2FnZSkge1xuICAgIGZ1bmN0aW9uIFN1YkVycm9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFN1YkVycm9yKSkgcmV0dXJuIG5ldyBTdWJFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJtZXNzYWdlXCIsXG4gICAgICAgICAgICB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IG1lc3NhZ2UgOiBkZWZhdWx0TWVzc2FnZSk7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibmFtZVwiLCBuYW1lUHJvcGVydHkpO1xuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbmhlcml0cyhTdWJFcnJvciwgRXJyb3IpO1xuICAgIHJldHVybiBTdWJFcnJvcjtcbn1cblxudmFyIF9UeXBlRXJyb3IsIF9SYW5nZUVycm9yO1xudmFyIFdhcm5pbmcgPSBzdWJFcnJvcihcIldhcm5pbmdcIiwgXCJ3YXJuaW5nXCIpO1xudmFyIENhbmNlbGxhdGlvbkVycm9yID0gc3ViRXJyb3IoXCJDYW5jZWxsYXRpb25FcnJvclwiLCBcImNhbmNlbGxhdGlvbiBlcnJvclwiKTtcbnZhciBUaW1lb3V0RXJyb3IgPSBzdWJFcnJvcihcIlRpbWVvdXRFcnJvclwiLCBcInRpbWVvdXQgZXJyb3JcIik7XG52YXIgQWdncmVnYXRlRXJyb3IgPSBzdWJFcnJvcihcIkFnZ3JlZ2F0ZUVycm9yXCIsIFwiYWdncmVnYXRlIGVycm9yXCIpO1xudHJ5IHtcbiAgICBfVHlwZUVycm9yID0gVHlwZUVycm9yO1xuICAgIF9SYW5nZUVycm9yID0gUmFuZ2VFcnJvcjtcbn0gY2F0Y2goZSkge1xuICAgIF9UeXBlRXJyb3IgPSBzdWJFcnJvcihcIlR5cGVFcnJvclwiLCBcInR5cGUgZXJyb3JcIik7XG4gICAgX1JhbmdlRXJyb3IgPSBzdWJFcnJvcihcIlJhbmdlRXJyb3JcIiwgXCJyYW5nZSBlcnJvclwiKTtcbn1cblxudmFyIG1ldGhvZHMgPSAoXCJqb2luIHBvcCBwdXNoIHNoaWZ0IHVuc2hpZnQgc2xpY2UgZmlsdGVyIGZvckVhY2ggc29tZSBcIiArXG4gICAgXCJldmVyeSBtYXAgaW5kZXhPZiBsYXN0SW5kZXhPZiByZWR1Y2UgcmVkdWNlUmlnaHQgc29ydCByZXZlcnNlXCIpLnNwbGl0KFwiIFwiKTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRob2RzLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKHR5cGVvZiBBcnJheS5wcm90b3R5cGVbbWV0aG9kc1tpXV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBBZ2dyZWdhdGVFcnJvci5wcm90b3R5cGVbbWV0aG9kc1tpXV0gPSBBcnJheS5wcm90b3R5cGVbbWV0aG9kc1tpXV07XG4gICAgfVxufVxuXG5lczUuZGVmaW5lUHJvcGVydHkoQWdncmVnYXRlRXJyb3IucHJvdG90eXBlLCBcImxlbmd0aFwiLCB7XG4gICAgdmFsdWU6IDAsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG59KTtcbkFnZ3JlZ2F0ZUVycm9yLnByb3RvdHlwZVtcImlzT3BlcmF0aW9uYWxcIl0gPSB0cnVlO1xudmFyIGxldmVsID0gMDtcbkFnZ3JlZ2F0ZUVycm9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbmRlbnQgPSBBcnJheShsZXZlbCAqIDQgKyAxKS5qb2luKFwiIFwiKTtcbiAgICB2YXIgcmV0ID0gXCJcXG5cIiArIGluZGVudCArIFwiQWdncmVnYXRlRXJyb3Igb2Y6XCIgKyBcIlxcblwiO1xuICAgIGxldmVsKys7XG4gICAgaW5kZW50ID0gQXJyYXkobGV2ZWwgKiA0ICsgMSkuam9pbihcIiBcIik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzdHIgPSB0aGlzW2ldID09PSB0aGlzID8gXCJbQ2lyY3VsYXIgQWdncmVnYXRlRXJyb3JdXCIgOiB0aGlzW2ldICsgXCJcIjtcbiAgICAgICAgdmFyIGxpbmVzID0gc3RyLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbmVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICBsaW5lc1tqXSA9IGluZGVudCArIGxpbmVzW2pdO1xuICAgICAgICB9XG4gICAgICAgIHN0ciA9IGxpbmVzLmpvaW4oXCJcXG5cIik7XG4gICAgICAgIHJldCArPSBzdHIgKyBcIlxcblwiO1xuICAgIH1cbiAgICBsZXZlbC0tO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5mdW5jdGlvbiBPcGVyYXRpb25hbEVycm9yKG1lc3NhZ2UpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgT3BlcmF0aW9uYWxFcnJvcikpXG4gICAgICAgIHJldHVybiBuZXcgT3BlcmF0aW9uYWxFcnJvcihtZXNzYWdlKTtcbiAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm5hbWVcIiwgXCJPcGVyYXRpb25hbEVycm9yXCIpO1xuICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibWVzc2FnZVwiLCBtZXNzYWdlKTtcbiAgICB0aGlzLmNhdXNlID0gbWVzc2FnZTtcbiAgICB0aGlzW1wiaXNPcGVyYXRpb25hbFwiXSA9IHRydWU7XG5cbiAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHRoaXMsIFwibWVzc2FnZVwiLCBtZXNzYWdlLm1lc3NhZ2UpO1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcInN0YWNrXCIsIG1lc3NhZ2Uuc3RhY2spO1xuICAgIH0gZWxzZSBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgfVxuXG59XG5pbmhlcml0cyhPcGVyYXRpb25hbEVycm9yLCBFcnJvcik7XG5cbnZhciBlcnJvclR5cGVzID0gRXJyb3JbXCJfX0JsdWViaXJkRXJyb3JUeXBlc19fXCJdO1xuaWYgKCFlcnJvclR5cGVzKSB7XG4gICAgZXJyb3JUeXBlcyA9IE9iamVjdGZyZWV6ZSh7XG4gICAgICAgIENhbmNlbGxhdGlvbkVycm9yOiBDYW5jZWxsYXRpb25FcnJvcixcbiAgICAgICAgVGltZW91dEVycm9yOiBUaW1lb3V0RXJyb3IsXG4gICAgICAgIE9wZXJhdGlvbmFsRXJyb3I6IE9wZXJhdGlvbmFsRXJyb3IsXG4gICAgICAgIFJlamVjdGlvbkVycm9yOiBPcGVyYXRpb25hbEVycm9yLFxuICAgICAgICBBZ2dyZWdhdGVFcnJvcjogQWdncmVnYXRlRXJyb3JcbiAgICB9KTtcbiAgICBlczUuZGVmaW5lUHJvcGVydHkoRXJyb3IsIFwiX19CbHVlYmlyZEVycm9yVHlwZXNfX1wiLCB7XG4gICAgICAgIHZhbHVlOiBlcnJvclR5cGVzLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlXG4gICAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIEVycm9yOiBFcnJvcixcbiAgICBUeXBlRXJyb3I6IF9UeXBlRXJyb3IsXG4gICAgUmFuZ2VFcnJvcjogX1JhbmdlRXJyb3IsXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3I6IGVycm9yVHlwZXMuQ2FuY2VsbGF0aW9uRXJyb3IsXG4gICAgT3BlcmF0aW9uYWxFcnJvcjogZXJyb3JUeXBlcy5PcGVyYXRpb25hbEVycm9yLFxuICAgIFRpbWVvdXRFcnJvcjogZXJyb3JUeXBlcy5UaW1lb3V0RXJyb3IsXG4gICAgQWdncmVnYXRlRXJyb3I6IGVycm9yVHlwZXMuQWdncmVnYXRlRXJyb3IsXG4gICAgV2FybmluZzogV2FybmluZ1xufTtcblxufSx7XCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSwxMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgaXNFUzUgPSAoZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICByZXR1cm4gdGhpcyA9PT0gdW5kZWZpbmVkO1xufSkoKTtcblxuaWYgKGlzRVM1KSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIGZyZWV6ZTogT2JqZWN0LmZyZWV6ZSxcbiAgICAgICAgZGVmaW5lUHJvcGVydHk6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSxcbiAgICAgICAgZ2V0RGVzY3JpcHRvcjogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgICAgICAga2V5czogT2JqZWN0LmtleXMsXG4gICAgICAgIG5hbWVzOiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxcbiAgICAgICAgZ2V0UHJvdG90eXBlT2Y6IE9iamVjdC5nZXRQcm90b3R5cGVPZixcbiAgICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheSxcbiAgICAgICAgaXNFUzU6IGlzRVM1LFxuICAgICAgICBwcm9wZXJ0eUlzV3JpdGFibGU6IGZ1bmN0aW9uKG9iaiwgcHJvcCkge1xuICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcCk7XG4gICAgICAgICAgICByZXR1cm4gISEoIWRlc2NyaXB0b3IgfHwgZGVzY3JpcHRvci53cml0YWJsZSB8fCBkZXNjcmlwdG9yLnNldCk7XG4gICAgICAgIH1cbiAgICB9O1xufSBlbHNlIHtcbiAgICB2YXIgaGFzID0ge30uaGFzT3duUHJvcGVydHk7XG4gICAgdmFyIHN0ciA9IHt9LnRvU3RyaW5nO1xuICAgIHZhciBwcm90byA9IHt9LmNvbnN0cnVjdG9yLnByb3RvdHlwZTtcblxuICAgIHZhciBPYmplY3RLZXlzID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIHJldCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gbykge1xuICAgICAgICAgICAgaWYgKGhhcy5jYWxsKG8sIGtleSkpIHtcbiAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcblxuICAgIHZhciBPYmplY3RHZXREZXNjcmlwdG9yID0gZnVuY3Rpb24obywga2V5KSB7XG4gICAgICAgIHJldHVybiB7dmFsdWU6IG9ba2V5XX07XG4gICAgfTtcblxuICAgIHZhciBPYmplY3REZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvLCBrZXksIGRlc2MpIHtcbiAgICAgICAgb1trZXldID0gZGVzYy52YWx1ZTtcbiAgICAgICAgcmV0dXJuIG87XG4gICAgfTtcblxuICAgIHZhciBPYmplY3RGcmVlemUgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcblxuICAgIHZhciBPYmplY3RHZXRQcm90b3R5cGVPZiA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qob2JqKS5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm90bztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgQXJyYXlJc0FycmF5ID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHN0ci5jYWxsKG9iaikgPT09IFwiW29iamVjdCBBcnJheV1cIjtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIGlzQXJyYXk6IEFycmF5SXNBcnJheSxcbiAgICAgICAga2V5czogT2JqZWN0S2V5cyxcbiAgICAgICAgbmFtZXM6IE9iamVjdEtleXMsXG4gICAgICAgIGRlZmluZVByb3BlcnR5OiBPYmplY3REZWZpbmVQcm9wZXJ0eSxcbiAgICAgICAgZ2V0RGVzY3JpcHRvcjogT2JqZWN0R2V0RGVzY3JpcHRvcixcbiAgICAgICAgZnJlZXplOiBPYmplY3RGcmVlemUsXG4gICAgICAgIGdldFByb3RvdHlwZU9mOiBPYmplY3RHZXRQcm90b3R5cGVPZixcbiAgICAgICAgaXNFUzU6IGlzRVM1LFxuICAgICAgICBwcm9wZXJ0eUlzV3JpdGFibGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG59LHt9XSwxNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciBQcm9taXNlTWFwID0gUHJvbWlzZS5tYXA7XG5cblByb21pc2UucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChmbiwgb3B0aW9ucykge1xuICAgIHJldHVybiBQcm9taXNlTWFwKHRoaXMsIGZuLCBvcHRpb25zLCBJTlRFUk5BTCk7XG59O1xuXG5Qcm9taXNlLmZpbHRlciA9IGZ1bmN0aW9uIChwcm9taXNlcywgZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gUHJvbWlzZU1hcChwcm9taXNlcywgZm4sIG9wdGlvbnMsIElOVEVSTkFMKTtcbn07XG59O1xuXG59LHt9XSwxNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgdHJ5Q29udmVydFRvUHJvbWlzZSkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIENhbmNlbGxhdGlvbkVycm9yID0gUHJvbWlzZS5DYW5jZWxsYXRpb25FcnJvcjtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG5cbmZ1bmN0aW9uIFBhc3NUaHJvdWdoSGFuZGxlckNvbnRleHQocHJvbWlzZSwgdHlwZSwgaGFuZGxlcikge1xuICAgIHRoaXMucHJvbWlzZSA9IHByb21pc2U7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xuICAgIHRoaXMuY2FsbGVkID0gZmFsc2U7XG4gICAgdGhpcy5jYW5jZWxQcm9taXNlID0gbnVsbDtcbn1cblxuUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dC5wcm90b3R5cGUuaXNGaW5hbGx5SGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnR5cGUgPT09IDA7XG59O1xuXG5mdW5jdGlvbiBGaW5hbGx5SGFuZGxlckNhbmNlbFJlYWN0aW9uKGZpbmFsbHlIYW5kbGVyKSB7XG4gICAgdGhpcy5maW5hbGx5SGFuZGxlciA9IGZpbmFsbHlIYW5kbGVyO1xufVxuXG5GaW5hbGx5SGFuZGxlckNhbmNlbFJlYWN0aW9uLnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgY2hlY2tDYW5jZWwodGhpcy5maW5hbGx5SGFuZGxlcik7XG59O1xuXG5mdW5jdGlvbiBjaGVja0NhbmNlbChjdHgsIHJlYXNvbikge1xuICAgIGlmIChjdHguY2FuY2VsUHJvbWlzZSAhPSBudWxsKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgY3R4LmNhbmNlbFByb21pc2UuX3JlamVjdChyZWFzb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmNhbmNlbFByb21pc2UuX2NhbmNlbCgpO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5jYW5jZWxQcm9taXNlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc3VjY2VlZCgpIHtcbiAgICByZXR1cm4gZmluYWxseUhhbmRsZXIuY2FsbCh0aGlzLCB0aGlzLnByb21pc2UuX3RhcmdldCgpLl9zZXR0bGVkVmFsdWUoKSk7XG59XG5mdW5jdGlvbiBmYWlsKHJlYXNvbikge1xuICAgIGlmIChjaGVja0NhbmNlbCh0aGlzLCByZWFzb24pKSByZXR1cm47XG4gICAgZXJyb3JPYmouZSA9IHJlYXNvbjtcbiAgICByZXR1cm4gZXJyb3JPYmo7XG59XG5mdW5jdGlvbiBmaW5hbGx5SGFuZGxlcihyZWFzb25PclZhbHVlKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG4gICAgdmFyIGhhbmRsZXIgPSB0aGlzLmhhbmRsZXI7XG5cbiAgICBpZiAoIXRoaXMuY2FsbGVkKSB7XG4gICAgICAgIHRoaXMuY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHJldCA9IHRoaXMuaXNGaW5hbGx5SGFuZGxlcigpXG4gICAgICAgICAgICA/IGhhbmRsZXIuY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCkpXG4gICAgICAgICAgICA6IGhhbmRsZXIuY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksIHJlYXNvbk9yVmFsdWUpO1xuICAgICAgICBpZiAocmV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHByb21pc2UuX3NldFJldHVybmVkTm9uVW5kZWZpbmVkKCk7XG4gICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXQsIHByb21pc2UpO1xuICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW5jZWxQcm9taXNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZS5faXNDYW5jZWxsZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlYXNvbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IENhbmNlbGxhdGlvbkVycm9yKFwibGF0ZSBjYW5jZWxsYXRpb24gb2JzZXJ2ZXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvck9iai5lID0gcmVhc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yT2JqO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1heWJlUHJvbWlzZS5pc1BlbmRpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9hdHRhY2hDYW5jZWxsYXRpb25DYWxsYmFjayhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRmluYWxseUhhbmRsZXJDYW5jZWxSZWFjdGlvbih0aGlzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heWJlUHJvbWlzZS5fdGhlbihcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VlZCwgZmFpbCwgdW5kZWZpbmVkLCB0aGlzLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByb21pc2UuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIGNoZWNrQ2FuY2VsKHRoaXMpO1xuICAgICAgICBlcnJvck9iai5lID0gcmVhc29uT3JWYWx1ZTtcbiAgICAgICAgcmV0dXJuIGVycm9yT2JqO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNoZWNrQ2FuY2VsKHRoaXMpO1xuICAgICAgICByZXR1cm4gcmVhc29uT3JWYWx1ZTtcbiAgICB9XG59XG5cblByb21pc2UucHJvdG90eXBlLl9wYXNzVGhyb3VnaCA9IGZ1bmN0aW9uKGhhbmRsZXIsIHR5cGUsIHN1Y2Nlc3MsIGZhaWwpIHtcbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRoaXMudGhlbigpO1xuICAgIHJldHVybiB0aGlzLl90aGVuKHN1Y2Nlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgZmFpbCxcbiAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgbmV3IFBhc3NUaHJvdWdoSGFuZGxlckNvbnRleHQodGhpcywgdHlwZSwgaGFuZGxlciksXG4gICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmxhc3RseSA9XG5Qcm9taXNlLnByb3RvdHlwZVtcImZpbmFsbHlcIl0gPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgIHJldHVybiB0aGlzLl9wYXNzVGhyb3VnaChoYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGx5SGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseUhhbmRsZXIpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGFwID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFzc1Rocm91Z2goaGFuZGxlciwgMSwgZmluYWxseUhhbmRsZXIpO1xufTtcblxucmV0dXJuIFBhc3NUaHJvdWdoSGFuZGxlckNvbnRleHQ7XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMTY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFwaVJlamVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFByb3h5YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcpIHtcbnZhciBlcnJvcnMgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIik7XG52YXIgVHlwZUVycm9yID0gZXJyb3JzLlR5cGVFcnJvcjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIHlpZWxkSGFuZGxlcnMgPSBbXTtcblxuZnVuY3Rpb24gcHJvbWlzZUZyb21ZaWVsZEhhbmRsZXIodmFsdWUsIHlpZWxkSGFuZGxlcnMsIHRyYWNlUGFyZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB5aWVsZEhhbmRsZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRyYWNlUGFyZW50Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2goeWllbGRIYW5kbGVyc1tpXSkodmFsdWUpO1xuICAgICAgICB0cmFjZVBhcmVudC5fcG9wQ29udGV4dCgpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgdHJhY2VQYXJlbnQuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgICAgICB2YXIgcmV0ID0gUHJvbWlzZS5yZWplY3QoZXJyb3JPYmouZSk7XG4gICAgICAgICAgICB0cmFjZVBhcmVudC5fcG9wQ29udGV4dCgpO1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXN1bHQsIHRyYWNlUGFyZW50KTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHJldHVybiBtYXliZVByb21pc2U7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBQcm9taXNlU3Bhd24oZ2VuZXJhdG9yRnVuY3Rpb24sIHJlY2VpdmVyLCB5aWVsZEhhbmRsZXIsIHN0YWNrKSB7XG4gICAgaWYgKGRlYnVnLmNhbmNlbGxhdGlvbigpKSB7XG4gICAgICAgIHZhciBpbnRlcm5hbCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgdmFyIF9maW5hbGx5UHJvbWlzZSA9IHRoaXMuX2ZpbmFsbHlQcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICB0aGlzLl9wcm9taXNlID0gaW50ZXJuYWwubGFzdGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9maW5hbGx5UHJvbWlzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGludGVybmFsLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICBpbnRlcm5hbC5fc2V0T25DYW5jZWwodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICBwcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIH1cbiAgICB0aGlzLl9zdGFjayA9IHN0YWNrO1xuICAgIHRoaXMuX2dlbmVyYXRvckZ1bmN0aW9uID0gZ2VuZXJhdG9yRnVuY3Rpb247XG4gICAgdGhpcy5fcmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICB0aGlzLl9nZW5lcmF0b3IgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5feWllbGRIYW5kbGVycyA9IHR5cGVvZiB5aWVsZEhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/IFt5aWVsZEhhbmRsZXJdLmNvbmNhdCh5aWVsZEhhbmRsZXJzKVxuICAgICAgICA6IHlpZWxkSGFuZGxlcnM7XG4gICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBudWxsO1xuICAgIHRoaXMuX2NhbmNlbGxhdGlvblBoYXNlID0gZmFsc2U7XG59XG51dGlsLmluaGVyaXRzKFByb21pc2VTcGF3biwgUHJveHlhYmxlKTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5faXNSZXNvbHZlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9wcm9taXNlID09PSBudWxsO1xufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3Byb21pc2UgPSB0aGlzLl9nZW5lcmF0b3IgPSBudWxsO1xuICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSAmJiB0aGlzLl9maW5hbGx5UHJvbWlzZSAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLl9maW5hbGx5UHJvbWlzZS5fZnVsZmlsbCgpO1xuICAgICAgICB0aGlzLl9maW5hbGx5UHJvbWlzZSA9IG51bGw7XG4gICAgfVxufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fcHJvbWlzZUNhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICB2YXIgaW1wbGVtZW50c1JldHVybiA9IHR5cGVvZiB0aGlzLl9nZW5lcmF0b3JbXCJyZXR1cm5cIl0gIT09IFwidW5kZWZpbmVkXCI7XG5cbiAgICB2YXIgcmVzdWx0O1xuICAgIGlmICghaW1wbGVtZW50c1JldHVybikge1xuICAgICAgICB2YXIgcmVhc29uID0gbmV3IFByb21pc2UuQ2FuY2VsbGF0aW9uRXJyb3IoXG4gICAgICAgICAgICBcImdlbmVyYXRvciAucmV0dXJuKCkgc2VudGluZWxcIik7XG4gICAgICAgIFByb21pc2UuY29yb3V0aW5lLnJldHVyblNlbnRpbmVsID0gcmVhc29uO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHJlYXNvbik7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2dlbmVyYXRvcltcInRocm93XCJdKS5jYWxsKHRoaXMuX2dlbmVyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbik7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgICAgICByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9nZW5lcmF0b3JbXCJyZXR1cm5cIl0pLmNhbGwodGhpcy5fZ2VuZXJhdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICB9XG4gICAgdGhpcy5fY2FuY2VsbGF0aW9uUGhhc2UgPSB0cnVlO1xuICAgIHRoaXMuX3lpZWxkZWRQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9jb250aW51ZShyZXN1bHQpO1xufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2dlbmVyYXRvci5uZXh0KS5jYWxsKHRoaXMuX2dlbmVyYXRvciwgdmFsdWUpO1xuICAgIHRoaXMuX3Byb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICB0aGlzLl9jb250aW51ZShyZXN1bHQpO1xufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fcHJvbWlzZVJlamVjdGVkID0gZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX2F0dGFjaEV4dHJhVHJhY2UocmVhc29uKTtcbiAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9nZW5lcmF0b3JbXCJ0aHJvd1wiXSlcbiAgICAgICAgLmNhbGwodGhpcy5fZ2VuZXJhdG9yLCByZWFzb24pO1xuICAgIHRoaXMuX3Byb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICB0aGlzLl9jb250aW51ZShyZXN1bHQpO1xufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX3lpZWxkZWRQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3lpZWxkZWRQcm9taXNlO1xuICAgICAgICB0aGlzLl95aWVsZGVkUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIHByb21pc2UuY2FuY2VsKCk7XG4gICAgfVxufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5wcm9taXNlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9wcm9taXNlO1xufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fcnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2dlbmVyYXRvciA9IHRoaXMuX2dlbmVyYXRvckZ1bmN0aW9uLmNhbGwodGhpcy5fcmVjZWl2ZXIpO1xuICAgIHRoaXMuX3JlY2VpdmVyID1cbiAgICAgICAgdGhpcy5fZ2VuZXJhdG9yRnVuY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZCh1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZVNwYXduLnByb3RvdHlwZS5fY29udGludWUgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlO1xuICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHRoaXMuX2NsZWFudXAoKTtcbiAgICAgICAgaWYgKHRoaXMuX2NhbmNlbGxhdGlvblBoYXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5jYW5jZWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyZXN1bHQuZSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgIGlmIChyZXN1bHQuZG9uZSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG4gICAgICAgIGlmICh0aGlzLl9jYW5jZWxsYXRpb25QaGFzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuY2FuY2VsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHZhbHVlLCB0aGlzLl9wcm9taXNlKTtcbiAgICAgICAgaWYgKCEobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcbiAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9XG4gICAgICAgICAgICAgICAgcHJvbWlzZUZyb21ZaWVsZEhhbmRsZXIobWF5YmVQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3lpZWxkSGFuZGxlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZSk7XG4gICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZVJlamVjdGVkKFxuICAgICAgICAgICAgICAgICAgICBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBIHZhbHVlICVzIHdhcyB5aWVsZGVkIHRoYXQgY291bGQgbm90IGJlIHRyZWF0ZWQgYXMgYSBwcm9taXNlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVxcdTAwMGFcIi5yZXBsYWNlKFwiJXNcIiwgdmFsdWUpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiRnJvbSBjb3JvdXRpbmU6XFx1MDAwYVwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YWNrLnNwbGl0KFwiXFxuXCIpLnNsaWNlKDEsIC03KS5qb2luKFwiXFxuXCIpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYXliZVByb21pc2UgPSBtYXliZVByb21pc2UuX3RhcmdldCgpO1xuICAgICAgICB2YXIgYml0RmllbGQgPSBtYXliZVByb21pc2UuX2JpdEZpZWxkO1xuICAgICAgICA7XG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgdGhpcy5feWllbGRlZFByb21pc2UgPSBtYXliZVByb21pc2U7XG4gICAgICAgICAgICBtYXliZVByb21pc2UuX3Byb3h5KHRoaXMsIG51bGwpO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgICAgICBQcm9taXNlLl9hc3luYy5pbnZva2UoXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZCwgdGhpcywgbWF5YmVQcm9taXNlLl92YWx1ZSgpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICBQcm9taXNlLl9hc3luYy5pbnZva2UoXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZVJlamVjdGVkLCB0aGlzLCBtYXliZVByb21pc2UuX3JlYXNvbigpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcHJvbWlzZUNhbmNlbGxlZCgpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZS5jb3JvdXRpbmUgPSBmdW5jdGlvbiAoZ2VuZXJhdG9yRnVuY3Rpb24sIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIGdlbmVyYXRvckZ1bmN0aW9uICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImdlbmVyYXRvckZ1bmN0aW9uIG11c3QgYmUgYSBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHZhciB5aWVsZEhhbmRsZXIgPSBPYmplY3Qob3B0aW9ucykueWllbGRIYW5kbGVyO1xuICAgIHZhciBQcm9taXNlU3Bhd24kID0gUHJvbWlzZVNwYXduO1xuICAgIHZhciBzdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBnZW5lcmF0b3IgPSBnZW5lcmF0b3JGdW5jdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB2YXIgc3Bhd24gPSBuZXcgUHJvbWlzZVNwYXduJCh1bmRlZmluZWQsIHVuZGVmaW5lZCwgeWllbGRIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjayk7XG4gICAgICAgIHZhciByZXQgPSBzcGF3bi5wcm9taXNlKCk7XG4gICAgICAgIHNwYXduLl9nZW5lcmF0b3IgPSBnZW5lcmF0b3I7XG4gICAgICAgIHNwYXduLl9wcm9taXNlRnVsZmlsbGVkKHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbn07XG5cblByb21pc2UuY29yb3V0aW5lLmFkZFlpZWxkSGFuZGxlciA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICB5aWVsZEhhbmRsZXJzLnB1c2goZm4pO1xufTtcblxuUHJvbWlzZS5zcGF3biA9IGZ1bmN0aW9uIChnZW5lcmF0b3JGdW5jdGlvbikge1xuICAgIGRlYnVnLmRlcHJlY2F0ZWQoXCJQcm9taXNlLnNwYXduKClcIiwgXCJQcm9taXNlLmNvcm91dGluZSgpXCIpO1xuICAgIGlmICh0eXBlb2YgZ2VuZXJhdG9yRnVuY3Rpb24gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZ2VuZXJhdG9yRnVuY3Rpb24gbXVzdCBiZSBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgdmFyIHNwYXduID0gbmV3IFByb21pc2VTcGF3bihnZW5lcmF0b3JGdW5jdGlvbiwgdGhpcyk7XG4gICAgdmFyIHJldCA9IHNwYXduLnByb21pc2UoKTtcbiAgICBzcGF3bi5fcnVuKFByb21pc2Uuc3Bhd24pO1xuICAgIHJldHVybiByZXQ7XG59O1xufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwxNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID1cbmZ1bmN0aW9uKFByb21pc2UsIFByb21pc2VBcnJheSwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwsIGFzeW5jLFxuICAgICAgICAgZ2V0RG9tYWluKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG52YXIgY2FuRXZhbHVhdGUgPSB1dGlsLmNhbkV2YWx1YXRlO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgcmVqZWN0O1xuXG5pZiAoIXRydWUpIHtcbmlmIChjYW5FdmFsdWF0ZSkge1xuICAgIHZhciB0aGVuQ2FsbGJhY2sgPSBmdW5jdGlvbihpKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJ2YWx1ZVwiLCBcImhvbGRlclwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGhvbGRlci5wSW5kZXggPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGhvbGRlci5jaGVja0Z1bGZpbGxtZW50KHRoaXMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiLnJlcGxhY2UoL0luZGV4L2csIGkpKTtcbiAgICB9O1xuXG4gICAgdmFyIHByb21pc2VTZXR0ZXIgPSBmdW5jdGlvbihpKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJwcm9taXNlXCIsIFwiaG9sZGVyXCIsIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGhvbGRlci5wSW5kZXggPSBwcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiLnJlcGxhY2UoL0luZGV4L2csIGkpKTtcbiAgICB9O1xuXG4gICAgdmFyIGdlbmVyYXRlSG9sZGVyQ2xhc3MgPSBmdW5jdGlvbih0b3RhbCkge1xuICAgICAgICB2YXIgcHJvcHMgPSBuZXcgQXJyYXkodG90YWwpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBwcm9wc1tpXSA9IFwidGhpcy5wXCIgKyAoaSsxKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXNzaWdubWVudCA9IHByb3BzLmpvaW4oXCIgPSBcIikgKyBcIiA9IG51bGw7XCI7XG4gICAgICAgIHZhciBjYW5jZWxsYXRpb25Db2RlPSBcInZhciBwcm9taXNlO1xcblwiICsgcHJvcHMubWFwKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgICAgICAgIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9IFwiICsgcHJvcCArIFwiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBpZiAocHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5jYW5jZWwoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiO1xuICAgICAgICB9KS5qb2luKFwiXFxuXCIpO1xuICAgICAgICB2YXIgcGFzc2VkQXJndW1lbnRzID0gcHJvcHMuam9pbihcIiwgXCIpO1xuICAgICAgICB2YXIgbmFtZSA9IFwiSG9sZGVyJFwiICsgdG90YWw7XG5cblxuICAgICAgICB2YXIgY29kZSA9IFwicmV0dXJuIGZ1bmN0aW9uKHRyeUNhdGNoLCBlcnJvck9iaiwgUHJvbWlzZSwgYXN5bmMpIHsgICAgXFxuXFxcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGZ1bmN0aW9uIFtUaGVOYW1lXShmbikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBbVGhlUHJvcGVydGllc10gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB0aGlzLmZuID0gZm47ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB0aGlzLmFzeW5jTmVlZGVkID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB0aGlzLm5vdyA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtUaGVOYW1lXS5wcm90b3R5cGUuX2NhbGxGdW5jdGlvbiA9IGZ1bmN0aW9uKHByb21pc2UpIHsgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gdHJ5Q2F0Y2godGhpcy5mbikoW1RoZVBhc3NlZEFyZ3VtZW50c10pOyAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9wb3BDb250ZXh0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2socmV0LmUsIGZhbHNlKTsgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHJldCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtUaGVOYW1lXS5wcm90b3R5cGUuY2hlY2tGdWxmaWxsbWVudCA9IGZ1bmN0aW9uKHByb21pc2UpIHsgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB2YXIgbm93ID0gKyt0aGlzLm5vdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBpZiAobm93ID09PSBbVGhlVG90YWxdKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXN5bmNOZWVkZWQpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jLmludm9rZSh0aGlzLl9jYWxsRnVuY3Rpb24sIHRoaXMsIHByb21pc2UpOyAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxGdW5jdGlvbihwcm9taXNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtUaGVOYW1lXS5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkgeyAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBbQ2FuY2VsbGF0aW9uQ29kZV0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHJldHVybiBbVGhlTmFtZV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgfSh0cnlDYXRjaCwgZXJyb3JPYmosIFByb21pc2UsIGFzeW5jKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCI7XG5cbiAgICAgICAgY29kZSA9IGNvZGUucmVwbGFjZSgvXFxbVGhlTmFtZVxcXS9nLCBuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1RoZVRvdGFsXFxdL2csIHRvdGFsKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW1RoZVBhc3NlZEFyZ3VtZW50c1xcXS9nLCBwYXNzZWRBcmd1bWVudHMpXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxbVGhlUHJvcGVydGllc1xcXS9nLCBhc3NpZ25tZW50KVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW0NhbmNlbGxhdGlvbkNvZGVcXF0vZywgY2FuY2VsbGF0aW9uQ29kZSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcInRyeUNhdGNoXCIsIFwiZXJyb3JPYmpcIiwgXCJQcm9taXNlXCIsIFwiYXN5bmNcIiwgY29kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICh0cnlDYXRjaCwgZXJyb3JPYmosIFByb21pc2UsIGFzeW5jKTtcbiAgICB9O1xuXG4gICAgdmFyIGhvbGRlckNsYXNzZXMgPSBbXTtcbiAgICB2YXIgdGhlbkNhbGxiYWNrcyA9IFtdO1xuICAgIHZhciBwcm9taXNlU2V0dGVycyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4OyArK2kpIHtcbiAgICAgICAgaG9sZGVyQ2xhc3Nlcy5wdXNoKGdlbmVyYXRlSG9sZGVyQ2xhc3MoaSArIDEpKTtcbiAgICAgICAgdGhlbkNhbGxiYWNrcy5wdXNoKHRoZW5DYWxsYmFjayhpICsgMSkpO1xuICAgICAgICBwcm9taXNlU2V0dGVycy5wdXNoKHByb21pc2VTZXR0ZXIoaSArIDEpKTtcbiAgICB9XG5cbiAgICByZWplY3QgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xuICAgIH07XG59fVxuXG5Qcm9taXNlLmpvaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxhc3QgPSBhcmd1bWVudHMubGVuZ3RoIC0gMTtcbiAgICB2YXIgZm47XG4gICAgaWYgKGxhc3QgPiAwICYmIHR5cGVvZiBhcmd1bWVudHNbbGFzdF0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBmbiA9IGFyZ3VtZW50c1tsYXN0XTtcbiAgICAgICAgaWYgKCF0cnVlKSB7XG4gICAgICAgICAgICBpZiAobGFzdCA8PSA4ICYmIGNhbkV2YWx1YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgICAgICAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICAgICAgdmFyIEhvbGRlckNsYXNzID0gaG9sZGVyQ2xhc3Nlc1tsYXN0IC0gMV07XG4gICAgICAgICAgICAgICAgdmFyIGhvbGRlciA9IG5ldyBIb2xkZXJDbGFzcyhmbik7XG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrcyA9IHRoZW5DYWxsYmFja3M7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3Q7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShhcmd1bWVudHNbaV0sIHJldCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UgPSBtYXliZVByb21pc2UuX3RhcmdldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJpdEZpZWxkID0gbWF5YmVQcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fdGhlbihjYWxsYmFja3NbaV0sIHJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCByZXQsIGhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZVNldHRlcnNbaV0obWF5YmVQcm9taXNlLCBob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRlci5hc3luY05lZWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrc1tpXS5jYWxsKHJldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3ZhbHVlKCksIGhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0Ll9yZWplY3QobWF5YmVQcm9taXNlLl9yZWFzb24oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5fY2FuY2VsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3NbaV0uY2FsbChyZXQsIG1heWJlUHJvbWlzZSwgaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghcmV0Ll9pc0ZhdGVTZWFsZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaG9sZGVyLmFzeW5jTmVlZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9tYWluICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZGVyLmZuID0gdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgaG9sZGVyLmZuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXQuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICAgICAgICAgICAgICByZXQuX3NldE9uQ2FuY2VsKGhvbGRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7O1xuICAgIGlmIChmbikgYXJncy5wb3AoKTtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2VBcnJheShhcmdzKS5wcm9taXNlKCk7XG4gICAgcmV0dXJuIGZuICE9PSB1bmRlZmluZWQgPyByZXQuc3ByZWFkKGZuKSA6IHJldDtcbn07XG5cbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwxODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZUFycmF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZWplY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIElOVEVSTkFMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Zykge1xudmFyIGdldERvbWFpbiA9IFByb21pc2UuX2dldERvbWFpbjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG5cbmZ1bmN0aW9uIE1hcHBpbmdQcm9taXNlQXJyYXkocHJvbWlzZXMsIGZuLCBsaW1pdCwgX2ZpbHRlcikge1xuICAgIHRoaXMuY29uc3RydWN0b3IkKHByb21pc2VzKTtcbiAgICB0aGlzLl9wcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHZhciBkb21haW4gPSBnZXREb21haW4oKTtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGRvbWFpbiA9PT0gbnVsbCA/IGZuIDogdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgZm4pO1xuICAgIHRoaXMuX3ByZXNlcnZlZFZhbHVlcyA9IF9maWx0ZXIgPT09IElOVEVSTkFMXG4gICAgICAgID8gbmV3IEFycmF5KHRoaXMubGVuZ3RoKCkpXG4gICAgICAgIDogbnVsbDtcbiAgICB0aGlzLl9saW1pdCA9IGxpbWl0O1xuICAgIHRoaXMuX2luRmxpZ2h0ID0gMDtcbiAgICB0aGlzLl9xdWV1ZSA9IFtdO1xuICAgIGFzeW5jLmludm9rZSh0aGlzLl9hc3luY0luaXQsIHRoaXMsIHVuZGVmaW5lZCk7XG59XG51dGlsLmluaGVyaXRzKE1hcHBpbmdQcm9taXNlQXJyYXksIFByb21pc2VBcnJheSk7XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9hc3luY0luaXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9pbml0JCh1bmRlZmluZWQsIC0yKTtcbn07XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkge307XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLl92YWx1ZXM7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoKCk7XG4gICAgdmFyIHByZXNlcnZlZFZhbHVlcyA9IHRoaXMuX3ByZXNlcnZlZFZhbHVlcztcbiAgICB2YXIgbGltaXQgPSB0aGlzLl9saW1pdDtcblxuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgaW5kZXggPSAoaW5kZXggKiAtMSkgLSAxO1xuICAgICAgICB2YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgIGlmIChsaW1pdCA+PSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9pbkZsaWdodC0tO1xuICAgICAgICAgICAgdGhpcy5fZHJhaW5RdWV1ZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobGltaXQgPj0gMSAmJiB0aGlzLl9pbkZsaWdodCA+PSBsaW1pdCkge1xuICAgICAgICAgICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fcXVldWUucHVzaChpbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXNlcnZlZFZhbHVlcyAhPT0gbnVsbCkgcHJlc2VydmVkVmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5fY2FsbGJhY2s7XG4gICAgICAgIHZhciByZWNlaXZlciA9IHByb21pc2UuX2JvdW5kVmFsdWUoKTtcbiAgICAgICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgdmFyIHJldCA9IHRyeUNhdGNoKGNhbGxiYWNrKS5jYWxsKHJlY2VpdmVyLCB2YWx1ZSwgaW5kZXgsIGxlbmd0aCk7XG4gICAgICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHByb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICAgICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICAgICAgcmV0LFxuICAgICAgICAgICAgcHJvbWlzZUNyZWF0ZWQsXG4gICAgICAgICAgICBwcmVzZXJ2ZWRWYWx1ZXMgIT09IG51bGwgPyBcIlByb21pc2UuZmlsdGVyXCIgOiBcIlByb21pc2UubWFwXCIsXG4gICAgICAgICAgICBwcm9taXNlXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3QocmV0LmUpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXQsIHRoaXMuX3Byb21pc2UpO1xuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIHZhciBiaXRGaWVsZCA9IG1heWJlUHJvbWlzZS5fYml0RmllbGQ7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICBpZiAobGltaXQgPj0gMSkgdGhpcy5faW5GbGlnaHQrKztcbiAgICAgICAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fcHJveHkodGhpcywgKGluZGV4ICsgMSkgKiAtMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIHJldCA9IG1heWJlUHJvbWlzZS5fdmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QobWF5YmVQcm9taXNlLl9yZWFzb24oKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhbmNlbCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpbmRleF0gPSByZXQ7XG4gICAgfVxuICAgIHZhciB0b3RhbFJlc29sdmVkID0gKyt0aGlzLl90b3RhbFJlc29sdmVkO1xuICAgIGlmICh0b3RhbFJlc29sdmVkID49IGxlbmd0aCkge1xuICAgICAgICBpZiAocHJlc2VydmVkVmFsdWVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9maWx0ZXIodmFsdWVzLCBwcmVzZXJ2ZWRWYWx1ZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZHJhaW5RdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcXVldWUgPSB0aGlzLl9xdWV1ZTtcbiAgICB2YXIgbGltaXQgPSB0aGlzLl9saW1pdDtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5fdmFsdWVzO1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwICYmIHRoaXMuX2luRmxpZ2h0IDwgbGltaXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuO1xuICAgICAgICB2YXIgaW5kZXggPSBxdWV1ZS5wb3AoKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZCh2YWx1ZXNbaW5kZXhdLCBpbmRleCk7XG4gICAgfVxufTtcblxuTWFwcGluZ1Byb21pc2VBcnJheS5wcm90b3R5cGUuX2ZpbHRlciA9IGZ1bmN0aW9uIChib29sZWFucywgdmFsdWVzKSB7XG4gICAgdmFyIGxlbiA9IHZhbHVlcy5sZW5ndGg7XG4gICAgdmFyIHJldCA9IG5ldyBBcnJheShsZW4pO1xuICAgIHZhciBqID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIGlmIChib29sZWFuc1tpXSkgcmV0W2orK10gPSB2YWx1ZXNbaV07XG4gICAgfVxuICAgIHJldC5sZW5ndGggPSBqO1xuICAgIHRoaXMuX3Jlc29sdmUocmV0KTtcbn07XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLnByZXNlcnZlZFZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJlc2VydmVkVmFsdWVzO1xufTtcblxuZnVuY3Rpb24gbWFwKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG5cbiAgICB2YXIgbGltaXQgPSAwO1xuICAgIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jb25jdXJyZW5jeSAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFR5cGVFcnJvcihcIidjb25jdXJyZW5jeScgbXVzdCBiZSBhIG51bWJlciBidXQgaXQgaXMgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5jbGFzc1N0cmluZyhvcHRpb25zLmNvbmN1cnJlbmN5KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGltaXQgPSBvcHRpb25zLmNvbmN1cnJlbmN5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25zIGFyZ3VtZW50IG11c3QgYmUgYW4gb2JqZWN0IGJ1dCBpdCBpcyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcob3B0aW9ucykpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsaW1pdCA9IHR5cGVvZiBsaW1pdCA9PT0gXCJudW1iZXJcIiAmJlxuICAgICAgICBpc0Zpbml0ZShsaW1pdCkgJiYgbGltaXQgPj0gMSA/IGxpbWl0IDogMDtcbiAgICByZXR1cm4gbmV3IE1hcHBpbmdQcm9taXNlQXJyYXkocHJvbWlzZXMsIGZuLCBsaW1pdCwgX2ZpbHRlcikucHJvbWlzZSgpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAoZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbWFwKHRoaXMsIGZuLCBvcHRpb25zLCBudWxsKTtcbn07XG5cblByb21pc2UubWFwID0gZnVuY3Rpb24gKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcikge1xuICAgIHJldHVybiBtYXAocHJvbWlzZXMsIGZuLCBvcHRpb25zLCBfZmlsdGVyKTtcbn07XG5cblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDE5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPVxuZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbiwgZGVidWcpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciB0cnlDYXRjaCA9IHV0aWwudHJ5Q2F0Y2g7XG5cblByb21pc2UubWV0aG9kID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBQcm9taXNlLlR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgcmV0Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICB2YXIgdmFsdWUgPSB0cnlDYXRjaChmbikuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIHByb21pc2VDcmVhdGVkID0gcmV0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgIGRlYnVnLmNoZWNrRm9yZ290dGVuUmV0dXJucyhcbiAgICAgICAgICAgIHZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgXCJQcm9taXNlLm1ldGhvZFwiLCByZXQpO1xuICAgICAgICByZXQuX3Jlc29sdmVGcm9tU3luY1ZhbHVlKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufTtcblxuUHJvbWlzZS5hdHRlbXB0ID0gUHJvbWlzZVtcInRyeVwiXSA9IGZ1bmN0aW9uIChmbikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZXhwZWN0aW5nIGEgZnVuY3Rpb24gYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcoZm4pKTtcbiAgICB9XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgcmV0Ll9wdXNoQ29udGV4dCgpO1xuICAgIHZhciB2YWx1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZGVidWcuZGVwcmVjYXRlZChcImNhbGxpbmcgUHJvbWlzZS50cnkgd2l0aCBtb3JlIHRoYW4gMSBhcmd1bWVudFwiKTtcbiAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgdmFyIGN0eCA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgdmFsdWUgPSB1dGlsLmlzQXJyYXkoYXJnKSA/IHRyeUNhdGNoKGZuKS5hcHBseShjdHgsIGFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRyeUNhdGNoKGZuKS5jYWxsKGN0eCwgYXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IHRyeUNhdGNoKGZuKSgpO1xuICAgIH1cbiAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSByZXQuX3BvcENvbnRleHQoKTtcbiAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoXG4gICAgICAgIHZhbHVlLCBwcm9taXNlQ3JlYXRlZCwgXCJQcm9taXNlLnRyeVwiLCByZXQpO1xuICAgIHJldC5fcmVzb2x2ZUZyb21TeW5jVmFsdWUodmFsdWUpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVzb2x2ZUZyb21TeW5jVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHV0aWwuZXJyb3JPYmopIHtcbiAgICAgICAgdGhpcy5fcmVqZWN0Q2FsbGJhY2sodmFsdWUuZSwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxufTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBtYXliZVdyYXBBc0Vycm9yID0gdXRpbC5tYXliZVdyYXBBc0Vycm9yO1xudmFyIGVycm9ycyA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKTtcbnZhciBPcGVyYXRpb25hbEVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xuXG5mdW5jdGlvbiBpc1VudHlwZWRFcnJvcihvYmopIHtcbiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgRXJyb3IgJiZcbiAgICAgICAgZXM1LmdldFByb3RvdHlwZU9mKG9iaikgPT09IEVycm9yLnByb3RvdHlwZTtcbn1cblxudmFyIHJFcnJvcktleSA9IC9eKD86bmFtZXxtZXNzYWdlfHN0YWNrfGNhdXNlKSQvO1xuZnVuY3Rpb24gd3JhcEFzT3BlcmF0aW9uYWxFcnJvcihvYmopIHtcbiAgICB2YXIgcmV0O1xuICAgIGlmIChpc1VudHlwZWRFcnJvcihvYmopKSB7XG4gICAgICAgIHJldCA9IG5ldyBPcGVyYXRpb25hbEVycm9yKG9iaik7XG4gICAgICAgIHJldC5uYW1lID0gb2JqLm5hbWU7XG4gICAgICAgIHJldC5tZXNzYWdlID0gb2JqLm1lc3NhZ2U7XG4gICAgICAgIHJldC5zdGFjayA9IG9iai5zdGFjaztcbiAgICAgICAgdmFyIGtleXMgPSBlczUua2V5cyhvYmopO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgaWYgKCFyRXJyb3JLZXkudGVzdChrZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICB1dGlsLm1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbihvYmopO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIG5vZGViYWNrRm9yUHJvbWlzZShwcm9taXNlLCBtdWx0aUFyZ3MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZXJyLCB2YWx1ZSkge1xuICAgICAgICBpZiAocHJvbWlzZSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlZCA9IHdyYXBBc09wZXJhdGlvbmFsRXJyb3IobWF5YmVXcmFwQXNFcnJvcihlcnIpKTtcbiAgICAgICAgICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2Uod3JhcHBlZCk7XG4gICAgICAgICAgICBwcm9taXNlLl9yZWplY3Qod3JhcHBlZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIW11bHRpQXJncykge1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTs7XG4gICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsKGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbm9kZWJhY2tGb3JQcm9taXNlO1xuXG59LHtcIi4vZXJyb3JzXCI6MTIsXCIuL2VzNVwiOjEzLFwiLi91dGlsXCI6MzZ9XSwyMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGFzeW5jID0gUHJvbWlzZS5fYXN5bmM7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcblxuZnVuY3Rpb24gc3ByZWFkQWRhcHRlcih2YWwsIG5vZGViYWNrKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIGlmICghdXRpbC5pc0FycmF5KHZhbCkpIHJldHVybiBzdWNjZXNzQWRhcHRlci5jYWxsKHByb21pc2UsIHZhbCwgbm9kZWJhY2spO1xuICAgIHZhciByZXQgPVxuICAgICAgICB0cnlDYXRjaChub2RlYmFjaykuYXBwbHkocHJvbWlzZS5fYm91bmRWYWx1ZSgpLCBbbnVsbF0uY29uY2F0KHZhbCkpO1xuICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIocmV0LmUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3VjY2Vzc0FkYXB0ZXIodmFsLCBub2RlYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB2YXIgcmVjZWl2ZXIgPSBwcm9taXNlLl9ib3VuZFZhbHVlKCk7XG4gICAgdmFyIHJldCA9IHZhbCA9PT0gdW5kZWZpbmVkXG4gICAgICAgID8gdHJ5Q2F0Y2gobm9kZWJhY2spLmNhbGwocmVjZWl2ZXIsIG51bGwpXG4gICAgICAgIDogdHJ5Q2F0Y2gobm9kZWJhY2spLmNhbGwocmVjZWl2ZXIsIG51bGwsIHZhbCk7XG4gICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihyZXQuZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZXJyb3JBZGFwdGVyKHJlYXNvbiwgbm9kZWJhY2spIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgICAgdmFyIG5ld1JlYXNvbiA9IG5ldyBFcnJvcihyZWFzb24gKyBcIlwiKTtcbiAgICAgICAgbmV3UmVhc29uLmNhdXNlID0gcmVhc29uO1xuICAgICAgICByZWFzb24gPSBuZXdSZWFzb247XG4gICAgfVxuICAgIHZhciByZXQgPSB0cnlDYXRjaChub2RlYmFjaykuY2FsbChwcm9taXNlLl9ib3VuZFZhbHVlKCksIHJlYXNvbik7XG4gICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihyZXQuZSk7XG4gICAgfVxufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5hc0NhbGxiYWNrID0gUHJvbWlzZS5wcm90b3R5cGUubm9kZWlmeSA9IGZ1bmN0aW9uIChub2RlYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG5vZGViYWNrID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgYWRhcHRlciA9IHN1Y2Nlc3NBZGFwdGVyO1xuICAgICAgICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIE9iamVjdChvcHRpb25zKS5zcHJlYWQpIHtcbiAgICAgICAgICAgIGFkYXB0ZXIgPSBzcHJlYWRBZGFwdGVyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgZXJyb3JBZGFwdGVyLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIG5vZGViYWNrXG4gICAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcbn07XG5cbn0se1wiLi91dGlsXCI6MzZ9XSwyMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG52YXIgbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJjaXJjdWxhciBwcm9taXNlIHJlc29sdXRpb24gY2hhaW5cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xufTtcbnZhciByZWZsZWN0SGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbih0aGlzLl90YXJnZXQoKSk7XG59O1xudmFyIGFwaVJlamVjdGlvbiA9IGZ1bmN0aW9uKG1zZykge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKG1zZykpO1xufTtcbmZ1bmN0aW9uIFByb3h5YWJsZSgpIHt9XG52YXIgVU5ERUZJTkVEX0JJTkRJTkcgPSB7fTtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcblxudmFyIGdldERvbWFpbjtcbmlmICh1dGlsLmlzTm9kZSkge1xuICAgIGdldERvbWFpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmV0ID0gcHJvY2Vzcy5kb21haW47XG4gICAgICAgIGlmIChyZXQgPT09IHVuZGVmaW5lZCkgcmV0ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBnZXREb21haW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cbnV0aWwubm90RW51bWVyYWJsZVByb3AoUHJvbWlzZSwgXCJfZ2V0RG9tYWluXCIsIGdldERvbWFpbik7XG5cbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgQXN5bmMgPSBfZGVyZXFfKFwiLi9hc3luY1wiKTtcbnZhciBhc3luYyA9IG5ldyBBc3luYygpO1xuZXM1LmRlZmluZVByb3BlcnR5KFByb21pc2UsIFwiX2FzeW5jXCIsIHt2YWx1ZTogYXN5bmN9KTtcbnZhciBlcnJvcnMgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIik7XG52YXIgVHlwZUVycm9yID0gUHJvbWlzZS5UeXBlRXJyb3IgPSBlcnJvcnMuVHlwZUVycm9yO1xuUHJvbWlzZS5SYW5nZUVycm9yID0gZXJyb3JzLlJhbmdlRXJyb3I7XG52YXIgQ2FuY2VsbGF0aW9uRXJyb3IgPSBQcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yID0gZXJyb3JzLkNhbmNlbGxhdGlvbkVycm9yO1xuUHJvbWlzZS5UaW1lb3V0RXJyb3IgPSBlcnJvcnMuVGltZW91dEVycm9yO1xuUHJvbWlzZS5PcGVyYXRpb25hbEVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG5Qcm9taXNlLlJlamVjdGlvbkVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG5Qcm9taXNlLkFnZ3JlZ2F0ZUVycm9yID0gZXJyb3JzLkFnZ3JlZ2F0ZUVycm9yO1xudmFyIElOVEVSTkFMID0gZnVuY3Rpb24oKXt9O1xudmFyIEFQUExZID0ge307XG52YXIgTkVYVF9GSUxURVIgPSB7fTtcbnZhciB0cnlDb252ZXJ0VG9Qcm9taXNlID0gX2RlcmVxXyhcIi4vdGhlbmFibGVzXCIpKFByb21pc2UsIElOVEVSTkFMKTtcbnZhciBQcm9taXNlQXJyYXkgPVxuICAgIF9kZXJlcV8oXCIuL3Byb21pc2VfYXJyYXlcIikoUHJvbWlzZSwgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uLCBQcm94eWFibGUpO1xudmFyIENvbnRleHQgPSBfZGVyZXFfKFwiLi9jb250ZXh0XCIpKFByb21pc2UpO1xuIC8qanNoaW50IHVudXNlZDpmYWxzZSovXG52YXIgY3JlYXRlQ29udGV4dCA9IENvbnRleHQuY3JlYXRlO1xudmFyIGRlYnVnID0gX2RlcmVxXyhcIi4vZGVidWdnYWJpbGl0eVwiKShQcm9taXNlLCBDb250ZXh0KTtcbnZhciBDYXB0dXJlZFRyYWNlID0gZGVidWcuQ2FwdHVyZWRUcmFjZTtcbnZhciBQYXNzVGhyb3VnaEhhbmRsZXJDb250ZXh0ID1cbiAgICBfZGVyZXFfKFwiLi9maW5hbGx5XCIpKFByb21pc2UsIHRyeUNvbnZlcnRUb1Byb21pc2UpO1xudmFyIGNhdGNoRmlsdGVyID0gX2RlcmVxXyhcIi4vY2F0Y2hfZmlsdGVyXCIpKE5FWFRfRklMVEVSKTtcbnZhciBub2RlYmFja0ZvclByb21pc2UgPSBfZGVyZXFfKFwiLi9ub2RlYmFja1wiKTtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG52YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuZnVuY3Rpb24gY2hlY2soc2VsZiwgZXhlY3V0b3IpIHtcbiAgICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGV4ZWN1dG9yKSk7XG4gICAgfVxuICAgIGlmIChzZWxmLmNvbnN0cnVjdG9yICE9PSBQcm9taXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgaW52b2tlZCBkaXJlY3RseVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSAwO1xuICAgIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcHJvbWlzZTAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVjZWl2ZXIwID0gdW5kZWZpbmVkO1xuICAgIGlmIChleGVjdXRvciAhPT0gSU5URVJOQUwpIHtcbiAgICAgICAgY2hlY2sodGhpcywgZXhlY3V0b3IpO1xuICAgICAgICB0aGlzLl9yZXNvbHZlRnJvbUV4ZWN1dG9yKGV4ZWN1dG9yKTtcbiAgICB9XG4gICAgdGhpcy5fcHJvbWlzZUNyZWF0ZWQoKTtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlQ3JlYXRlZFwiLCB0aGlzKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBQcm9taXNlXVwiO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuY2F1Z2h0ID0gUHJvbWlzZS5wcm90b3R5cGVbXCJjYXRjaFwiXSA9IGZ1bmN0aW9uIChmbikge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgIHZhciBjYXRjaEluc3RhbmNlcyA9IG5ldyBBcnJheShsZW4gLSAxKSxcbiAgICAgICAgICAgIGogPSAwLCBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuIC0gMTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmICh1dGlsLmlzT2JqZWN0KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgY2F0Y2hJbnN0YW5jZXNbaisrXSA9IGl0ZW07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYW4gb2JqZWN0IGJ1dCBnb3QgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkEgY2F0Y2ggc3RhdGVtZW50IHByZWRpY2F0ZSBcIiArIHV0aWwuY2xhc3NTdHJpbmcoaXRlbSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoSW5zdGFuY2VzLmxlbmd0aCA9IGo7XG4gICAgICAgIGZuID0gYXJndW1lbnRzW2ldO1xuICAgICAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgY2F0Y2hGaWx0ZXIoY2F0Y2hJbnN0YW5jZXMsIGZuLCB0aGlzKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRoZW4odW5kZWZpbmVkLCBmbik7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5yZWZsZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl90aGVuKHJlZmxlY3RIYW5kbGVyLFxuICAgICAgICByZWZsZWN0SGFuZGxlciwgdW5kZWZpbmVkLCB0aGlzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChkaWRGdWxmaWxsLCBkaWRSZWplY3QpIHtcbiAgICBpZiAoZGVidWcud2FybmluZ3MoKSAmJiBhcmd1bWVudHMubGVuZ3RoID4gMCAmJlxuICAgICAgICB0eXBlb2YgZGlkRnVsZmlsbCAhPT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIHR5cGVvZiBkaWRSZWplY3QgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgbXNnID0gXCIudGhlbigpIG9ubHkgYWNjZXB0cyBmdW5jdGlvbnMgYnV0IHdhcyBwYXNzZWQ6IFwiICtcbiAgICAgICAgICAgICAgICB1dGlsLmNsYXNzU3RyaW5nKGRpZEZ1bGZpbGwpO1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIG1zZyArPSBcIiwgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGRpZFJlamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fd2Fybihtc2cpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGhlbihkaWRGdWxmaWxsLCBkaWRSZWplY3QsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZG9uZSA9IGZ1bmN0aW9uIChkaWRGdWxmaWxsLCBkaWRSZWplY3QpIHtcbiAgICB2YXIgcHJvbWlzZSA9XG4gICAgICAgIHRoaXMuX3RoZW4oZGlkRnVsZmlsbCwgZGlkUmVqZWN0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICBwcm9taXNlLl9zZXRJc0ZpbmFsKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5zcHJlYWQgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhIGZ1bmN0aW9uIGJ1dCBnb3QgXCIgKyB1dGlsLmNsYXNzU3RyaW5nKGZuKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmFsbCgpLl90aGVuKGZuLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgQVBQTFksIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldCA9IHtcbiAgICAgICAgaXNGdWxmaWxsZWQ6IGZhbHNlLFxuICAgICAgICBpc1JlamVjdGVkOiBmYWxzZSxcbiAgICAgICAgZnVsZmlsbG1lbnRWYWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICByZWplY3Rpb25SZWFzb246IHVuZGVmaW5lZFxuICAgIH07XG4gICAgaWYgKHRoaXMuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICByZXQuZnVsZmlsbG1lbnRWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgICAgcmV0LmlzRnVsZmlsbGVkID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIHJldC5yZWplY3Rpb25SZWFzb24gPSB0aGlzLnJlYXNvbigpO1xuICAgICAgICByZXQuaXNSZWplY3RlZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5hbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuX3dhcm4oXCIuYWxsKCkgd2FzIHBhc3NlZCBhcmd1bWVudHMgYnV0IGl0IGRvZXMgbm90IHRha2UgYW55XCIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2VBcnJheSh0aGlzKS5wcm9taXNlKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChmbikge1xuICAgIHJldHVybiB0aGlzLmNhdWdodCh1dGlsLm9yaWdpbmF0ZXNGcm9tUmVqZWN0aW9uLCBmbik7XG59O1xuXG5Qcm9taXNlLmdldE5ld0xpYnJhcnlDb3B5ID0gbW9kdWxlLmV4cG9ydHM7XG5cblByb21pc2UuaXMgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgcmV0dXJuIHZhbCBpbnN0YW5jZW9mIFByb21pc2U7XG59O1xuXG5Qcm9taXNlLmZyb21Ob2RlID0gUHJvbWlzZS5mcm9tQ2FsbGJhY2sgPSBmdW5jdGlvbihmbikge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIHZhciBtdWx0aUFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/ICEhT2JqZWN0KGFyZ3VtZW50c1sxXSkubXVsdGlBcmdzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKGZuKShub2RlYmFja0ZvclByb21pc2UocmV0LCBtdWx0aUFyZ3MpKTtcbiAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICByZXQuX3JlamVjdENhbGxiYWNrKHJlc3VsdC5lLCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKCFyZXQuX2lzRmF0ZVNlYWxlZCgpKSByZXQuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLmFsbCA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZUFycmF5KHByb21pc2VzKS5wcm9taXNlKCk7XG59O1xuXG5Qcm9taXNlLmNhc3QgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgdmFyIHJldCA9IHRyeUNvbnZlcnRUb1Byb21pc2Uob2JqKTtcbiAgICBpZiAoIShyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuICAgICAgICByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgcmV0Ll9zZXRGdWxmaWxsZWQoKTtcbiAgICAgICAgcmV0Ll9yZWplY3Rpb25IYW5kbGVyMCA9IG9iajtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucmVzb2x2ZSA9IFByb21pc2UuZnVsZmlsbGVkID0gUHJvbWlzZS5jYXN0O1xuXG5Qcm9taXNlLnJlamVjdCA9IFByb21pc2UucmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgcmV0Ll9yZWplY3RDYWxsYmFjayhyZWFzb24sIHRydWUpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnNldFNjaGVkdWxlciA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICByZXR1cm4gYXN5bmMuc2V0U2NoZWR1bGVyKGZuKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl90aGVuID0gZnVuY3Rpb24gKFxuICAgIGRpZEZ1bGZpbGwsXG4gICAgZGlkUmVqZWN0LFxuICAgIF8sICAgIHJlY2VpdmVyLFxuICAgIGludGVybmFsRGF0YVxuKSB7XG4gICAgdmFyIGhhdmVJbnRlcm5hbERhdGEgPSBpbnRlcm5hbERhdGEgIT09IHVuZGVmaW5lZDtcbiAgICB2YXIgcHJvbWlzZSA9IGhhdmVJbnRlcm5hbERhdGEgPyBpbnRlcm5hbERhdGEgOiBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIHZhciBiaXRGaWVsZCA9IHRhcmdldC5fYml0RmllbGQ7XG5cbiAgICBpZiAoIWhhdmVJbnRlcm5hbERhdGEpIHtcbiAgICAgICAgcHJvbWlzZS5fcHJvcGFnYXRlRnJvbSh0aGlzLCAzKTtcbiAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgaWYgKHJlY2VpdmVyID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICgodGhpcy5fYml0RmllbGQgJiAyMDk3MTUyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIGlmICghKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlciA9IHRoaXMuX2JvdW5kVmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB0YXJnZXQgPT09IHRoaXMgPyB1bmRlZmluZWQgOiB0aGlzLl9ib3VuZFRvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VDaGFpbmVkXCIsIHRoaXMsIHByb21pc2UpO1xuICAgIH1cblxuICAgIHZhciBkb21haW4gPSBnZXREb21haW4oKTtcbiAgICBpZiAoISgoYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgIHZhciBoYW5kbGVyLCB2YWx1ZSwgc2V0dGxlciA9IHRhcmdldC5fc2V0dGxlUHJvbWlzZUN0eDtcbiAgICAgICAgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRhcmdldC5fcmVqZWN0aW9uSGFuZGxlcjA7XG4gICAgICAgICAgICBoYW5kbGVyID0gZGlkRnVsZmlsbDtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0YXJnZXQuX2Z1bGZpbGxtZW50SGFuZGxlcjA7XG4gICAgICAgICAgICBoYW5kbGVyID0gZGlkUmVqZWN0O1xuICAgICAgICAgICAgdGFyZ2V0Ll91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXR0bGVyID0gdGFyZ2V0Ll9zZXR0bGVQcm9taXNlTGF0ZUNhbmNlbGxhdGlvbk9ic2VydmVyO1xuICAgICAgICAgICAgdmFsdWUgPSBuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoXCJsYXRlIGNhbmNlbGxhdGlvbiBvYnNlcnZlclwiKTtcbiAgICAgICAgICAgIHRhcmdldC5fYXR0YWNoRXh0cmFUcmFjZSh2YWx1ZSk7XG4gICAgICAgICAgICBoYW5kbGVyID0gZGlkUmVqZWN0O1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMuaW52b2tlKHNldHRsZXIsIHRhcmdldCwge1xuICAgICAgICAgICAgaGFuZGxlcjogZG9tYWluID09PSBudWxsID8gaGFuZGxlclxuICAgICAgICAgICAgICAgIDogKHR5cGVvZiBoYW5kbGVyID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgaGFuZGxlcikpLFxuICAgICAgICAgICAgcHJvbWlzZTogcHJvbWlzZSxcbiAgICAgICAgICAgIHJlY2VpdmVyOiByZWNlaXZlcixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQuX2FkZENhbGxiYWNrcyhkaWRGdWxmaWxsLCBkaWRSZWplY3QsIHByb21pc2UsIHJlY2VpdmVyLCBkb21haW4pO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2xlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fYml0RmllbGQgJiA2NTUzNTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0ZhdGVTZWFsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDExNzUwNjA0OCkgIT09IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNGb2xsb3dpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDY3MTA4ODY0KSA9PT0gNjcxMDg4NjQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0TGVuZ3RoID0gZnVuY3Rpb24gKGxlbikge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gKHRoaXMuX2JpdEZpZWxkICYgLTY1NTM2KSB8XG4gICAgICAgIChsZW4gJiA2NTUzNSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0RnVsZmlsbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAzMzU1NDQzMjtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlRnVsZmlsbGVkXCIsIHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFJlamVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAxNjc3NzIxNjtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlUmVqZWN0ZWRcIiwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0Rm9sbG93aW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCA2NzEwODg2NDtcbiAgICB0aGlzLl9maXJlRXZlbnQoXCJwcm9taXNlUmVzb2x2ZWRcIiwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0SXNGaW5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgNDE5NDMwNDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0ZpbmFsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA0MTk0MzA0KSA+IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdW5zZXRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkICYgKH42NTUzNik7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDY1NTM2O1xuICAgIHRoaXMuX2ZpcmVFdmVudChcInByb21pc2VDYW5jZWxsZWRcIiwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0V2lsbEJlQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDgzODg2MDg7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0QXN5bmNHdWFyYW50ZWVkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGFzeW5jLmhhc0N1c3RvbVNjaGVkdWxlcigpKSByZXR1cm47XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDEzNDIxNzcyODtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWNlaXZlckF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgdmFyIHJldCA9IGluZGV4ID09PSAwID8gdGhpcy5fcmVjZWl2ZXIwIDogdGhpc1tcbiAgICAgICAgICAgIGluZGV4ICogNCAtIDQgKyAzXTtcbiAgICBpZiAocmV0ID09PSBVTkRFRklORURfQklORElORykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSBpZiAocmV0ID09PSB1bmRlZmluZWQgJiYgdGhpcy5faXNCb3VuZCgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ib3VuZFZhbHVlKCk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcHJvbWlzZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXNbXG4gICAgICAgICAgICBpbmRleCAqIDQgLSA0ICsgMl07XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZnVsZmlsbG1lbnRIYW5kbGVyQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpc1tcbiAgICAgICAgICAgIGluZGV4ICogNCAtIDQgKyAwXTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3Rpb25IYW5kbGVyQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpc1tcbiAgICAgICAgICAgIGluZGV4ICogNCAtIDQgKyAxXTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9ib3VuZFZhbHVlID0gZnVuY3Rpb24oKSB7fTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX21pZ3JhdGVDYWxsYmFjazAgPSBmdW5jdGlvbiAoZm9sbG93ZXIpIHtcbiAgICB2YXIgYml0RmllbGQgPSBmb2xsb3dlci5fYml0RmllbGQ7XG4gICAgdmFyIGZ1bGZpbGwgPSBmb2xsb3dlci5fZnVsZmlsbG1lbnRIYW5kbGVyMDtcbiAgICB2YXIgcmVqZWN0ID0gZm9sbG93ZXIuX3JlamVjdGlvbkhhbmRsZXIwO1xuICAgIHZhciBwcm9taXNlID0gZm9sbG93ZXIuX3Byb21pc2UwO1xuICAgIHZhciByZWNlaXZlciA9IGZvbGxvd2VyLl9yZWNlaXZlckF0KDApO1xuICAgIGlmIChyZWNlaXZlciA9PT0gdW5kZWZpbmVkKSByZWNlaXZlciA9IFVOREVGSU5FRF9CSU5ESU5HO1xuICAgIHRoaXMuX2FkZENhbGxiYWNrcyhmdWxmaWxsLCByZWplY3QsIHByb21pc2UsIHJlY2VpdmVyLCBudWxsKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9taWdyYXRlQ2FsbGJhY2tBdCA9IGZ1bmN0aW9uIChmb2xsb3dlciwgaW5kZXgpIHtcbiAgICB2YXIgZnVsZmlsbCA9IGZvbGxvd2VyLl9mdWxmaWxsbWVudEhhbmRsZXJBdChpbmRleCk7XG4gICAgdmFyIHJlamVjdCA9IGZvbGxvd2VyLl9yZWplY3Rpb25IYW5kbGVyQXQoaW5kZXgpO1xuICAgIHZhciBwcm9taXNlID0gZm9sbG93ZXIuX3Byb21pc2VBdChpbmRleCk7XG4gICAgdmFyIHJlY2VpdmVyID0gZm9sbG93ZXIuX3JlY2VpdmVyQXQoaW5kZXgpO1xuICAgIGlmIChyZWNlaXZlciA9PT0gdW5kZWZpbmVkKSByZWNlaXZlciA9IFVOREVGSU5FRF9CSU5ESU5HO1xuICAgIHRoaXMuX2FkZENhbGxiYWNrcyhmdWxmaWxsLCByZWplY3QsIHByb21pc2UsIHJlY2VpdmVyLCBudWxsKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9hZGRDYWxsYmFja3MgPSBmdW5jdGlvbiAoXG4gICAgZnVsZmlsbCxcbiAgICByZWplY3QsXG4gICAgcHJvbWlzZSxcbiAgICByZWNlaXZlcixcbiAgICBkb21haW5cbikge1xuICAgIHZhciBpbmRleCA9IHRoaXMuX2xlbmd0aCgpO1xuXG4gICAgaWYgKGluZGV4ID49IDY1NTM1IC0gNCkge1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX3NldExlbmd0aCgwKTtcbiAgICB9XG5cbiAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgdGhpcy5fcHJvbWlzZTAgPSBwcm9taXNlO1xuICAgICAgICB0aGlzLl9yZWNlaXZlcjAgPSByZWNlaXZlcjtcbiAgICAgICAgaWYgKHR5cGVvZiBmdWxmaWxsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPVxuICAgICAgICAgICAgICAgIGRvbWFpbiA9PT0gbnVsbCA/IGZ1bGZpbGwgOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBmdWxmaWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlamVjdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMCA9XG4gICAgICAgICAgICAgICAgZG9tYWluID09PSBudWxsID8gcmVqZWN0IDogdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBiYXNlID0gaW5kZXggKiA0IC0gNDtcbiAgICAgICAgdGhpc1tiYXNlICsgMl0gPSBwcm9taXNlO1xuICAgICAgICB0aGlzW2Jhc2UgKyAzXSA9IHJlY2VpdmVyO1xuICAgICAgICBpZiAodHlwZW9mIGZ1bGZpbGwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpc1tiYXNlICsgMF0gPVxuICAgICAgICAgICAgICAgIGRvbWFpbiA9PT0gbnVsbCA/IGZ1bGZpbGwgOiB1dGlsLmRvbWFpbkJpbmQoZG9tYWluLCBmdWxmaWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlamVjdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzW2Jhc2UgKyAxXSA9XG4gICAgICAgICAgICAgICAgZG9tYWluID09PSBudWxsID8gcmVqZWN0IDogdXRpbC5kb21haW5CaW5kKGRvbWFpbiwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9zZXRMZW5ndGgoaW5kZXggKyAxKTtcbiAgICByZXR1cm4gaW5kZXg7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcHJveHkgPSBmdW5jdGlvbiAocHJveHlhYmxlLCBhcmcpIHtcbiAgICB0aGlzLl9hZGRDYWxsYmFja3ModW5kZWZpbmVkLCB1bmRlZmluZWQsIGFyZywgcHJveHlhYmxlLCBudWxsKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZXNvbHZlQ2FsbGJhY2sgPSBmdW5jdGlvbih2YWx1ZSwgc2hvdWxkQmluZCkge1xuICAgIGlmICgoKHRoaXMuX2JpdEZpZWxkICYgMTE3NTA2MDQ4KSAhPT0gMCkpIHJldHVybjtcbiAgICBpZiAodmFsdWUgPT09IHRoaXMpXG4gICAgICAgIHJldHVybiB0aGlzLl9yZWplY3RDYWxsYmFjayhtYWtlU2VsZlJlc29sdXRpb25FcnJvcigpLCBmYWxzZSk7XG4gICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodmFsdWUsIHRoaXMpO1xuICAgIGlmICghKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSByZXR1cm4gdGhpcy5fZnVsZmlsbCh2YWx1ZSk7XG5cbiAgICBpZiAoc2hvdWxkQmluZCkgdGhpcy5fcHJvcGFnYXRlRnJvbShtYXliZVByb21pc2UsIDIpO1xuXG4gICAgdmFyIHByb21pc2UgPSBtYXliZVByb21pc2UuX3RhcmdldCgpO1xuXG4gICAgaWYgKHByb21pc2UgPT09IHRoaXMpIHtcbiAgICAgICAgdGhpcy5fcmVqZWN0KG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yKCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGJpdEZpZWxkID0gcHJvbWlzZS5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDApKSB7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLl9sZW5ndGgoKTtcbiAgICAgICAgaWYgKGxlbiA+IDApIHByb21pc2UuX21pZ3JhdGVDYWxsYmFjazAodGhpcyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHByb21pc2UuX21pZ3JhdGVDYWxsYmFja0F0KHRoaXMsIGkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldEZvbGxvd2luZygpO1xuICAgICAgICB0aGlzLl9zZXRMZW5ndGgoMCk7XG4gICAgICAgIHRoaXMuX3NldEZvbGxvd2VlKHByb21pc2UpO1xuICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgdGhpcy5fZnVsZmlsbChwcm9taXNlLl92YWx1ZSgpKTtcbiAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdChwcm9taXNlLl9yZWFzb24oKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlYXNvbiA9IG5ldyBDYW5jZWxsYXRpb25FcnJvcihcImxhdGUgY2FuY2VsbGF0aW9uIG9ic2VydmVyXCIpO1xuICAgICAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHJlYXNvbik7XG4gICAgICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3RDYWxsYmFjayA9XG5mdW5jdGlvbihyZWFzb24sIHN5bmNocm9ub3VzLCBpZ25vcmVOb25FcnJvcldhcm5pbmdzKSB7XG4gICAgdmFyIHRyYWNlID0gdXRpbC5lbnN1cmVFcnJvck9iamVjdChyZWFzb24pO1xuICAgIHZhciBoYXNTdGFjayA9IHRyYWNlID09PSByZWFzb247XG4gICAgaWYgKCFoYXNTdGFjayAmJiAhaWdub3JlTm9uRXJyb3JXYXJuaW5ncyAmJiBkZWJ1Zy53YXJuaW5ncygpKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gXCJhIHByb21pc2Ugd2FzIHJlamVjdGVkIHdpdGggYSBub24tZXJyb3I6IFwiICtcbiAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcocmVhc29uKTtcbiAgICAgICAgdGhpcy5fd2FybihtZXNzYWdlLCB0cnVlKTtcbiAgICB9XG4gICAgdGhpcy5fYXR0YWNoRXh0cmFUcmFjZSh0cmFjZSwgc3luY2hyb25vdXMgPyBoYXNTdGFjayA6IGZhbHNlKTtcbiAgICB0aGlzLl9yZWplY3QocmVhc29uKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZXNvbHZlRnJvbUV4ZWN1dG9yID0gZnVuY3Rpb24gKGV4ZWN1dG9yKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIHRoaXMuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdGhpcy5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgc3luY2hyb25vdXMgPSB0cnVlO1xuICAgIHZhciByID0gdGhpcy5fZXhlY3V0ZShleGVjdXRvciwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHJlYXNvbiwgc3luY2hyb25vdXMpO1xuICAgIH0pO1xuICAgIHN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgdGhpcy5fcG9wQ29udGV4dCgpO1xuXG4gICAgaWYgKHIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyLCB0cnVlKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZUZyb21IYW5kbGVyID0gZnVuY3Rpb24gKFxuICAgIGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZVxuKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gcHJvbWlzZS5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiA2NTUzNikgIT09IDApKSByZXR1cm47XG4gICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgeDtcbiAgICBpZiAocmVjZWl2ZXIgPT09IEFQUExZKSB7XG4gICAgICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlLmxlbmd0aCAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgeCA9IGVycm9yT2JqO1xuICAgICAgICAgICAgeC5lID0gbmV3IFR5cGVFcnJvcihcImNhbm5vdCAuc3ByZWFkKCkgYSBub24tYXJyYXk6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY2xhc3NTdHJpbmcodmFsdWUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHggPSB0cnlDYXRjaChoYW5kbGVyKS5hcHBseSh0aGlzLl9ib3VuZFZhbHVlKCksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSB0cnlDYXRjaChoYW5kbGVyKS5jYWxsKHJlY2VpdmVyLCB2YWx1ZSk7XG4gICAgfVxuICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHByb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICBiaXRGaWVsZCA9IHByb21pc2UuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgNjU1MzYpICE9PSAwKSkgcmV0dXJuO1xuXG4gICAgaWYgKHggPT09IE5FWFRfRklMVEVSKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdCh2YWx1ZSk7XG4gICAgfSBlbHNlIGlmICh4ID09PSBlcnJvck9iaikge1xuICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayh4LmUsIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoeCwgcHJvbWlzZUNyZWF0ZWQsIFwiXCIsICBwcm9taXNlLCB0aGlzKTtcbiAgICAgICAgcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl90YXJnZXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmV0ID0gdGhpcztcbiAgICB3aGlsZSAocmV0Ll9pc0ZvbGxvd2luZygpKSByZXQgPSByZXQuX2ZvbGxvd2VlKCk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mb2xsb3dlZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRGb2xsb3dlZSA9IGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMCA9IHByb21pc2U7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZSA9IGZ1bmN0aW9uKHByb21pc2UsIGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSkge1xuICAgIHZhciBpc1Byb21pc2UgPSBwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZTtcbiAgICB2YXIgYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZDtcbiAgICB2YXIgYXN5bmNHdWFyYW50ZWVkID0gKChiaXRGaWVsZCAmIDEzNDIxNzcyOCkgIT09IDApO1xuICAgIGlmICgoKGJpdEZpZWxkICYgNjU1MzYpICE9PSAwKSkge1xuICAgICAgICBpZiAoaXNQcm9taXNlKSBwcm9taXNlLl9pbnZva2VJbnRlcm5hbE9uQ2FuY2VsKCk7XG5cbiAgICAgICAgaWYgKHJlY2VpdmVyIGluc3RhbmNlb2YgUGFzc1Rocm91Z2hIYW5kbGVyQ29udGV4dCAmJlxuICAgICAgICAgICAgcmVjZWl2ZXIuaXNGaW5hbGx5SGFuZGxlcigpKSB7XG4gICAgICAgICAgICByZWNlaXZlci5jYW5jZWxQcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgICAgIGlmICh0cnlDYXRjaChoYW5kbGVyKS5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0KGVycm9yT2JqLmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZXIgPT09IHJlZmxlY3RIYW5kbGVyKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsKHJlZmxlY3RIYW5kbGVyLmNhbGwocmVjZWl2ZXIpKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZWNlaXZlciBpbnN0YW5jZW9mIFByb3h5YWJsZSkge1xuICAgICAgICAgICAgcmVjZWl2ZXIuX3Byb21pc2VDYW5jZWxsZWQocHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlIHx8IHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlQXJyYXkpIHtcbiAgICAgICAgICAgIHByb21pc2UuX2NhbmNlbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVjZWl2ZXIuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBoYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgaWYgKCFpc1Byb21pc2UpIHtcbiAgICAgICAgICAgIGhhbmRsZXIuY2FsbChyZWNlaXZlciwgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGFzeW5jR3VhcmFudGVlZCkgcHJvbWlzZS5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlRnJvbUhhbmRsZXIoaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVjZWl2ZXIgaW5zdGFuY2VvZiBQcm94eWFibGUpIHtcbiAgICAgICAgaWYgKCFyZWNlaXZlci5faXNSZXNvbHZlZCgpKSB7XG4gICAgICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlci5fcHJvbWlzZUZ1bGZpbGxlZCh2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyLl9wcm9taXNlUmVqZWN0ZWQodmFsdWUsIHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1Byb21pc2UpIHtcbiAgICAgICAgaWYgKGFzeW5jR3VhcmFudGVlZCkgcHJvbWlzZS5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9taXNlLl9yZWplY3QodmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2VMYXRlQ2FuY2VsbGF0aW9uT2JzZXJ2ZXIgPSBmdW5jdGlvbihjdHgpIHtcbiAgICB2YXIgaGFuZGxlciA9IGN0eC5oYW5kbGVyO1xuICAgIHZhciBwcm9taXNlID0gY3R4LnByb21pc2U7XG4gICAgdmFyIHJlY2VpdmVyID0gY3R4LnJlY2VpdmVyO1xuICAgIHZhciB2YWx1ZSA9IGN0eC52YWx1ZTtcbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBpZiAoIShwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcbiAgICAgICAgICAgIGhhbmRsZXIuY2FsbChyZWNlaXZlciwgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZUZyb21IYW5kbGVyKGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHByb21pc2UuX3JlamVjdCh2YWx1ZSk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2VDdHggPSBmdW5jdGlvbihjdHgpIHtcbiAgICB0aGlzLl9zZXR0bGVQcm9taXNlKGN0eC5wcm9taXNlLCBjdHguaGFuZGxlciwgY3R4LnJlY2VpdmVyLCBjdHgudmFsdWUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2UwID0gZnVuY3Rpb24oaGFuZGxlciwgdmFsdWUsIGJpdEZpZWxkKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlMDtcbiAgICB2YXIgcmVjZWl2ZXIgPSB0aGlzLl9yZWNlaXZlckF0KDApO1xuICAgIHRoaXMuX3Byb21pc2UwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3JlY2VpdmVyMCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9zZXR0bGVQcm9taXNlKHByb21pc2UsIGhhbmRsZXIsIHJlY2VpdmVyLCB2YWx1ZSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2xlYXJDYWxsYmFja0RhdGFBdEluZGV4ID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICB2YXIgYmFzZSA9IGluZGV4ICogNCAtIDQ7XG4gICAgdGhpc1tiYXNlICsgMl0gPVxuICAgIHRoaXNbYmFzZSArIDNdID1cbiAgICB0aGlzW2Jhc2UgKyAwXSA9XG4gICAgdGhpc1tiYXNlICsgMV0gPSB1bmRlZmluZWQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZnVsZmlsbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBiaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkO1xuICAgIGlmICgoKGJpdEZpZWxkICYgMTE3NTA2MDQ4KSA+Pj4gMTYpKSByZXR1cm47XG4gICAgaWYgKHZhbHVlID09PSB0aGlzKSB7XG4gICAgICAgIHZhciBlcnIgPSBtYWtlU2VsZlJlc29sdXRpb25FcnJvcigpO1xuICAgICAgICB0aGlzLl9hdHRhY2hFeHRyYVRyYWNlKGVycik7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWplY3QoZXJyKTtcbiAgICB9XG4gICAgdGhpcy5fc2V0RnVsZmlsbGVkKCk7XG4gICAgdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAgPSB2YWx1ZTtcblxuICAgIGlmICgoYml0RmllbGQgJiA2NTUzNSkgPiAwKSB7XG4gICAgICAgIGlmICgoKGJpdEZpZWxkICYgMTM0MjE3NzI4KSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldHRsZVByb21pc2VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhc3luYy5zZXR0bGVQcm9taXNlcyh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3QgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gdGhpcy5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiAxMTc1MDYwNDgpID4+PiAxNikpIHJldHVybjtcbiAgICB0aGlzLl9zZXRSZWplY3RlZCgpO1xuICAgIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPSByZWFzb247XG5cbiAgICBpZiAodGhpcy5faXNGaW5hbCgpKSB7XG4gICAgICAgIHJldHVybiBhc3luYy5mYXRhbEVycm9yKHJlYXNvbiwgdXRpbC5pc05vZGUpO1xuICAgIH1cblxuICAgIGlmICgoYml0RmllbGQgJiA2NTUzNSkgPiAwKSB7XG4gICAgICAgIGFzeW5jLnNldHRsZVByb21pc2VzKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2Vuc3VyZVBvc3NpYmxlUmVqZWN0aW9uSGFuZGxlZCgpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mdWxmaWxsUHJvbWlzZXMgPSBmdW5jdGlvbiAobGVuLCB2YWx1ZSkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXJBdChpKTtcbiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlQXQoaSk7XG4gICAgICAgIHZhciByZWNlaXZlciA9IHRoaXMuX3JlY2VpdmVyQXQoaSk7XG4gICAgICAgIHRoaXMuX2NsZWFyQ2FsbGJhY2tEYXRhQXRJbmRleChpKTtcbiAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZShwcm9taXNlLCBoYW5kbGVyLCByZWNlaXZlciwgdmFsdWUpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3RQcm9taXNlcyA9IGZ1bmN0aW9uIChsZW4sIHJlYXNvbikge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSB0aGlzLl9yZWplY3Rpb25IYW5kbGVyQXQoaSk7XG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZUF0KGkpO1xuICAgICAgICB2YXIgcmVjZWl2ZXIgPSB0aGlzLl9yZWNlaXZlckF0KGkpO1xuICAgICAgICB0aGlzLl9jbGVhckNhbGxiYWNrRGF0YUF0SW5kZXgoaSk7XG4gICAgICAgIHRoaXMuX3NldHRsZVByb21pc2UocHJvbWlzZSwgaGFuZGxlciwgcmVjZWl2ZXIsIHJlYXNvbik7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2VzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBiaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkO1xuICAgIHZhciBsZW4gPSAoYml0RmllbGQgJiA2NTUzNSk7XG5cbiAgICBpZiAobGVuID4gMCkge1xuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDE2ODQyNzUyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHZhciByZWFzb24gPSB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwO1xuICAgICAgICAgICAgdGhpcy5fc2V0dGxlUHJvbWlzZTAodGhpcy5fcmVqZWN0aW9uSGFuZGxlcjAsIHJlYXNvbiwgYml0RmllbGQpO1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0UHJvbWlzZXMobGVuLCByZWFzb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjA7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlMCh0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwLCB2YWx1ZSwgYml0RmllbGQpO1xuICAgICAgICAgICAgdGhpcy5fZnVsZmlsbFByb21pc2VzKGxlbiwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldExlbmd0aCgwKTtcbiAgICB9XG4gICAgdGhpcy5fY2xlYXJDYW5jZWxsYXRpb25EYXRhKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlZFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJpdEZpZWxkID0gdGhpcy5fYml0RmllbGQ7XG4gICAgaWYgKCgoYml0RmllbGQgJiAzMzU1NDQzMikgIT09IDApKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMDtcbiAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGRlZmVyUmVzb2x2ZSh2KSB7dGhpcy5wcm9taXNlLl9yZXNvbHZlQ2FsbGJhY2sodik7fVxuZnVuY3Rpb24gZGVmZXJSZWplY3Qodikge3RoaXMucHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2sodiwgZmFsc2UpO31cblxuUHJvbWlzZS5kZWZlciA9IFByb21pc2UucGVuZGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnLmRlcHJlY2F0ZWQoXCJQcm9taXNlLmRlZmVyXCIsIFwibmV3IFByb21pc2VcIik7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvbWlzZTogcHJvbWlzZSxcbiAgICAgICAgcmVzb2x2ZTogZGVmZXJSZXNvbHZlLFxuICAgICAgICByZWplY3Q6IGRlZmVyUmVqZWN0XG4gICAgfTtcbn07XG5cbnV0aWwubm90RW51bWVyYWJsZVByb3AoUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgXCJfbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IpO1xuXG5fZGVyZXFfKFwiLi9tZXRob2RcIikoUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbixcbiAgICBkZWJ1Zyk7XG5fZGVyZXFfKFwiLi9iaW5kXCIpKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBkZWJ1Zyk7XG5fZGVyZXFfKFwiLi9jYW5jZWxcIikoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24sIGRlYnVnKTtcbl9kZXJlcV8oXCIuL2RpcmVjdF9yZXNvbHZlXCIpKFByb21pc2UpO1xuX2RlcmVxXyhcIi4vc3luY2hyb25vdXNfaW5zcGVjdGlvblwiKShQcm9taXNlKTtcbl9kZXJlcV8oXCIuL2pvaW5cIikoXG4gICAgUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBJTlRFUk5BTCwgYXN5bmMsIGdldERvbWFpbik7XG5Qcm9taXNlLlByb21pc2UgPSBQcm9taXNlO1xuUHJvbWlzZS52ZXJzaW9uID0gXCIzLjQuNlwiO1xuX2RlcmVxXygnLi9tYXAuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbiwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwsIGRlYnVnKTtcbl9kZXJlcV8oJy4vY2FsbF9nZXQuanMnKShQcm9taXNlKTtcbl9kZXJlcV8oJy4vdXNpbmcuanMnKShQcm9taXNlLCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsIGNyZWF0ZUNvbnRleHQsIElOVEVSTkFMLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL3RpbWVycy5qcycpKFByb21pc2UsIElOVEVSTkFMLCBkZWJ1Zyk7XG5fZGVyZXFfKCcuL2dlbmVyYXRvcnMuanMnKShQcm9taXNlLCBhcGlSZWplY3Rpb24sIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBQcm94eWFibGUsIGRlYnVnKTtcbl9kZXJlcV8oJy4vbm9kZWlmeS5qcycpKFByb21pc2UpO1xuX2RlcmVxXygnLi9wcm9taXNpZnkuanMnKShQcm9taXNlLCBJTlRFUk5BTCk7XG5fZGVyZXFfKCcuL3Byb3BzLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24pO1xuX2RlcmVxXygnLi9yYWNlLmpzJykoUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsIGFwaVJlamVjdGlvbik7XG5fZGVyZXFfKCcuL3JlZHVjZS5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uLCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBJTlRFUk5BTCwgZGVidWcpO1xuX2RlcmVxXygnLi9zZXR0bGUuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXksIGRlYnVnKTtcbl9kZXJlcV8oJy4vc29tZS5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uKTtcbl9kZXJlcV8oJy4vZmlsdGVyLmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xuX2RlcmVxXygnLi9lYWNoLmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xuX2RlcmVxXygnLi9hbnkuanMnKShQcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIHV0aWwudG9GYXN0UHJvcGVydGllcyhQcm9taXNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICB1dGlsLnRvRmFzdFByb3BlcnRpZXMoUHJvbWlzZS5wcm90b3R5cGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZnVuY3Rpb24gZmlsbFR5cGVzKHZhbHVlKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICB2YXIgcCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgcC5fZnVsZmlsbG1lbnRIYW5kbGVyMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHAuX3JlamVjdGlvbkhhbmRsZXIwID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBwLl9wcm9taXNlMCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgcC5fcmVjZWl2ZXIwID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIC8vIENvbXBsZXRlIHNsYWNrIHRyYWNraW5nLCBvcHQgb3V0IG9mIGZpZWxkLXR5cGUgdHJhY2tpbmcgYW5kICAgICAgICAgICBcbiAgICAvLyBzdGFiaWxpemUgbWFwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKHthOiAxfSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyh7YjogMn0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXMoe2M6IDN9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyhmdW5jdGlvbigpe30pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBmaWxsVHlwZXModW5kZWZpbmVkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgZmlsbFR5cGVzKGZhbHNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZpbGxUeXBlcyhuZXcgUHJvbWlzZShJTlRFUk5BTCkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBkZWJ1Zy5zZXRCb3VuZHMoQXN5bmMuZmlyc3RMaW5lRXJyb3IsIHV0aWwubGFzdExpbmVFcnJvcik7ICAgICAgICAgICAgICAgXG4gICAgcmV0dXJuIFByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG59O1xuXG59LHtcIi4vYW55LmpzXCI6MSxcIi4vYXN5bmNcIjoyLFwiLi9iaW5kXCI6MyxcIi4vY2FsbF9nZXQuanNcIjo1LFwiLi9jYW5jZWxcIjo2LFwiLi9jYXRjaF9maWx0ZXJcIjo3LFwiLi9jb250ZXh0XCI6OCxcIi4vZGVidWdnYWJpbGl0eVwiOjksXCIuL2RpcmVjdF9yZXNvbHZlXCI6MTAsXCIuL2VhY2guanNcIjoxMSxcIi4vZXJyb3JzXCI6MTIsXCIuL2VzNVwiOjEzLFwiLi9maWx0ZXIuanNcIjoxNCxcIi4vZmluYWxseVwiOjE1LFwiLi9nZW5lcmF0b3JzLmpzXCI6MTYsXCIuL2pvaW5cIjoxNyxcIi4vbWFwLmpzXCI6MTgsXCIuL21ldGhvZFwiOjE5LFwiLi9ub2RlYmFja1wiOjIwLFwiLi9ub2RlaWZ5LmpzXCI6MjEsXCIuL3Byb21pc2VfYXJyYXlcIjoyMyxcIi4vcHJvbWlzaWZ5LmpzXCI6MjQsXCIuL3Byb3BzLmpzXCI6MjUsXCIuL3JhY2UuanNcIjoyNyxcIi4vcmVkdWNlLmpzXCI6MjgsXCIuL3NldHRsZS5qc1wiOjMwLFwiLi9zb21lLmpzXCI6MzEsXCIuL3N5bmNocm9ub3VzX2luc3BlY3Rpb25cIjozMixcIi4vdGhlbmFibGVzXCI6MzMsXCIuL3RpbWVycy5qc1wiOjM0LFwiLi91c2luZy5qc1wiOjM1LFwiLi91dGlsXCI6MzZ9XSwyMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgYXBpUmVqZWN0aW9uLCBQcm94eWFibGUpIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBpc0FycmF5ID0gdXRpbC5pc0FycmF5O1xuXG5mdW5jdGlvbiB0b1Jlc29sdXRpb25WYWx1ZSh2YWwpIHtcbiAgICBzd2l0Y2godmFsKSB7XG4gICAgY2FzZSAtMjogcmV0dXJuIFtdO1xuICAgIGNhc2UgLTM6IHJldHVybiB7fTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFByb21pc2VBcnJheSh2YWx1ZXMpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgaWYgKHZhbHVlcyBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZS5fcHJvcGFnYXRlRnJvbSh2YWx1ZXMsIDMpO1xuICAgIH1cbiAgICBwcm9taXNlLl9zZXRPbkNhbmNlbCh0aGlzKTtcbiAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICB0aGlzLl90b3RhbFJlc29sdmVkID0gMDtcbiAgICB0aGlzLl9pbml0KHVuZGVmaW5lZCwgLTIpO1xufVxudXRpbC5pbmhlcml0cyhQcm9taXNlQXJyYXksIFByb3h5YWJsZSk7XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLnByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gaW5pdChfLCByZXNvbHZlVmFsdWVJZkVtcHR5KSB7XG4gICAgdmFyIHZhbHVlcyA9IHRyeUNvbnZlcnRUb1Byb21pc2UodGhpcy5fdmFsdWVzLCB0aGlzLl9wcm9taXNlKTtcbiAgICBpZiAodmFsdWVzIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuX3RhcmdldCgpO1xuICAgICAgICB2YXIgYml0RmllbGQgPSB2YWx1ZXMuX2JpdEZpZWxkO1xuICAgICAgICA7XG4gICAgICAgIHRoaXMuX3ZhbHVlcyA9IHZhbHVlcztcblxuICAgICAgICBpZiAoKChiaXRGaWVsZCAmIDUwMzk3MTg0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb21pc2UuX3NldEFzeW5jR3VhcmFudGVlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcy5fdGhlbihcbiAgICAgICAgICAgICAgICBpbml0LFxuICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdCxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICByZXNvbHZlVmFsdWVJZkVtcHR5XG4gICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoKChiaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlcy5fdmFsdWUoKTtcbiAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMTY3NzcyMTYpICE9PSAwKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdCh2YWx1ZXMuX3JlYXNvbigpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YWx1ZXMgPSB1dGlsLmFzQXJyYXkodmFsdWVzKTtcbiAgICBpZiAodmFsdWVzID09PSBudWxsKSB7XG4gICAgICAgIHZhciBlcnIgPSBhcGlSZWplY3Rpb24oXG4gICAgICAgICAgICBcImV4cGVjdGluZyBhbiBhcnJheSBvciBhbiBpdGVyYWJsZSBvYmplY3QgYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcodmFsdWVzKSkucmVhc29uKCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3JlamVjdENhbGxiYWNrKGVyciwgZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKHJlc29sdmVWYWx1ZUlmRW1wdHkgPT09IC01KSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlRW1wdHlBcnJheSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0b1Jlc29sdXRpb25WYWx1ZShyZXNvbHZlVmFsdWVJZkVtcHR5KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pdGVyYXRlKHZhbHVlcyk7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pdGVyYXRlID0gZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgdmFyIGxlbiA9IHRoaXMuZ2V0QWN0dWFsTGVuZ3RoKHZhbHVlcy5sZW5ndGgpO1xuICAgIHRoaXMuX2xlbmd0aCA9IGxlbjtcbiAgICB0aGlzLl92YWx1ZXMgPSB0aGlzLnNob3VsZENvcHlWYWx1ZXMoKSA/IG5ldyBBcnJheShsZW4pIDogdGhpcy5fdmFsdWVzO1xuICAgIHZhciByZXN1bHQgPSB0aGlzLl9wcm9taXNlO1xuICAgIHZhciBpc1Jlc29sdmVkID0gZmFsc2U7XG4gICAgdmFyIGJpdEZpZWxkID0gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHZhbHVlc1tpXSwgcmVzdWx0KTtcblxuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIGJpdEZpZWxkID0gbWF5YmVQcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJpdEZpZWxkID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1Jlc29sdmVkKSB7XG4gICAgICAgICAgICBpZiAoYml0RmllbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtYXliZVByb21pc2Uuc3VwcHJlc3NVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYml0RmllbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICgoKGJpdEZpZWxkICYgNTAzOTcxODQpID09PSAwKSkge1xuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fcHJveHkodGhpcywgaSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzW2ldID0gbWF5YmVQcm9taXNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoKGJpdEZpZWxkICYgMzM1NTQ0MzIpICE9PSAwKSkge1xuICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0aGlzLl9wcm9taXNlRnVsZmlsbGVkKG1heWJlUHJvbWlzZS5fdmFsdWUoKSwgaSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCgoYml0RmllbGQgJiAxNjc3NzIxNikgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRoaXMuX3Byb21pc2VSZWplY3RlZChtYXliZVByb21pc2UuX3JlYXNvbigpLCBpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXNSZXNvbHZlZCA9IHRoaXMuX3Byb21pc2VDYW5jZWxsZWQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpc1Jlc29sdmVkID0gdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZChtYXliZVByb21pc2UsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghaXNSZXNvbHZlZCkgcmVzdWx0Ll9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX2lzUmVzb2x2ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcyA9PT0gbnVsbDtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSB8fCAhdGhpcy5fcHJvbWlzZS5faXNDYW5jZWxsYWJsZSgpKSByZXR1cm47XG4gICAgdGhpcy5fdmFsdWVzID0gbnVsbDtcbiAgICB0aGlzLl9wcm9taXNlLl9jYW5jZWwoKTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3JlamVjdCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX3JlamVjdENhbGxiYWNrKHJlYXNvbiwgZmFsc2UpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICB0aGlzLl92YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgdmFyIHRvdGFsUmVzb2x2ZWQgPSArK3RoaXMuX3RvdGFsUmVzb2x2ZWQ7XG4gICAgaWYgKHRvdGFsUmVzb2x2ZWQgPj0gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmUodGhpcy5fdmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB0aGlzLl90b3RhbFJlc29sdmVkKys7XG4gICAgdGhpcy5fcmVqZWN0KHJlYXNvbik7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZXN1bHRDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faXNSZXNvbHZlZCgpKSByZXR1cm47XG4gICAgdmFyIHZhbHVlcyA9IHRoaXMuX3ZhbHVlcztcbiAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICBpZiAodmFsdWVzIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB2YWx1ZXMuY2FuY2VsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZXNbaV0gaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzW2ldLmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zaG91bGRDb3B5VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5nZXRBY3R1YWxMZW5ndGggPSBmdW5jdGlvbiAobGVuKSB7XG4gICAgcmV0dXJuIGxlbjtcbn07XG5cbnJldHVybiBQcm9taXNlQXJyYXk7XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMjQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMKSB7XG52YXIgVEhJUyA9IHt9O1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIG5vZGViYWNrRm9yUHJvbWlzZSA9IF9kZXJlcV8oXCIuL25vZGViYWNrXCIpO1xudmFyIHdpdGhBcHBlbmRlZCA9IHV0aWwud2l0aEFwcGVuZGVkO1xudmFyIG1heWJlV3JhcEFzRXJyb3IgPSB1dGlsLm1heWJlV3JhcEFzRXJyb3I7XG52YXIgY2FuRXZhbHVhdGUgPSB1dGlsLmNhbkV2YWx1YXRlO1xudmFyIFR5cGVFcnJvciA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKS5UeXBlRXJyb3I7XG52YXIgZGVmYXVsdFN1ZmZpeCA9IFwiQXN5bmNcIjtcbnZhciBkZWZhdWx0UHJvbWlzaWZpZWQgPSB7X19pc1Byb21pc2lmaWVkX186IHRydWV9O1xudmFyIG5vQ29weVByb3BzID0gW1xuICAgIFwiYXJpdHlcIiwgICAgXCJsZW5ndGhcIixcbiAgICBcIm5hbWVcIixcbiAgICBcImFyZ3VtZW50c1wiLFxuICAgIFwiY2FsbGVyXCIsXG4gICAgXCJjYWxsZWVcIixcbiAgICBcInByb3RvdHlwZVwiLFxuICAgIFwiX19pc1Byb21pc2lmaWVkX19cIlxuXTtcbnZhciBub0NvcHlQcm9wc1BhdHRlcm4gPSBuZXcgUmVnRXhwKFwiXig/OlwiICsgbm9Db3B5UHJvcHMuam9pbihcInxcIikgKyBcIikkXCIpO1xuXG52YXIgZGVmYXVsdEZpbHRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdXRpbC5pc0lkZW50aWZpZXIobmFtZSkgJiZcbiAgICAgICAgbmFtZS5jaGFyQXQoMCkgIT09IFwiX1wiICYmXG4gICAgICAgIG5hbWUgIT09IFwiY29uc3RydWN0b3JcIjtcbn07XG5cbmZ1bmN0aW9uIHByb3BzRmlsdGVyKGtleSkge1xuICAgIHJldHVybiAhbm9Db3B5UHJvcHNQYXR0ZXJuLnRlc3Qoa2V5KTtcbn1cblxuZnVuY3Rpb24gaXNQcm9taXNpZmllZChmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmbi5fX2lzUHJvbWlzaWZpZWRfXyA9PT0gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFzUHJvbWlzaWZpZWQob2JqLCBrZXksIHN1ZmZpeCkge1xuICAgIHZhciB2YWwgPSB1dGlsLmdldERhdGFQcm9wZXJ0eU9yRGVmYXVsdChvYmosIGtleSArIHN1ZmZpeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFByb21pc2lmaWVkKTtcbiAgICByZXR1cm4gdmFsID8gaXNQcm9taXNpZmllZCh2YWwpIDogZmFsc2U7XG59XG5mdW5jdGlvbiBjaGVja1ZhbGlkKHJldCwgc3VmZml4LCBzdWZmaXhSZWdleHApIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICB2YXIga2V5ID0gcmV0W2ldO1xuICAgICAgICBpZiAoc3VmZml4UmVnZXhwLnRlc3Qoa2V5KSkge1xuICAgICAgICAgICAgdmFyIGtleVdpdGhvdXRBc3luY1N1ZmZpeCA9IGtleS5yZXBsYWNlKHN1ZmZpeFJlZ2V4cCwgXCJcIik7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJldC5sZW5ndGg7IGogKz0gMikge1xuICAgICAgICAgICAgICAgIGlmIChyZXRbal0gPT09IGtleVdpdGhvdXRBc3luY1N1ZmZpeCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHByb21pc2lmeSBhbiBBUEkgdGhhdCBoYXMgbm9ybWFsIG1ldGhvZHMgd2l0aCAnJXMnLXN1ZmZpeFxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoXCIlc1wiLCBzdWZmaXgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHByb21pc2lmaWFibGVNZXRob2RzKG9iaiwgc3VmZml4LCBzdWZmaXhSZWdleHAsIGZpbHRlcikge1xuICAgIHZhciBrZXlzID0gdXRpbC5pbmhlcml0ZWREYXRhS2V5cyhvYmopO1xuICAgIHZhciByZXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICB2YXIgcGFzc2VzRGVmYXVsdEZpbHRlciA9IGZpbHRlciA9PT0gZGVmYXVsdEZpbHRlclxuICAgICAgICAgICAgPyB0cnVlIDogZGVmYXVsdEZpbHRlcihrZXksIHZhbHVlLCBvYmopO1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICFpc1Byb21pc2lmaWVkKHZhbHVlKSAmJlxuICAgICAgICAgICAgIWhhc1Byb21pc2lmaWVkKG9iaiwga2V5LCBzdWZmaXgpICYmXG4gICAgICAgICAgICBmaWx0ZXIoa2V5LCB2YWx1ZSwgb2JqLCBwYXNzZXNEZWZhdWx0RmlsdGVyKSkge1xuICAgICAgICAgICAgcmV0LnB1c2goa2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tWYWxpZChyZXQsIHN1ZmZpeCwgc3VmZml4UmVnZXhwKTtcbiAgICByZXR1cm4gcmV0O1xufVxuXG52YXIgZXNjYXBlSWRlbnRSZWdleCA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvKFskXSkvLCBcIlxcXFwkXCIpO1xufTtcblxudmFyIG1ha2VOb2RlUHJvbWlzaWZpZWRFdmFsO1xuaWYgKCF0cnVlKSB7XG52YXIgc3dpdGNoQ2FzZUFyZ3VtZW50T3JkZXIgPSBmdW5jdGlvbihsaWtlbHlBcmd1bWVudENvdW50KSB7XG4gICAgdmFyIHJldCA9IFtsaWtlbHlBcmd1bWVudENvdW50XTtcbiAgICB2YXIgbWluID0gTWF0aC5tYXgoMCwgbGlrZWx5QXJndW1lbnRDb3VudCAtIDEgLSAzKTtcbiAgICBmb3IodmFyIGkgPSBsaWtlbHlBcmd1bWVudENvdW50IC0gMTsgaSA+PSBtaW47IC0taSkge1xuICAgICAgICByZXQucHVzaChpKTtcbiAgICB9XG4gICAgZm9yKHZhciBpID0gbGlrZWx5QXJndW1lbnRDb3VudCArIDE7IGkgPD0gMzsgKytpKSB7XG4gICAgICAgIHJldC5wdXNoKGkpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxudmFyIGFyZ3VtZW50U2VxdWVuY2UgPSBmdW5jdGlvbihhcmd1bWVudENvdW50KSB7XG4gICAgcmV0dXJuIHV0aWwuZmlsbGVkUmFuZ2UoYXJndW1lbnRDb3VudCwgXCJfYXJnXCIsIFwiXCIpO1xufTtcblxudmFyIHBhcmFtZXRlckRlY2xhcmF0aW9uID0gZnVuY3Rpb24ocGFyYW1ldGVyQ291bnQpIHtcbiAgICByZXR1cm4gdXRpbC5maWxsZWRSYW5nZShcbiAgICAgICAgTWF0aC5tYXgocGFyYW1ldGVyQ291bnQsIDMpLCBcIl9hcmdcIiwgXCJcIik7XG59O1xuXG52YXIgcGFyYW1ldGVyQ291bnQgPSBmdW5jdGlvbihmbikge1xuICAgIGlmICh0eXBlb2YgZm4ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbihmbi5sZW5ndGgsIDEwMjMgKyAxKSwgMCk7XG4gICAgfVxuICAgIHJldHVybiAwO1xufTtcblxubWFrZU5vZGVQcm9taXNpZmllZEV2YWwgPVxuZnVuY3Rpb24oY2FsbGJhY2ssIHJlY2VpdmVyLCBvcmlnaW5hbE5hbWUsIGZuLCBfLCBtdWx0aUFyZ3MpIHtcbiAgICB2YXIgbmV3UGFyYW1ldGVyQ291bnQgPSBNYXRoLm1heCgwLCBwYXJhbWV0ZXJDb3VudChmbikgLSAxKTtcbiAgICB2YXIgYXJndW1lbnRPcmRlciA9IHN3aXRjaENhc2VBcmd1bWVudE9yZGVyKG5ld1BhcmFtZXRlckNvdW50KTtcbiAgICB2YXIgc2hvdWxkUHJveHlUaGlzID0gdHlwZW9mIGNhbGxiYWNrID09PSBcInN0cmluZ1wiIHx8IHJlY2VpdmVyID09PSBUSElTO1xuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVDYWxsRm9yQXJndW1lbnRDb3VudChjb3VudCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50U2VxdWVuY2UoY291bnQpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgdmFyIGNvbW1hID0gY291bnQgPiAwID8gXCIsIFwiIDogXCJcIjtcbiAgICAgICAgdmFyIHJldDtcbiAgICAgICAgaWYgKHNob3VsZFByb3h5VGhpcykge1xuICAgICAgICAgICAgcmV0ID0gXCJyZXQgPSBjYWxsYmFjay5jYWxsKHRoaXMsIHt7YXJnc319LCBub2RlYmFjayk7IGJyZWFrO1xcblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0ID0gcmVjZWl2ZXIgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gXCJyZXQgPSBjYWxsYmFjayh7e2FyZ3N9fSwgbm9kZWJhY2spOyBicmVhaztcXG5cIlxuICAgICAgICAgICAgICAgIDogXCJyZXQgPSBjYWxsYmFjay5jYWxsKHJlY2VpdmVyLCB7e2FyZ3N9fSwgbm9kZWJhY2spOyBicmVhaztcXG5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0LnJlcGxhY2UoXCJ7e2FyZ3N9fVwiLCBhcmdzKS5yZXBsYWNlKFwiLCBcIiwgY29tbWEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlQXJndW1lbnRTd2l0Y2hDYXNlKCkge1xuICAgICAgICB2YXIgcmV0ID0gXCJcIjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudE9yZGVyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICByZXQgKz0gXCJjYXNlIFwiICsgYXJndW1lbnRPcmRlcltpXSArXCI6XCIgK1xuICAgICAgICAgICAgICAgIGdlbmVyYXRlQ2FsbEZvckFyZ3VtZW50Q291bnQoYXJndW1lbnRPcmRlcltpXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXQgKz0gXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGxlbiArIDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBpID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGFyZ3NbaV0gPSBub2RlYmFjazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtDb2RlRm9yQ2FsbF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCIucmVwbGFjZShcIltDb2RlRm9yQ2FsbF1cIiwgKHNob3VsZFByb3h5VGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwicmV0ID0gY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7XFxuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcInJldCA9IGNhbGxiYWNrLmFwcGx5KHJlY2VpdmVyLCBhcmdzKTtcXG5cIikpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIHZhciBnZXRGdW5jdGlvbkNvZGUgPSB0eXBlb2YgY2FsbGJhY2sgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoXCJ0aGlzICE9IG51bGwgPyB0aGlzWydcIitjYWxsYmFjaytcIiddIDogZm5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImZuXCI7XG4gICAgdmFyIGJvZHkgPSBcIid1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICB2YXIgcmV0ID0gZnVuY3Rpb24gKFBhcmFtZXRlcnMpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIG5vZGViYWNrID0gbm9kZWJhY2tGb3JQcm9taXNlKHByb21pc2UsIFwiICsgbXVsdGlBcmdzICsgXCIpOyAgIFxcblxcXG4gICAgICAgICAgICB2YXIgcmV0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSB0cnlDYXRjaChbR2V0RnVuY3Rpb25Db2RlXSk7ICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBzd2l0Y2gobGVuKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgW0NvZGVGb3JTd2l0Y2hDYXNlXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2sobWF5YmVXcmFwQXNFcnJvcihyZXQuZSksIHRydWUsIHRydWUpO1xcblxcXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgICAgICBpZiAoIXByb21pc2UuX2lzRmF0ZVNlYWxlZCgpKSBwcm9taXNlLl9zZXRBc3luY0d1YXJhbnRlZWQoKTsgICAgIFxcblxcXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKHJldCwgJ19faXNQcm9taXNpZmllZF9fJywgdHJ1ZSk7ICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgICAgIHJldHVybiByZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcblxcXG4gICAgXCIucmVwbGFjZShcIltDb2RlRm9yU3dpdGNoQ2FzZV1cIiwgZ2VuZXJhdGVBcmd1bWVudFN3aXRjaENhc2UoKSlcbiAgICAgICAgLnJlcGxhY2UoXCJbR2V0RnVuY3Rpb25Db2RlXVwiLCBnZXRGdW5jdGlvbkNvZGUpO1xuICAgIGJvZHkgPSBib2R5LnJlcGxhY2UoXCJQYXJhbWV0ZXJzXCIsIHBhcmFtZXRlckRlY2xhcmF0aW9uKG5ld1BhcmFtZXRlckNvdW50KSk7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcIlByb21pc2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZm5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicmVjZWl2ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid2l0aEFwcGVuZGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1heWJlV3JhcEFzRXJyb3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibm9kZWJhY2tGb3JQcm9taXNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRyeUNhdGNoXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVycm9yT2JqXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5vdEVudW1lcmFibGVQcm9wXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIklOVEVSTkFMXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5KShcbiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgZm4sXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyLFxuICAgICAgICAgICAgICAgICAgICB3aXRoQXBwZW5kZWQsXG4gICAgICAgICAgICAgICAgICAgIG1heWJlV3JhcEFzRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIG5vZGViYWNrRm9yUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgdXRpbC50cnlDYXRjaCxcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5lcnJvck9iaixcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcCxcbiAgICAgICAgICAgICAgICAgICAgSU5URVJOQUwpO1xufTtcbn1cblxuZnVuY3Rpb24gbWFrZU5vZGVQcm9taXNpZmllZENsb3N1cmUoY2FsbGJhY2ssIHJlY2VpdmVyLCBfLCBmbiwgX18sIG11bHRpQXJncykge1xuICAgIHZhciBkZWZhdWx0VGhpcyA9IChmdW5jdGlvbigpIHtyZXR1cm4gdGhpczt9KSgpO1xuICAgIHZhciBtZXRob2QgPSBjYWxsYmFjaztcbiAgICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcm9taXNpZmllZCgpIHtcbiAgICAgICAgdmFyIF9yZWNlaXZlciA9IHJlY2VpdmVyO1xuICAgICAgICBpZiAocmVjZWl2ZXIgPT09IFRISVMpIF9yZWNlaXZlciA9IHRoaXM7XG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICBwcm9taXNlLl9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICB2YXIgY2IgPSB0eXBlb2YgbWV0aG9kID09PSBcInN0cmluZ1wiICYmIHRoaXMgIT09IGRlZmF1bHRUaGlzXG4gICAgICAgICAgICA/IHRoaXNbbWV0aG9kXSA6IGNhbGxiYWNrO1xuICAgICAgICB2YXIgZm4gPSBub2RlYmFja0ZvclByb21pc2UocHJvbWlzZSwgbXVsdGlBcmdzKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNiLmFwcGx5KF9yZWNlaXZlciwgd2l0aEFwcGVuZGVkKGFyZ3VtZW50cywgZm4pKTtcbiAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhtYXliZVdyYXBBc0Vycm9yKGUpLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByb21pc2UuX2lzRmF0ZVNlYWxlZCgpKSBwcm9taXNlLl9zZXRBc3luY0d1YXJhbnRlZWQoKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHV0aWwubm90RW51bWVyYWJsZVByb3AocHJvbWlzaWZpZWQsIFwiX19pc1Byb21pc2lmaWVkX19cIiwgdHJ1ZSk7XG4gICAgcmV0dXJuIHByb21pc2lmaWVkO1xufVxuXG52YXIgbWFrZU5vZGVQcm9taXNpZmllZCA9IGNhbkV2YWx1YXRlXG4gICAgPyBtYWtlTm9kZVByb21pc2lmaWVkRXZhbFxuICAgIDogbWFrZU5vZGVQcm9taXNpZmllZENsb3N1cmU7XG5cbmZ1bmN0aW9uIHByb21pc2lmeUFsbChvYmosIHN1ZmZpeCwgZmlsdGVyLCBwcm9taXNpZmllciwgbXVsdGlBcmdzKSB7XG4gICAgdmFyIHN1ZmZpeFJlZ2V4cCA9IG5ldyBSZWdFeHAoZXNjYXBlSWRlbnRSZWdleChzdWZmaXgpICsgXCIkXCIpO1xuICAgIHZhciBtZXRob2RzID1cbiAgICAgICAgcHJvbWlzaWZpYWJsZU1ldGhvZHMob2JqLCBzdWZmaXgsIHN1ZmZpeFJlZ2V4cCwgZmlsdGVyKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBtZXRob2RzLmxlbmd0aDsgaSA8IGxlbjsgaSs9IDIpIHtcbiAgICAgICAgdmFyIGtleSA9IG1ldGhvZHNbaV07XG4gICAgICAgIHZhciBmbiA9IG1ldGhvZHNbaSsxXTtcbiAgICAgICAgdmFyIHByb21pc2lmaWVkS2V5ID0ga2V5ICsgc3VmZml4O1xuICAgICAgICBpZiAocHJvbWlzaWZpZXIgPT09IG1ha2VOb2RlUHJvbWlzaWZpZWQpIHtcbiAgICAgICAgICAgIG9ialtwcm9taXNpZmllZEtleV0gPVxuICAgICAgICAgICAgICAgIG1ha2VOb2RlUHJvbWlzaWZpZWQoa2V5LCBUSElTLCBrZXksIGZuLCBzdWZmaXgsIG11bHRpQXJncyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgcHJvbWlzaWZpZWQgPSBwcm9taXNpZmllcihmbiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VOb2RlUHJvbWlzaWZpZWQoa2V5LCBUSElTLCBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4sIHN1ZmZpeCwgbXVsdGlBcmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdXRpbC5ub3RFbnVtZXJhYmxlUHJvcChwcm9taXNpZmllZCwgXCJfX2lzUHJvbWlzaWZpZWRfX1wiLCB0cnVlKTtcbiAgICAgICAgICAgIG9ialtwcm9taXNpZmllZEtleV0gPSBwcm9taXNpZmllZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1dGlsLnRvRmFzdFByb3BlcnRpZXMob2JqKTtcbiAgICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBwcm9taXNpZnkoY2FsbGJhY2ssIHJlY2VpdmVyLCBtdWx0aUFyZ3MpIHtcbiAgICByZXR1cm4gbWFrZU5vZGVQcm9taXNpZmllZChjYWxsYmFjaywgcmVjZWl2ZXIsIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2ssIG51bGwsIG11bHRpQXJncyk7XG59XG5cblByb21pc2UucHJvbWlzaWZ5ID0gZnVuY3Rpb24gKGZuLCBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICBpZiAoaXNQcm9taXNpZmllZChmbikpIHtcbiAgICAgICAgcmV0dXJuIGZuO1xuICAgIH1cbiAgICBvcHRpb25zID0gT2JqZWN0KG9wdGlvbnMpO1xuICAgIHZhciByZWNlaXZlciA9IG9wdGlvbnMuY29udGV4dCA9PT0gdW5kZWZpbmVkID8gVEhJUyA6IG9wdGlvbnMuY29udGV4dDtcbiAgICB2YXIgbXVsdGlBcmdzID0gISFvcHRpb25zLm11bHRpQXJncztcbiAgICB2YXIgcmV0ID0gcHJvbWlzaWZ5KGZuLCByZWNlaXZlciwgbXVsdGlBcmdzKTtcbiAgICB1dGlsLmNvcHlEZXNjcmlwdG9ycyhmbiwgcmV0LCBwcm9wc0ZpbHRlcik7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvbWlzaWZ5QWxsID0gZnVuY3Rpb24gKHRhcmdldCwgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwidGhlIHRhcmdldCBvZiBwcm9taXNpZnlBbGwgbXVzdCBiZSBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL01xckZtWFxcdTAwMGFcIik7XG4gICAgfVxuICAgIG9wdGlvbnMgPSBPYmplY3Qob3B0aW9ucyk7XG4gICAgdmFyIG11bHRpQXJncyA9ICEhb3B0aW9ucy5tdWx0aUFyZ3M7XG4gICAgdmFyIHN1ZmZpeCA9IG9wdGlvbnMuc3VmZml4O1xuICAgIGlmICh0eXBlb2Ygc3VmZml4ICE9PSBcInN0cmluZ1wiKSBzdWZmaXggPSBkZWZhdWx0U3VmZml4O1xuICAgIHZhciBmaWx0ZXIgPSBvcHRpb25zLmZpbHRlcjtcbiAgICBpZiAodHlwZW9mIGZpbHRlciAhPT0gXCJmdW5jdGlvblwiKSBmaWx0ZXIgPSBkZWZhdWx0RmlsdGVyO1xuICAgIHZhciBwcm9taXNpZmllciA9IG9wdGlvbnMucHJvbWlzaWZpZXI7XG4gICAgaWYgKHR5cGVvZiBwcm9taXNpZmllciAhPT0gXCJmdW5jdGlvblwiKSBwcm9taXNpZmllciA9IG1ha2VOb2RlUHJvbWlzaWZpZWQ7XG5cbiAgICBpZiAoIXV0aWwuaXNJZGVudGlmaWVyKHN1ZmZpeCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzdWZmaXggbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXJcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cblxuICAgIHZhciBrZXlzID0gdXRpbC5pbmhlcml0ZWREYXRhS2V5cyh0YXJnZXQpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0YXJnZXRba2V5c1tpXV07XG4gICAgICAgIGlmIChrZXlzW2ldICE9PSBcImNvbnN0cnVjdG9yXCIgJiZcbiAgICAgICAgICAgIHV0aWwuaXNDbGFzcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHByb21pc2lmeUFsbCh2YWx1ZS5wcm90b3R5cGUsIHN1ZmZpeCwgZmlsdGVyLCBwcm9taXNpZmllcixcbiAgICAgICAgICAgICAgICBtdWx0aUFyZ3MpO1xuICAgICAgICAgICAgcHJvbWlzaWZ5QWxsKHZhbHVlLCBzdWZmaXgsIGZpbHRlciwgcHJvbWlzaWZpZXIsIG11bHRpQXJncyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzaWZ5QWxsKHRhcmdldCwgc3VmZml4LCBmaWx0ZXIsIHByb21pc2lmaWVyLCBtdWx0aUFyZ3MpO1xufTtcbn07XG5cblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi9ub2RlYmFja1wiOjIwLFwiLi91dGlsXCI6MzZ9XSwyNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oXG4gICAgUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlLCBhcGlSZWplY3Rpb24pIHtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcbnZhciBpc09iamVjdCA9IHV0aWwuaXNPYmplY3Q7XG52YXIgZXM1ID0gX2RlcmVxXyhcIi4vZXM1XCIpO1xudmFyIEVzNk1hcDtcbmlmICh0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCIpIEVzNk1hcCA9IE1hcDtcblxudmFyIG1hcFRvRW50cmllcyA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBzaXplID0gMDtcblxuICAgIGZ1bmN0aW9uIGV4dHJhY3RFbnRyeSh2YWx1ZSwga2V5KSB7XG4gICAgICAgIHRoaXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgIHRoaXNbaW5kZXggKyBzaXplXSA9IGtleTtcbiAgICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gbWFwVG9FbnRyaWVzKG1hcCkge1xuICAgICAgICBzaXplID0gbWFwLnNpemU7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgdmFyIHJldCA9IG5ldyBBcnJheShtYXAuc2l6ZSAqIDIpO1xuICAgICAgICBtYXAuZm9yRWFjaChleHRyYWN0RW50cnksIHJldCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbn0pKCk7XG5cbnZhciBlbnRyaWVzVG9NYXAgPSBmdW5jdGlvbihlbnRyaWVzKSB7XG4gICAgdmFyIHJldCA9IG5ldyBFczZNYXAoKTtcbiAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGggLyAyIHwgMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBrZXkgPSBlbnRyaWVzW2xlbmd0aCArIGldO1xuICAgICAgICB2YXIgdmFsdWUgPSBlbnRyaWVzW2ldO1xuICAgICAgICByZXQuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuZnVuY3Rpb24gUHJvcGVydGllc1Byb21pc2VBcnJheShvYmopIHtcbiAgICB2YXIgaXNNYXAgPSBmYWxzZTtcbiAgICB2YXIgZW50cmllcztcbiAgICBpZiAoRXM2TWFwICE9PSB1bmRlZmluZWQgJiYgb2JqIGluc3RhbmNlb2YgRXM2TWFwKSB7XG4gICAgICAgIGVudHJpZXMgPSBtYXBUb0VudHJpZXMob2JqKTtcbiAgICAgICAgaXNNYXAgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBrZXlzID0gZXM1LmtleXMob2JqKTtcbiAgICAgICAgdmFyIGxlbiA9IGtleXMubGVuZ3RoO1xuICAgICAgICBlbnRyaWVzID0gbmV3IEFycmF5KGxlbiAqIDIpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgIGVudHJpZXNbaV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgIGVudHJpZXNbaSArIGxlbl0gPSBrZXk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQoZW50cmllcyk7XG4gICAgdGhpcy5faXNNYXAgPSBpc01hcDtcbiAgICB0aGlzLl9pbml0JCh1bmRlZmluZWQsIC0zKTtcbn1cbnV0aWwuaW5oZXJpdHMoUHJvcGVydGllc1Byb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuUHJvcGVydGllc1Byb21pc2VBcnJheS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAoKSB7fTtcblxuUHJvcGVydGllc1Byb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgdGhpcy5fdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgIHZhciB0b3RhbFJlc29sdmVkID0gKyt0aGlzLl90b3RhbFJlc29sdmVkO1xuICAgIGlmICh0b3RhbFJlc29sdmVkID49IHRoaXMuX2xlbmd0aCkge1xuICAgICAgICB2YXIgdmFsO1xuICAgICAgICBpZiAodGhpcy5faXNNYXApIHtcbiAgICAgICAgICAgIHZhbCA9IGVudHJpZXNUb01hcCh0aGlzLl92YWx1ZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsID0ge307XG4gICAgICAgICAgICB2YXIga2V5T2Zmc2V0ID0gdGhpcy5sZW5ndGgoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmxlbmd0aCgpOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YWxbdGhpcy5fdmFsdWVzW2kgKyBrZXlPZmZzZXRdXSA9IHRoaXMuX3ZhbHVlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZXNvbHZlKHZhbCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5Qcm9wZXJ0aWVzUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zaG91bGRDb3B5VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblByb3BlcnRpZXNQcm9taXNlQXJyYXkucHJvdG90eXBlLmdldEFjdHVhbExlbmd0aCA9IGZ1bmN0aW9uIChsZW4pIHtcbiAgICByZXR1cm4gbGVuID4+IDE7XG59O1xuXG5mdW5jdGlvbiBwcm9wcyhwcm9taXNlcykge1xuICAgIHZhciByZXQ7XG4gICAgdmFyIGNhc3RWYWx1ZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocHJvbWlzZXMpO1xuXG4gICAgaWYgKCFpc09iamVjdChjYXN0VmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJjYW5ub3QgYXdhaXQgcHJvcGVydGllcyBvZiBhIG5vbi1vYmplY3RcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH0gZWxzZSBpZiAoY2FzdFZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXQgPSBjYXN0VmFsdWUuX3RoZW4oXG4gICAgICAgICAgICBQcm9taXNlLnByb3BzLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IG5ldyBQcm9wZXJ0aWVzUHJvbWlzZUFycmF5KGNhc3RWYWx1ZSkucHJvbWlzZSgpO1xuICAgIH1cblxuICAgIGlmIChjYXN0VmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldC5fcHJvcGFnYXRlRnJvbShjYXN0VmFsdWUsIDIpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5wcm9wcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvcHModGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3BzID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIHByb3BzKHByb21pc2VzKTtcbn07XG59O1xuXG59LHtcIi4vZXM1XCI6MTMsXCIuL3V0aWxcIjozNn1dLDI2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gYXJyYXlNb3ZlKHNyYywgc3JjSW5kZXgsIGRzdCwgZHN0SW5kZXgsIGxlbikge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgZHN0W2ogKyBkc3RJbmRleF0gPSBzcmNbaiArIHNyY0luZGV4XTtcbiAgICAgICAgc3JjW2ogKyBzcmNJbmRleF0gPSB2b2lkIDA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBRdWV1ZShjYXBhY2l0eSkge1xuICAgIHRoaXMuX2NhcGFjaXR5ID0gY2FwYWNpdHk7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICB0aGlzLl9mcm9udCA9IDA7XG59XG5cblF1ZXVlLnByb3RvdHlwZS5fd2lsbEJlT3ZlckNhcGFjaXR5ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FwYWNpdHkgPCBzaXplO1xufTtcblxuUXVldWUucHJvdG90eXBlLl9wdXNoT25lID0gZnVuY3Rpb24gKGFyZykge1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCgpO1xuICAgIHRoaXMuX2NoZWNrQ2FwYWNpdHkobGVuZ3RoICsgMSk7XG4gICAgdmFyIGkgPSAodGhpcy5fZnJvbnQgKyBsZW5ndGgpICYgKHRoaXMuX2NhcGFjaXR5IC0gMSk7XG4gICAgdGhpc1tpXSA9IGFyZztcbiAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGggKyAxO1xufTtcblxuUXVldWUucHJvdG90eXBlLl91bnNoaWZ0T25lID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgY2FwYWNpdHkgPSB0aGlzLl9jYXBhY2l0eTtcbiAgICB0aGlzLl9jaGVja0NhcGFjaXR5KHRoaXMubGVuZ3RoKCkgKyAxKTtcbiAgICB2YXIgZnJvbnQgPSB0aGlzLl9mcm9udDtcbiAgICB2YXIgaSA9ICgoKCggZnJvbnQgLSAxICkgJlxuICAgICAgICAgICAgICAgICAgICAoIGNhcGFjaXR5IC0gMSkgKSBeIGNhcGFjaXR5ICkgLSBjYXBhY2l0eSApO1xuICAgIHRoaXNbaV0gPSB2YWx1ZTtcbiAgICB0aGlzLl9mcm9udCA9IGk7XG4gICAgdGhpcy5fbGVuZ3RoID0gdGhpcy5sZW5ndGgoKSArIDE7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgdGhpcy5fdW5zaGlmdE9uZShhcmcpO1xuICAgIHRoaXMuX3Vuc2hpZnRPbmUocmVjZWl2ZXIpO1xuICAgIHRoaXMuX3Vuc2hpZnRPbmUoZm4pO1xufTtcblxuUXVldWUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGgoKSArIDM7XG4gICAgaWYgKHRoaXMuX3dpbGxCZU92ZXJDYXBhY2l0eShsZW5ndGgpKSB7XG4gICAgICAgIHRoaXMuX3B1c2hPbmUoZm4pO1xuICAgICAgICB0aGlzLl9wdXNoT25lKHJlY2VpdmVyKTtcbiAgICAgICAgdGhpcy5fcHVzaE9uZShhcmcpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBqID0gdGhpcy5fZnJvbnQgKyBsZW5ndGggLSAzO1xuICAgIHRoaXMuX2NoZWNrQ2FwYWNpdHkobGVuZ3RoKTtcbiAgICB2YXIgd3JhcE1hc2sgPSB0aGlzLl9jYXBhY2l0eSAtIDE7XG4gICAgdGhpc1soaiArIDApICYgd3JhcE1hc2tdID0gZm47XG4gICAgdGhpc1soaiArIDEpICYgd3JhcE1hc2tdID0gcmVjZWl2ZXI7XG4gICAgdGhpc1soaiArIDIpICYgd3JhcE1hc2tdID0gYXJnO1xuICAgIHRoaXMuX2xlbmd0aCA9IGxlbmd0aDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZnJvbnQgPSB0aGlzLl9mcm9udCxcbiAgICAgICAgcmV0ID0gdGhpc1tmcm9udF07XG5cbiAgICB0aGlzW2Zyb250XSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9mcm9udCA9IChmcm9udCArIDEpICYgKHRoaXMuX2NhcGFjaXR5IC0gMSk7XG4gICAgdGhpcy5fbGVuZ3RoLS07XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xlbmd0aDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5fY2hlY2tDYXBhY2l0eSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgaWYgKHRoaXMuX2NhcGFjaXR5IDwgc2l6ZSkge1xuICAgICAgICB0aGlzLl9yZXNpemVUbyh0aGlzLl9jYXBhY2l0eSA8PCAxKTtcbiAgICB9XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUuX3Jlc2l6ZVRvID0gZnVuY3Rpb24gKGNhcGFjaXR5KSB7XG4gICAgdmFyIG9sZENhcGFjaXR5ID0gdGhpcy5fY2FwYWNpdHk7XG4gICAgdGhpcy5fY2FwYWNpdHkgPSBjYXBhY2l0eTtcbiAgICB2YXIgZnJvbnQgPSB0aGlzLl9mcm9udDtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoO1xuICAgIHZhciBtb3ZlSXRlbXNDb3VudCA9IChmcm9udCArIGxlbmd0aCkgJiAob2xkQ2FwYWNpdHkgLSAxKTtcbiAgICBhcnJheU1vdmUodGhpcywgMCwgdGhpcywgb2xkQ2FwYWNpdHksIG1vdmVJdGVtc0NvdW50KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUXVldWU7XG5cbn0se31dLDI3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihcbiAgICBQcm9taXNlLCBJTlRFUk5BTCwgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uKSB7XG52YXIgdXRpbCA9IF9kZXJlcV8oXCIuL3V0aWxcIik7XG5cbnZhciByYWNlTGF0ZXIgPSBmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHJhY2UoYXJyYXksIHByb21pc2UpO1xuICAgIH0pO1xufTtcblxuZnVuY3Rpb24gcmFjZShwcm9taXNlcywgcGFyZW50KSB7XG4gICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocHJvbWlzZXMpO1xuXG4gICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0dXJuIHJhY2VMYXRlcihtYXliZVByb21pc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21pc2VzID0gdXRpbC5hc0FycmF5KHByb21pc2VzKTtcbiAgICAgICAgaWYgKHByb21pc2VzID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhbiBhcnJheSBvciBhbiBpdGVyYWJsZSBvYmplY3QgYnV0IGdvdCBcIiArIHV0aWwuY2xhc3NTdHJpbmcocHJvbWlzZXMpKTtcbiAgICB9XG5cbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIGlmIChwYXJlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXQuX3Byb3BhZ2F0ZUZyb20ocGFyZW50LCAzKTtcbiAgICB9XG4gICAgdmFyIGZ1bGZpbGwgPSByZXQuX2Z1bGZpbGw7XG4gICAgdmFyIHJlamVjdCA9IHJldC5fcmVqZWN0O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwcm9taXNlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB2YXIgdmFsID0gcHJvbWlzZXNbaV07XG5cbiAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkICYmICEoaSBpbiBwcm9taXNlcykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgUHJvbWlzZS5jYXN0KHZhbCkuX3RoZW4oZnVsZmlsbCwgcmVqZWN0LCB1bmRlZmluZWQsIHJldCwgbnVsbCk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cblByb21pc2UucmFjZSA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiByYWNlKHByb21pc2VzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcmFjZSh0aGlzLCB1bmRlZmluZWQpO1xufTtcblxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDI4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlQXJyYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFwaVJlamVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKSB7XG52YXIgZ2V0RG9tYWluID0gUHJvbWlzZS5fZ2V0RG9tYWluO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIHRyeUNhdGNoID0gdXRpbC50cnlDYXRjaDtcblxuZnVuY3Rpb24gUmVkdWN0aW9uUHJvbWlzZUFycmF5KHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCkge1xuICAgIHRoaXMuY29uc3RydWN0b3IkKHByb21pc2VzKTtcbiAgICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKCk7XG4gICAgdGhpcy5fZm4gPSBkb21haW4gPT09IG51bGwgPyBmbiA6IHV0aWwuZG9tYWluQmluZChkb21haW4sIGZuKTtcbiAgICBpZiAoaW5pdGlhbFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaW5pdGlhbFZhbHVlID0gUHJvbWlzZS5yZXNvbHZlKGluaXRpYWxWYWx1ZSk7XG4gICAgICAgIGluaXRpYWxWYWx1ZS5fYXR0YWNoQ2FuY2VsbGF0aW9uQ2FsbGJhY2sodGhpcyk7XG4gICAgfVxuICAgIHRoaXMuX2luaXRpYWxWYWx1ZSA9IGluaXRpYWxWYWx1ZTtcbiAgICB0aGlzLl9jdXJyZW50Q2FuY2VsbGFibGUgPSBudWxsO1xuICAgIGlmKF9lYWNoID09PSBJTlRFUk5BTCkge1xuICAgICAgICB0aGlzLl9lYWNoVmFsdWVzID0gQXJyYXkodGhpcy5fbGVuZ3RoKTtcbiAgICB9IGVsc2UgaWYgKF9lYWNoID09PSAwKSB7XG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHRoaXMuX3Byb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtNSk7XG59XG51dGlsLmluaGVyaXRzKFJlZHVjdGlvblByb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZ290QWNjdW0gPSBmdW5jdGlvbihhY2N1bSkge1xuICAgIGlmICh0aGlzLl9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQgJiYgXG4gICAgICAgIHRoaXMuX2VhY2hWYWx1ZXMgIT09IG51bGwgJiYgXG4gICAgICAgIGFjY3VtICE9PSBJTlRFUk5BTCkge1xuICAgICAgICB0aGlzLl9lYWNoVmFsdWVzLnB1c2goYWNjdW0pO1xuICAgIH1cbn07XG5cblJlZHVjdGlvblByb21pc2VBcnJheS5wcm90b3R5cGUuX2VhY2hDb21wbGV0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuX2VhY2hWYWx1ZXMgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fZWFjaFZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2VhY2hWYWx1ZXM7XG59O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24oKSB7fTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzb2x2ZUVtcHR5QXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX2VhY2hWYWx1ZXMgIT09IHVuZGVmaW5lZCA/IHRoaXMuX2VhY2hWYWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2luaXRpYWxWYWx1ZSk7XG59O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLnNob3VsZENvcHlWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5fcHJvbWlzZS5fcmVzb2x2ZUNhbGxiYWNrKHZhbHVlKTtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xufTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oc2VuZGVyKSB7XG4gICAgaWYgKHNlbmRlciA9PT0gdGhpcy5faW5pdGlhbFZhbHVlKSByZXR1cm4gdGhpcy5fY2FuY2VsKCk7XG4gICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuO1xuICAgIHRoaXMuX3Jlc3VsdENhbmNlbGxlZCQoKTtcbiAgICBpZiAodGhpcy5fY3VycmVudENhbmNlbGxhYmxlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB0aGlzLl9jdXJyZW50Q2FuY2VsbGFibGUuY2FuY2VsKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9pbml0aWFsVmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHRoaXMuX2luaXRpYWxWYWx1ZS5jYW5jZWwoKTtcbiAgICB9XG59O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pdGVyYXRlID0gZnVuY3Rpb24gKHZhbHVlcykge1xuICAgIHRoaXMuX3ZhbHVlcyA9IHZhbHVlcztcbiAgICB2YXIgdmFsdWU7XG4gICAgdmFyIGk7XG4gICAgdmFyIGxlbmd0aCA9IHZhbHVlcy5sZW5ndGg7XG4gICAgaWYgKHRoaXMuX2luaXRpYWxWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlID0gdGhpcy5faW5pdGlhbFZhbHVlO1xuICAgICAgICBpID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IFByb21pc2UucmVzb2x2ZSh2YWx1ZXNbMF0pO1xuICAgICAgICBpID0gMTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50Q2FuY2VsbGFibGUgPSB2YWx1ZTtcblxuICAgIGlmICghdmFsdWUuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB7XG4gICAgICAgICAgICAgICAgYWNjdW06IG51bGwsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlc1tpXSxcbiAgICAgICAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICAgICAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICAgICAgICAgICAgICBhcnJheTogdGhpc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuX3RoZW4oZ290QWNjdW0sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjdHgsIHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZWFjaFZhbHVlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWVcbiAgICAgICAgICAgIC5fdGhlbih0aGlzLl9lYWNoQ29tcGxldGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICB2YWx1ZS5fdGhlbihjb21wbGV0ZWQsIGNvbXBsZXRlZCwgdW5kZWZpbmVkLCB2YWx1ZSwgdGhpcyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5yZWR1Y2UgPSBmdW5jdGlvbiAoZm4sIGluaXRpYWxWYWx1ZSkge1xuICAgIHJldHVybiByZWR1Y2UodGhpcywgZm4sIGluaXRpYWxWYWx1ZSwgbnVsbCk7XG59O1xuXG5Qcm9taXNlLnJlZHVjZSA9IGZ1bmN0aW9uIChwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpIHtcbiAgICByZXR1cm4gcmVkdWNlKHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCk7XG59O1xuXG5mdW5jdGlvbiBjb21wbGV0ZWQodmFsdWVPclJlYXNvbiwgYXJyYXkpIHtcbiAgICBpZiAodGhpcy5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgIGFycmF5Ll9yZXNvbHZlKHZhbHVlT3JSZWFzb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGFycmF5Ll9yZWplY3QodmFsdWVPclJlYXNvbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZWR1Y2UocHJvbWlzZXMsIGZuLCBpbml0aWFsVmFsdWUsIF9lYWNoKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgIH1cbiAgICB2YXIgYXJyYXkgPSBuZXcgUmVkdWN0aW9uUHJvbWlzZUFycmF5KHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCk7XG4gICAgcmV0dXJuIGFycmF5LnByb21pc2UoKTtcbn1cblxuZnVuY3Rpb24gZ290QWNjdW0oYWNjdW0pIHtcbiAgICB0aGlzLmFjY3VtID0gYWNjdW07XG4gICAgdGhpcy5hcnJheS5fZ290QWNjdW0oYWNjdW0pO1xuICAgIHZhciB2YWx1ZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodGhpcy52YWx1ZSwgdGhpcy5hcnJheS5fcHJvbWlzZSk7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB0aGlzLmFycmF5Ll9jdXJyZW50Q2FuY2VsbGFibGUgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHZhbHVlLl90aGVuKGdvdFZhbHVlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcywgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZ290VmFsdWUuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnb3RWYWx1ZSh2YWx1ZSkge1xuICAgIHZhciBhcnJheSA9IHRoaXMuYXJyYXk7XG4gICAgdmFyIHByb21pc2UgPSBhcnJheS5fcHJvbWlzZTtcbiAgICB2YXIgZm4gPSB0cnlDYXRjaChhcnJheS5fZm4pO1xuICAgIHByb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgdmFyIHJldDtcbiAgICBpZiAoYXJyYXkuX2VhY2hWYWx1ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXQgPSBmbi5jYWxsKHByb21pc2UuX2JvdW5kVmFsdWUoKSwgdmFsdWUsIHRoaXMuaW5kZXgsIHRoaXMubGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXQgPSBmbi5jYWxsKHByb21pc2UuX2JvdW5kVmFsdWUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWNjdW0sIHZhbHVlLCB0aGlzLmluZGV4LCB0aGlzLmxlbmd0aCk7XG4gICAgfVxuICAgIGlmIChyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIGFycmF5Ll9jdXJyZW50Q2FuY2VsbGFibGUgPSByZXQ7XG4gICAgfVxuICAgIHZhciBwcm9taXNlQ3JlYXRlZCA9IHByb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICBkZWJ1Zy5jaGVja0ZvcmdvdHRlblJldHVybnMoXG4gICAgICAgIHJldCxcbiAgICAgICAgcHJvbWlzZUNyZWF0ZWQsXG4gICAgICAgIGFycmF5Ll9lYWNoVmFsdWVzICE9PSB1bmRlZmluZWQgPyBcIlByb21pc2UuZWFjaFwiIDogXCJQcm9taXNlLnJlZHVjZVwiLFxuICAgICAgICBwcm9taXNlXG4gICAgKTtcbiAgICByZXR1cm4gcmV0O1xufVxufTtcblxufSx7XCIuL3V0aWxcIjozNn1dLDI5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIHNjaGVkdWxlO1xudmFyIG5vQXN5bmNTY2hlZHVsZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhc3luYyBzY2hlZHVsZXIgYXZhaWxhYmxlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbn07XG52YXIgTmF0aXZlUHJvbWlzZSA9IHV0aWwuZ2V0TmF0aXZlUHJvbWlzZSgpO1xuaWYgKHV0aWwuaXNOb2RlICYmIHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdmFyIEdsb2JhbFNldEltbWVkaWF0ZSA9IGdsb2JhbC5zZXRJbW1lZGlhdGU7XG4gICAgdmFyIFByb2Nlc3NOZXh0VGljayA9IHByb2Nlc3MubmV4dFRpY2s7XG4gICAgc2NoZWR1bGUgPSB1dGlsLmlzUmVjZW50Tm9kZVxuICAgICAgICAgICAgICAgID8gZnVuY3Rpb24oZm4pIHsgR2xvYmFsU2V0SW1tZWRpYXRlLmNhbGwoZ2xvYmFsLCBmbik7IH1cbiAgICAgICAgICAgICAgICA6IGZ1bmN0aW9uKGZuKSB7IFByb2Nlc3NOZXh0VGljay5jYWxsKHByb2Nlc3MsIGZuKTsgfTtcbn0gZWxzZSBpZiAodHlwZW9mIE5hdGl2ZVByb21pc2UgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICB0eXBlb2YgTmF0aXZlUHJvbWlzZS5yZXNvbHZlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB2YXIgbmF0aXZlUHJvbWlzZSA9IE5hdGl2ZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIHNjaGVkdWxlID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgbmF0aXZlUHJvbWlzZS50aGVuKGZuKTtcbiAgICB9O1xufSBlbHNlIGlmICgodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09IFwidW5kZWZpbmVkXCIpICYmXG4gICAgICAgICAgISh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICB3aW5kb3cubmF2aWdhdG9yICYmXG4gICAgICAgICAgICAod2luZG93Lm5hdmlnYXRvci5zdGFuZGFsb25lIHx8IHdpbmRvdy5jb3Jkb3ZhKSkpIHtcbiAgICBzY2hlZHVsZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHZhciBvcHRzID0ge2F0dHJpYnV0ZXM6IHRydWV9O1xuICAgICAgICB2YXIgdG9nZ2xlU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBkaXYyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdmFyIG8yID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkaXYuY2xhc3NMaXN0LnRvZ2dsZShcImZvb1wiKTtcbiAgICAgICAgICAgIHRvZ2dsZVNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgbzIub2JzZXJ2ZShkaXYyLCBvcHRzKTtcblxuICAgICAgICB2YXIgc2NoZWR1bGVUb2dnbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0b2dnbGVTY2hlZHVsZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICB0b2dnbGVTY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGRpdjIuY2xhc3NMaXN0LnRvZ2dsZShcImZvb1wiKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBzY2hlZHVsZShmbikge1xuICAgICAgICAgICAgdmFyIG8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvLm9ic2VydmUoZGl2LCBvcHRzKTtcbiAgICAgICAgICAgIHNjaGVkdWxlVG9nZ2xlKCk7XG4gICAgICAgIH07XG4gICAgfSkoKTtcbn0gZWxzZSBpZiAodHlwZW9mIHNldEltbWVkaWF0ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHNjaGVkdWxlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHNldEltbWVkaWF0ZShmbik7XG4gICAgfTtcbn0gZWxzZSBpZiAodHlwZW9mIHNldFRpbWVvdXQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBzY2hlZHVsZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBzY2hlZHVsZSA9IG5vQXN5bmNTY2hlZHVsZXI7XG59XG5tb2R1bGUuZXhwb3J0cyA9IHNjaGVkdWxlO1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9XG4gICAgZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBkZWJ1Zykge1xudmFyIFByb21pc2VJbnNwZWN0aW9uID0gUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbjtcbnZhciB1dGlsID0gX2RlcmVxXyhcIi4vdXRpbFwiKTtcblxuZnVuY3Rpb24gU2V0dGxlZFByb21pc2VBcnJheSh2YWx1ZXMpIHtcbiAgICB0aGlzLmNvbnN0cnVjdG9yJCh2YWx1ZXMpO1xufVxudXRpbC5pbmhlcml0cyhTZXR0bGVkUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5TZXR0bGVkUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZVJlc29sdmVkID0gZnVuY3Rpb24gKGluZGV4LCBpbnNwZWN0aW9uKSB7XG4gICAgdGhpcy5fdmFsdWVzW2luZGV4XSA9IGluc3BlY3Rpb247XG4gICAgdmFyIHRvdGFsUmVzb2x2ZWQgPSArK3RoaXMuX3RvdGFsUmVzb2x2ZWQ7XG4gICAgaWYgKHRvdGFsUmVzb2x2ZWQgPj0gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmUodGhpcy5fdmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblNldHRsZWRQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZUluc3BlY3Rpb24oKTtcbiAgICByZXQuX2JpdEZpZWxkID0gMzM1NTQ0MzI7XG4gICAgcmV0Ll9zZXR0bGVkVmFsdWVGaWVsZCA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzLl9wcm9taXNlUmVzb2x2ZWQoaW5kZXgsIHJldCk7XG59O1xuU2V0dGxlZFByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24sIGluZGV4KSB7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlSW5zcGVjdGlvbigpO1xuICAgIHJldC5fYml0RmllbGQgPSAxNjc3NzIxNjtcbiAgICByZXQuX3NldHRsZWRWYWx1ZUZpZWxkID0gcmVhc29uO1xuICAgIHJldHVybiB0aGlzLl9wcm9taXNlUmVzb2x2ZWQoaW5kZXgsIHJldCk7XG59O1xuXG5Qcm9taXNlLnNldHRsZSA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIGRlYnVnLmRlcHJlY2F0ZWQoXCIuc2V0dGxlKClcIiwgXCIucmVmbGVjdCgpXCIpO1xuICAgIHJldHVybiBuZXcgU2V0dGxlZFByb21pc2VBcnJheShwcm9taXNlcykucHJvbWlzZSgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc2V0dGxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBQcm9taXNlLnNldHRsZSh0aGlzKTtcbn07XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9XG5mdW5jdGlvbihQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbikge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIFJhbmdlRXJyb3IgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIikuUmFuZ2VFcnJvcjtcbnZhciBBZ2dyZWdhdGVFcnJvciA9IF9kZXJlcV8oXCIuL2Vycm9yc1wiKS5BZ2dyZWdhdGVFcnJvcjtcbnZhciBpc0FycmF5ID0gdXRpbC5pc0FycmF5O1xudmFyIENBTkNFTExBVElPTiA9IHt9O1xuXG5cbmZ1bmN0aW9uIFNvbWVQcm9taXNlQXJyYXkodmFsdWVzKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQodmFsdWVzKTtcbiAgICB0aGlzLl9ob3dNYW55ID0gMDtcbiAgICB0aGlzLl91bndyYXAgPSBmYWxzZTtcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlO1xufVxudXRpbC5pbmhlcml0cyhTb21lUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2hvd01hbnkgPT09IDApIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZShbXSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtNSk7XG4gICAgdmFyIGlzQXJyYXlSZXNvbHZlZCA9IGlzQXJyYXkodGhpcy5fdmFsdWVzKTtcbiAgICBpZiAoIXRoaXMuX2lzUmVzb2x2ZWQoKSAmJlxuICAgICAgICBpc0FycmF5UmVzb2x2ZWQgJiZcbiAgICAgICAgdGhpcy5faG93TWFueSA+IHRoaXMuX2NhblBvc3NpYmx5RnVsZmlsbCgpKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdCh0aGlzLl9nZXRSYW5nZUVycm9yKHRoaXMubGVuZ3RoKCkpKTtcbiAgICB9XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB0aGlzLl9pbml0KCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zZXRVbndyYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fdW53cmFwID0gdHJ1ZTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLmhvd01hbnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hvd01hbnk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zZXRIb3dNYW55ID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgdGhpcy5faG93TWFueSA9IGNvdW50O1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl9hZGRGdWxmaWxsZWQodmFsdWUpO1xuICAgIGlmICh0aGlzLl9mdWxmaWxsZWQoKSA9PT0gdGhpcy5ob3dNYW55KCkpIHtcbiAgICAgICAgdGhpcy5fdmFsdWVzLmxlbmd0aCA9IHRoaXMuaG93TWFueSgpO1xuICAgICAgICBpZiAodGhpcy5ob3dNYW55KCkgPT09IDEgJiYgdGhpcy5fdW53cmFwKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX3ZhbHVlc1swXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX3ZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcblxufTtcblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlUmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhpcy5fYWRkUmVqZWN0ZWQocmVhc29uKTtcbiAgICByZXR1cm4gdGhpcy5fY2hlY2tPdXRjb21lKCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUNhbmNlbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdmFsdWVzIGluc3RhbmNlb2YgUHJvbWlzZSB8fCB0aGlzLl92YWx1ZXMgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FuY2VsKCk7XG4gICAgfVxuICAgIHRoaXMuX2FkZFJlamVjdGVkKENBTkNFTExBVElPTik7XG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrT3V0Y29tZSgpO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2NoZWNrT3V0Y29tZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmhvd01hbnkoKSA+IHRoaXMuX2NhblBvc3NpYmx5RnVsZmlsbCgpKSB7XG4gICAgICAgIHZhciBlID0gbmV3IEFnZ3JlZ2F0ZUVycm9yKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCgpOyBpIDwgdGhpcy5fdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fdmFsdWVzW2ldICE9PSBDQU5DRUxMQVRJT04pIHtcbiAgICAgICAgICAgICAgICBlLnB1c2godGhpcy5fdmFsdWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3QoZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2Z1bGZpbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdG90YWxSZXNvbHZlZDtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZWplY3RlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWVzLmxlbmd0aCAtIHRoaXMubGVuZ3RoKCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fYWRkUmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhpcy5fdmFsdWVzLnB1c2gocmVhc29uKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9hZGRGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl92YWx1ZXNbdGhpcy5fdG90YWxSZXNvbHZlZCsrXSA9IHZhbHVlO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2NhblBvc3NpYmx5RnVsZmlsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5sZW5ndGgoKSAtIHRoaXMuX3JlamVjdGVkKCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZ2V0UmFuZ2VFcnJvciA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIHZhciBtZXNzYWdlID0gXCJJbnB1dCBhcnJheSBtdXN0IGNvbnRhaW4gYXQgbGVhc3QgXCIgK1xuICAgICAgICAgICAgdGhpcy5faG93TWFueSArIFwiIGl0ZW1zIGJ1dCBjb250YWlucyBvbmx5IFwiICsgY291bnQgKyBcIiBpdGVtc1wiO1xuICAgIHJldHVybiBuZXcgUmFuZ2VFcnJvcihtZXNzYWdlKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZXNvbHZlRW1wdHlBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9yZWplY3QodGhpcy5fZ2V0UmFuZ2VFcnJvcigwKSk7XG59O1xuXG5mdW5jdGlvbiBzb21lKHByb21pc2VzLCBob3dNYW55KSB7XG4gICAgaWYgKChob3dNYW55IHwgMCkgIT09IGhvd01hbnkgfHwgaG93TWFueSA8IDApIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhIHBvc2l0aXZlIGludGVnZXJcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9NcXJGbVhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICB2YXIgcmV0ID0gbmV3IFNvbWVQcm9taXNlQXJyYXkocHJvbWlzZXMpO1xuICAgIHZhciBwcm9taXNlID0gcmV0LnByb21pc2UoKTtcbiAgICByZXQuc2V0SG93TWFueShob3dNYW55KTtcbiAgICByZXQuaW5pdCgpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5Qcm9taXNlLnNvbWUgPSBmdW5jdGlvbiAocHJvbWlzZXMsIGhvd01hbnkpIHtcbiAgICByZXR1cm4gc29tZShwcm9taXNlcywgaG93TWFueSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5zb21lID0gZnVuY3Rpb24gKGhvd01hbnkpIHtcbiAgICByZXR1cm4gc29tZSh0aGlzLCBob3dNYW55KTtcbn07XG5cblByb21pc2UuX1NvbWVQcm9taXNlQXJyYXkgPSBTb21lUHJvbWlzZUFycmF5O1xufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwzMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xuZnVuY3Rpb24gUHJvbWlzZUluc3BlY3Rpb24ocHJvbWlzZSkge1xuICAgIGlmIChwcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UuX3RhcmdldCgpO1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IHByb21pc2UuX2JpdEZpZWxkO1xuICAgICAgICB0aGlzLl9zZXR0bGVkVmFsdWVGaWVsZCA9IHByb21pc2UuX2lzRmF0ZVNlYWxlZCgpXG4gICAgICAgICAgICA/IHByb21pc2UuX3NldHRsZWRWYWx1ZSgpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSAwO1xuICAgICAgICB0aGlzLl9zZXR0bGVkVmFsdWVGaWVsZCA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cblByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5fc2V0dGxlZFZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZUZpZWxkO1xufTtcblxudmFyIHZhbHVlID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW5ub3QgZ2V0IGZ1bGZpbGxtZW50IHZhbHVlIG9mIGEgbm9uLWZ1bGZpbGxlZCBwcm9taXNlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZSgpO1xufTtcblxudmFyIHJlYXNvbiA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5lcnJvciA9XG5Qcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUucmVhc29uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc1JlamVjdGVkKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbm5vdCBnZXQgcmVqZWN0aW9uIHJlYXNvbiBvZiBhIG5vbi1yZWplY3RlZCBwcm9taXNlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTXFyRm1YXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZSgpO1xufTtcblxudmFyIGlzRnVsZmlsbGVkID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzRnVsZmlsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDMzNTU0NDMyKSAhPT0gMDtcbn07XG5cbnZhciBpc1JlamVjdGVkID0gUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLmlzUmVqZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDE2Nzc3MjE2KSAhPT0gMDtcbn07XG5cbnZhciBpc1BlbmRpbmcgPSBQcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuaXNQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA1MDM5NzE4NCkgPT09IDA7XG59O1xuXG52YXIgaXNSZXNvbHZlZCA9IFByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc1Jlc29sdmVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA1MDMzMTY0OCkgIT09IDA7XG59O1xuXG5Qcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuaXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgODQ1NDE0NCkgIT09IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fX2lzQ2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDY1NTM2KSA9PT0gNjU1MzY7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0KCkuX19pc0NhbmNlbGxlZCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNDYW5jZWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMuX3RhcmdldCgpLl9iaXRGaWVsZCAmIDg0NTQxNDQpICE9PSAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNQZW5kaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGlzUGVuZGluZy5jYWxsKHRoaXMuX3RhcmdldCgpKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzUmVqZWN0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaXNSZWplY3RlZC5jYWxsKHRoaXMuX3RhcmdldCgpKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzRnVsZmlsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGlzRnVsZmlsbGVkLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuaXNSZXNvbHZlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBpc1Jlc29sdmVkLmNhbGwodGhpcy5fdGFyZ2V0KCkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdmFsdWUuY2FsbCh0aGlzLl90YXJnZXQoKSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5yZWFzb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgdGFyZ2V0Ll91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgcmV0dXJuIHJlYXNvbi5jYWxsKHRhcmdldCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fc2V0dGxlZFZhbHVlKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVhc29uID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWUoKTtcbn07XG5cblByb21pc2UuUHJvbWlzZUluc3BlY3Rpb24gPSBQcm9taXNlSW5zcGVjdGlvbjtcbn07XG5cbn0se31dLDMzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBJTlRFUk5BTCkge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciBpc09iamVjdCA9IHV0aWwuaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIHRyeUNvbnZlcnRUb1Byb21pc2Uob2JqLCBjb250ZXh0KSB7XG4gICAgaWYgKGlzT2JqZWN0KG9iaikpIHtcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIFByb21pc2UpIHJldHVybiBvYmo7XG4gICAgICAgIHZhciB0aGVuID0gZ2V0VGhlbihvYmopO1xuICAgICAgICBpZiAodGhlbiA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgIGlmIChjb250ZXh0KSBjb250ZXh0Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICAgICAgdmFyIHJldCA9IFByb21pc2UucmVqZWN0KHRoZW4uZSk7XG4gICAgICAgICAgICBpZiAoY29udGV4dCkgY29udGV4dC5fcG9wQ29udGV4dCgpO1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBpZiAoaXNBbnlCbHVlYmlyZFByb21pc2Uob2JqKSkge1xuICAgICAgICAgICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgICAgICAgICAgb2JqLl90aGVuKFxuICAgICAgICAgICAgICAgICAgICByZXQuX2Z1bGZpbGwsXG4gICAgICAgICAgICAgICAgICAgIHJldC5fcmVqZWN0LFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHJldCxcbiAgICAgICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkb1RoZW5hYmxlKG9iaiwgdGhlbiwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gZG9HZXRUaGVuKG9iaikge1xuICAgIHJldHVybiBvYmoudGhlbjtcbn1cblxuZnVuY3Rpb24gZ2V0VGhlbihvYmopIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZG9HZXRUaGVuKG9iaik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlcnJvck9iai5lID0gZTtcbiAgICAgICAgcmV0dXJuIGVycm9yT2JqO1xuICAgIH1cbn1cblxudmFyIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbmZ1bmN0aW9uIGlzQW55Qmx1ZWJpcmRQcm9taXNlKG9iaikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBoYXNQcm9wLmNhbGwob2JqLCBcIl9wcm9taXNlMFwiKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRvVGhlbmFibGUoeCwgdGhlbiwgY29udGV4dCkge1xuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHZhciByZXQgPSBwcm9taXNlO1xuICAgIGlmIChjb250ZXh0KSBjb250ZXh0Ll9wdXNoQ29udGV4dCgpO1xuICAgIHByb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgaWYgKGNvbnRleHQpIGNvbnRleHQuX3BvcENvbnRleHQoKTtcbiAgICB2YXIgc3luY2hyb25vdXMgPSB0cnVlO1xuICAgIHZhciByZXN1bHQgPSB1dGlsLnRyeUNhdGNoKHRoZW4pLmNhbGwoeCwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICBzeW5jaHJvbm91cyA9IGZhbHNlO1xuXG4gICAgaWYgKHByb21pc2UgJiYgcmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICBwcm9taXNlLl9yZWplY3RDYWxsYmFjayhyZXN1bHQuZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgaWYgKCFwcm9taXNlKSByZXR1cm47XG4gICAgICAgIHByb21pc2UuX3Jlc29sdmVDYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgICAgICAgaWYgKCFwcm9taXNlKSByZXR1cm47XG4gICAgICAgIHByb21pc2UuX3JlamVjdENhbGxiYWNrKHJlYXNvbiwgc3luY2hyb25vdXMsIHRydWUpO1xuICAgICAgICBwcm9taXNlID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxucmV0dXJuIHRyeUNvbnZlcnRUb1Byb21pc2U7XG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMLCBkZWJ1Zykge1xudmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xudmFyIFRpbWVvdXRFcnJvciA9IFByb21pc2UuVGltZW91dEVycm9yO1xuXG5mdW5jdGlvbiBIYW5kbGVXcmFwcGVyKGhhbmRsZSkgIHtcbiAgICB0aGlzLmhhbmRsZSA9IGhhbmRsZTtcbn1cblxuSGFuZGxlV3JhcHBlci5wcm90b3R5cGUuX3Jlc3VsdENhbmNlbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmhhbmRsZSk7XG59O1xuXG52YXIgYWZ0ZXJWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBkZWxheSgrdGhpcykudGhlblJldHVybih2YWx1ZSk7IH07XG52YXIgZGVsYXkgPSBQcm9taXNlLmRlbGF5ID0gZnVuY3Rpb24gKG1zLCB2YWx1ZSkge1xuICAgIHZhciByZXQ7XG4gICAgdmFyIGhhbmRsZTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXQgPSBQcm9taXNlLnJlc29sdmUodmFsdWUpXG4gICAgICAgICAgICAgICAgLl90aGVuKGFmdGVyVmFsdWUsIG51bGwsIG51bGwsIG1zLCB1bmRlZmluZWQpO1xuICAgICAgICBpZiAoZGVidWcuY2FuY2VsbGF0aW9uKCkgJiYgdmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXQuX3NldE9uQ2FuY2VsKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgaGFuZGxlID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsgcmV0Ll9mdWxmaWxsKCk7IH0sICttcyk7XG4gICAgICAgIGlmIChkZWJ1Zy5jYW5jZWxsYXRpb24oKSkge1xuICAgICAgICAgICAgcmV0Ll9zZXRPbkNhbmNlbChuZXcgSGFuZGxlV3JhcHBlcihoYW5kbGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgfVxuICAgIHJldC5fc2V0QXN5bmNHdWFyYW50ZWVkKCk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRlbGF5ID0gZnVuY3Rpb24gKG1zKSB7XG4gICAgcmV0dXJuIGRlbGF5KG1zLCB0aGlzKTtcbn07XG5cbnZhciBhZnRlclRpbWVvdXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgbWVzc2FnZSwgcGFyZW50KSB7XG4gICAgdmFyIGVycjtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgZXJyID0gbWVzc2FnZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVyciA9IG5ldyBUaW1lb3V0RXJyb3IoXCJvcGVyYXRpb24gdGltZWQgb3V0XCIpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZXJyID0gbmV3IFRpbWVvdXRFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgdXRpbC5tYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24oZXJyKTtcbiAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKGVycik7XG4gICAgcHJvbWlzZS5fcmVqZWN0KGVycik7XG5cbiAgICBpZiAocGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgcGFyZW50LmNhbmNlbCgpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIHN1Y2Nlc3NDbGVhcih2YWx1ZSkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmhhbmRsZSk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBmYWlsdXJlQ2xlYXIocmVhc29uKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaGFuZGxlKTtcbiAgICB0aHJvdyByZWFzb247XG59XG5cblByb21pc2UucHJvdG90eXBlLnRpbWVvdXQgPSBmdW5jdGlvbiAobXMsIG1lc3NhZ2UpIHtcbiAgICBtcyA9ICttcztcbiAgICB2YXIgcmV0LCBwYXJlbnQ7XG5cbiAgICB2YXIgaGFuZGxlV3JhcHBlciA9IG5ldyBIYW5kbGVXcmFwcGVyKHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZW91dFRpbWVvdXQoKSB7XG4gICAgICAgIGlmIChyZXQuaXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgIGFmdGVyVGltZW91dChyZXQsIG1lc3NhZ2UsIHBhcmVudCk7XG4gICAgICAgIH1cbiAgICB9LCBtcykpO1xuXG4gICAgaWYgKGRlYnVnLmNhbmNlbGxhdGlvbigpKSB7XG4gICAgICAgIHBhcmVudCA9IHRoaXMudGhlbigpO1xuICAgICAgICByZXQgPSBwYXJlbnQuX3RoZW4oc3VjY2Vzc0NsZWFyLCBmYWlsdXJlQ2xlYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBoYW5kbGVXcmFwcGVyLCB1bmRlZmluZWQpO1xuICAgICAgICByZXQuX3NldE9uQ2FuY2VsKGhhbmRsZVdyYXBwZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IHRoaXMuX3RoZW4oc3VjY2Vzc0NsZWFyLCBmYWlsdXJlQ2xlYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBoYW5kbGVXcmFwcGVyLCB1bmRlZmluZWQpO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG59O1xuXG59O1xuXG59LHtcIi4vdXRpbFwiOjM2fV0sMzU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChQcm9taXNlLCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgY3JlYXRlQ29udGV4dCwgSU5URVJOQUwsIGRlYnVnKSB7XG4gICAgdmFyIHV0aWwgPSBfZGVyZXFfKFwiLi91dGlsXCIpO1xuICAgIHZhciBUeXBlRXJyb3IgPSBfZGVyZXFfKFwiLi9lcnJvcnNcIikuVHlwZUVycm9yO1xuICAgIHZhciBpbmhlcml0cyA9IF9kZXJlcV8oXCIuL3V0aWxcIikuaW5oZXJpdHM7XG4gICAgdmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbiAgICB2YXIgdHJ5Q2F0Y2ggPSB1dGlsLnRyeUNhdGNoO1xuICAgIHZhciBOVUxMID0ge307XG5cbiAgICBmdW5jdGlvbiB0aHJvd2VyKGUpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGU7fSwgMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FzdFByZXNlcnZpbmdEaXNwb3NhYmxlKHRoZW5hYmxlKSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHRoZW5hYmxlKTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSAhPT0gdGhlbmFibGUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGVuYWJsZS5faXNEaXNwb3NhYmxlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGVuYWJsZS5fZ2V0RGlzcG9zZXIgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgdGhlbmFibGUuX2lzRGlzcG9zYWJsZSgpKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UuX3NldERpc3Bvc2FibGUodGhlbmFibGUuX2dldERpc3Bvc2VyKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXliZVByb21pc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpc3Bvc2UocmVzb3VyY2VzLCBpbnNwZWN0aW9uKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IHJlc291cmNlcy5sZW5ndGg7XG4gICAgICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIGZ1bmN0aW9uIGl0ZXJhdG9yKCkge1xuICAgICAgICAgICAgaWYgKGkgPj0gbGVuKSByZXR1cm4gcmV0Ll9mdWxmaWxsKCk7XG4gICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gY2FzdFByZXNlcnZpbmdEaXNwb3NhYmxlKHJlc291cmNlc1tpKytdKTtcbiAgICAgICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlICYmXG4gICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9pc0Rpc3Bvc2FibGUoKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX2dldERpc3Bvc2VyKCkudHJ5RGlzcG9zZShpbnNwZWN0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy5wcm9taXNlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aHJvd2VyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF5YmVQcm9taXNlLl90aGVuKGl0ZXJhdG9yLCB0aHJvd2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZXJhdG9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaXRlcmF0b3IoKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBEaXNwb3NlcihkYXRhLCBwcm9taXNlLCBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLl9wcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxuXG4gICAgRGlzcG9zZXIucHJvdG90eXBlLmRhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUucHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG4gICAgfTtcblxuICAgIERpc3Bvc2VyLnByb3RvdHlwZS5yZXNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvbWlzZSgpLmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb21pc2UoKS52YWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOVUxMO1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUudHJ5RGlzcG9zZSA9IGZ1bmN0aW9uKGluc3BlY3Rpb24pIHtcbiAgICAgICAgdmFyIHJlc291cmNlID0gdGhpcy5yZXNvdXJjZSgpO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuX2NvbnRleHQ7XG4gICAgICAgIGlmIChjb250ZXh0ICE9PSB1bmRlZmluZWQpIGNvbnRleHQuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgIHZhciByZXQgPSByZXNvdXJjZSAhPT0gTlVMTFxuICAgICAgICAgICAgPyB0aGlzLmRvRGlzcG9zZShyZXNvdXJjZSwgaW5zcGVjdGlvbikgOiBudWxsO1xuICAgICAgICBpZiAoY29udGV4dCAhPT0gdW5kZWZpbmVkKSBjb250ZXh0Ll9wb3BDb250ZXh0KCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3Vuc2V0RGlzcG9zYWJsZSgpO1xuICAgICAgICB0aGlzLl9kYXRhID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG4gICAgRGlzcG9zZXIuaXNEaXNwb3NlciA9IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIHJldHVybiAoZCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGQucmVzb3VyY2UgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBkLnRyeURpc3Bvc2UgPT09IFwiZnVuY3Rpb25cIik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEZ1bmN0aW9uRGlzcG9zZXIoZm4sIHByb21pc2UsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciQoZm4sIHByb21pc2UsIGNvbnRleHQpO1xuICAgIH1cbiAgICBpbmhlcml0cyhGdW5jdGlvbkRpc3Bvc2VyLCBEaXNwb3Nlcik7XG5cbiAgICBGdW5jdGlvbkRpc3Bvc2VyLnByb3RvdHlwZS5kb0Rpc3Bvc2UgPSBmdW5jdGlvbiAocmVzb3VyY2UsIGluc3BlY3Rpb24pIHtcbiAgICAgICAgdmFyIGZuID0gdGhpcy5kYXRhKCk7XG4gICAgICAgIHJldHVybiBmbi5jYWxsKHJlc291cmNlLCByZXNvdXJjZSwgaW5zcGVjdGlvbik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG1heWJlVW53cmFwRGlzcG9zZXIodmFsdWUpIHtcbiAgICAgICAgaWYgKERpc3Bvc2VyLmlzRGlzcG9zZXIodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc291cmNlc1t0aGlzLmluZGV4XS5fc2V0RGlzcG9zYWJsZSh2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUucHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBSZXNvdXJjZUxpc3QobGVuZ3RoKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLnByb21pc2UgPSBudWxsO1xuICAgICAgICB0aGlzW2xlbmd0aC0xXSA9IG51bGw7XG4gICAgfVxuXG4gICAgUmVzb3VyY2VMaXN0LnByb3RvdHlwZS5fcmVzdWx0Q2FuY2VsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzW2ldO1xuICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBQcm9taXNlLnVzaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA8IDIpIHJldHVybiBhcGlSZWplY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICBcInlvdSBtdXN0IHBhc3MgYXQgbGVhc3QgMiBhcmd1bWVudHMgdG8gUHJvbWlzZS51c2luZ1wiKTtcbiAgICAgICAgdmFyIGZuID0gYXJndW1lbnRzW2xlbiAtIDFdO1xuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYSBmdW5jdGlvbiBidXQgZ290IFwiICsgdXRpbC5jbGFzc1N0cmluZyhmbikpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbnB1dDtcbiAgICAgICAgdmFyIHNwcmVhZEFyZ3MgPSB0cnVlO1xuICAgICAgICBpZiAobGVuID09PSAyICYmIEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICAgICAgaW5wdXQgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICBsZW4gPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgICAgICBzcHJlYWRBcmdzID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnB1dCA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgIGxlbi0tO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXNvdXJjZXMgPSBuZXcgUmVzb3VyY2VMaXN0KGxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciByZXNvdXJjZSA9IGlucHV0W2ldO1xuICAgICAgICAgICAgaWYgKERpc3Bvc2VyLmlzRGlzcG9zZXIocmVzb3VyY2UpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3Bvc2VyID0gcmVzb3VyY2U7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UgPSByZXNvdXJjZS5wcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuX3NldERpc3Bvc2FibGUoZGlzcG9zZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXNvdXJjZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2UgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl90aGVuKG1heWJlVW53cmFwRGlzcG9zZXIsIG51bGwsIG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXM6IHJlc291cmNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaVxuICAgICAgICAgICAgICAgICAgICB9LCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc291cmNlc1tpXSA9IHJlc291cmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlZmxlY3RlZFJlc291cmNlcyA9IG5ldyBBcnJheShyZXNvdXJjZXMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWZsZWN0ZWRSZXNvdXJjZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHJlZmxlY3RlZFJlc291cmNlc1tpXSA9IFByb21pc2UucmVzb2x2ZShyZXNvdXJjZXNbaV0pLnJlZmxlY3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXN1bHRQcm9taXNlID0gUHJvbWlzZS5hbGwocmVmbGVjdGVkUmVzb3VyY2VzKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oaW5zcGVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluc3BlY3Rpb25zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnNwZWN0aW9uID0gaW5zcGVjdGlvbnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNwZWN0aW9uLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JPYmouZSA9IGluc3BlY3Rpb24uZXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaW5zcGVjdGlvbi5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRQcm9taXNlLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluc3BlY3Rpb25zW2ldID0gaW5zcGVjdGlvbi52YWx1ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuXG4gICAgICAgICAgICAgICAgZm4gPSB0cnlDYXRjaChmbik7XG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IHNwcmVhZEFyZ3NcbiAgICAgICAgICAgICAgICAgICAgPyBmbi5hcHBseSh1bmRlZmluZWQsIGluc3BlY3Rpb25zKSA6IGZuKGluc3BlY3Rpb25zKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZUNyZWF0ZWQgPSBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgICAgICAgICAgICAgZGVidWcuY2hlY2tGb3Jnb3R0ZW5SZXR1cm5zKFxuICAgICAgICAgICAgICAgICAgICByZXQsIHByb21pc2VDcmVhdGVkLCBcIlByb21pc2UudXNpbmdcIiwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gcmVzdWx0UHJvbWlzZS5sYXN0bHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5zcGVjdGlvbiA9IG5ldyBQcm9taXNlLlByb21pc2VJbnNwZWN0aW9uKHJlc3VsdFByb21pc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGRpc3Bvc2UocmVzb3VyY2VzLCBpbnNwZWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlc291cmNlcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgcHJvbWlzZS5fc2V0T25DYW5jZWwocmVzb3VyY2VzKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl9zZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKGRpc3Bvc2VyKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAxMzEwNzI7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VyID0gZGlzcG9zZXI7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl9pc0Rpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAxMzEwNzIpID4gMDtcbiAgICB9O1xuXG4gICAgUHJvbWlzZS5wcm90b3R5cGUuX2dldERpc3Bvc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzcG9zZXI7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl91bnNldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjEzMTA3Mik7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VyID0gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICBQcm9taXNlLnByb3RvdHlwZS5kaXNwb3NlciA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBpZiAodHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25EaXNwb3NlcihmbiwgdGhpcywgY3JlYXRlQ29udGV4dCgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgfTtcblxufTtcblxufSx7XCIuL2Vycm9yc1wiOjEyLFwiLi91dGlsXCI6MzZ9XSwzNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBlczUgPSBfZGVyZXFfKFwiLi9lczVcIik7XG52YXIgY2FuRXZhbHVhdGUgPSB0eXBlb2YgbmF2aWdhdG9yID09IFwidW5kZWZpbmVkXCI7XG5cbnZhciBlcnJvck9iaiA9IHtlOiB7fX07XG52YXIgdHJ5Q2F0Y2hUYXJnZXQ7XG52YXIgZ2xvYmFsT2JqZWN0ID0gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDpcbiAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDpcbiAgICB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDpcbiAgICB0aGlzICE9PSB1bmRlZmluZWQgPyB0aGlzIDogbnVsbDtcblxuZnVuY3Rpb24gdHJ5Q2F0Y2hlcigpIHtcbiAgICB0cnkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdHJ5Q2F0Y2hUYXJnZXQ7XG4gICAgICAgIHRyeUNhdGNoVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmouZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9XG59XG5mdW5jdGlvbiB0cnlDYXRjaChmbikge1xuICAgIHRyeUNhdGNoVGFyZ2V0ID0gZm47XG4gICAgcmV0dXJuIHRyeUNhdGNoZXI7XG59XG5cbnZhciBpbmhlcml0cyA9IGZ1bmN0aW9uKENoaWxkLCBQYXJlbnQpIHtcbiAgICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gICAgZnVuY3Rpb24gVCgpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IENoaWxkO1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yJCA9IFBhcmVudDtcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHlOYW1lIGluIFBhcmVudC5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIGlmIChoYXNQcm9wLmNhbGwoUGFyZW50LnByb3RvdHlwZSwgcHJvcGVydHlOYW1lKSAmJlxuICAgICAgICAgICAgICAgIHByb3BlcnR5TmFtZS5jaGFyQXQocHJvcGVydHlOYW1lLmxlbmd0aC0xKSAhPT0gXCIkXCJcbiAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpc1twcm9wZXJ0eU5hbWUgKyBcIiRcIl0gPSBQYXJlbnQucHJvdG90eXBlW3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgVC5wcm90b3R5cGUgPSBQYXJlbnQucHJvdG90eXBlO1xuICAgIENoaWxkLnByb3RvdHlwZSA9IG5ldyBUKCk7XG4gICAgcmV0dXJuIENoaWxkLnByb3RvdHlwZTtcbn07XG5cblxuZnVuY3Rpb24gaXNQcmltaXRpdmUodmFsKSB7XG4gICAgcmV0dXJuIHZhbCA9PSBudWxsIHx8IHZhbCA9PT0gdHJ1ZSB8fCB2YWwgPT09IGZhbHNlIHx8XG4gICAgICAgIHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIjtcblxufVxuXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIG1heWJlV3JhcEFzRXJyb3IobWF5YmVFcnJvcikge1xuICAgIGlmICghaXNQcmltaXRpdmUobWF5YmVFcnJvcikpIHJldHVybiBtYXliZUVycm9yO1xuXG4gICAgcmV0dXJuIG5ldyBFcnJvcihzYWZlVG9TdHJpbmcobWF5YmVFcnJvcikpO1xufVxuXG5mdW5jdGlvbiB3aXRoQXBwZW5kZWQodGFyZ2V0LCBhcHBlbmRlZSkge1xuICAgIHZhciBsZW4gPSB0YXJnZXQubGVuZ3RoO1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkobGVuICsgMSk7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHJldFtpXSA9IHRhcmdldFtpXTtcbiAgICB9XG4gICAgcmV0W2ldID0gYXBwZW5kZWU7XG4gICAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0KG9iaiwga2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgICBpZiAoZXM1LmlzRVM1KSB7XG4gICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG5cbiAgICAgICAgaWYgKGRlc2MgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2MuZ2V0ID09IG51bGwgJiYgZGVzYy5zZXQgPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICA/IGRlc2MudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkgPyBvYmpba2V5XSA6IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5vdEVudW1lcmFibGVQcm9wKG9iaiwgbmFtZSwgdmFsdWUpIHtcbiAgICBpZiAoaXNQcmltaXRpdmUob2JqKSkgcmV0dXJuIG9iajtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH07XG4gICAgZXM1LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwgZGVzY3JpcHRvcik7XG4gICAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gdGhyb3dlcihyKSB7XG4gICAgdGhyb3cgcjtcbn1cblxudmFyIGluaGVyaXRlZERhdGFLZXlzID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBleGNsdWRlZFByb3RvdHlwZXMgPSBbXG4gICAgICAgIEFycmF5LnByb3RvdHlwZSxcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgICAgRnVuY3Rpb24ucHJvdG90eXBlXG4gICAgXTtcblxuICAgIHZhciBpc0V4Y2x1ZGVkUHJvdG8gPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleGNsdWRlZFByb3RvdHlwZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChleGNsdWRlZFByb3RvdHlwZXNbaV0gPT09IHZhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgaWYgKGVzNS5pc0VTNSkge1xuICAgICAgICB2YXIgZ2V0S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgICAgICB2YXIgdmlzaXRlZEtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgd2hpbGUgKG9iaiAhPSBudWxsICYmICFpc0V4Y2x1ZGVkUHJvdG8ob2JqKSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlzO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMgPSBnZXRLZXlzKG9iaik7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2aXNpdGVkS2V5c1trZXldKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaXRlZEtleXNba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXNjICE9IG51bGwgJiYgZGVzYy5nZXQgPT0gbnVsbCAmJiBkZXNjLnNldCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9iaiA9IGVzNS5nZXRQcm90b3R5cGVPZihvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICBpZiAoaXNFeGNsdWRlZFByb3RvKG9iaikpIHJldHVybiBbXTtcbiAgICAgICAgICAgIHZhciByZXQgPSBbXTtcblxuICAgICAgICAgICAgLypqc2hpbnQgZm9yaW46ZmFsc2UgKi9cbiAgICAgICAgICAgIGVudW1lcmF0aW9uOiBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1Byb3AuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4Y2x1ZGVkUHJvdG90eXBlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1Byb3AuY2FsbChleGNsdWRlZFByb3RvdHlwZXNbaV0sIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBlbnVtZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXQucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH07XG4gICAgfVxuXG59KSgpO1xuXG52YXIgdGhpc0Fzc2lnbm1lbnRQYXR0ZXJuID0gL3RoaXNcXHMqXFwuXFxzKlxcUytcXHMqPS87XG5mdW5jdGlvbiBpc0NsYXNzKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IGVzNS5uYW1lcyhmbi5wcm90b3R5cGUpO1xuXG4gICAgICAgICAgICB2YXIgaGFzTWV0aG9kcyA9IGVzNS5pc0VTNSAmJiBrZXlzLmxlbmd0aCA+IDE7XG4gICAgICAgICAgICB2YXIgaGFzTWV0aG9kc090aGVyVGhhbkNvbnN0cnVjdG9yID0ga2V5cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgIShrZXlzLmxlbmd0aCA9PT0gMSAmJiBrZXlzWzBdID09PSBcImNvbnN0cnVjdG9yXCIpO1xuICAgICAgICAgICAgdmFyIGhhc1RoaXNBc3NpZ25tZW50QW5kU3RhdGljTWV0aG9kcyA9XG4gICAgICAgICAgICAgICAgdGhpc0Fzc2lnbm1lbnRQYXR0ZXJuLnRlc3QoZm4gKyBcIlwiKSAmJiBlczUubmFtZXMoZm4pLmxlbmd0aCA+IDA7XG5cbiAgICAgICAgICAgIGlmIChoYXNNZXRob2RzIHx8IGhhc01ldGhvZHNPdGhlclRoYW5Db25zdHJ1Y3RvciB8fFxuICAgICAgICAgICAgICAgIGhhc1RoaXNBc3NpZ25tZW50QW5kU3RhdGljTWV0aG9kcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRvRmFzdFByb3BlcnRpZXMob2JqKSB7XG4gICAgLypqc2hpbnQgLVcwMjcsLVcwNTUsLVcwMzEqL1xuICAgIGZ1bmN0aW9uIEZha2VDb25zdHJ1Y3RvcigpIHt9XG4gICAgRmFrZUNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IG9iajtcbiAgICB2YXIgbCA9IDg7XG4gICAgd2hpbGUgKGwtLSkgbmV3IEZha2VDb25zdHJ1Y3RvcigpO1xuICAgIHJldHVybiBvYmo7XG4gICAgZXZhbChvYmopO1xufVxuXG52YXIgcmlkZW50ID0gL15bYS16JF9dW2EteiRfMC05XSokL2k7XG5mdW5jdGlvbiBpc0lkZW50aWZpZXIoc3RyKSB7XG4gICAgcmV0dXJuIHJpZGVudC50ZXN0KHN0cik7XG59XG5cbmZ1bmN0aW9uIGZpbGxlZFJhbmdlKGNvdW50LCBwcmVmaXgsIHN1ZmZpeCkge1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkoY291bnQpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgIHJldFtpXSA9IHByZWZpeCArIGkgKyBzdWZmaXg7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHNhZmVUb1N0cmluZyhvYmopIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gb2JqICsgXCJcIjtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBcIltubyBzdHJpbmcgcmVwcmVzZW50YXRpb25dXCI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0Vycm9yKG9iaikge1xuICAgIHJldHVybiBvYmogIT09IG51bGwgJiZcbiAgICAgICAgICAgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICB0eXBlb2Ygb2JqLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgdHlwZW9mIG9iai5uYW1lID09PSBcInN0cmluZ1wiO1xufVxuXG5mdW5jdGlvbiBtYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24oZSkge1xuICAgIHRyeSB7XG4gICAgICAgIG5vdEVudW1lcmFibGVQcm9wKGUsIFwiaXNPcGVyYXRpb25hbFwiLCB0cnVlKTtcbiAgICB9XG4gICAgY2F0Y2goaWdub3JlKSB7fVxufVxuXG5mdW5jdGlvbiBvcmlnaW5hdGVzRnJvbVJlamVjdGlvbihlKSB7XG4gICAgaWYgKGUgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAoKGUgaW5zdGFuY2VvZiBFcnJvcltcIl9fQmx1ZWJpcmRFcnJvclR5cGVzX19cIl0uT3BlcmF0aW9uYWxFcnJvcikgfHxcbiAgICAgICAgZVtcImlzT3BlcmF0aW9uYWxcIl0gPT09IHRydWUpO1xufVxuXG5mdW5jdGlvbiBjYW5BdHRhY2hUcmFjZShvYmopIHtcbiAgICByZXR1cm4gaXNFcnJvcihvYmopICYmIGVzNS5wcm9wZXJ0eUlzV3JpdGFibGUob2JqLCBcInN0YWNrXCIpO1xufVxuXG52YXIgZW5zdXJlRXJyb3JPYmplY3QgPSAoZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEoXCJzdGFja1wiIGluIG5ldyBFcnJvcigpKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjYW5BdHRhY2hUcmFjZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIHRyeSB7dGhyb3cgbmV3IEVycm9yKHNhZmVUb1N0cmluZyh2YWx1ZSkpO31cbiAgICAgICAgICAgIGNhdGNoKGVycikge3JldHVybiBlcnI7fVxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGNhbkF0dGFjaFRyYWNlKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihzYWZlVG9TdHJpbmcodmFsdWUpKTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG5mdW5jdGlvbiBjbGFzc1N0cmluZyhvYmopIHtcbiAgICByZXR1cm4ge30udG9TdHJpbmcuY2FsbChvYmopO1xufVxuXG5mdW5jdGlvbiBjb3B5RGVzY3JpcHRvcnMoZnJvbSwgdG8sIGZpbHRlcikge1xuICAgIHZhciBrZXlzID0gZXM1Lm5hbWVzKGZyb20pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgaWYgKGZpbHRlcihrZXkpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGVzNS5kZWZpbmVQcm9wZXJ0eSh0bywga2V5LCBlczUuZ2V0RGVzY3JpcHRvcihmcm9tLCBrZXkpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIGFzQXJyYXkgPSBmdW5jdGlvbih2KSB7XG4gICAgaWYgKGVzNS5pc0FycmF5KHYpKSB7XG4gICAgICAgIHJldHVybiB2O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvcikge1xuICAgIHZhciBBcnJheUZyb20gPSB0eXBlb2YgQXJyYXkuZnJvbSA9PT0gXCJmdW5jdGlvblwiID8gZnVuY3Rpb24odikge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh2KTtcbiAgICB9IDogZnVuY3Rpb24odikge1xuICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgIHZhciBpdCA9IHZbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICB2YXIgaXRSZXN1bHQ7XG4gICAgICAgIHdoaWxlICghKChpdFJlc3VsdCA9IGl0Lm5leHQoKSkuZG9uZSkpIHtcbiAgICAgICAgICAgIHJldC5wdXNoKGl0UmVzdWx0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG5cbiAgICBhc0FycmF5ID0gZnVuY3Rpb24odikge1xuICAgICAgICBpZiAoZXM1LmlzQXJyYXkodikpIHtcbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9IGVsc2UgaWYgKHYgIT0gbnVsbCAmJiB0eXBlb2YgdltTeW1ib2wuaXRlcmF0b3JdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheUZyb20odik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cblxudmFyIGlzTm9kZSA9IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIGNsYXNzU3RyaW5nKHByb2Nlc3MpLnRvTG93ZXJDYXNlKCkgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiO1xuXG5mdW5jdGlvbiBlbnYoa2V5LCBkZWYpIHtcbiAgICByZXR1cm4gaXNOb2RlID8gcHJvY2Vzcy5lbnZba2V5XSA6IGRlZjtcbn1cblxuZnVuY3Rpb24gZ2V0TmF0aXZlUHJvbWlzZSgpIHtcbiAgICBpZiAodHlwZW9mIFByb21pc2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbigpe30pO1xuICAgICAgICAgICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwocHJvbWlzZSkgPT09IFwiW29iamVjdCBQcm9taXNlXVwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkb21haW5CaW5kKHNlbGYsIGNiKSB7XG4gICAgcmV0dXJuIHNlbGYuYmluZChjYik7XG59XG5cbnZhciByZXQgPSB7XG4gICAgaXNDbGFzczogaXNDbGFzcyxcbiAgICBpc0lkZW50aWZpZXI6IGlzSWRlbnRpZmllcixcbiAgICBpbmhlcml0ZWREYXRhS2V5czogaW5oZXJpdGVkRGF0YUtleXMsXG4gICAgZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0OiBnZXREYXRhUHJvcGVydHlPckRlZmF1bHQsXG4gICAgdGhyb3dlcjogdGhyb3dlcixcbiAgICBpc0FycmF5OiBlczUuaXNBcnJheSxcbiAgICBhc0FycmF5OiBhc0FycmF5LFxuICAgIG5vdEVudW1lcmFibGVQcm9wOiBub3RFbnVtZXJhYmxlUHJvcCxcbiAgICBpc1ByaW1pdGl2ZTogaXNQcmltaXRpdmUsXG4gICAgaXNPYmplY3Q6IGlzT2JqZWN0LFxuICAgIGlzRXJyb3I6IGlzRXJyb3IsXG4gICAgY2FuRXZhbHVhdGU6IGNhbkV2YWx1YXRlLFxuICAgIGVycm9yT2JqOiBlcnJvck9iaixcbiAgICB0cnlDYXRjaDogdHJ5Q2F0Y2gsXG4gICAgaW5oZXJpdHM6IGluaGVyaXRzLFxuICAgIHdpdGhBcHBlbmRlZDogd2l0aEFwcGVuZGVkLFxuICAgIG1heWJlV3JhcEFzRXJyb3I6IG1heWJlV3JhcEFzRXJyb3IsXG4gICAgdG9GYXN0UHJvcGVydGllczogdG9GYXN0UHJvcGVydGllcyxcbiAgICBmaWxsZWRSYW5nZTogZmlsbGVkUmFuZ2UsXG4gICAgdG9TdHJpbmc6IHNhZmVUb1N0cmluZyxcbiAgICBjYW5BdHRhY2hUcmFjZTogY2FuQXR0YWNoVHJhY2UsXG4gICAgZW5zdXJlRXJyb3JPYmplY3Q6IGVuc3VyZUVycm9yT2JqZWN0LFxuICAgIG9yaWdpbmF0ZXNGcm9tUmVqZWN0aW9uOiBvcmlnaW5hdGVzRnJvbVJlamVjdGlvbixcbiAgICBtYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb246IG1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbixcbiAgICBjbGFzc1N0cmluZzogY2xhc3NTdHJpbmcsXG4gICAgY29weURlc2NyaXB0b3JzOiBjb3B5RGVzY3JpcHRvcnMsXG4gICAgaGFzRGV2VG9vbHM6IHR5cGVvZiBjaHJvbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY2hyb21lICYmXG4gICAgICAgICAgICAgICAgIHR5cGVvZiBjaHJvbWUubG9hZFRpbWVzID09PSBcImZ1bmN0aW9uXCIsXG4gICAgaXNOb2RlOiBpc05vZGUsXG4gICAgZW52OiBlbnYsXG4gICAgZ2xvYmFsOiBnbG9iYWxPYmplY3QsXG4gICAgZ2V0TmF0aXZlUHJvbWlzZTogZ2V0TmF0aXZlUHJvbWlzZSxcbiAgICBkb21haW5CaW5kOiBkb21haW5CaW5kXG59O1xucmV0LmlzUmVjZW50Tm9kZSA9IHJldC5pc05vZGUgJiYgKGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ZXJzaW9uID0gcHJvY2Vzcy52ZXJzaW9ucy5ub2RlLnNwbGl0KFwiLlwiKS5tYXAoTnVtYmVyKTtcbiAgICByZXR1cm4gKHZlcnNpb25bMF0gPT09IDAgJiYgdmVyc2lvblsxXSA+IDEwKSB8fCAodmVyc2lvblswXSA+IDApO1xufSkoKTtcblxuaWYgKHJldC5pc05vZGUpIHJldC50b0Zhc3RQcm9wZXJ0aWVzKHByb2Nlc3MpO1xuXG50cnkge3Rocm93IG5ldyBFcnJvcigpOyB9IGNhdGNoIChlKSB7cmV0Lmxhc3RMaW5lRXJyb3IgPSBlO31cbm1vZHVsZS5leHBvcnRzID0gcmV0O1xuXG59LHtcIi4vZXM1XCI6MTN9XX0se30sWzRdKSg0KVxufSk7ICAgICAgICAgICAgICAgICAgICA7aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdyAhPT0gbnVsbCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUCA9IHdpbmRvdy5Qcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZiAhPT0gbnVsbCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5QID0gc2VsZi5Qcm9taXNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbi8qIEZsYXNoIGRldGVjdGlvbiBmcm9tIFNXRk9iamVjdDogY29kZS5nb29nbGUuY29tL3Avc3dmb2JqZWN0XG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgXG4gKiBAcmV0dXJucyBhIHZlcnNpb24gbnVtYmVyIG9yIC0xIGlmIG5vIHBsYXllclxuICovXG52YXIgZ2V0Rmxhc2hWZXJzaW9uID0gZnVuY3Rpb24oKSB7XG5cdFxuXHRcdHZhciBTVyA9IFwiU2hvY2t3YXZlXCIsXG5cdFx0XHRGTEFTSCA9IFwiRmxhc2hcIixcblx0XHRcdFNIT0NLV0FWRV9GTEFTSCA9IFNXICsgXCIgXCIgKyBGTEFTSCxcblx0XHRcdFNIT0NLV0FWRV9GTEFTSF9BWCA9IFNXK0ZMQVNIK1wiLlwiK1NXK0ZMQVNILFxuXHRcdFx0RkxBU0hfTUlNRV9UWVBFID0gXCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiLFxuXHRcdFx0bmF2ID0gbmF2aWdhdG9yLFxuXHRcdFx0cGFyc2UgPSBwYXJzZUZsb2F0LFxuXHRcdFx0cGx1Z2lucyA9IG5hdi5wbHVnaW5zLFxuXHRcdFx0bWltZXMgPSBuYXYubWltZVR5cGVzLFxuXHRcdFx0ZCwgYTtcblx0XHRpZiAoISFwbHVnaW5zICYmIHR5cGVvZiBwbHVnaW5zW1NIT0NLV0FWRV9GTEFTSF0gPT0gXCJvYmplY3RcIikge1xuXHRcdFx0ZCA9IHBsdWdpbnNbU0hPQ0tXQVZFX0ZMQVNIXS5kZXNjcmlwdGlvbjtcblx0XHRcdGlmICghIWQgJiYgISghIW1pbWVzICYmICEhbWltZXNbRkxBU0hfTUlNRV9UWVBFXSAmJiAhbWltZXNbRkxBU0hfTUlNRV9UWVBFXS5lbmFibGVkUGx1Z2luKSkge1xuXHRcdFx0XHRyZXR1cm4gcGFyc2UoIGQucmVwbGFjZSgvXi4qXFxzKyhcXFMrKVxccytcXFMrJC8sIFwiJDFcIikgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSBpZiAoICEhd2luZG93LkFjdGl2ZVhPYmplY3QgKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhID0gbmV3IEFjdGl2ZVhPYmplY3QoU0hPQ0tXQVZFX0ZMQVNIX0FYKTtcblx0XHRcdFx0aWYgKGEpIHtcblx0XHRcdFx0XHRkID0gYS5HZXRWYXJpYWJsZShcIiR2ZXJzaW9uXCIpO1xuXHRcdFx0XHRcdGlmICghIWQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBwYXJzZShkLnJlcGxhY2UoL15cXFMrXFxzKyhcXGQrKSwoXFxkKykuKiQvaSwnJDEuJDInKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjYXRjaChlKSB7fVxuXHRcdH1cblx0XHRyZXR1cm4gLTE7XG5cdFx0XG59O1xuLyohICAgIFNXRk9iamVjdCB2Mi4zLjIwMTMwNTIxIDxodHRwOi8vZ2l0aHViLmNvbS9zd2ZvYmplY3Qvc3dmb2JqZWN0PlxuICAgIGlzIHJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSA8aHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHA+XG4qL1xudmFyIHN3Zm9iamVjdD1mdW5jdGlvbigpe3ZhciBEPVwidW5kZWZpbmVkXCIscj1cIm9iamVjdFwiLFQ9XCJTaG9ja3dhdmUgRmxhc2hcIixaPVwiU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2hcIixxPVwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIixTPVwiU1dGT2JqZWN0RXhwckluc3RcIix4PVwib25yZWFkeXN0YXRlY2hhbmdlXCIsUT13aW5kb3csaD1kb2N1bWVudCx0PW5hdmlnYXRvcixWPWZhbHNlLFg9W10sbz1bXSxQPVtdLEs9W10sSSxwLEUsQixMPWZhbHNlLGE9ZmFsc2UsbSxHLGo9dHJ1ZSxsPWZhbHNlLE89ZnVuY3Rpb24oKXt2YXIgYWQ9dHlwZW9mIGguZ2V0RWxlbWVudEJ5SWQhPUQmJnR5cGVvZiBoLmdldEVsZW1lbnRzQnlUYWdOYW1lIT1EJiZ0eXBlb2YgaC5jcmVhdGVFbGVtZW50IT1ELGFrPXQudXNlckFnZW50LnRvTG93ZXJDYXNlKCksYWI9dC5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpLGFoPWFiPy93aW4vLnRlc3QoYWIpOi93aW4vLnRlc3QoYWspLGFmPWFiPy9tYWMvLnRlc3QoYWIpOi9tYWMvLnRlc3QoYWspLGFpPS93ZWJraXQvLnRlc3QoYWspP3BhcnNlRmxvYXQoYWsucmVwbGFjZSgvXi4qd2Via2l0XFwvKFxcZCsoXFwuXFxkKyk/KS4qJC8sXCIkMVwiKSk6ZmFsc2UsYWE9dC5hcHBOYW1lPT09XCJNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXJcIixhaj1bMCwwLDBdLGFlPW51bGw7aWYodHlwZW9mIHQucGx1Z2lucyE9RCYmdHlwZW9mIHQucGx1Z2luc1tUXT09cil7YWU9dC5wbHVnaW5zW1RdLmRlc2NyaXB0aW9uO2lmKGFlJiYodHlwZW9mIHQubWltZVR5cGVzIT1EJiZ0Lm1pbWVUeXBlc1txXSYmdC5taW1lVHlwZXNbcV0uZW5hYmxlZFBsdWdpbikpe1Y9dHJ1ZTthYT1mYWxzZTthZT1hZS5yZXBsYWNlKC9eLipcXHMrKFxcUytcXHMrXFxTKyQpLyxcIiQxXCIpO2FqWzBdPW4oYWUucmVwbGFjZSgvXiguKilcXC4uKiQvLFwiJDFcIikpO2FqWzFdPW4oYWUucmVwbGFjZSgvXi4qXFwuKC4qKVxccy4qJC8sXCIkMVwiKSk7YWpbMl09L1thLXpBLVpdLy50ZXN0KGFlKT9uKGFlLnJlcGxhY2UoL14uKlthLXpBLVpdKyguKikkLyxcIiQxXCIpKTowfX1lbHNle2lmKHR5cGVvZiBRLkFjdGl2ZVhPYmplY3QhPUQpe3RyeXt2YXIgYWc9bmV3IEFjdGl2ZVhPYmplY3QoWik7aWYoYWcpe2FlPWFnLkdldFZhcmlhYmxlKFwiJHZlcnNpb25cIik7aWYoYWUpe2FhPXRydWU7YWU9YWUuc3BsaXQoXCIgXCIpWzFdLnNwbGl0KFwiLFwiKTthaj1bbihhZVswXSksbihhZVsxXSksbihhZVsyXSldfX19Y2F0Y2goYWMpe319fXJldHVybnt3MzphZCxwdjphaix3azphaSxpZTphYSx3aW46YWgsbWFjOmFmfX0oKSxpPWZ1bmN0aW9uKCl7aWYoIU8udzMpe3JldHVybn1pZigodHlwZW9mIGgucmVhZHlTdGF0ZSE9RCYmKGgucmVhZHlTdGF0ZT09PVwiY29tcGxldGVcInx8aC5yZWFkeVN0YXRlPT09XCJpbnRlcmFjdGl2ZVwiKSl8fCh0eXBlb2YgaC5yZWFkeVN0YXRlPT1EJiYoaC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF18fGguYm9keSkpKXtmKCl9aWYoIUwpe2lmKHR5cGVvZiBoLmFkZEV2ZW50TGlzdGVuZXIhPUQpe2guYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmLGZhbHNlKX1pZihPLmllKXtoLmF0dGFjaEV2ZW50KHgsZnVuY3Rpb24gYWEoKXtpZihoLnJlYWR5U3RhdGU9PVwiY29tcGxldGVcIil7aC5kZXRhY2hFdmVudCh4LGFhKTtmKCl9fSk7aWYoUT09dG9wKXsoZnVuY3Rpb24gYWMoKXtpZihMKXtyZXR1cm59dHJ5e2guZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKFwibGVmdFwiKX1jYXRjaChhZCl7c2V0VGltZW91dChhYywwKTtyZXR1cm59ZigpfSgpKX19aWYoTy53ayl7KGZ1bmN0aW9uIGFiKCl7aWYoTCl7cmV0dXJufWlmKCEvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KGgucmVhZHlTdGF0ZSkpe3NldFRpbWVvdXQoYWIsMCk7cmV0dXJufWYoKX0oKSl9fX0oKTtmdW5jdGlvbiBmKCl7aWYoTHx8IWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXSl7cmV0dXJufXRyeXt2YXIgYWMsYWQ9QyhcInNwYW5cIik7YWQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjthYz1oLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5hcHBlbmRDaGlsZChhZCk7YWMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhYyk7YWM9bnVsbDthZD1udWxsfWNhdGNoKGFlKXtyZXR1cm59TD10cnVlO3ZhciBhYT1YLmxlbmd0aDtmb3IodmFyIGFiPTA7YWI8YWE7YWIrKyl7WFthYl0oKX19ZnVuY3Rpb24gTShhYSl7aWYoTCl7YWEoKX1lbHNle1hbWC5sZW5ndGhdPWFhfX1mdW5jdGlvbiBzKGFiKXtpZih0eXBlb2YgUS5hZGRFdmVudExpc3RlbmVyIT1EKXtRLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsYWIsZmFsc2UpfWVsc2V7aWYodHlwZW9mIGguYWRkRXZlbnRMaXN0ZW5lciE9RCl7aC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGFiLGZhbHNlKX1lbHNle2lmKHR5cGVvZiBRLmF0dGFjaEV2ZW50IT1EKXtnKFEsXCJvbmxvYWRcIixhYil9ZWxzZXtpZih0eXBlb2YgUS5vbmxvYWQ9PVwiZnVuY3Rpb25cIil7dmFyIGFhPVEub25sb2FkO1Eub25sb2FkPWZ1bmN0aW9uKCl7YWEoKTthYigpfX1lbHNle1Eub25sb2FkPWFifX19fX1mdW5jdGlvbiBZKCl7dmFyIGFhPWguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdO3ZhciBhZT1DKHIpO2FlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ2aXNpYmlsaXR5OiBoaWRkZW47XCIpO2FlLnNldEF0dHJpYnV0ZShcInR5cGVcIixxKTt2YXIgYWQ9YWEuYXBwZW5kQ2hpbGQoYWUpO2lmKGFkKXt2YXIgYWM9MDsoZnVuY3Rpb24gYWIoKXtpZih0eXBlb2YgYWQuR2V0VmFyaWFibGUhPUQpe3RyeXt2YXIgYWc9YWQuR2V0VmFyaWFibGUoXCIkdmVyc2lvblwiKTtpZihhZyl7YWc9YWcuc3BsaXQoXCIgXCIpWzFdLnNwbGl0KFwiLFwiKTtPLnB2PVtuKGFnWzBdKSxuKGFnWzFdKSxuKGFnWzJdKV19fWNhdGNoKGFmKXtPLnB2PVs4LDAsMF19fWVsc2V7aWYoYWM8MTApe2FjKys7c2V0VGltZW91dChhYiwxMCk7cmV0dXJufX1hYS5yZW1vdmVDaGlsZChhZSk7YWQ9bnVsbDtIKCl9KCkpfWVsc2V7SCgpfX1mdW5jdGlvbiBIKCl7dmFyIGFqPW8ubGVuZ3RoO2lmKGFqPjApe2Zvcih2YXIgYWk9MDthaTxhajthaSsrKXt2YXIgYWI9b1thaV0uaWQ7dmFyIGFlPW9bYWldLmNhbGxiYWNrRm47dmFyIGFkPXtzdWNjZXNzOmZhbHNlLGlkOmFifTtpZihPLnB2WzBdPjApe3ZhciBhaD1jKGFiKTtpZihhaCl7aWYoRihvW2FpXS5zd2ZWZXJzaW9uKSYmIShPLndrJiZPLndrPDMxMikpe3coYWIsdHJ1ZSk7aWYoYWUpe2FkLnN1Y2Nlc3M9dHJ1ZTthZC5yZWY9eihhYik7YWQuaWQ9YWI7YWUoYWQpfX1lbHNle2lmKG9bYWldLmV4cHJlc3NJbnN0YWxsJiZBKCkpe3ZhciBhbD17fTthbC5kYXRhPW9bYWldLmV4cHJlc3NJbnN0YWxsO2FsLndpZHRoPWFoLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpfHxcIjBcIjthbC5oZWlnaHQ9YWguZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpfHxcIjBcIjtpZihhaC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSl7YWwuc3R5bGVjbGFzcz1haC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKX1pZihhaC5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKSl7YWwuYWxpZ249YWguZ2V0QXR0cmlidXRlKFwiYWxpZ25cIil9dmFyIGFrPXt9O3ZhciBhYT1haC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhcmFtXCIpO3ZhciBhZj1hYS5sZW5ndGg7Zm9yKHZhciBhZz0wO2FnPGFmO2FnKyspe2lmKGFhW2FnXS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLnRvTG93ZXJDYXNlKCkhPVwibW92aWVcIil7YWtbYWFbYWddLmdldEF0dHJpYnV0ZShcIm5hbWVcIildPWFhW2FnXS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKX19UihhbCxhayxhYixhZSl9ZWxzZXtiKGFoKTtpZihhZSl7YWUoYWQpfX19fX1lbHNle3coYWIsdHJ1ZSk7aWYoYWUpe3ZhciBhYz16KGFiKTtpZihhYyYmdHlwZW9mIGFjLlNldFZhcmlhYmxlIT1EKXthZC5zdWNjZXNzPXRydWU7YWQucmVmPWFjO2FkLmlkPWFjLmlkfWFlKGFkKX19fX19WFswXT1mdW5jdGlvbigpe2lmKFYpe1koKX1lbHNle0goKX19O2Z1bmN0aW9uIHooYWMpe3ZhciBhYT1udWxsLGFiPWMoYWMpO2lmKGFiJiZhYi5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPT09XCJPQkpFQ1RcIil7aWYodHlwZW9mIGFiLlNldFZhcmlhYmxlIT09RCl7YWE9YWJ9ZWxzZXthYT1hYi5nZXRFbGVtZW50c0J5VGFnTmFtZShyKVswXXx8YWJ9fXJldHVybiBhYX1mdW5jdGlvbiBBKCl7cmV0dXJuICFhJiZGKFwiNi4wLjY1XCIpJiYoTy53aW58fE8ubWFjKSYmIShPLndrJiZPLndrPDMxMil9ZnVuY3Rpb24gUihhZCxhZSxhYSxhYyl7dmFyIGFoPWMoYWEpO2FhPVcoYWEpO2E9dHJ1ZTtFPWFjfHxudWxsO0I9e3N1Y2Nlc3M6ZmFsc2UsaWQ6YWF9O2lmKGFoKXtpZihhaC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPT1cIk9CSkVDVFwiKXtJPUooYWgpO3A9bnVsbH1lbHNle0k9YWg7cD1hYX1hZC5pZD1TO2lmKHR5cGVvZiBhZC53aWR0aD09RHx8KCEvJSQvLnRlc3QoYWQud2lkdGgpJiZuKGFkLndpZHRoKTwzMTApKXthZC53aWR0aD1cIjMxMFwifWlmKHR5cGVvZiBhZC5oZWlnaHQ9PUR8fCghLyUkLy50ZXN0KGFkLmhlaWdodCkmJm4oYWQuaGVpZ2h0KTwxMzcpKXthZC5oZWlnaHQ9XCIxMzdcIn12YXIgYWc9Ty5pZT9cIkFjdGl2ZVhcIjpcIlBsdWdJblwiLGFmPVwiTU1yZWRpcmVjdFVSTD1cIitlbmNvZGVVUklDb21wb25lbnQoUS5sb2NhdGlvbi50b1N0cmluZygpLnJlcGxhY2UoLyYvZyxcIiUyNlwiKSkrXCImTU1wbGF5ZXJUeXBlPVwiK2FnK1wiJk1NZG9jdGl0bGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGgudGl0bGUuc2xpY2UoMCw0NykrXCIgLSBGbGFzaCBQbGF5ZXIgSW5zdGFsbGF0aW9uXCIpO2lmKHR5cGVvZiBhZS5mbGFzaHZhcnMhPUQpe2FlLmZsYXNodmFycys9XCImXCIrYWZ9ZWxzZXthZS5mbGFzaHZhcnM9YWZ9aWYoTy5pZSYmYWgucmVhZHlTdGF0ZSE9NCl7dmFyIGFiPUMoXCJkaXZcIik7XG5hYSs9XCJTV0ZPYmplY3ROZXdcIjthYi5zZXRBdHRyaWJ1dGUoXCJpZFwiLGFhKTthaC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhYixhaCk7YWguc3R5bGUuZGlzcGxheT1cIm5vbmVcIjt5KGFoKX11KGFkLGFlLGFhKX19ZnVuY3Rpb24gYihhYil7aWYoTy5pZSYmYWIucmVhZHlTdGF0ZSE9NCl7YWIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjt2YXIgYWE9QyhcImRpdlwiKTthYi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhYSxhYik7YWEucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoSihhYiksYWEpO3koYWIpfWVsc2V7YWIucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoSihhYiksYWIpfX1mdW5jdGlvbiBKKGFmKXt2YXIgYWU9QyhcImRpdlwiKTtpZihPLndpbiYmTy5pZSl7YWUuaW5uZXJIVE1MPWFmLmlubmVySFRNTH1lbHNle3ZhciBhYj1hZi5nZXRFbGVtZW50c0J5VGFnTmFtZShyKVswXTtpZihhYil7dmFyIGFnPWFiLmNoaWxkTm9kZXM7aWYoYWcpe3ZhciBhYT1hZy5sZW5ndGg7Zm9yKHZhciBhZD0wO2FkPGFhO2FkKyspe2lmKCEoYWdbYWRdLm5vZGVUeXBlPT0xJiZhZ1thZF0ubm9kZU5hbWU9PVwiUEFSQU1cIikmJiEoYWdbYWRdLm5vZGVUeXBlPT04KSl7YWUuYXBwZW5kQ2hpbGQoYWdbYWRdLmNsb25lTm9kZSh0cnVlKSl9fX19fXJldHVybiBhZX1mdW5jdGlvbiBrKGFhLGFiKXt2YXIgYWM9QyhcImRpdlwiKTthYy5pbm5lckhUTUw9XCI8b2JqZWN0IGNsYXNzaWQ9J2Nsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMCc+PHBhcmFtIG5hbWU9J21vdmllJyB2YWx1ZT0nXCIrYWErXCInPlwiK2FiK1wiPC9vYmplY3Q+XCI7cmV0dXJuIGFjLmZpcnN0Q2hpbGR9ZnVuY3Rpb24gdShhaSxhZyxhYil7dmFyIGFhLGFkPWMoYWIpO2FiPVcoYWIpO2lmKE8ud2smJk8ud2s8MzEyKXtyZXR1cm4gYWF9aWYoYWQpe3ZhciBhYz0oTy5pZSk/QyhcImRpdlwiKTpDKHIpLGFmLGFoLGFlO2lmKHR5cGVvZiBhaS5pZD09RCl7YWkuaWQ9YWJ9Zm9yKGFlIGluIGFnKXtpZihhZy5oYXNPd25Qcm9wZXJ0eShhZSkmJmFlLnRvTG93ZXJDYXNlKCkhPT1cIm1vdmllXCIpe2UoYWMsYWUsYWdbYWVdKX19aWYoTy5pZSl7YWM9ayhhaS5kYXRhLGFjLmlubmVySFRNTCl9Zm9yKGFmIGluIGFpKXtpZihhaS5oYXNPd25Qcm9wZXJ0eShhZikpe2FoPWFmLnRvTG93ZXJDYXNlKCk7aWYoYWg9PT1cInN0eWxlY2xhc3NcIil7YWMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixhaVthZl0pfWVsc2V7aWYoYWghPT1cImNsYXNzaWRcIiYmYWghPT1cImRhdGFcIil7YWMuc2V0QXR0cmlidXRlKGFmLGFpW2FmXSl9fX19aWYoTy5pZSl7UFtQLmxlbmd0aF09YWkuaWR9ZWxzZXthYy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIscSk7YWMuc2V0QXR0cmlidXRlKFwiZGF0YVwiLGFpLmRhdGEpfWFkLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGFjLGFkKTthYT1hY31yZXR1cm4gYWF9ZnVuY3Rpb24gZShhYyxhYSxhYil7dmFyIGFkPUMoXCJwYXJhbVwiKTthZC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsYWEpO2FkLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsYWIpO2FjLmFwcGVuZENoaWxkKGFkKX1mdW5jdGlvbiB5KGFjKXt2YXIgYWI9YyhhYyk7aWYoYWImJmFiLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PVwiT0JKRUNUXCIpe2lmKE8uaWUpe2FiLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7KGZ1bmN0aW9uIGFhKCl7aWYoYWIucmVhZHlTdGF0ZT09NCl7Zm9yKHZhciBhZCBpbiBhYil7aWYodHlwZW9mIGFiW2FkXT09XCJmdW5jdGlvblwiKXthYlthZF09bnVsbH19YWIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhYil9ZWxzZXtzZXRUaW1lb3V0KGFhLDEwKX19KCkpfWVsc2V7YWIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhYil9fX1mdW5jdGlvbiBVKGFhKXtyZXR1cm4oYWEmJmFhLm5vZGVUeXBlJiZhYS5ub2RlVHlwZT09PTEpfWZ1bmN0aW9uIFcoYWEpe3JldHVybihVKGFhKSk/YWEuaWQ6YWF9ZnVuY3Rpb24gYyhhYyl7aWYoVShhYykpe3JldHVybiBhY312YXIgYWE9bnVsbDt0cnl7YWE9aC5nZXRFbGVtZW50QnlJZChhYyl9Y2F0Y2goYWIpe31yZXR1cm4gYWF9ZnVuY3Rpb24gQyhhYSl7cmV0dXJuIGguY3JlYXRlRWxlbWVudChhYSl9ZnVuY3Rpb24gbihhYSl7cmV0dXJuIHBhcnNlSW50KGFhLDEwKX1mdW5jdGlvbiBnKGFjLGFhLGFiKXthYy5hdHRhY2hFdmVudChhYSxhYik7S1tLLmxlbmd0aF09W2FjLGFhLGFiXX1mdW5jdGlvbiBGKGFjKXthYys9XCJcIjt2YXIgYWI9Ty5wdixhYT1hYy5zcGxpdChcIi5cIik7YWFbMF09bihhYVswXSk7YWFbMV09bihhYVsxXSl8fDA7YWFbMl09bihhYVsyXSl8fDA7cmV0dXJuKGFiWzBdPmFhWzBdfHwoYWJbMF09PWFhWzBdJiZhYlsxXT5hYVsxXSl8fChhYlswXT09YWFbMF0mJmFiWzFdPT1hYVsxXSYmYWJbMl0+PWFhWzJdKSk/dHJ1ZTpmYWxzZX1mdW5jdGlvbiB2KGFmLGFiLGFnLGFlKXt2YXIgYWQ9aC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07aWYoIWFkKXtyZXR1cm59dmFyIGFhPSh0eXBlb2YgYWc9PVwic3RyaW5nXCIpP2FnOlwic2NyZWVuXCI7aWYoYWUpe209bnVsbDtHPW51bGx9aWYoIW18fEchPWFhKXt2YXIgYWM9QyhcInN0eWxlXCIpO2FjLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHQvY3NzXCIpO2FjLnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsYWEpO209YWQuYXBwZW5kQ2hpbGQoYWMpO2lmKE8uaWUmJnR5cGVvZiBoLnN0eWxlU2hlZXRzIT1EJiZoLnN0eWxlU2hlZXRzLmxlbmd0aD4wKXttPWguc3R5bGVTaGVldHNbaC5zdHlsZVNoZWV0cy5sZW5ndGgtMV19Rz1hYX1pZihtKXtpZih0eXBlb2YgbS5hZGRSdWxlIT1EKXttLmFkZFJ1bGUoYWYsYWIpfWVsc2V7aWYodHlwZW9mIGguY3JlYXRlVGV4dE5vZGUhPUQpe20uYXBwZW5kQ2hpbGQoaC5jcmVhdGVUZXh0Tm9kZShhZitcIiB7XCIrYWIrXCJ9XCIpKX19fX1mdW5jdGlvbiB3KGFkLGFhKXtpZighail7cmV0dXJufXZhciBhYj1hYT9cInZpc2libGVcIjpcImhpZGRlblwiLGFjPWMoYWQpO2lmKEwmJmFjKXthYy5zdHlsZS52aXNpYmlsaXR5PWFifWVsc2V7aWYodHlwZW9mIGFkPT09XCJzdHJpbmdcIil7dihcIiNcIithZCxcInZpc2liaWxpdHk6XCIrYWIpfX19ZnVuY3Rpb24gTihhYil7dmFyIGFjPS9bXFxcXFxcXCI8PlxcLjtdLzt2YXIgYWE9YWMuZXhlYyhhYikhPW51bGw7cmV0dXJuIGFhJiZ0eXBlb2YgZW5jb2RlVVJJQ29tcG9uZW50IT1EP2VuY29kZVVSSUNvbXBvbmVudChhYik6YWJ9dmFyIGQ9ZnVuY3Rpb24oKXtpZihPLmllKXt3aW5kb3cuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLGZ1bmN0aW9uKCl7dmFyIGFmPUsubGVuZ3RoO2Zvcih2YXIgYWU9MDthZTxhZjthZSsrKXtLW2FlXVswXS5kZXRhY2hFdmVudChLW2FlXVsxXSxLW2FlXVsyXSl9dmFyIGFjPVAubGVuZ3RoO2Zvcih2YXIgYWQ9MDthZDxhYzthZCsrKXt5KFBbYWRdKX1mb3IodmFyIGFiIGluIE8pe09bYWJdPW51bGx9Tz1udWxsO2Zvcih2YXIgYWEgaW4gc3dmb2JqZWN0KXtzd2ZvYmplY3RbYWFdPW51bGx9c3dmb2JqZWN0PW51bGx9KX19KCk7cmV0dXJue3JlZ2lzdGVyT2JqZWN0OmZ1bmN0aW9uKGFlLGFhLGFkLGFjKXtpZihPLnczJiZhZSYmYWEpe3ZhciBhYj17fTthYi5pZD1hZTthYi5zd2ZWZXJzaW9uPWFhO2FiLmV4cHJlc3NJbnN0YWxsPWFkO2FiLmNhbGxiYWNrRm49YWM7b1tvLmxlbmd0aF09YWI7dyhhZSxmYWxzZSl9ZWxzZXtpZihhYyl7YWMoe3N1Y2Nlc3M6ZmFsc2UsaWQ6YWV9KX19fSxnZXRPYmplY3RCeUlkOmZ1bmN0aW9uKGFhKXtpZihPLnczKXtyZXR1cm4geihhYSl9fSxlbWJlZFNXRjpmdW5jdGlvbihhZixhbCxhaSxhayxhYixhZSxhZCxhaCxhaixhZyl7dmFyIGFjPVcoYWwpLGFhPXtzdWNjZXNzOmZhbHNlLGlkOmFjfTtpZihPLnczJiYhKE8ud2smJk8ud2s8MzEyKSYmYWYmJmFsJiZhaSYmYWsmJmFiKXt3KGFjLGZhbHNlKTtNKGZ1bmN0aW9uKCl7YWkrPVwiXCI7YWsrPVwiXCI7dmFyIGFuPXt9O2lmKGFqJiZ0eXBlb2YgYWo9PT1yKXtmb3IodmFyIGFxIGluIGFqKXthblthcV09YWpbYXFdfX1hbi5kYXRhPWFmO2FuLndpZHRoPWFpO2FuLmhlaWdodD1hazt2YXIgYXI9e307aWYoYWgmJnR5cGVvZiBhaD09PXIpe2Zvcih2YXIgYW8gaW4gYWgpe2FyW2FvXT1haFthb119fWlmKGFkJiZ0eXBlb2YgYWQ9PT1yKXtmb3IodmFyIGFtIGluIGFkKXtpZihhZC5oYXNPd25Qcm9wZXJ0eShhbSkpe3ZhciBhcD0obCk/ZW5jb2RlVVJJQ29tcG9uZW50KGFtKTphbSxhdD0obCk/ZW5jb2RlVVJJQ29tcG9uZW50KGFkW2FtXSk6YWRbYW1dO2lmKHR5cGVvZiBhci5mbGFzaHZhcnMhPUQpe2FyLmZsYXNodmFycys9XCImXCIrYXArXCI9XCIrYXR9ZWxzZXthci5mbGFzaHZhcnM9YXArXCI9XCIrYXR9fX19aWYoRihhYikpe3ZhciBhdT11KGFuLGFyLGFsKTtpZihhbi5pZD09YWMpe3coYWMsdHJ1ZSl9YWEuc3VjY2Vzcz10cnVlO2FhLnJlZj1hdTthYS5pZD1hdS5pZH1lbHNle2lmKGFlJiZBKCkpe2FuLmRhdGE9YWU7UihhbixhcixhbCxhZyk7cmV0dXJufWVsc2V7dyhhYyx0cnVlKX19aWYoYWcpe2FnKGFhKX19KX1lbHNle2lmKGFnKXthZyhhYSl9fX0sc3dpdGNoT2ZmQXV0b0hpZGVTaG93OmZ1bmN0aW9uKCl7aj1mYWxzZX0sZW5hYmxlVXJpRW5jb2Rpbmc6ZnVuY3Rpb24oYWEpe2w9KHR5cGVvZiBhYT09PUQpP3RydWU6YWF9LHVhOk8sZ2V0Rmxhc2hQbGF5ZXJWZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJue21ham9yOk8ucHZbMF0sbWlub3I6Ty5wdlsxXSxyZWxlYXNlOk8ucHZbMl19fSxoYXNGbGFzaFBsYXllclZlcnNpb246RixjcmVhdGVTV0Y6ZnVuY3Rpb24oYWMsYWIsYWEpe2lmKE8udzMpe3JldHVybiB1KGFjLGFiLGFhKX1lbHNle3JldHVybiB1bmRlZmluZWR9fSxzaG93RXhwcmVzc0luc3RhbGw6ZnVuY3Rpb24oYWMsYWQsYWEsYWIpe2lmKE8udzMmJkEoKSl7UihhYyxhZCxhYSxhYil9fSxyZW1vdmVTV0Y6ZnVuY3Rpb24oYWEpe2lmKE8udzMpe3koYWEpfX0sY3JlYXRlQ1NTOmZ1bmN0aW9uKGFkLGFjLGFiLGFhKXtpZihPLnczKXt2KGFkLGFjLGFiLGFhKX19LGFkZERvbUxvYWRFdmVudDpNLGFkZExvYWRFdmVudDpzLGdldFF1ZXJ5UGFyYW1WYWx1ZTpmdW5jdGlvbihhZCl7dmFyIGFjPWgubG9jYXRpb24uc2VhcmNofHxoLmxvY2F0aW9uLmhhc2g7XG5pZihhYyl7aWYoL1xcPy8udGVzdChhYykpe2FjPWFjLnNwbGl0KFwiP1wiKVsxXX1pZihhZD09bnVsbCl7cmV0dXJuIE4oYWMpfXZhciBhYj1hYy5zcGxpdChcIiZcIik7Zm9yKHZhciBhYT0wO2FhPGFiLmxlbmd0aDthYSsrKXtpZihhYlthYV0uc3Vic3RyaW5nKDAsYWJbYWFdLmluZGV4T2YoXCI9XCIpKT09YWQpe3JldHVybiBOKGFiW2FhXS5zdWJzdHJpbmcoKGFiW2FhXS5pbmRleE9mKFwiPVwiKSsxKSkpfX19cmV0dXJuXCJcIn0sZXhwcmVzc0luc3RhbGxDYWxsYmFjazpmdW5jdGlvbigpe2lmKGEpe3ZhciBhYT1jKFMpO2lmKGFhJiZJKXthYS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChJLGFhKTtpZihwKXt3KHAsdHJ1ZSk7aWYoTy5pZSl7SS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIn19aWYoRSl7RShCKX19YT1mYWxzZX19LHZlcnNpb246XCIyLjNcIn19KCk7XG5cblxuZnVuY3Rpb24gRXZlbnRNYW5hZ2VyKCkge1xuICAgIHRoaXMuZXZlbnRzID0ge307XG59XG5cbkV2ZW50TWFuYWdlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMuZXZlbnRzW2V2ZW50TmFtZSArICcnXSA9IGNhbGxiYWNrO1xufTtcblxuRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgIHZhciBjYWxsYmFjayA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XG5cbiAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjYWxsYmFjay5jYWxsKG51bGwsIGRhdGEpO1xufTtcbi8qKlxuICogQHBhcmFtIGFpZCB7bnVtYmVyfVxuICogQHBhcmFtIHdpZHRoIHtudW1iZXJ9XG4gKiBAcGFyYW0gaGVpZ2h0IHtudW1iZXJ9XG4gKiBAcGFyYW0gc2lkIHtudW1iZXJ9XG4gKiBAcGFyYW0gY29uZmlnVXJsIHtzdHJpbmd9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gV3JhcHBlcihhaWQsIHdpZHRoLCBoZWlnaHQsIHNpZCwgY29uZmlnVXJsKSB7XG4gICAgaWYgKCFhaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZXQgYWlkJylcbiAgICB9XG5cbiAgICB0aGlzLmhvc3QgPSBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYgIT0gd2luZG93LnBhcmVudC5sb2NhdGlvbi5ocmVmID8gZG9jdW1lbnQucmVmZXJyZXIgOiB3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgdGhpcy5jZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0IHx8IDMwMDtcbiAgICB0aGlzLndpZHRoID0gd2lkdGggfHwgNDAwO1xuICAgIHRoaXMuc2lkID0gc2lkIHx8IDA7XG4gICAgdGhpcy5haWQgPSBhaWQ7XG4gICAgdGhpcy5jb25maWdVcmwgPSBjb25maWdVcmw7XG59XG5cbldyYXBwZXIucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbiAoYWRJZCkge1xuICAgIHZhciBjb25maWcgPSB0aGlzLmdldENvbmZpZyhhZElkKSxcbiAgICAgICAgZXZlbnRNYW5hZ2VyID0gbmV3IEV2ZW50TWFuYWdlcigpLFxuICAgICAgICB3aWR0aCA9IHRoaXMud2lkdGgsXG4gICAgICAgIGhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuXG4gICAgaWYgKCF3aW5kb3cuVnBhaWRmbGFzaFdyYXBwZXJzKSB7XG4gICAgICAgIHdpbmRvdy5WcGFpZGZsYXNoV3JhcHBlcnMgPSB7fVxuICAgIH1cblxuICAgIHdpbmRvdy5WcGFpZGZsYXNoV3JhcHBlcnNbYWRJZF0gPSB7fTtcblxuICAgIHdpbmRvdy5WcGFpZGZsYXNoV3JhcHBlcnNbYWRJZF0gPSB7XG4gICAgICAgIGFkTG9hZGVkQ2xvc3VyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ2xvYWRlZCcpO1xuICAgICAgICAgICAgd2luZG93W1wiU2RrSW50ZWdyYXRpb25cIiArIGFkSWRdLnN0YXJ0QWQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRFcnJvckNsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdlcnJvcicpO1xuICAgICAgICB9LFxuICAgICAgICBhZENvbXBsZXRlQ2xvc3VyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ2NvbXBsZXRlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIHBhdXNlZENsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdwYXVzZWQnKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVzdW1lZENsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdyZXN1bWVkJyk7XG4gICAgICAgIH0sXG4gICAgICAgIG11dGVDbG9zdXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcignbXV0ZScpO1xuICAgICAgICB9LFxuICAgICAgICB1bm11dGVDbG9zdXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcigndW5tdXRlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkU3RhcnRlZENsb3N1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdzdGFydGVkJyk7XG4gICAgICAgIH0sXG4gICAgICAgIHN0YXJ0Rmxhc2hXcmFwcGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcigncmVhZHknKTtcbiAgICAgICAgICAgIHZhciBTZGtJbnRlZ3JhdGlvbiA9IHdpbmRvd1tcIlNka0ludGVncmF0aW9uXCIgKyBhZElkXTtcbiAgICAgICAgICAgIFNka0ludGVncmF0aW9uLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBTZGtJbnRlZ3JhdGlvbi5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICBTZGtJbnRlZ3JhdGlvbi5sb2FkQWQoY29uZmlnKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZXZlbnRNYW5hZ2VyO1xufTtcblxuV3JhcHBlci5wcm90b3R5cGUuZ2V0Q29uZmlnID0gZnVuY3Rpb24gKGFkSWQpIHtcbiAgICB2YXIgdHBsID0gXCJ3aW5kb3cuVnBhaWRmbGFzaFdyYXBwZXJzW1wiICsgYWRJZCArIFwiXVwiO1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGFkQ29tcGxldGVDbG9zdXJlOiB0cGwgKyBcIi5hZENvbXBsZXRlQ2xvc3VyZVwiLFxuICAgICAgICBhZFN0YXJ0ZWRDbG9zdXJlOiB0cGwgKyBcIi5hZFN0YXJ0ZWRDbG9zdXJlXCIsXG4gICAgICAgIGFkTG9hZGVkQ2xvc3VyZTogdHBsICsgXCIuYWRMb2FkZWRDbG9zdXJlXCIsXG4gICAgICAgIGFkRXJyb3JDbG9zdXJlOiB0cGwgKyBcIi5hZEVycm9yQ2xvc3VyZVwiLFxuICAgICAgICByZXN1bWVkQ2xvc3VyZTogdHBsICsgXCIucmVzdW1lZENsb3N1cmVcIixcbiAgICAgICAgcGF1c2VkQ2xvc3VyZTogdHBsICsgXCIucGF1c2VkQ2xvc3VyZVwiLFxuICAgICAgICB1bm11dGVDbG9zdXJlOiB0cGwgKyBcIi51bm11dGVDbG9zdXJlXCIsXG4gICAgICAgIG11dGVDbG9zdXJlOiB0cGwgKyBcIi5tdXRlQ2xvc3VyZVwiLFxuICAgICAgICB2b2x1bWU6IDEsXG4gICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxuICAgICAgICB2YXN0VXJsOiB0aGlzLmdldFZhc3RVcmwoKVxuICAgIH0pXG59O1xuXG5XcmFwcGVyLnByb3RvdHlwZS5nZXRWYXN0VXJsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ1VybCB8fCAnLy92YXN0LnZpZGVlLnR2L3Zhc3QtcHJveHkvP2FpZD0nICsgdGhpcy5haWQgK1xuICAgICAgICAnJmNvbnRlbnRfcGFnZV91cmw9JyArIHRoaXMuaG9zdCArXG4gICAgICAgICcmcGxheWVyX2hlaWdodD0nICsgdGhpcy5oZWlnaHQgK1xuICAgICAgICAnJnBsYXllcl93aWR0aD0nICsgdGhpcy53aWR0aCArXG4gICAgICAgICcmc2lkPScgKyB0aGlzLnNpZCArXG4gICAgICAgICcmY2I9JyArIHRoaXMuY2Rcbn07XG5cbmZ1bmN0aW9uIEZsYXNoQ2xpZW50KG9wdGlvbnMpIHtcbiAgICBpZiAoIWdldEZsYXNoVmVyc2lvbigpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmxhc2ggUGxheWVyIG5vdCBpbnN0YWxsZWQhJyk7XG4gICAgfVxuXG4gICAgdGhpcy5pZCA9IE1hdGgucm91bmQoKCBuZXcgRGF0ZSgpICkuZ2V0VGltZSgpIC8gMTAwMDAgKyBNYXRoLnJhbmRvbSgpICogMTAwMDAwMDApO1xuICAgIHRoaXMudW5pdFNyYyA9ICcvL3BsYXllci52aWRlZS50di92Mi4xL3Jlc291cmNlcy9saWJzL3ZpZGVlanMtcGxheWVyLnN3Zic7XG4gICAgdGhpcy5mbGFzaFZlcnNpb24gPSBcIjEwLjAuMFwiO1xuICAgIHRoaXMucGFyYW1zID0ge1xuICAgICAgICBhbGxvd1NjcmlwdEFjY2VzczogXCJhbHdheXNcIixcbiAgICAgICAgYWxsb3dGdWxsU2NyZWVuOiBcInRydWVcIixcbiAgICAgICAgd21vZGU6ICd0cmFuc3BhcmVudCdcbiAgICB9O1xuICAgIHRoaXMubWV0aG9kc1N0YXRlID0gZmFsc2U7XG4gICAgdGhpcy5wcm94eUV2ZW50cyA9IFsnbG9hZGVkJywgJ2Vycm9yJywgJ2NvbXBsZXRlJywgJ3N0YXJ0ZWQnLCAncmVzdW1lZCcsICdwYXVzZWQnLCAnbXV0ZScsICd1bm11dGUnXTtcblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG59XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKFZwYWlkU291cmNlLCBjb25maWdVcmwsIHZhc3RVcmwpIHtcbiAgICBpZiAoVnBhaWRTb3VyY2UgJiYgIXRoaXMuY2hlY2tVbml0U291cmNlKFZwYWlkU291cmNlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VuaXQgbm90IFNXRicpO1xuICAgIH1cblxuICAgIHRoaXMuYWRkV3JhcHBlckVsKCk7XG4gICAgdGhpcy5pbml0V3JhcHBlcih2YXN0VXJsKTtcbiAgICB0aGlzLmVtYmVkU1dGKCk7XG59O1xuXG5GbGFzaENsaWVudC5wcm90b3R5cGUuY2hlY2tVbml0U291cmNlID0gZnVuY3Rpb24gKFZwYWlkU291cmNlKSB7XG4gICAgcmV0dXJuIFZwYWlkU291cmNlLmluZGV4T2YoJy5zd2YnKSAhPSAtMTtcbn07XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5lbWJlZFNXRiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBzd2ZvYmplY3QuZW1iZWRTV0YoXG4gICAgICAgICAgICB0aGlzLnVuaXRTcmMsXG4gICAgICAgICAgICB0aGlzLnNka1VuaXF1ZSxcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy53aWR0aCxcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5oZWlnaHQsXG4gICAgICAgICAgICB0aGlzLmZsYXNoVmVyc2lvbixcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRoaXMuZmxhc2h2YXJzKCksXG4gICAgICAgICAgICB0aGlzLnBhcmFtcyxcbiAgICAgICAgICAgIHt9XG4gICAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgIH1cbn07XG5cbkZsYXNoQ2xpZW50LnByb3RvdHlwZS5pbml0RXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyLm9uKCdyZWFkeScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5WUEFJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2RrVW5pcXVlKTtcbiAgICAgICAgdGhpcy5tZXRob2RzU3RhdGUgPSB0cnVlO1xuICAgIH0uYmluZCh0aGlzKSk7XG59O1xuXG5GbGFzaENsaWVudC5wcm90b3R5cGUuaW5pdFdyYXBwZXIgPSBmdW5jdGlvbiAodmFzdFVybCkge1xuICAgIHRyeSB7XG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gbmV3IFdyYXBwZXIoXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYWlkLFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLndpZHRoLFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmhlaWdodCxcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zaWQsXG4gICAgICAgICAgICB2YXN0VXJsXG4gICAgICAgICkud3JhcCh0aGlzLmlkKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgfVxuXG4gICAgdGhpcy5pbml0RXZlbnRzKCk7XG59O1xuXG5GbGFzaENsaWVudC5wcm90b3R5cGUuYWRkV3JhcHBlckVsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBibG9ja2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICB0aGlzLnNka1VuaXF1ZSA9ICdTZGtJbnRlZ3JhdGlvbicgKyB0aGlzLmlkO1xuICAgIGJsb2NrZXIuY2xhc3NOYW1lID0gJ2ZsYXNoLWJsb2NrZXInO1xuICAgIGJsb2NrZXIuaW5uZXJIVE1MID0gJzxkaXYgaWQ9XCInICsgdGhpcy5zZGtVbmlxdWUgKyAnXCI+PC9kaXY+JztcbiAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoYmxvY2tlcik7XG59O1xuXG5GbGFzaENsaWVudC5wcm90b3R5cGUuZmxhc2h2YXJzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG9uUmVhZHk6IFwid2luZG93LlZwYWlkZmxhc2hXcmFwcGVyc1tcIiArIHRoaXMuaWQgKyBcIl0uc3RhcnRGbGFzaFdyYXBwZXJcIlxuICAgIH1cbn07XG5mdW5jdGlvbiBKc0NsaWVudChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmV2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIoKTtcbiAgICB0aGlzLm1ldGhvZHNTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMucHJveHlFdmVudHMgPSBbJ2xvYWRlZCcsICdlcnJvcicsICdjb21wbGV0ZScsICdzdGFydGVkJywgJ3BhdXNlZCcsICdyZXNpemUnXTtcbn1cblxuSnNDbGllbnQucHJvdG90eXBlLmVtYmVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBbXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuaWZyYW1lKCkuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlGd2luZG93ID0gdGhpcy5pZnJhbWUoKS5jb250ZW50V2luZG93O1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9BZExheWVyKCkuYXBwZW5kQ2hpbGQodGhpcy52aWRlb1RhZygpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlGd2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0FkTGF5ZXIoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pRndpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuc2NyaXB0KCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuaUZ3aW5kb3cuZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW4gPSAwO1xuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9LmJpbmQodGhpcykpLFxuXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuc2NyaXB0KCkuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LCBmYWxzZSlcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgIF1cbn07XG5cbkpzQ2xpZW50LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKFZwYWlkU291cmNlLCBjb25maWdVcmwpIHtcbiAgICBpZiAoIVZwYWlkU291cmNlIHx8ICFjb25maWdVcmwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZXQgY29ycmVjdCBvcHRpb25zJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnZpZGVvVGFnKCkuY2FuUGxheVR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIVE1MNSB2aWRlbyBub3Qgc3VwcG9ydCcpO1xuICAgIH1cblxuICAgIHRoaXMuVnBhaWRTb3VyY2UgPSBWcGFpZFNvdXJjZTtcbiAgICB0aGlzLmNvbmZpZ1VybCA9IGNvbmZpZ1VybDtcblxuICAgIFByb21pc2UuYWxsKHRoaXMuZW1iZWQoKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5WUEFJRCA9IHRoaXMuaUZ3aW5kb3cuZ2V0VlBBSURBZCgpO1xuICAgICAgICAgICAgdGhpcy5pbml0VlBBSUQoKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAuY2F1Z2h0KGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQodGhpcy5pZnJhbWUoKSk7XG59O1xuXG5Kc0NsaWVudC5wcm90b3R5cGUuaW5pdFZQQUlEID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBldmVudE1hbmFnZXIgPSB0aGlzLmV2ZW50TWFuYWdlcjtcblxuICAgIHRoaXMuVlBBSUQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5WUEFJRC5zdGFydEFkKCk7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdsb2FkZWQnKTtcbiAgICB9LmJpbmQodGhpcyksICdBZExvYWRlZCcpO1xuXG4gICAgdGhpcy5WUEFJRC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm1ldGhvZHNTdGF0ZSA9IHRydWU7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdzdGFydGVkJyk7XG4gICAgfS5iaW5kKHRoaXMpLCAnQWRTdGFydGVkJyk7XG5cbiAgICB0aGlzLlZQQUlELnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdwYXVzZWQnKTtcbiAgICB9LCAnQWRQYXVzZWQnKTtcblxuICAgIHRoaXMuVlBBSUQuc3Vic2NyaWJlKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ2Vycm9yJywgZXJyKTtcbiAgICB9LCAnQWRFcnJvcicpO1xuXG4gICAgdGhpcy5WUEFJRC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBldmVudE1hbmFnZXIudHJpZ2dlcigncGxheWluZycpO1xuICAgIH0sICdBZFBsYXlpbmcnKTtcblxuICAgIHRoaXMuVlBBSUQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXZlbnRNYW5hZ2VyLnRyaWdnZXIoJ3N0b3BwZWQnKTtcbiAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgfS5iaW5kKHRoaXMpLCAnQWRTdG9wcGVkJyk7XG5cbiAgICB0aGlzLlZQQUlELnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdyZXNpemUnKTtcbiAgICB9LCAnQWRTaXplQ2hhbmdlJyk7XG5cbiAgICB0aGlzLlZQQUlELnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZW50TWFuYWdlci50cmlnZ2VyKCdjb21wbGV0ZScpO1xuICAgICAgICB0aGlzLlZQQUlELnN0b3BBZCgpO1xuICAgIH0uYmluZCh0aGlzKSwgJ0FkVmlkZW9Db21wbGV0ZScpO1xuXG4gICAgdGhpcy5WUEFJRC5oYW5kc2hha2VWZXJzaW9uKDIpO1xuXG4gICAgdGhpcy5WUEFJRC5pbml0QWQoXG4gICAgICAgIHRoaXMub3B0aW9ucy53aWR0aCxcbiAgICAgICAgdGhpcy5vcHRpb25zLmhlaWdodCxcbiAgICAgICAgJ25vcm1hbCcsXG4gICAgICAgIDAsXG4gICAgICAgIHRoaXMuY29uZmlnVXJsLFxuICAgICAgICB7XG4gICAgICAgICAgICB2aWRlb1Nsb3RDYW5BdXRvUGxheTogdHJ1ZSxcbiAgICAgICAgICAgIHZpZGVvU2xvdDogdGhpcy52aWRlb1RhZygpLFxuICAgICAgICAgICAgc2xvdDogdGhpcy52aWRlb0FkTGF5ZXIoKVxuICAgICAgICB9XG4gICAgKTtcbn07XG5cbkpzQ2xpZW50LnByb3RvdHlwZS52aWRlb1RhZyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fdmlkZW9UYWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZGVvVGFnO1xuICAgIH1cblxuICAgIHRoaXMuX3ZpZGVvVGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICB0aGlzLl92aWRlb1RhZy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBcIjEwMCVcIik7XG4gICAgdGhpcy5fdmlkZW9UYWcuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIFwiMTAwJVwiKTtcbiAgICB0aGlzLl92aWRlb1RhZy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cbiAgICByZXR1cm4gdGhpcy5fdmlkZW9UYWc7XG59O1xuXG5Kc0NsaWVudC5wcm90b3R5cGUudmlkZW9BZExheWVyID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl92aWRlb0FkTGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZGVvQWRMYXllcjtcbiAgICB9XG5cbiAgICB0aGlzLl92aWRlb0FkTGF5ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl92aWRlb0FkTGF5ZXIuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgdGhpcy5vcHRpb25zLndpZHRoKTtcbiAgICB0aGlzLl92aWRlb0FkTGF5ZXIuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIHRoaXMub3B0aW9ucy5oZWlnaHQpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3ZpZGVvQWRMYXllcjtcbn07XG5cbkpzQ2xpZW50LnByb3RvdHlwZS5zY3JpcHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3NjcmlwdFRhZykge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NyaXB0VGFnO1xuICAgIH1cblxuICAgIHRoaXMuX3NjcmlwdFRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIHRoaXMuX3NjcmlwdFRhZy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dC9qYXZhc2NyaXB0XCIpO1xuICAgIHRoaXMuX3NjcmlwdFRhZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdGhpcy5WcGFpZFNvdXJjZSk7XG4gICAgdGhpcy5fc2NyaXB0VGFnLnNldEF0dHJpYnV0ZShcImFzeW5jXCIsIFwiXCIpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3NjcmlwdFRhZztcbn07XG5cbkpzQ2xpZW50LnByb3RvdHlwZS5pZnJhbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2lGcmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5faUZyYW1lO1xuICAgIH1cblxuICAgIHRoaXMuX2lGcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lGcmFtZScpO1xuICAgIHRoaXMuX2lGcmFtZS5zZXRBdHRyaWJ1dGUoXCJhbGxvd2Z1bGxzY3JlZW5cIiwgXCJ0cnVlXCIpO1xuICAgIHRoaXMuX2lGcmFtZS5zcmMgPSBcImFib3V0OmJsYW5rXCI7XG4gICAgdGhpcy5faUZyYW1lLndpZHRoID0gdGhpcy5vcHRpb25zLndpZHRoO1xuICAgIHRoaXMuX2lGcmFtZS5oZWlnaHQgPSB0aGlzLm9wdGlvbnMuaGVpZ2h0O1xuICAgIHRoaXMuX2lGcmFtZS5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG5cbiAgICByZXR1cm4gdGhpcy5faUZyYW1lO1xufTtcblxuSnNDbGllbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgZGVsZXRlIHRoaXMuVlBBSUQ7XG5cbiAgICB0aGlzLl9pRnJhbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9pRnJhbWUpO1xuXG4gICAgZGVsZXRlIHRoaXMuX3ZpZGVvQWRMYXllcjtcbiAgICBkZWxldGUgdGhpcy5fc2NyaXB0VGFnO1xuICAgIGRlbGV0ZSB0aGlzLl92aWRlb1RhZztcbiAgICBkZWxldGUgdGhpcy5faUZyYW1lO1xufTtcblxuLyoqXG4gKiBAcGFyYW0gb3B0aW9ucy5haWQge251bWJlcn1cbiAqIEBwYXJhbSBvcHRpb25zLndpZHRoIHtudW1iZXJ9XG4gKiBAcGFyYW0gb3B0aW9ucy5oZWlnaHQge251bWJlcn1cbiAqIEBwYXJhbSBvcHRpb25zLmNvbnRhaW5lckVsIHtvYmplY3R9XG4gKlxuICogQHBhcmFtIG9wdGlvbnMge29iamVjdH1cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBPdXRzdHJlYW0ob3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdDcmVhdGUgd2l0aG91dCBvcHRpb25zJyk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMub3B0aW9ucyhvcHRpb25zIHx8IHt9KTtcbiAgICB0aGlzLmV2ZW50cyA9IHt9O1xuICAgIHRoaXMuaW5pdCgpO1xufVxuXG4vKipcbiAqIFByIHNhdmUgTWVkaWFGaWxlIGFuZCBBZFBhcmFtZXRlcnNcbiAqIEBwYXJhbSB4bWwge3N0cmluZ31cbiAqL1xuT3V0c3RyZWFtLnByb3RvdHlwZS5wYXJzZUFuZFNhdmVDb25maWcgPSBmdW5jdGlvbiAoeG1sKSB7XG4gICAgeG1sID0gcHJlcGFyZVhNTCgpO1xuXG4gICAgdGhpcy5WcGFpZFNvdXJjZSA9IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnTWVkaWFGaWxlJylbMF0uY2hpbGROb2Rlc1swXS5ub2RlVmFsdWU7XG4gICAgdGhpcy5jb25maWdVcmwgPSB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0FkUGFyYW1ldGVycycpWzBdLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlO1xuXG4gICAgZnVuY3Rpb24gcHJlcGFyZVhNTCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBfRE9NUGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfRE9NUGFyc2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gX0RPTVBhcnNlci5wYXJzZUZyb21TdHJpbmcoeG1sLCAndGV4dC94bWwnKVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHhtbERvYyA9IG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTERPTVwiKTtcbiAgICAgICAgeG1sRG9jLmxvYWRYTUwoeG1sKTtcblxuICAgICAgICBpZiAoeG1sRG9jLnBhcnNlRXJyb3IuZXJyb3JDb2RlICE9IDApIHtcbiAgICAgICAgICAgIHZhciBteUVyciA9IHhtbERvYy5wYXJzZUVycm9yO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIllvdSBoYXZlIGVycm9yIFwiICsgbXlFcnIucmVhc29uKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB4bWxEb2M7XG4gICAgfVxufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5sb2FkQ29uZmlnID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb25maWdVcmwgPSB0aGlzLmdldENvbmZpZ1VybCgpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHhkciA9IG5ldyBYRG9tYWluUmVxdWVzdCgpXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFhNTEh0dHBSZXF1ZXN0ICYmICF4ZHIpIHtcbiAgICAgICAgICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgICAgICB4aHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHhodHRwLnJlYWR5U3RhdGUgPT0gNCAmJiB4aHR0cC5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeGh0dHAucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB4aHR0cC5vcGVuKFwiR0VUXCIsIGNvbmZpZ1VybCwgdHJ1ZSk7XG4gICAgICAgICAgICB4aHR0cC5zZW5kKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBVc2UgTWljcm9zb2Z0IFhEUlxuICAgICAgICAgICAgeGRyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHhkci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgeGRyLm9wZW4oXCJnZXRcIiwgY29uZmlnVXJsLCB0cnVlKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHhkci5zZW5kKCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5vcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBpZiAodGhpcy5fb3B0aW9ucyB8fCAhb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT0gXCJvYmplY3RcIikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdQbGVhc2Ugc2V0IGNvcnJlY3Qgb3B0aW9ucycpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRWUEFJRE1vZGUoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KG9wdGlvbnMuVlBBSURNb2RlKSAmJiAhIW9wdGlvbnMuVlBBSURNb2RlLmxlbmd0aCA/IG9wdGlvbnMuVlBBSURNb2RlIDogWydmbGFzaCcsICdqcyddO1xuICAgIH1cblxuICAgIG9wdGlvbnMuVlBBSURNb2RlID0gZ2V0VlBBSURNb2RlKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jcmVhdGVWUEFJRCgpO1xuXG4gICAgdGhpcy5sb2FkQ29uZmlnKCkudGhlbihmdW5jdGlvbiAoeG1sKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnNlQW5kU2F2ZUNvbmZpZyh4bWwpO1xuICAgICAgICAgICAgdGhpcy5pbml0VlBBSUQoKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAuY2F1Z2h0KGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFZQQUlEKCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLmluaXRWUEFJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICB0aGlzLlZQQUlEQ2xpZW50LmluaXQoXG4gICAgICAgICAgICB0aGlzLlZwYWlkU291cmNlLFxuICAgICAgICAgICAgdGhpcy5jb25maWdVcmwsXG4gICAgICAgICAgICB0aGlzLmdldENvbmZpZ1VybCgpXG4gICAgICAgICk7XG5cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gdHJ5IHRvIHVzZSBhbm90aGVyIG1vZGVcbiAgICAgICAgdmFyIFZQQUlETW9kZSA9IHRoaXMub3B0aW9ucygpLlZQQUlETW9kZSxcbiAgICAgICAgICAgIG1vZGVJbmRleCA9IFZQQUlETW9kZS5pbmRleE9mKHRoaXMubW9kZSk7XG5cbiAgICAgICAgaWYgKG1vZGVJbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgVlBBSURNb2RlLnNwbGljZShtb2RlSW5kZXgsIDEpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTd2l0Y2ggVlBBSWRUeXBlICwgRVJST1I6IFwiICsgZXJyLm1lc3NhZ2UpO1xuXG4gICAgICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmluaXRFdmVudExpc3RlbmVyKHRoaXMuVlBBSURDbGllbnQuZXZlbnRNYW5hZ2VyKTtcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuZ2V0Q29uZmlnVXJsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkb21haW4gPSB0aGlzLm9wdGlvbnMoKS5pc1NTUCA/IFwidmFzdC52ZXJ0YW1lZGlhLmNvbS9cIiA6IFwidmFzdC52aWRlZS50di9cIixcbiAgICAgICAgY29uZmlnVXJsID0gXCIvL1wiICsgZG9tYWluICtcbiAgICAgICAgICAgIFwiP2FpZD1cIiArIHRoaXMub3B0aW9ucygpLmFpZCArXG4gICAgICAgICAgICBcIiZjb250ZW50X3BhZ2VfdXJsPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmICE9IHdpbmRvdy5wYXJlbnQubG9jYXRpb24uaHJlZiA/IGRvY3VtZW50LnJlZmVycmVyIDogd2luZG93LmxvY2F0aW9uLmhyZWYpICtcbiAgICAgICAgICAgIFwiJnBsYXllcl93aWR0aD1cIiArIHRoaXMub3B0aW9ucygpLndpZHRoICtcbiAgICAgICAgICAgIFwiJnBsYXllcl9oZWlnaHQ9XCIgKyB0aGlzLm9wdGlvbnMoKS5oZWlnaHQgK1xuICAgICAgICAgICAgXCImY2Q9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgIGlmICh0aGlzLm1vZGUgPT0gXCJqc1wiKSB7XG4gICAgICAgIGNvbmZpZ1VybCArPSBcIiZ2cGFpZF90eXBlPTJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gY29uZmlnVXJsO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5jcmVhdGVWUEFJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgVlBBSURNb2RlID0gdGhpcy5vcHRpb25zKCkuVlBBSURNb2RlO1xuICAgIGZvciAodmFyIGluZGV4IGluIFZQQUlETW9kZSkge1xuICAgICAgICBpZiAodGhpcy51c2VNb2RlKFZQQUlETW9kZVtpbmRleF0pKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGUgPSBWUEFJRE1vZGVbaW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS51c2VNb2RlID0gZnVuY3Rpb24gKG1vZGVUeXBlKSB7XG4gICAgdmFyIFZQQUlERmFjdG9yeSA9IHtcbiAgICAgICAgZmxhc2g6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZsYXNoQ2xpZW50KG9wdGlvbnMpO1xuICAgICAgICB9LFxuICAgICAgICBqczogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSnNDbGllbnQob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgbW9kZVR5cGUgPSBtb2RlVHlwZSBpbiBWUEFJREZhY3RvcnkgPyBtb2RlVHlwZSA6ICdmbGFzaCc7XG5cbiAgICB0cnkge1xuICAgICAgICB0aGlzLlZQQUlEQ2xpZW50ID0gbmV3IFZQQUlERmFjdG9yeVttb2RlVHlwZV0odGhpcy5vcHRpb25zKCkpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKG1vZGVUeXBlICsgXCIgaW5pdCBFUlJPUjogXCIgKyBlcnIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuICEhdGhpcy5WUEFJRENsaWVudDtcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuaW5pdEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnRNYW5hZ2VyKSB7XG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLFxuICAgICAgICBwcm94eUV2ZW50cyA9IHRoaXMuVlBBSURDbGllbnQucHJveHlFdmVudHM7XG5cbiAgICBmb3IgKHZhciBpIGluIHByb3h5RXZlbnRzKSB7XG4gICAgICAgIGluaXRFdmVudChwcm94eUV2ZW50c1tpXSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdEV2ZW50KHByb3h5RXZlbnQpIHtcbiAgICAgICAgZXZlbnRNYW5hZ2VyLm9uKHByb3h5RXZlbnQsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjb250ZXh0LnRyaWdnZXIocHJveHlFdmVudCwgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMuZXZlbnRzW2V2ZW50TmFtZSArICcnXSA9IGNhbGxiYWNrO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMuZXZlbnRzW2V2ZW50TmFtZSArICcnXTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgIHZhciBjYWxsYmFjayA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XG5cbiAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjYWxsYmFjay5jYWxsKHRoaXMsIGRhdGEpO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMub3B0aW9ucy5jb250YWluZXJFbC5pbm5lckhUTUwgPSAnJ1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5jYWxsTWV0aG9kID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGRhdGEpIHtcbiAgICBtZXRob2ROYW1lID0gdGhpcy5tb2RlID09ICdmbGFzaCcgPyAndmlkZWVfJyArIG1ldGhvZE5hbWUgOiBtZXRob2ROYW1lO1xuXG4gICAgaWYgKHRoaXMuaXNWUEFJRFJlYWR5KCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVlBBSURDbGllbnQuVlBBSURbbWV0aG9kTmFtZV0oZGF0YSk7XG4gICAgfVxuXG4gICAgdGhpcy5vbignc3RhcnRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5WUEFJRENsaWVudC5WUEFJRFttZXRob2ROYW1lXShkYXRhKTtcbiAgICB9LmJpbmQodGhpcykpO1xufTtcblxuLy8gUHVibGljIFZQQUlEIG1ldGhvZHNcbk91dHN0cmVhbS5wcm90b3R5cGUuc3RhcnRBZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNhbGxNZXRob2QoJ3N0YXJ0QWQnKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5zdG9wQWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsTWV0aG9kKCdzdG9wQWQnKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5za2lwQWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsTWV0aG9kKCdza2lwQWQnKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5tdXRlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmlzVlBBSURSZWFkeSgpKSB7XG4gICAgICAgIGNsYi5jYWxsKHRoaXMpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm9uKCdzdGFydGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjbGIuY2FsbCh0aGlzKVxuICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICBmdW5jdGlvbiBjbGIoKSB7XG4gICAgICAgIHZhciBtZXRob2ROYW1lID0gdGhpcy5tb2RlID09ICdmbGFzaCcgPyAndmlkZWVfZ2V0QWRWb2x1bWUnIDogJ2dldEFkVm9sdW1lJztcblxuICAgICAgICB0aGlzLnNhdmVkVm9sdW1lID0gdGhpcy5WUEFJRENsaWVudC5WUEFJRFttZXRob2ROYW1lXSgpO1xuXG4gICAgICAgIG1ldGhvZE5hbWUgPSB0aGlzLm1vZGUgPT0gJ2ZsYXNoJyA/ICd2aWRlZV9zZXRBZFZvbHVtZScgOiAnc2V0QWRWb2x1bWUnO1xuICAgICAgICB0aGlzLlZQQUlEQ2xpZW50LlZQQUlEW21ldGhvZE5hbWVdKDApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS51bm11dGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsTWV0aG9kKCdzZXRBZFZvbHVtZScsIHRoaXMuc2F2ZWRWb2x1bWUgfHwgMSk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUuc2V0QWRWb2x1bWUgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgIT0gJ251bWJlcicgfHwgdmFsICE9IHZhbCkge1xuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLmNhbGxNZXRob2QoJ3NldEFkVm9sdW1lJywgdmFsKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5nZXRBZFZvbHVtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdnZXRBZFZvbHVtZScpO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5wYXVzZUFkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2FsbE1ldGhvZCgncGF1c2VBZCcpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5PdXRzdHJlYW0ucHJvdG90eXBlLnJlc3VtZUFkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2FsbE1ldGhvZCgncmVzdW1lQWQnKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuT3V0c3RyZWFtLnByb3RvdHlwZS5pc1ZQQUlEUmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuVlBBSURDbGllbnQgJiYgdGhpcy5WUEFJRENsaWVudC5tZXRob2RzU3RhdGUgJiYgdGhpcy5WUEFJRENsaWVudC5WUEFJRDtcbn07XG5cbk91dHN0cmVhbS5wcm90b3R5cGUucmVzaXplQWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLFxuICAgICAgICBtZXRob2ROYW1lID0gdGhpcy5tb2RlID09ICdmbGFzaCcgPyAndmlkZWVfcmVzaXplQWQnIDogJ3Jlc2l6ZUFkJztcbiAgICBpZiAodGhpcy5pc1ZQQUlEUmVhZHkoKSkge1xuICAgICAgICB0aGlzLlZQQUlEQ2xpZW50LlZQQUlEW21ldGhvZE5hbWVdLmFwcGx5KG51bGwsIGFyZ3MpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRoaXMub24oJ3N0YXJ0ZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuVlBBSURDbGllbnQuVlBBSURbbWV0aG9kTmFtZV0uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLy8gaW5pdFxudmFyIHJvb3QgPSByb290IHx8IHdpbmRvdztcbnJvb3QuT3V0c3RyZWFtID0gT3V0c3RyZWFtO1xuXG52YXIgb25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwYXJzZXIgPSB7XG4gICAgICAgIG51bWJlcjogZnVuY3Rpb24gKGVsLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMucGFyc2UoZWwsIGtleSk7XG5cbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludCh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFycmF5OiBmdW5jdGlvbiAoZWwsIGtleSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5wYXJzZShlbCwga2V5KTtcbiAgICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5zcGxpdCgnICcpO1xuICAgICAgICB9LFxuICAgICAgICBib29sOiBmdW5jdGlvbiAoZWwsIGtleSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5wYXJzZShlbCwga2V5KTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IEpTT04ucGFyc2UodmFsdWUpXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZhbHNlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAhIXZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBwYXJzZTogZnVuY3Rpb24gKGVsLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1vdXRzdHJlYW0tJyArIGtleSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzY3JpcHRUYWdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpO1xuXG4gICAgICAgIGZvciAodmFyIGl0ZW0gaW4gc2NyaXB0VGFncykge1xuICAgICAgICAgICAgdmFyIGFpZCA9IHBhcnNlci5udW1iZXIoc2NyaXB0VGFnc1tpdGVtXSwgJ2FpZCcpO1xuXG4gICAgICAgICAgICBpZiAoISFhaWQgJiYgIWlzTmFOKGFpZCkpIHtcbiAgICAgICAgICAgICAgICBpbml0T3V0c3RyZWFtKHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHBhcnNlci5udW1iZXIoc2NyaXB0VGFnc1tpdGVtXSwgJ3dpZHRoJyksXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogcGFyc2VyLm51bWJlcihzY3JpcHRUYWdzW2l0ZW1dLCAnaGVpZ2h0JyksXG4gICAgICAgICAgICAgICAgICAgIGlzU1NQOiBwYXJzZXIuYm9vbChzY3JpcHRUYWdzW2l0ZW1dLCAnU1NQJyksXG4gICAgICAgICAgICAgICAgICAgIFZQQUlETW9kZTogcGFyc2VyLmFycmF5KHNjcmlwdFRhZ3NbaXRlbV0sICdtb2RlJyksXG4gICAgICAgICAgICAgICAgICAgIGFpZDogYWlkLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJFbDogY3JlYXRlRWwoc2NyaXB0VGFnc1tpdGVtXSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pKCk7XG5cblxuICAgIGZ1bmN0aW9uIGluaXRPdXRzdHJlYW0ob3B0aW9ucykge1xuICAgICAgICBuZXcgT3V0c3RyZWFtKHtcbiAgICAgICAgICAgIGFpZDogb3B0aW9ucy5haWQsXG4gICAgICAgICAgICBpc1NTUDogb3B0aW9ucy5pc1NTUCxcbiAgICAgICAgICAgIFZQQUlETW9kZTogb3B0aW9ucy5WUEFJRE1vZGUsXG4gICAgICAgICAgICB3aWR0aDogaXNOYU4ob3B0aW9ucy53aWR0aCkgPyA0MDAgOiBvcHRpb25zLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBpc05hTihvcHRpb25zLmhlaWdodCkgPyAzMDAgOiBvcHRpb25zLmhlaWdodCxcbiAgICAgICAgICAgIGNvbnRhaW5lckVsOiBvcHRpb25zLmNvbnRhaW5lckVsXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNOYU4odmFsKSB7XG4gICAgICAgIHJldHVybiB2YWwgIT0gdmFsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUVsKGVsKSB7XG4gICAgICAgIHZhciBhZENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgICAgICBwYXJlbnRFbCA9IGVsLnBhcmVudE5vZGU7XG5cbiAgICAgICAgaWYgKHBhcmVudEVsLnRhZ05hbWUudG9VcHBlckNhc2UoKSA9PSBcIkhFQURcIikge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhZENvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIHJldHVybiBhZENvbnRhaW5lcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcmVudEVsLmluc2VydEJlZm9yZShhZENvbnRhaW5lciwgZWwpO1xuXG4gICAgICAgIHJldHVybiBhZENvbnRhaW5lcjtcbiAgICB9XG59O1xuXG5pZiAod2luZG93ICE9PSB0b3ApIHtcbiAgICBvbmxvYWQoKTtcbn0gZWxzZSB7XG4gICAgd2luZG93Lm9ubG9hZCA9IG9ubG9hZDtcbn1cblxufSh3aW5kb3cpKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
